---
title: 1、深入理解MySQL索引底层数据结构与算法
date: 2023-06-12 09:34:45
categories:
    - 系统架构
    - 架构之性能调优
    - MySQL性能调优
tags:
    - MySQL性能调优 
---

# 索引数据结构

![image-20240405105220981](1%E3%80%81%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3MySQL%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/image-20240405105220981.png)

## 二叉树

```
二叉搜索树是一种二分查找树，有很好的查找性能，相当于二分查找。
但是当N比较大的时候，树的深度比较高。数据查询的时间主要依赖于磁盘IO的次数，二叉树深度越大，查找的次数越多，性能越差。如果退化成链表，那么会很大程度影响效率。
```

## 红黑树 

```
红黑树的插入和删除操作可能需要进行颜色变换和旋转操作，这增加了实现的复杂性。特别是在频繁的插入删除操作场景下，这些操作可能会造成性能的下降。

红黑树的每个节点都需要额外存储一个颜色信息，这增加了内存占用。相比之下，B树和B+树的节点结构相对简单，能够更有效地利用内存空间。

红黑树在范围查询操作中可能需要进行中序遍历，而且遍历过程中的节点访问顺序是不确定的，这导致了范围查询的效率较低。
```

## Hash表

![image-20240405105638143](1%E3%80%81%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3MySQL%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/image-20240405105638143.png)

## B-Tree

![image-20240405105559681](1%E3%80%81%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3MySQL%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/image-20240405105559681.png)

```
B+树的叶子节点构成了一个有序链表，这样可以很方便地进行范围查询和范围扫描。而B树的同层节点没有指针指向，所以可能需要在非叶子节点进行递归搜索，相对来说操作复杂度更高。
```

## B+Tree

![image-20240405105622424](1%E3%80%81%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3MySQL%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/image-20240405105622424.png)

```
1.数据库与数据交互的单位是page,而B+树的每个节点都是一个page,访问一个节点，就相当于进行了一次I/O操作。所以访问的节点越少，查找效率越大。而B+树是矮胖的，查找深度也不会太大。

2.B+树中的节点是有序存储的，对于范围查询、排序等操作，可以快速定位到目标数据，提高查询效率。
```

## myisam

![image-20240405105655918](1%E3%80%81%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3MySQL%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/image-20240405105655918.png)

## innodb

![image-20240405105705983](1%E3%80%81%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3MySQL%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/image-20240405105705983.png)

## 联合索引

![image-20240405105728558](1%E3%80%81%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3MySQL%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/image-20240405105728558.png)
