

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Kblayt">
  <meta name="keywords" content="">
  
    <meta name="description" content="Spring1、Spring是什么Spring是分层的Java  SE&#x2F;EE应用full-stack轻量级开源框架，以IoC(Inverse  Of  Control)和 AOP(Aspect  Oriented  Programming面向切面编程)为内核。 提供了展现层SpringMVC和持久层Spring  JDBCTemplate以及业务层事务管理等众多的企业级应用技术，还能整合">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM">
<meta property="og:url" content="https://kblayt.github.io/2022/10/21/SSM/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Spring1、Spring是什么Spring是分层的Java  SE&#x2F;EE应用full-stack轻量级开源框架，以IoC(Inverse  Of  Control)和 AOP(Aspect  Oriented  Programming面向切面编程)为内核。 提供了展现层SpringMVC和持久层Spring  JDBCTemplate以及业务层事务管理等众多的企业级应用技术，还能整合">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE3d63121abd7d1f5de2a13d0783ec8f5f.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE8d942c7c5823ee45b5ffa5a18f3d5f2a.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE813ac7758ad458ec25b49d81b1bff4ea.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEf9fe0e28d90d88a4229bd9c6ffc30eb8.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE32c2321410fb1800364b5f6200cd8bb4.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE73f60dd7a65c6fabf702d4fd708eb887.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE2299298cb398a2e87776ae85270644fb.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE3603690e2304b8b167a9a91cd09f8848.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE91ca0f067d4d218d2539e29d4ee2b39d.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE94d8d9867d280c63554446ba106bb360.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE3f15acacc6173069d50651dd296117f8.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE3cef0f6841539dee533856a3b79d5e83.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE48f073c93a1e6d842e1ab1836f35f91c.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEee1ada72ad976ebccbf4a5de7683208a.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE2a48a9d4bb83e804bac3fd07d7bd6073.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE60ee809af5b78762fdae7725f18e02f5.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE25f679777ede905bb9cd702e917de75f.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE83f302b30935f8c9804b21aa072cbb88.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEb84a6abf71eaf072ccccba135acd7514.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE09193dd79b01d0115816d5418822641e.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE15a49bbb138e9222fef82bcbd77d1b4d.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE1c4f8ffcac86042e493f22ffc2deae08.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE83eaa2a0e2824e1060ad943aa222b732.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEdb3fe4d75af0a5ab2d11fe77f8b96b58.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE03324357bf4da77fab672943c6d4fe46.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE718aa05b9a65243c539535055113dfc7.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE00352f0140ee769dd03be6056f636555.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE75ba046470c50cde99e457b967986d74.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE3318f9cbd6ce3ab910188e2530281530.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEb85f881a311fe197b40fdb3c4fc3abb6.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEcf8846dd2f2ef47bcf68c2953b23cecd.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEe3ab70c2f586a09f8fe0b72d88f8b824.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE4231fd93fe416597d86830f309ab8fa7.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE699b422bba9bdd40a84faa2c9f4e5384.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE8353a293c162c1c7728f3312367fad88.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE66cc208e423d6e8b8f8d668663a8361a.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE8c6e280f2ddbec8ec55dacce5b06e0ce.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEe629d56ba9f288205e6ae57dfd3f1165.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCEb15736c567cc6153e7dfbb2059579fd5.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE9d452d403992cc0392c08a6b5f23a0cd.png">
<meta property="og:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE991f998e3da65b66ab134ec7ac50bc7f.png">
<meta property="article:published_time" content="2022-10-21T08:07:08.000Z">
<meta property="article:modified_time" content="2022-10-21T08:28:42.000Z">
<meta property="article:author" content="Kblayt">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="SpringMVC">
<meta property="article:tag" content="MyBatis">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://kblayt.github.io/2022/10/21/SSM/WEBRESOURCE3d63121abd7d1f5de2a13d0783ec8f5f.png">
  
  
  
  <title>SSM - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"kblayt.github.io","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="SSM"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-10-21 16:07" pubdate>
          2022年10月21日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          45k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          373 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">SSM</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h2 id="1、Spring是什么"><a href="#1、Spring是什么" class="headerlink" title="1、Spring是什么"></a>1、Spring是什么</h2><p>Spring是分层的Java  SE&#x2F;EE应用full-stack轻量级开源框架，以IoC(Inverse  Of  Control)和 AOP(Aspect  Oriented  Programming面向切面编程)为内核。</p>
<p>提供了展现层SpringMVC和持久层Spring  JDBCTemplate以及业务层事务管理等众多的企业级应用技术，还能整合开源世界众多著名的第三方框架和类库，逐渐成为使用最多的Java EE企业应用开源框架。</p>
<h2 id="2、Spring的发展历程"><a href="#2、Spring的发展历程" class="headerlink" title="2、Spring的发展历程"></a>2、Spring的发展历程</h2><p>略</p>
<h2 id="3、Spring的优势"><a href="#3、Spring的优势" class="headerlink" title="3、Spring的优势"></a>3、Spring的优势</h2><p>①方便接偶，简化开发</p>
<p>通过Spring提供的IoC容器，可以将对象的依赖关系交由Spring进行控制，避免硬编码所造成的过度耦合。用户也不必再为了单列模式、属性文件解析等这些很低层的需求写代码，可以更专注于上层的应用。</p>
<p>②AOP编程的支持</p>
<p>通过Spring的AOP功能，方便进行面向切面编程，许多不容易用传统OOP实现的功能可以通过AOP轻松实现。</p>
<p>③声明式事物的支持</p>
<p>可以将我们从单调烦闷的事务管理代码中解脱出来，通过声明方式灵活的进行事务管理，提高开发效率。</p>
<p>④方便程序的测试</p>
<p>可以用非容器依赖的编程方式进行几乎所有的测试工作，测试不再是昂贵的操作，而是随手可做的事情。</p>
<p>⑤方便集成各种优秀的框架</p>
<p>Spring对各种优秀框架（Struts、Hibernate、Hessian、Quartz等）的支持。</p>
<p>⑥降低JavaEE  API的使用难度</p>
<p>Spring对JavaEE  API（如JDBC、JavaMail、远程调用等）进行了薄薄的封装，使这些API的使用难度大为降低。</p>
<p>⑦Java源码是经典学习范例</p>
<p>Spring的源代码设计精妙、结构清晰、匠心独用，处处体现着大师对Java设计模式灵活运用以及对Java技术的高深造诣。它的源代码无疑是Java技术的最佳实践的范例。</p>
<h2 id="4、Spring的体系结构"><a href="#4、Spring的体系结构" class="headerlink" title="4、Spring的体系结构"></a>4、Spring的体系结构</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE3d63121abd7d1f5de2a13d0783ec8f5f.png" srcset="/img/loading.gif" lazyload></p>
<p>Instrumentation（仪表）</p>
<h2 id="5、Spring快速入门"><a href="#5、Spring快速入门" class="headerlink" title="5、Spring快速入门"></a>5、Spring快速入门</h2><h3 id="5-1、Spring程序开发步骤"><a href="#5-1、Spring程序开发步骤" class="headerlink" title="5.1、Spring程序开发步骤"></a>5.1、Spring程序开发步骤</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE8d942c7c5823ee45b5ffa5a18f3d5f2a.png" srcset="/img/loading.gif" lazyload></p>
<p>①使用Maven导入Spring开发的基本jar包</p>
<p>②编写Dao接口和实现类</p>
<p>③创建Spring核心配置文件</p>
<p>④在Spring配置文件中配置UserDaoImpl</p>
<p>⑤使用Spring的API获得Bean实例</p>
<h3 id="5-2、Spring快速入门代码实现"><a href="#5-2、Spring快速入门代码实现" class="headerlink" title="5.2、Spring快速入门代码实现"></a>5.2、Spring快速入门代码实现</h3><p>Spring的开发步骤</p>
<p>①导入jar包</p>
<p>②创建Bean</p>
<p>③创建applicationContext.xml</p>
<p>④在配置文件中进行配置</p>
<p>⑤创建ApplicationContext对象getBean</p>
<h2 id="6、Spring配置文件"><a href="#6、Spring配置文件" class="headerlink" title="6、Spring配置文件"></a>6、Spring配置文件</h2><h3 id="6-1、Bean标签的基本配置"><a href="#6-1、Bean标签的基本配置" class="headerlink" title="6.1、Bean标签的基本配置"></a>6.1、Bean标签的基本配置</h3><p>用于配置对象交由Spring来创建</p>
<p>默认情况下它调用的是类中的无参构造函数，如果没有无参构造函数则不能创建成功</p>
<p>基本属性：</p>
<ul>
<li><p>id：Bean实例在Spring容器中的唯一表示</p>
</li>
<li><p>class：Bean的全限定名称</p>
</li>
</ul>
<h3 id="6-2、Bean标签范围配置"><a href="#6-2、Bean标签范围配置" class="headerlink" title="6.2、Bean标签范围配置"></a>6.2、Bean标签范围配置</h3><p>scope：指对象的作用范围，取值如下：</p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE813ac7758ad458ec25b49d81b1bff4ea.png" srcset="/img/loading.gif" lazyload></p>
<p>①当scope的取值为singleton时</p>
<p>Bean的实例化个数：1个</p>
<p>Bean的实例化时机：当Spring核心文件被加载时，实例化配置的Bean实例</p>
<p>Bean的生命周期：</p>
<ul>
<li><p>对象创建：当应用加载，创建容器时，对象就被创建了</p>
</li>
<li><p>对象运行：只要容器在，对象一直活着</p>
</li>
<li><p>对象销毁：当应用卸载，销毁容器时，对象就被销毁了</p>
</li>
</ul>
<p>②当scope的取值为prototype时</p>
<p>Bean的实例化个数：多个</p>
<p>Bean的实例化时机：当调用getBean()方法时实例化Bean</p>
<p>Bean的生命周期：</p>
<ul>
<li><p>对象创建：当使用对象时，创建新的对象实例</p>
</li>
<li><p>对象运行：只要对象在使用中，就一直或者</p>
</li>
<li><p>对象销毁：当对象长时间不用时，被Java的垃圾回收器(GC)回收了</p>
</li>
</ul>
<h3 id="6-3、Bean生命周期配置"><a href="#6-3、Bean生命周期配置" class="headerlink" title="6.3、Bean生命周期配置"></a>6.3、Bean生命周期配置</h3><ul>
<li><p>init-method：指定类中的初始化方法名称</p>
</li>
<li><p>destroy-mothod：指定类中销毁方法名称</p>
</li>
</ul>
<h3 id="6-4、Bean实例化三种方式"><a href="#6-4、Bean实例化三种方式" class="headerlink" title="6.4、Bean实例化三种方式"></a>6.4、Bean实例化三种方式</h3><ul>
<li><p>无参构造方法实例化（最常用）</p>
</li>
<li><p>工厂静态方法实例化</p>
</li>
<li><p>工厂实例方法实例化</p>
</li>
</ul>
<h3 id="6-5、Bean的依赖注入分析"><a href="#6-5、Bean的依赖注入分析" class="headerlink" title="6.5、Bean的依赖注入分析"></a>6.5、Bean的依赖注入分析</h3><p>目前UserService实例和UserDao实例都存在与Spring容器中，当前的做法时在容器外部获得UserService实例和UserDao实例，然后在程序中进行结合。</p>
<p><img src="/2022/10/21/SSM/WEBRESOURCEf9fe0e28d90d88a4229bd9c6ffc30eb8.png" srcset="/img/loading.gif" lazyload></p>
<p>因为UserService和UserDao都在Spring容器中，而最终程序直接使用的时UserService，所以可以在Spring容器中，将UserDao设置到UserService内部。</p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE32c2321410fb1800364b5f6200cd8bb4.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="6-6、Bean的依赖注入概念"><a href="#6-6、Bean的依赖注入概念" class="headerlink" title="6.6、Bean的依赖注入概念"></a>6.6、Bean的依赖注入概念</h3><p>依赖注入（Dependency Injection）：它是Spring框架核心IOC的具体实现。</p>
<p>在编写程序时，通过控制反转，把对象的创建交给了Spring，但是代码中不可能出现没有依赖的情况。IOC解耦只是降低他们的依赖关系，但不会消除。例如：业务层仍会调用持久层的方法。</p>
<p>那这种业务层和持久层的依赖关系，在使用Spring之后，就让Spring来维护了。</p>
<p>简单的说，就是坐等框架把持久层对象传入业务层，而不用我们自己去获取。</p>
<p>如何将UserDao注入到UserService内部呢？</p>
<ul>
<li><p>set方法</p>
</li>
<li><p>构造方法</p>
</li>
</ul>
<p>具体实现为：</p>
<ul>
<li>set方法</li>
</ul>
<p>1）set方法①</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;<br>        &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 15:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserDao</span> userDao;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUserDao</span>(<span class="hljs-params">UserDao userDao</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">userDao</span> = userDao;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        userDao.<span class="hljs-title function_">save</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>2）set方法②</p>
<p>P命名空间注入本质也是set方法注入，但比起上述的set方法注入更加方便，主要体现在配置文件中，如下：</p>
<p>首先，需要引入P命名空间：</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">xmlns:</span>p=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span><br></code></pre></td></tr></table></figure>

<p>其次，需要修改注入方式</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span> p:<span class="hljs-attribute">userDao-ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>/&gt;<br></code></pre></td></tr></table></figure>

<ul>
<li>构造方法</li>
</ul>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;bean id<span class="hljs-operator">=</span><span class="hljs-string">&quot;userService&quot;</span> class<span class="hljs-operator">=</span><span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;<br>        &lt;constructor-arg name<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span> ref<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span>&gt;&lt;/constructor-arg&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure>



<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 15:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">(UserDao userDao)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userDao = userDao;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.save();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="6-7、Bean的依赖注入的数据类型"><a href="#6-7、Bean的依赖注入的数据类型" class="headerlink" title="6.7、Bean的依赖注入的数据类型"></a>6.7、Bean的依赖注入的数据类型</h3><p>上面的操作，都是注入的引用Bean，除了对象的引用可以注入，普通数据类型或集合都可以在容器中进行注入</p>
<p>注入数据的三种数据类型</p>
<ul>
<li><p>普通数据类型</p>
</li>
<li><p>引用数据类型(UserDao引用注入到UserService，就是对象引用数据类型注入，6.6已讲)</p>
</li>
<li><p>集合数据类型</p>
</li>
</ul>
<p>具体实现为：</p>
<ul>
<li>普通数据类型</li>
</ul>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;bean id<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span> class<span class="hljs-operator">=</span><span class="hljs-string">&quot;com.company.SpringIoC.dao.impl.UserDaoImpl&quot;</span>&gt;<br>        &lt;property name<span class="hljs-operator">=</span><span class="hljs-string">&quot;age&quot;</span> value<span class="hljs-operator">=</span><span class="hljs-string">&quot;18&quot;</span>&gt;&lt;/property&gt;<br>        &lt;property name<span class="hljs-operator">=</span><span class="hljs-string">&quot;name&quot;</span> value<span class="hljs-operator">=</span><span class="hljs-string">&quot;lhg&quot;</span>&gt;&lt;/property&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 14:22</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br>    <span class="hljs-keyword">private</span> int age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAge</span>(<span class="hljs-params">int age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(name+<span class="hljs-string">&quot;===&quot;</span>+age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>集合数据类型</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 14:22</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; strList;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,<span class="hljs-title class_">User</span>&gt; userMap;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Properties</span> properties;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setStrList</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">String</span>&gt; strList</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">strList</span> = strList;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUserMap</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, User&gt; userMap</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">userMap</span> = userMap;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setProperties</span>(<span class="hljs-params">Properties properties</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">properties</span> = properties;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(strList);<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(userMap);<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(properties);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;strList&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ccc<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userMap&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;u1&quot;</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">&quot;user1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;u2&quot;</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">&quot;user2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;properties&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p1&quot;</span>&gt;</span>111<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p2&quot;</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p3&quot;</span>&gt;</span>333<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.pojo.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;tom&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addr&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;hunan&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.pojo.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;lucy&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addr&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;beijing&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br></code></pre></td></tr></table></figure>

<p><img src="/2022/10/21/SSM/WEBRESOURCE73f60dd7a65c6fabf702d4fd708eb887.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="6-8、引入其他配置文件-分模块开发"><a href="#6-8、引入其他配置文件-分模块开发" class="headerlink" title="6.8、引入其他配置文件(分模块开发)"></a>6.8、引入其他配置文件(分模块开发)</h3><p>实际开发中，Spring的配置内容非常多，这就导致Spring配置很繁杂且体积很大，所以，可以将部分配置拆解到其他配置文件中，而在Spring主配置文件通过import标签进行加载。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;import <span class="hljs-attribute">resource</span>=<span class="hljs-string">&quot;applicationContext-xxx.xml&quot;</span>&gt;<br></code></pre></td></tr></table></figure>

<p><img src="/2022/10/21/SSM/WEBRESOURCE2299298cb398a2e87776ae85270644fb.png" srcset="/img/loading.gif" lazyload></p>
<p>applicationContext.xml引用applicationContext-product.xml和applicationContext-user.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-product.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">import</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-user.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">import</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="6-9、Spring的重点配置知识要点"><a href="#6-9、Spring的重点配置知识要点" class="headerlink" title="6.9、Spring的重点配置知识要点"></a>6.9、Spring的重点配置知识要点</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE3603690e2304b8b167a9a91cd09f8848.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="7、Spring相关API"><a href="#7、Spring相关API" class="headerlink" title="7、Spring相关API"></a>7、Spring相关API</h2><h3 id="7-1、ApplicationContext的继承体系"><a href="#7-1、ApplicationContext的继承体系" class="headerlink" title="7.1、ApplicationContext的继承体系"></a>7.1、ApplicationContext的继承体系</h3><p>Diagram</p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE91ca0f067d4d218d2539e29d4ee2b39d.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="7-2、ApplicationContext的实现类"><a href="#7-2、ApplicationContext的实现类" class="headerlink" title="7.2、ApplicationContext的实现类"></a>7.2、ApplicationContext的实现类</h3><p>①ClassPathXmlApplicationContext</p>
<p>它是从类的根路径下加载配置文件推荐使用这种</p>
<p>②FileSystemXmlApplicationContext</p>
<p>它是从磁盘路径上加载配置文件，配置文件可以在磁盘的任意位置</p>
<p>③AnnotationConfigApplicationContext</p>
<p>当使用注解配置容器对象时，需要使用此类来创建spring容器。它用来读取注解。</p>
<h3 id="7-3、getBean-方法的使用"><a href="#7-3、getBean-方法的使用" class="headerlink" title="7.3、getBean()方法的使用"></a>7.3、getBean()方法的使用</h3><p>主要学习使根据d获取和根据类型获取</p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE94d8d9867d280c63554446ba106bb360.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="8、Spring配置数据源"><a href="#8、Spring配置数据源" class="headerlink" title="8、Spring配置数据源"></a>8、Spring配置数据源</h2><h3 id="8-1、数据源（连接池）的作用"><a href="#8-1、数据源（连接池）的作用" class="headerlink" title="8.1、数据源（连接池）的作用"></a>8.1、数据源（连接池）的作用</h3><ul>
<li><p>数据源(连接池)是提高程序性能而出现的</p>
</li>
<li><p>事先实例化数据源，初始化部分连接资源</p>
</li>
<li><p>使用连接资源时从数据源中获取</p>
</li>
<li><p>使用完毕后将连接资源归还给数据源</p>
</li>
</ul>
<p>常见的数据源(连接池)：DBCP、C3P0、BoneCP、Druid等</p>
<h3 id="8-2、数据源的开发步骤"><a href="#8-2、数据源的开发步骤" class="headerlink" title="8.2、数据源的开发步骤"></a>8.2、数据源的开发步骤</h3><p>①导入数据源的坐标和数据库驱动坐标</p>
<p>②创建数据源对象</p>
<p>③设置数据源的基本连接数据</p>
<p>④使用数据源获取连接资源和归还连接资源</p>
<h3 id="8-3、数据源的手动创建"><a href="#8-3、数据源的手动创建" class="headerlink" title="8.3、数据源的手动创建"></a>8.3、数据源的手动创建</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.SpringIoC_anno;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<br><span class="hljs-keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.beans.PropertyVetoException;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.ResourceBundle;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/27 14:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceTest</span> &#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建c3p0数据源</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br>        dataSource.setDriverClass(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        dataSource.setJdbcUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>);<br>        dataSource.setUser(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建druid数据源</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br>        dataSource.setDriverClassName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        dataSource.setUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>);<br>        dataSource.setUsername(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建c3p0数据源(加载properties配置文件)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//读取配置文件</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">resourceBundle</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;jdbc&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.url&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.password&quot;</span>);<br>        <span class="hljs-comment">//创建数据源对象 设置连接参数</span><br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br>        dataSource.setDriverClass(driver);<br>        dataSource.setJdbcUrl(url);<br>        dataSource.setUser(username);<br>        dataSource.setPassword(password);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>jdbc.properties</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">jdbc.driver</span>=com.mysql.cj.jdbc.Driver<br><span class="hljs-attr">jdbc.url</span>=jdbc:mysql://localhost:<span class="hljs-number">3306</span>/javaweb<br><span class="hljs-attr">jdbc.username</span>=root<br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure>



<h3 id="8-4、Spring配置数据源"><a href="#8-4、Spring配置数据源" class="headerlink" title="8.4、Spring配置数据源"></a>8.4、Spring配置数据源</h3><p>可以将DataSource的创建权交由Spring容器去完成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.SpringIoC_anno;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<br><span class="hljs-keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;<br><span class="hljs-keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.ResourceBundle;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/27 14:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试Spring容器产生数据源对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">applicationContext</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> applicationContext.getBean(DataSource.class);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p>applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="8-5、抽取jdbc配置文件"><a href="#8-5、抽取jdbc配置文件" class="headerlink" title="8.5、抽取jdbc配置文件"></a>8.5、抽取jdbc配置文件</h3><p>applicationContext.xml加载jdbc.properties配置文件获得连接信息（Spring容器加载properties文件）</p>
<p>首先，需要引入context命名控件和约束路径：</p>
<ul>
<li><p>命名空间：xmlns:context&#x3D;”<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context&quot;">http://www.springframework.org/schema/context&quot;</a></p>
</li>
<li><p>约束路径：<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a></p>
<p><a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context/spring-context.xsd">http://www.springframework.org/schema/context/spring-context.xsd</a></p>
</li>
</ul>
<p>再将外部properties文件使用context:property-placeholder标签加载到applicationContext.xml中来。</p>
<p>最后使用EL表达式调用对应值</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="hljs-string"><span class="hljs-tag"><span class="language-xml">                            http://www.springframework.org/schema/contxt http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><br><span class="language-xml"><span class="hljs-comment">&lt;!--加载外部的properties文件--&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:property-placeholder</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.driver&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.url&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.username&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.password&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></span><br></code></pre></td></tr></table></figure>



<h2 id="9、Spring注解开发"><a href="#9、Spring注解开发" class="headerlink" title="9、Spring注解开发"></a>9、Spring注解开发</h2><h3 id="9-1、Spring原始注解"><a href="#9-1、Spring原始注解" class="headerlink" title="9.1、Spring原始注解"></a>9.1、Spring原始注解</h3><p>Spring是轻代码而重配置的框架，配置比较繁重，影响开发效率，所以注解开发是一种趋势，注解代替xml配置文件可以简化配置，提高开发效率。</p>
<p>Spring原始注解主要是替代<Bean>的配置</p>
<table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>@Component</td>
<td>使用在类上用于实例化Bean</td>
</tr>
<tr>
<td>@Controller</td>
<td>使用在web层类上用于实例化Bean</td>
</tr>
<tr>
<td>@Service</td>
<td>使用在service层类上用于实例化Bean</td>
</tr>
<tr>
<td>@Repository</td>
<td>使用在dao层类上用于实例化Bean</td>
</tr>
<tr>
<td>@Autowired</td>
<td>使用在字段上用于根据类型依赖注入</td>
</tr>
<tr>
<td>@Qualifier</td>
<td>结合@Autowired一起使用用于根据名称进行依赖注入</td>
</tr>
<tr>
<td>@Resource</td>
<td>相当于@Autowired+@Qualifier，按照名称进行注入</td>
</tr>
<tr>
<td>@Value</td>
<td>注入普通属性</td>
</tr>
<tr>
<td>@Scope</td>
<td>标注Bean的作用范围</td>
</tr>
<tr>
<td>@PostConstruct</td>
<td>使用在方法上标注该方法是Bean的初始化方法</td>
</tr>
<tr>
<td>@PreDestroy</td>
<td>使用在方法上标注该方法时Bean的销毁方法</td>
</tr>
</tbody></table>
<p>在使用注解开发时，需要使用在applicationContext.xml中配置组件扫描。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!--配置组件扫描--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.company.SpringIoC_anno&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="9-2、Spring新注解"><a href="#9-2、Spring新注解" class="headerlink" title="9.2、Spring新注解"></a>9.2、Spring新注解</h3><p>使用上面的注解还不能全部代替xml配置文件，还需要使用注解替代的配置如下：</p>
<ul>
<li><p>非自定义的Bean的配置：<bean></p>
</li>
<li><p>加载properties文件的配置：<a href="context:property-placeholder">context:property-placeholder</a></p>
</li>
<li><p>组件扫描的配置：<a href="context:component-scan">context:component-scan</a></p>
</li>
<li><p>引入其他文件：<import></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>注解</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>@Configuration</td>
<td>用于指定当前类是一个Spring配置类，当前创建容器时会从该类上加载注解</td>
</tr>
<tr>
<td>@ComponentScan</td>
<td>用于指定Spring在初始化容器时要扫描的包。<br>作用和在Spring的xml配置文件中的&lt;context:component-scan base-package&#x3D;”com.company.SpringIoC_anno”&#x2F;&gt;一样</td>
</tr>
<tr>
<td>@Bean</td>
<td>使用在方法上，标注将该方法的返回值存储Spring容器中</td>
</tr>
<tr>
<td>@PropertySource</td>
<td>用于加载properties文件中的配置</td>
</tr>
<tr>
<td>@Import</td>
<td>用于导入其他配置类</td>
</tr>
</tbody></table>
<h2 id="10、Srping集成Junit"><a href="#10、Srping集成Junit" class="headerlink" title="10、Srping集成Junit"></a>10、Srping集成Junit</h2><p>①导入spring继承Junit的坐标</p>
<p>②使用@Runwith直接替换原来的运行周期</p>
<p>③使用@ContextConfiguration指定配置文件或配置类</p>
<p>④使用@Autowired注入需要测试的对象</p>
<p>⑤创建测试方法进行测试</p>
<h2 id="11、Spring集成web环境"><a href="#11、Spring集成web环境" class="headerlink" title="11、Spring集成web环境"></a>11、Spring集成web环境</h2><h3 id="11-1、ApplicationContext应用上下文获取方式"><a href="#11-1、ApplicationContext应用上下文获取方式" class="headerlink" title="11.1、ApplicationContext应用上下文获取方式"></a>11.1、ApplicationContext应用上下文获取方式</h3><p>应用上下文对象是通过new ClasspathXmlApplicationContext(spring配置文件)方式获取的，但是每次从容其中获得Bean时都要编写new ClasspathXmlApplicationContext(spring配置文件)，这样的弊端是配置文件加载多次，应用上下文对象创建多次。</p>
<p>在Web项目中，可以使用ServletContextListener监听Web应用的启动，我们可以在Web应用启动时，就加载Spring的配置文件，创建应用上下文对象ApplicationContext，再将其存储到最大的域servletContext域中，这样就可以在任意位置从余种获得应用上下文ApplicationContext对象了。</p>
<h3 id="11-2、Spring提供给获取应用上下文的工具"><a href="#11-2、Spring提供给获取应用上下文的工具" class="headerlink" title="11.2、Spring提供给获取应用上下文的工具"></a>11.2、Spring提供给获取应用上下文的工具</h3><p>上面的分析不用手动实现，Spring提供了一个监听器ContextLoaderListener就是对上述功能的封装，该监听器内部加载Spring配置文件，创建应用上下文对象，并存储到ServletContext域中，提供了一个客户端工具WebApplicationContextUtils供使用者获得应用上下文对象。</p>
<p>所以我们需要做的只有两件事：</p>
<p>①在web.xml中配置ContextLoaderListener监听器(导入spring-web坐标)</p>
<p>②使用WebApplicationContextUtils获得应用上下文对象ApplicationContext</p>
<h1 id="Spring的AOP简介"><a href="#Spring的AOP简介" class="headerlink" title="Spring的AOP简介"></a>Spring的AOP简介</h1><h2 id="1-1、什么是AOP"><a href="#1-1、什么是AOP" class="headerlink" title="1.1、什么是AOP"></a>1.1、什么是AOP</h2><p>AOP为Aspect Oriented Programming的缩写，意思为面向切面编程，是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。</p>
<p>AOP时OOP的延续，是软件开发中的一个热点，也是Spring框架中的一个重要内容，是函数时变成的一种衍生泛型。利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p>
<h2 id="1-2、AOP的作用及其优势"><a href="#1-2、AOP的作用及其优势" class="headerlink" title="1.2、AOP的作用及其优势"></a>1.2、AOP的作用及其优势</h2><ul>
<li><p>作用：在程序运行期间，在不修改源码的情况下对方法进习性功能增强</p>
</li>
<li><p>优势：减少重复代码，提高开发效率，并且便于维护</p>
</li>
</ul>
<h2 id="1-3、AOP的底层实现"><a href="#1-3、AOP的底层实现" class="headerlink" title="1.3、AOP的底层实现"></a>1.3、AOP的底层实现</h2><p>实际上，AOP的底层是通过Spring提供的动态代理技术实现的。在运行期间，Spring通过动态代理技术动态的生成代理对象，代理对象方法执行时进行增强功能的接入，在去调用目标对象的方法，从而完成功能的增强。</p>
<h2 id="1-4、AOP的动态代理技术"><a href="#1-4、AOP的动态代理技术" class="headerlink" title="1.4、AOP的动态代理技术"></a>1.4、AOP的动态代理技术</h2><p>常用的动态代理技术：</p>
<ul>
<li><p>JDK代理：基于接口的动态代理技术</p>
</li>
<li><p>cglib代理：基于父类的动态代理技术</p>
</li>
</ul>
<p><img src="/2022/10/21/SSM/WEBRESOURCE3f15acacc6173069d50651dd296117f8.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="1-5、基于JDK的动态代理"><a href="#1-5、基于JDK的动态代理" class="headerlink" title="1.5、基于JDK的动态代理"></a>1.5、基于JDK的动态代理</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.Spring_aop;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//目标对象</span><br>        <span class="hljs-type">Target</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Target</span>();<br><br>        <span class="hljs-comment">//增强对象</span><br>        <span class="hljs-type">Advice</span> <span class="hljs-variable">advice</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Advice</span>();<br>        <span class="hljs-comment">//返回值就是动态生成的代理对象</span><br>        <span class="hljs-type">TargetInterface</span> <span class="hljs-variable">targetInterface</span> <span class="hljs-operator">=</span> (TargetInterface) Proxy.newProxyInstance(<br>                target.getClass().getClassLoader(), <span class="hljs-comment">//目标对象类加载器</span><br>                target.getClass().getInterfaces(),<span class="hljs-comment">//目标对象相同的接口字节码对象数组</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() &#123;<br>                    <span class="hljs-comment">//调用代理对象的任何方法 实质执行的都是invoke方法</span><br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>                        advice.before();<br>                        <span class="hljs-type">Object</span> <span class="hljs-variable">invoke</span> <span class="hljs-operator">=</span> method.invoke(target, args);<span class="hljs-comment">//执行目标方法</span><br>                        advice.afterReturning();<br>                        <span class="hljs-keyword">return</span> invoke;<br>                    &#125;<br>                &#125;<br>        );<br>        <span class="hljs-comment">//调用代理对象的方法</span><br>        targetInterface.save();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="1-6、基于cglib的动态代理"><a href="#1-6、基于cglib的动态代理" class="headerlink" title="1.6、基于cglib的动态代理"></a>1.6、基于cglib的动态代理</h2><p>难度过高、暂略。</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=125&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a">https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=125&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a</a></p>
<h2 id="1-7、AOP相关概念"><a href="#1-7、AOP相关概念" class="headerlink" title="1.7、AOP相关概念"></a>1.7、AOP相关概念</h2><p>Spring的AOP是新鲜底层就是对上面的动态代理的代码进行了封装，封装后我们只需要对需要关注的部分进行代码编写，并通过配置的方式完成指定目标的方法增强。</p>
<p>在正式讲解AOP的操作之前，我们必须理解AOP的相关术语，常用的术语如下：</p>
<ul>
<li><p>Target(目标对象)：代理的目标对象</p>
</li>
<li><p>Proxy(代理)：一个类被AOP织入增强后，就产生一个结果代理类</p>
</li>
<li><p>JoinPoint(连接点)：所谓连接点是指那些被拦截到的点。在Spring中这些点指的是方法，因为Spring支支持方法类型的连接点</p>
</li>
<li><p>Pointcut(切入点)：所谓切入点是指我们要对哪些Joinpoint进行拦截的定义</p>
</li>
<li><p>Advice(通知&#x2F;增强)：所谓通知是指拦截到Joinpoint之后所要做的事情就是通知</p>
</li>
<li><p>Aspect(切面)：是切入点和通知(引介)的结合</p>
</li>
<li><p>Weaving(织入)：是指把增强应用到目标对象来创建新的代理对象的过程。Spring采用动态代理织入，而AspectJ采用编译期织入和类装载器织入。</p>
</li>
</ul>
<h2 id="1-8、AOP开发的明确的事项"><a href="#1-8、AOP开发的明确的事项" class="headerlink" title="1.8、AOP开发的明确的事项"></a>1.8、AOP开发的明确的事项</h2><p>需要编写的内容</p>
<ul>
<li><p>编写核心业务代码（目标类的目标方法）</p>
</li>
<li><p>编写切面类，切面类中有通知（增强功能方法）</p>
</li>
<li><p>在配置文件中，配置织入关系，即将哪些通知与哪些连接点进行结合</p>
</li>
</ul>
<p>AOP底层使用哪种代理方式</p>
<p>在spring中，框架会根据目标是否实现了接口来决定采用哪种动态代理的方式。</p>
<p>目标对象有接口就会使用JDK的那种。</p>
<p>否则使用cglib那种。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--目标对象    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;targetImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.Test3.Service.TargetImpl&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--切面对象    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;targetAspect&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.Test3.Service.TargetAspect&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--配置织入： 告诉spring框架 哪些方法(切点)需要进行哪些增强(前置、后置)....    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 切点表达式的抽取--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(public void com.company.Test3.Service.TargetImpl.save())&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--声明切面    --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;targetAspect&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--切面：切点+通知    --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:before</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-returning</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;afterReturning&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">returning</span>=<span class="hljs-string">&quot;result&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:after-returning</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="2-1、XML配置AOP详解"><a href="#2-1、XML配置AOP详解" class="headerlink" title="2.1、XML配置AOP详解"></a>2.1、XML配置AOP详解</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE3cef0f6841539dee533856a3b79d5e83.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE48f073c93a1e6d842e1ab1836f35f91c.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCEee1ada72ad976ebccbf4a5de7683208a.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="3-1、基于注解的AOP开发"><a href="#3-1、基于注解的AOP开发" class="headerlink" title="3.1、基于注解的AOP开发"></a>3.1、基于注解的AOP开发</h2><h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><h2 id="1、SpringMVC简介"><a href="#1、SpringMVC简介" class="headerlink" title="1、SpringMVC简介"></a>1、SpringMVC简介</h2><h3 id="1-1、SpringMVC概述"><a href="#1-1、SpringMVC概述" class="headerlink" title="1.1、SpringMVC概述"></a>1.1、SpringMVC概述</h3><p>SpringMVC是一种基于Java的实现MVC设计模型的请求驱动类型的轻量级Web框架，属于SpringFrameWork的后续产品，已经融合在Spring Web Flow中</p>
<p>SpringMVC已经称为目前最主流的MVC框架之一，并且随着Spring3.0的发布，全面超越Struts2，称为最优秀的MVC框架。它通过一套注解，让一个简单的Java类成为处理请求的控制器，而无需实现任何接口。同时它还支持RESTful编程风格的请求。</p>
<h3 id="1-2、SpringMVC快速入门"><a href="#1-2、SpringMVC快速入门" class="headerlink" title="1.2、SpringMVC快速入门"></a>1.2、SpringMVC快速入门</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE2a48a9d4bb83e804bac3fd07d7bd6073.png" srcset="/img/loading.gif" lazyload></p>
<p>需求：客户端发起请求，服务器端接受请求，执行逻辑并进行试图跳转。</p>
<p>开发步骤：</p>
<p>①导入SpringMVC相关坐标</p>
<p>②配置SpringMVC核心控制器DispathcerServlet</p>
<p>③创建Controller类和视图页面</p>
<p>④使用注解配置Controller类中业务方法的映射地址</p>
<p>⑤配置SpringMVC核心文件spring-mvc.xml</p>
<p>⑥客户端发起请求测试</p>
<h3 id="1-3、SpringMVC流程图"><a href="#1-3、SpringMVC流程图" class="headerlink" title="1.3、SpringMVC流程图"></a>1.3、SpringMVC流程图</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE60ee809af5b78762fdae7725f18e02f5.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="2、SpringMVC组件解析"><a href="#2、SpringMVC组件解析" class="headerlink" title="2、SpringMVC组件解析"></a>2、SpringMVC组件解析</h2><h3 id="2-1、SpringMVC的执行流程"><a href="#2-1、SpringMVC的执行流程" class="headerlink" title="2.1、SpringMVC的执行流程"></a>2.1、SpringMVC的执行流程</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE25f679777ede905bb9cd702e917de75f.png" srcset="/img/loading.gif" lazyload></p>
<p>①用户发送请求至前端控制器DispatcherServlet。</p>
<p>②DispatcherServlet收到请求调用HandlerMapping处理器映射器。</p>
<p>③处理器映射器找到具体的处理器(可以根据xml配置、注解进行查找)，生成处理器对象处理器拦截器(如果有则生成)一并返回给DispatcherServlet</p>
<p>④DispatcherServlet调用HandlerAdapter处理器适配器</p>
<p>⑤HandlerAdapter经过适配调用具体的处理器(Controller,也叫后端控制器)。</p>
<p>⑥Controller执行完成返回ModelAndView。</p>
<p>⑦HandlerAdapter将controller执行结果ModelAndView返回给DispatcherServlet。</p>
<p>⑧DispatcherServlet将ModelAndView传给ViewReslover视图解析器。</p>
<p>⑨ViewReslover解析后返回具体View。</p>
<p>⑩DispatcherServlet根据View进行渲染视图(即将模型数据填充至视图中)DispatcherServlet响应用户。</p>
<h3 id="2-2、SpringMVC注解解析"><a href="#2-2、SpringMVC注解解析" class="headerlink" title="2.2、SpringMVC注解解析"></a>2.2、SpringMVC注解解析</h3><p>@RequestMapping</p>
<p>作用：请求映射，主要是用于建立请求URL和处理请求方法之间的对应关系。</p>
<p>位置：</p>
<ul>
<li><p>类上：请求URL的第一级访问目录。此处不写的话，就相当于应用的根目录</p>
</li>
<li><p>方法上：请求URL的第二级访问目录，与类上的使用@ReqquestMapping标注的一级目录一起组成访问虚拟路径。</p>
</li>
</ul>
<p>属性：</p>
<ul>
<li><p>value：用于指定请求的URL。它和paht属性的作用是一样的</p>
</li>
<li><p>method：用于指定请求的方式</p>
</li>
<li><p>params：用于指定限制请求参数的条件。它支持简单的表达式。要求请求参数的key和value必须和配置的一摸一样。</p>
</li>
</ul>
<h3 id="2-3、知识要点"><a href="#2-3、知识要点" class="headerlink" title="2.3、知识要点"></a>2.3、知识要点</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE83f302b30935f8c9804b21aa072cbb88.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="3、SpringMVC的数据响应"><a href="#3、SpringMVC的数据响应" class="headerlink" title="3、SpringMVC的数据响应"></a>3、SpringMVC的数据响应</h2><h3 id="3-1、SpringMVC的数据相应方式"><a href="#3-1、SpringMVC的数据相应方式" class="headerlink" title="3.1、SpringMVC的数据相应方式"></a>3.1、SpringMVC的数据相应方式</h3><p><img src="/2022/10/21/SSM/WEBRESOURCEb84a6abf71eaf072ccccba135acd7514.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><p>使用map</p>
</li>
<li><p>使用ModelAndView</p>
</li>
<li><p>使用req.setAttribute</p>
</li>
</ul>
<h2 id="4、SpringMVC的请求"><a href="#4、SpringMVC的请求" class="headerlink" title="4、SpringMVC的请求"></a>4、SpringMVC的请求</h2><h3 id="4-1、获得请求参数"><a href="#4-1、获得请求参数" class="headerlink" title="4.1、获得请求参数"></a>4.1、获得请求参数</h3><p>格式：?name&#x3D;value&amp;name&#x3D;value</p>
<p>服务器端要获得请求的参数，有时还需要进行数据的封装，SpringMVC可以接受如下类型的参数：</p>
<ul>
<li><p>基本类型参数</p>
</li>
<li><p>POJO类型参数</p>
</li>
<li><p>数组类型参数</p>
</li>
<li><p>集合类型参数</p>
</li>
</ul>
<p>Controller中的业务方法的参数名称要与请求参数的name一致，参数值会自动映射匹配。</p>
<h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h2 id="1、Mybatis简介"><a href="#1、Mybatis简介" class="headerlink" title="1、Mybatis简介"></a>1、Mybatis简介</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE09193dd79b01d0115816d5418822641e.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE15a49bbb138e9222fef82bcbd77d1b4d.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="1-2、原始jdbc操作的分析"><a href="#1-2、原始jdbc操作的分析" class="headerlink" title="1.2、原始jdbc操作的分析"></a>1.2、原始jdbc操作的分析</h3><p>原始jdbc开发存在的问题如下：</p>
<p>①数据库连接创建、释放频繁造成系统资源浪费从而影响系统性能。</p>
<p>②sql语句在代码中硬编码，造成代码不宜维护，实际应用sql变化的可能比较大，sql变动需要改变java代码。</p>
<p>③查询操作时，需要手动将结果集中的数据手动封装到实体中。插入操作时，需要手动将实体的数据设置到sql语句的占位符位置</p>
<p>应对上述问题给出的解决方案：</p>
<p>①使用数据库连接池初始化连接资源</p>
<p>②将sql语句抽取到xml配置文件中</p>
<p>③使用反射、内省等底层技术，自动将实体与表进行属性与字段的自动映射</p>
<h3 id="1-3、什么是Mybatis"><a href="#1-3、什么是Mybatis" class="headerlink" title="1.3、什么是Mybatis"></a>1.3、什么是Mybatis</h3><ul>
<li><p>mybatis是一个优秀的基于java的持久层框架，它内部封装了jdbc，使开发者只需要关注sql语句本身，而不需要花费精力去处理加载驱动、创建链接、创建statement等繁杂的过程</p>
</li>
<li><p>mybatis通过xml或注解的方式将要执行的各种statement配置起来，并通过java对象和statement中sql的动态参数进行映射生成最终执行的sql语句</p>
</li>
<li><p>最后mybatis框架执行sql并将结果映射为java对象并返回，采用ORM思想解决了实体和数据库映射的我呢提，对jdbc进行了封装，屏蔽了jdbc api底层访问细节，是我们不用与jdbc api打交道，就可以完成对数据库的持久化操作。</p>
</li>
</ul>
<h2 id="2、Mybatis的快速入门"><a href="#2、Mybatis的快速入门" class="headerlink" title="2、Mybatis的快速入门"></a>2、Mybatis的快速入门</h2><p>MyBatis官网地址：<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/">https://mybatis.org/mybatis-3/</a></p>
<h3 id="2-1、MyBatis开发步骤"><a href="#2-1、MyBatis开发步骤" class="headerlink" title="2.1、MyBatis开发步骤"></a>2.1、MyBatis开发步骤</h3><p>①添加MyBatis的坐标</p>
<p>②创建user数据表</p>
<p>③编写User实体类</p>
<p>④编写映射文件UserMapper.xml</p>
<p>⑤编写核心文件SqlMapConfig.xml</p>
<p>⑥编写测试类</p>
<p>ps:④UserMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;userMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span><br>        select * from user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>ps:⑤SqlMapConfig.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--数据源环境    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=false<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--加载映射文件    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/company/mapper/UserMapper.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>ps:⑥测试类</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//获取核心配置文件</span><br>InputStream resourceAsStream = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Resources</span>.</span></span>get<span class="hljs-constructor">ResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>)</span>;<br><span class="hljs-comment">//获取session工厂对象</span><br>SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SqlSessionFactoryBuilder()</span>.build(resourceAsStream);<br><span class="hljs-comment">//获得session会话对象</span><br>SqlSession sqlSession = sqlSessionFactory.<span class="hljs-keyword">open</span><span class="hljs-constructor">Session()</span>;<br><span class="hljs-comment">//执行操作 参数：namespace+id</span><br>List&lt;User&gt; userList = sqlSession.select<span class="hljs-constructor">List(<span class="hljs-string">&quot;userMapper.findAll&quot;</span>)</span>;<br><span class="hljs-comment">//打印数据</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(userList);<br><span class="hljs-comment">//释放资源</span><br>sqlSession.close<span class="hljs-literal">()</span>;<br></code></pre></td></tr></table></figure>

<h2 id="3、Mybatis映射文件概述"><a href="#3、Mybatis映射文件概述" class="headerlink" title="3、Mybatis映射文件概述"></a>3、Mybatis映射文件概述</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE1c4f8ffcac86042e493f22ffc2deae08.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="4、Mybatis的增删改查"><a href="#4、Mybatis的增删改查" class="headerlink" title="4、Mybatis的增删改查"></a>4、Mybatis的增删改查</h2><h3 id="4-1、MyBatis的插入数据操作"><a href="#4-1、MyBatis的插入数据操作" class="headerlink" title="4.1、MyBatis的插入数据操作"></a>4.1、MyBatis的插入数据操作</h3><h4 id="4-1-1、插入操作需要注意的问题："><a href="#4-1-1、插入操作需要注意的问题：" class="headerlink" title="4.1.1、插入操作需要注意的问题："></a>4.1.1、插入操作需要注意的问题：</h4><ul>
<li><p>插入语句使用insert标签</p>
</li>
<li><p>在映射文件中使用parameterType属性指定要插入的数据类型</p>
</li>
<li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p>
</li>
<li><p>插入操作使用的API是sqlSession.insert(“命名空间.id”，实体对象);</p>
</li>
<li><p>插入操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p>
</li>
</ul>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--插入操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;save&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span></span><br><span class="language-xml">    insert into user (id, username, password)values(#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">,#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml">,#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml">)</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setUsername(<span class="hljs-string">&quot;小羊&quot;</span>);<br>    user.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.insert(<span class="hljs-string">&quot;userMapper.save&quot;</span>,user);<br>    <span class="hljs-comment">//mybatis执行更新操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="4-1-2、修改操作需要注意的问题："><a href="#4-1-2、修改操作需要注意的问题：" class="headerlink" title="4.1.2、修改操作需要注意的问题："></a>4.1.2、修改操作需要注意的问题：</h4><ul>
<li><p>修改语句使用insert标签</p>
</li>
<li><p>在映射文件中使用parameterType属性指定要修改的数据类型</p>
</li>
<li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p>
</li>
<li><p>修改操作使用的API是sqlSession.update(“命名空间.id”，实体对象);</p>
</li>
<li><p>修改操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p>
</li>
</ul>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--修改操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span></span><br><span class="language-xml">    update user set username = #</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml">,password = #</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"> where id = #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setUsername(<span class="hljs-string">&quot;小绵羊&quot;</span>);<br>    user.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>    user.setId(<span class="hljs-number">4</span>);<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.update(<span class="hljs-string">&quot;userMapper.update&quot;</span>,user);<br>    <span class="hljs-comment">//mybatis执行更新操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="4-1-3、删除操作需要注意的问题："><a href="#4-1-3、删除操作需要注意的问题：" class="headerlink" title="4.1.3、删除操作需要注意的问题："></a>4.1.3、删除操作需要注意的问题：</h4><ul>
<li><p>删除语句使用insert标签</p>
</li>
<li><p>在映射文件中使用parameterType属性指定要删除的数据类型</p>
</li>
<li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p>
</li>
<li><p>删除操作使用的API是sqlSession.delete(“命名空间.id”，实体对象);</p>
</li>
<li><p>删除操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p>
</li>
</ul>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--删除操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delete&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="language-xml">    delete from user where id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.delete(<span class="hljs-string">&quot;userMapper.delete&quot;</span>,id);<br>    <span class="hljs-comment">//mybatis执行删除操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="5、Mybatis核心配置文件"><a href="#5、Mybatis核心配置文件" class="headerlink" title="5、Mybatis核心配置文件"></a>5、Mybatis核心配置文件</h2><h3 id="5-1、MyBatis核心配置文件层级关系"><a href="#5-1、MyBatis核心配置文件层级关系" class="headerlink" title="5.1、MyBatis核心配置文件层级关系"></a>5.1、MyBatis核心配置文件层级关系</h3><ul>
<li><p>configuration配置</p>
</li>
<li><p>properties 属性</p>
</li>
<li><p>settings 设置</p>
</li>
<li><p>typeAliases 类型别名</p>
</li>
<li><p>typeHandlers 类型处理器</p>
</li>
<li><p>objectFactory 对象工厂</p>
</li>
<li><p>plugins 插件</p>
</li>
<li><p>environments 环境</p>
</li>
<li><p>environment 环境变量</p>
</li>
<li><p>transactionManager 事务管理器</p>
</li>
<li><p>dataSource 数据源</p>
</li>
<li><p>databaseIdProvider 数据库厂商便是</p>
</li>
<li><p>mappers 映射器</p>
</li>
</ul>
<h3 id="5-2、MyBatis常用配置解析"><a href="#5-2、MyBatis常用配置解析" class="headerlink" title="5.2、MyBatis常用配置解析"></a>5.2、MyBatis常用配置解析</h3><p>官方文档：<a target="_blank" rel="noopener" href="https://mybatis.net.cn/configuration.html">https://mybatis.net.cn/configuration.html</a></p>
<p>1、environments标签</p>
<p>数据库环境的配置，支持多环境配置</p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE83eaa2a0e2824e1060ad943aa222b732.png" srcset="/img/loading.gif" lazyload></p>
<p>其中，事务管理器(transactionManager)类型有两种：</p>
<ul>
<li><p>JDBC：这个配置就是直接使用了JDBC的提交和回滚设置，它依赖于从数据源得到的链接来管理事务作用域</p>
</li>
<li><p>MANAGED：这个配置几乎没做什么。他从来不提交或回滚一个连接，而是让容器来管理事务的整个生命周期(比如JEE应用服务器的上下文)。默认情况下它会关闭连接，然而一些容器并不希望这样，因此需要将closeConnection属性设置为false来阻止它默认的关闭行为。</p>
</li>
</ul>
<p>其中，数据源(dataSource)类型有三种：</p>
<ul>
<li><p>UNPOOLED：这个数据源的实现只是每次请求打开和关闭链接</p>
</li>
<li><p>POOLED：这种数据源的实现利用”池“的概念将JDBC连接对象组织起来。</p>
</li>
<li><p>JNDI：这个数据源的实现是为了能在比如EJB或应用服务器这类容器中使用，容器可以其中或在外部配置数据源，然后放置一个JNDI上下文的引用。</p>
</li>
</ul>
<p>2、mapper标签</p>
<p>该标签的作用是加载映射的，加载方式有如下几种：</p>
<ul>
<li><p>使用相对于类路径的资源引用，例如：<mapper resource="org/mybatis/builder/builder/AuthorMapper.xml"/></p>
</li>
<li><p>使用完全限定资源定位符(URL)，例如：<mapper url="file:///var/mappers/AuthorMapper.xml"/></p>
</li>
<li><p>使用映射器接口实现类的完全限定类名，例如：<mapper class="org.mybatis.builder.AuthorMapper"/></p>
</li>
<li><p>将包内的映射器接口实现全部注册为映射器，例如：<package name="org.mybatis.builder"/></p>
</li>
</ul>
<p><img src="/2022/10/21/SSM/WEBRESOURCEdb3fe4d75af0a5ab2d11fe77f8b96b58.png" srcset="/img/loading.gif" lazyload></p>
<p>3、Properties标签</p>
<p>实际开发中，习惯将数据源的配置信息单独抽取成一个properties文件，该标签可以加载额外配置的properties文件。</p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE03324357bf4da77fab672943c6d4fe46.png" srcset="/img/loading.gif" lazyload></p>
<p>4、typeAliases标签</p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE718aa05b9a65243c539535055113dfc7.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE00352f0140ee769dd03be6056f636555.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="6、Mybatis相应API"><a href="#6、Mybatis相应API" class="headerlink" title="6、Mybatis相应API"></a>6、Mybatis相应API</h2><h3 id="6-1、SqlSession工厂构建器SqlSessionFactoryBuilder"><a href="#6-1、SqlSession工厂构建器SqlSessionFactoryBuilder" class="headerlink" title="6.1、SqlSession工厂构建器SqlSessionFactoryBuilder"></a>6.1、SqlSession工厂构建器SqlSessionFactoryBuilder</h3><p>常用API：SqlSessionFactory build(InputStream inputStream)</p>
<p>通过加载mybatis的核心文件的输入流的形式构建一个SqlSessionFactory对象</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">String resource <span class="hljs-operator">=</span> <span class="hljs-string">&quot;org/mybatis/builder/mybatis-config.xml&quot;</span><span class="hljs-comment">;</span><br>InputStream inputStream <span class="hljs-operator">=</span> Resources.getResourceAsStream(resource)<span class="hljs-comment">;</span><br>SqlSessionFactoryBuilder builder <span class="hljs-operator">=</span> new SqlSessionFactoryBuilder()<span class="hljs-comment">;</span><br>SqlSessionFactory factory <span class="hljs-operator">=</span> builder.build(inputStream)<br></code></pre></td></tr></table></figure>

<p>其中Resources工具类，这个类在org.apache.ibatis.io包中。Resources类帮助你从类路径下、系统文件或一个web URL中加载资源文件。</p>
<h3 id="6-2、SqlSession工厂对象SqlSessionFactory"><a href="#6-2、SqlSession工厂对象SqlSessionFactory" class="headerlink" title="6.2、SqlSession工厂对象SqlSessionFactory"></a>6.2、SqlSession工厂对象SqlSessionFactory</h3><p>SqlSessionFactory有多个方法创建SqlSession实力，常用的有如下两个：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">open</span><span class="hljs-constructor">Session()</span> 会默认开启一个事务，但事务不会自动提交。<br><span class="hljs-keyword">open</span><span class="hljs-constructor">Session(<span class="hljs-params">boolean</span> <span class="hljs-params">autoCommit</span>)</span>  参数为是否自动提交。<br></code></pre></td></tr></table></figure>

<h3 id="6-3、SqlSession会话对象"><a href="#6-3、SqlSession会话对象" class="headerlink" title="6.3、SqlSession会话对象"></a>6.3、SqlSession会话对象</h3><p>SqlSession实例在MyBatis中是非常强大的一个类。在这里你会看到所有执行语句、提交或回滚事务和获取映射器实例的方法。执行语句的方法主要有：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;T&gt; T selectOne(String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br>&lt;E&gt; List&lt;E&gt; selectList (Stringg <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">insert</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">update</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">delete</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br></code></pre></td></tr></table></figure>

<p>操作事务的主要方法有：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">commit</span>()</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rollback</span>()</span><br></code></pre></td></tr></table></figure>

<h2 id="7、Mybatis的dao层实现"><a href="#7、Mybatis的dao层实现" class="headerlink" title="7、Mybatis的dao层实现"></a>7、Mybatis的dao层实现</h2><h3 id="7-1、传统开发方式"><a href="#7-1、传统开发方式" class="headerlink" title="7.1、传统开发方式"></a>7.1、传统开发方式</h3><p>与javaweb结构相似</p>
<h3 id="7-2、代理开发方式"><a href="#7-2、代理开发方式" class="headerlink" title="7.2、代理开发方式"></a>7.2、代理开发方式</h3><h4 id="7-2-1、代理开发方式介绍"><a href="#7-2-1、代理开发方式介绍" class="headerlink" title="7.2.1、代理开发方式介绍"></a>7.2.1、代理开发方式介绍</h4><p>采用Mybatis的代理开发方式实现DAO层的开发，这种方式是我们后面进入企业的主流。</p>
<p>Mapper接口开发方法只需要程序员编写Mapper接口(相当于Dao接口)，有Mybatis框架根据接口定义创建接口的动态代理对象，代理对象的方法体同上边Dao接口实现类方法。</p>
<p>Mapper接口开发需要遵循一下规范：</p>
<p>①Mapper.xml文件中的namespace与mapper接口的全限定名相同</p>
<p>②Mapper接口方法名和Mapper.xml中定义的每个statement的id相同</p>
<p>③Mapper接口方法的输入参数类型和mapper.xml中定义的每个sql的parameterType的类型相同</p>
<p>④Mapper接口方法的输出参数类型和mapper.xml中定义的每个sql的resultType的类型相同</p>
<h4 id="7-2-2、编写UserMapper接口"><a href="#7-2-2、编写UserMapper接口" class="headerlink" title="7.2.2、编写UserMapper接口"></a>7.2.2、编写UserMapper接口</h4><p><img src="/2022/10/21/SSM/WEBRESOURCE75ba046470c50cde99e457b967986d74.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="8、Mybatis映射文件深入"><a href="#8、Mybatis映射文件深入" class="headerlink" title="8、Mybatis映射文件深入"></a>8、Mybatis映射文件深入</h2><h3 id="8-1、动态sql语句-https-mybatis-net-cn-dynamic-sql-html"><a href="#8-1、动态sql语句-https-mybatis-net-cn-dynamic-sql-html" class="headerlink" title="8.1、动态sql语句(https://mybatis.net.cn/dynamic-sql.html)"></a>8.1、动态sql语句(<a target="_blank" rel="noopener" href="https://mybatis.net.cn/dynamic-sql.html">https://mybatis.net.cn/dynamic-sql.html</a>)</h3><h4 id="8-1-1、动态sql语句"><a href="#8-1-1、动态sql语句" class="headerlink" title="8.1.1、动态sql语句"></a>8.1.1、动态sql语句</h4><ul>
<li><if></li>
</ul>
<p>我们根据实体类的不同取值，使用不同的SQL语句来进行查新，比如在id如果不为空时可以根据id查询，如果username不为空时还要加入用户名作为条件。这种情况在我们的多条件组合查询中经常碰到。</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--根据Condition查询操作    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByCondition&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        select * from user</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="language-xml">                and id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and username=#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;password!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and password=#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<ul>
<li><foreach></li>
</ul>
<p>循环执行sql的拼接操作，例如：select * from user where id in（1，2，5）</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByIds&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        select * from user</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;id in(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span></span><br><span class="language-xml">                #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h3 id="8-2、sql片段的抽取"><a href="#8-2、sql片段的抽取" class="headerlink" title="8.2、sql片段的抽取"></a>8.2、sql片段的抽取</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--sql语句抽取    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span>select * from user<span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--根据Condition查询操作    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByCondition&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="language-xml">                and id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and username=#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;password!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and password=#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByIds&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;id in(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span></span><br><span class="language-xml">                #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<h2 id="9、Mybatis核心配置文件深入"><a href="#9、Mybatis核心配置文件深入" class="headerlink" title="9、Mybatis核心配置文件深入"></a>9、Mybatis核心配置文件深入</h2><h3 id="9-1、typeHandlers标签"><a href="#9-1、typeHandlers标签" class="headerlink" title="9.1、typeHandlers标签"></a>9.1、typeHandlers标签</h3><p>无论是MyBatis在处理语句(PreparedStatement)中设置一个参数时，还是从结果集中取出一个值时，都会用类型处理器将获取的值以合适的方式转换成Java类型。下标描述了一些默认的类型处理器(部分)</p>
<table>
<thead>
<tr>
<th>类处理器</th>
<th>Java类型</th>
<th>JDBC类型</th>
</tr>
</thead>
<tbody><tr>
<td>BooleanTypeHandler</td>
<td>java.lang.Boolean,boolean</td>
<td>数据库兼容的BOOLEAN</td>
</tr>
<tr>
<td>ByteTypeHandler</td>
<td>java.lang.Byte,byte</td>
<td>数据库兼容的NUMERIC或BYTE</td>
</tr>
<tr>
<td>ShortTypeHandler</td>
<td>java.lang.Short,short</td>
<td>数据库兼容的NUMERIC或SHORT INTEGER</td>
</tr>
<tr>
<td>IntegerTypeHandler</td>
<td>java.lang.Integer,int</td>
<td>数据库兼容的NUMERIC或INTEGER</td>
</tr>
<tr>
<td>LongTypeHnadler</td>
<td>java.lang.long,long</td>
<td>数据库兼容的NUMERIC或LONG INTEGER</td>
</tr>
</tbody></table>
<p>你可以重写类型处理器或创建自己的类型处理器来处理不持支的或非标准的类型。具体做法为：实现org.apache.ibatis.type.TybeHandler接口，或继承一个很便利的类org.apache.ibatis.type.BaseTypeHandler,然后可以选择性地将它映射到一个JDBC类型。例如需求：一个Java中的Date数据类型，我想将之存入到数据库的时候存成一个1790至今的毫秒数，取出来时转换成java的Date，即java的Date与数据库的varchar毫秒之间转换。</p>
<p>开发步骤：</p>
<p>①定义转换继承类BaseTypeHandler<T></p>
<p>②覆盖4个为实现的方法，其中setNonNullParameter为java程序设置数据到数据库的回调方法，getNullableResult为查询时mysql的字符串类型转换成java的Type类型的方法</p>
<p>③在MyBatis核心配置文件中进行注册</p>
<p>④测试转换是否正确</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_Dao.Handler;<br><br><span class="hljs-keyword">import</span> org.apache.ibatis.type.BaseTypeHandler;<br><span class="hljs-keyword">import</span> org.apache.ibatis.type.JdbcType;<br><br><span class="hljs-keyword">import</span> java.sql.CallableStatement;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateTypeHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;Date&gt; &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(PreparedStatement preparedStatement, <span class="hljs-type">int</span> i, Date date, JdbcType jdbcType)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> date.getTime();<br>        preparedStatement.setLong(i,time);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(ResultSet resultSet, String s)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> resultSet.getLong(s);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(ResultSet resultSet, <span class="hljs-type">int</span> i)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> resultSet.getLong(i);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(CallableStatement callableStatement, <span class="hljs-type">int</span> i)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> callableStatement.getLong(i);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--注册类型处理器    --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">typeHandlers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeHandler</span> <span class="hljs-attr">handler</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Handler.DateTypeHandler&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">typeHandler</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeHandlers</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="9-2、plugins标签"><a href="#9-2、plugins标签" class="headerlink" title="9.2、plugins标签"></a>9.2、plugins标签</h3><p>MyBatis可以使用第三方的插件来对功能进行扩展，分页助手PageHelper是将分页的复杂操作进行封装，使用简单的方式即可获得分页的相关数据</p>
<p>开发步骤：</p>
<p>①导入通用PageHelper的坐标</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.jsqlparser<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsqlparser<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>②在mybatis核心配置文件中配置PageHelper插件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置分页助手插件    --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageHelper&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dialect&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;mysql&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>③测试分页数据获取</p>
<h2 id="10、Mybatis的多表操作"><a href="#10、Mybatis的多表操作" class="headerlink" title="10、Mybatis的多表操作"></a>10、Mybatis的多表操作</h2><h3 id="10-1、一对一的封装查询"><a href="#10-1、一对一的封装查询" class="headerlink" title="10.1、一对一的封装查询()"></a>10.1、一对一的封装查询<resultMap>(<association>)</h3><ul>
<li>Order</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.sql.Timestamp;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> &#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> id;<br>  <span class="hljs-keyword">private</span> java.sql.Timestamp ordertime;<br>  <span class="hljs-keyword">private</span> Double total;<br><br>  <span class="hljs-comment">//表示当前订单属于哪一个用户</span><br>  <span class="hljs-keyword">private</span> User user;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>User</li>
</ul>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> int id;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> username;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> password;<br>    <span class="hljs-keyword">private</span> Date Birthday;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>OrderMapper.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.OrderMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;orderMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--手动指定字段与实体属性的映射关系(column：数据库的字段名称 property：实体的属性名称)--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectOrders&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;orderMap&quot;</span>&gt;</span><br>        select *,o.id oid from `order` o,`user` u where o.uid=u.id<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><association>标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.OrderMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;orderMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--手动指定字段与实体属性的映射关系(column：数据库的字段名称 property：实体的属性名称)--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;Birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;Birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectOrders&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;orderMap&quot;</span>&gt;</span><br>        select *,o.id oid from `order` o,`user` u where o.uid=u.id<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="10-2、一对多或多对一的封装查询"><a href="#10-2、一对多或多对一的封装查询" class="headerlink" title="10.2、一对多或多对一的封装查询+"></a>10.2、一对多或多对一的封装查询<resultMap>+<collection></h3><ul>
<li><collection>标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.UserMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--property:集合名称--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;orderList&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userMap&quot;</span>&gt;</span><br>        select *,o.id oid from `user` u,`order` o where u.id=o.uid<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>User</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> Date Birthday;<br><br>    <span class="hljs-keyword">private</span> List&lt;Order&gt; orderList;<br>    <br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="10-3、多对多的封装查询"><a href="#10-3、多对多的封装查询" class="headerlink" title="10.3、多对多的封装查询+"></a>10.3、多对多的封装查询<resultMap>+<collection></h3><p><img src="/2022/10/21/SSM/WEBRESOURCE3318f9cbd6ce3ab910188e2530281530.png" srcset="/img/loading.gif" lazyload></p>
<p>和一对多相似</p>
<h2 id="11、Mybatis的注解开发"><a href="#11、Mybatis的注解开发" class="headerlink" title="11、Mybatis的注解开发"></a>11、Mybatis的注解开发</h2><h3 id="11-1、MyBatis的常用注解"><a href="#11-1、MyBatis的常用注解" class="headerlink" title="11.1、MyBatis的常用注解"></a>11.1、MyBatis的常用注解</h3><p>这几年来注解开发越来越流行，Mybatis也可以使用注解开发方式，这样我们就可以减少编写Mapper映射文件了。我们先围绕一些基本的CRUD来学习，再学习复杂映射多表操作。</p>
<p>@Insert：实现新增</p>
<p>@Update：实现更新</p>
<p>@Delete：实现删除</p>
<p>@Select：实现查询</p>
<p>@Result：实现结果集封装</p>
<p>@Results：可以与@Result一起使用，封装多个结果集</p>
<p>@One：实现一对一结果集封装</p>
<p>@Many：实现一对多结果集封装</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Results</span>(id=<span class="hljs-string">&quot;groupWithUsers&quot;</span>,<br>         value = &#123; <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;groupId&quot;</span>, column = <span class="hljs-string">&quot;group_id&quot;</span>, id = true),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;name&quot;</span>, column = <span class="hljs-string">&quot;name&quot;</span>), <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;accountId&quot;</span>, column = <span class="hljs-string">&quot;account_id&quot;</span>),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;deleteFlag&quot;</span>, column = <span class="hljs-string">&quot;delete_Flag&quot;</span>),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;parentId&quot;</span>, column = <span class="hljs-string">&quot;parent_Id&quot;</span>), <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;userList&quot;</span>, javaType=List.class, many =<span class="hljs-variable">@Many</span>(select=<span class="hljs-string">&quot;selectUsersByGroupId&quot;</span>), column = <span class="hljs-string">&quot;group_id&quot;</span>)&#125;)<br><span class="hljs-comment">//查询</span><br><span class="hljs-variable">@Select</span>(&#123;<span class="hljs-string">&quot;select * from group where account_id=#&#123;accountId&#125; and delete_flag=0&quot;</span>&#125;)<br>List&lt;Group&gt; <span class="hljs-built_in">selectGroupWithUsers</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">&quot;accountId&quot;</span>) String accountId);<br> <br> <br><span class="hljs-variable">@Select</span>(&#123;<span class="hljs-string">&quot;select u.* from user u&quot;</span>,<br>		<span class="hljs-string">&quot;inner join user_group ug on u.user_id = ug.user_id&quot;</span>,<br>		<span class="hljs-string">&quot;where ug.group_id=#&#123;groupId&#125; and u.delete_flag=0&quot;</span><br>		&#125;)<br>List&lt;User&gt; <span class="hljs-built_in">selectUsersByGroupId</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">&quot;groupId&quot;</span>) String groupId);<br><br></code></pre></td></tr></table></figure>

<h1 id="Spring与Mybatis的整合"><a href="#Spring与Mybatis的整合" class="headerlink" title="Spring与Mybatis的整合"></a>Spring与Mybatis的整合</h1><p><img src="/2022/10/21/SSM/WEBRESOURCEb85f881a311fe197b40fdb3c4fc3abb6.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCEcf8846dd2f2ef47bcf68c2953b23cecd.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCEe3ab70c2f586a09f8fe0b72d88f8b824.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE4231fd93fe416597d86830f309ab8fa7.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE699b422bba9bdd40a84faa2c9f4e5384.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE8353a293c162c1c7728f3312367fad88.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE66cc208e423d6e8b8f8d668663a8361a.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE8c6e280f2ddbec8ec55dacce5b06e0ce.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCEe629d56ba9f288205e6ae57dfd3f1165.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCEb15736c567cc6153e7dfbb2059579fd5.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE9d452d403992cc0392c08a6b5f23a0cd.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="/2022/10/21/SSM/WEBRESOURCE991f998e3da65b66ab134ec7ac50bc7f.png" srcset="/img/loading.gif" lazyload></p>
<p>applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/aop/spring-aop.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/tx</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span><br><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.company.MS1&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspectj-autoproxy</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:annotation-driven</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;txManager&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=false<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Mybatis_config.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>com.company.mapper/ProviderMapper.xml<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-comment">&lt;!-- SqlSessionTemplate--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;sqlSessionTemplate&quot; class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;constructor-arg name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerMapper&quot; class=&quot;com.company.MS1.Mapper.Impl.ProviderMapperImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;sqlSessionTemplate&quot; ref=&quot;sqlSessionTemplate&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;    --&gt;</span><br><br><span class="hljs-comment">&lt;!-- MapperFactoryBean--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerMapper&quot; class=&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;mapperInterface&quot; value=&quot;com.company.MS1.Mapper.ProviderMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerService&quot; class=&quot;com.company.MS1.Service.Impl.ProviderServiceImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;providerMapper&quot; ref=&quot;providerMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;    --&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerService&quot; class=&quot;com.company.MS1.Service.Impl.ProviderServiceImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;providerMapper&quot; ref=&quot;providerMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!-- MapperScannerConfigurer--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;basePackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.company.MS1.Mapper&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--事务处理的配置--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;tx:advice id=&quot;transactionInterceptor&quot; transaction-manager=&quot;txManager&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;tx:attributes&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--            &lt;tx:method name=&quot;select*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--            &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;/tx:attributes&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/tx:advice&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    --&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;aop:config&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* com.company.MS1..*.*(..))&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;aop:advisor advice-ref=&quot;transactionInterceptor&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:advisor&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/aop:config&gt;--&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>

<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  
    <span>></span>
    
  <a href="/categories/Java/SSM/" class="category-chain-item">SSM</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Spring/">#Spring</a>
      
        <a href="/tags/SpringMVC/">#SpringMVC</a>
      
        <a href="/tags/MyBatis/">#MyBatis</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>SSM</div>
      <div>https://kblayt.github.io/2022/10/21/SSM/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Kblayt</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年10月21日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/10/21/python%E5%9F%BA%E7%A1%80/" title="python基础">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">python基础</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/10/21/JavaWeb/" title="JavaWeb">
                        <span class="hidden-mobile">JavaWeb</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
