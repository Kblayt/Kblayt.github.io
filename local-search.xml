<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>JVM</title>
    <link href="/2022/10/26/JVM/"/>
    <url>/2022/10/26/JVM/</url>
    
    <content type="html"><![CDATA[<h1 id="什么是JVM-？"><a href="#什么是JVM-？" class="headerlink" title="什么是JVM  ？"></a>什么是JVM  ？</h1><p> 定义：</p><p>Java Virtual  Machine ＿ java程序的运行环环境（java二进制字节码的运行环境）</p><p>好处：</p><p>一次编写，到处运行</p><p>自动内存管理，垃圾回收功能</p><p>数组下标越界检查</p><p>多态</p><p>比较：</p><p>JVM，JRE，JDK</p><p><img src="/2022/10/26/JVM/63923723e6a1ee131cc1e80176ef78f8.jpeg" alt="63923723e6a1ee131cc1e80176ef78f8"></p><h1 id="学习JVM有什么用"><a href="#学习JVM有什么用" class="headerlink" title="学习JVM有什么用"></a>学习JVM有什么用</h1><p>面试</p><p>理解底层的实现原理</p><p>中高级程序员必备技能</p><p><img src="/2022/10/26/JVM/WEBRESOURCE25e1cb46f11e9645a38327ed44b90a70.png" alt="WEBRESOURCE25e1cb46f11e9645a38327ed44b90a70"></p><p><img src="/2022/10/26/JVM/WEBRESOURCE41561026b067c83cc38dbac758f4c182.png" alt="WEBRESOURCE41561026b067c83cc38dbac758f4c182"></p><p>1、JVM内存结构</p><p>2、GC垃圾回收</p><p>3、Java Class（类的字节码结构、编译器的优化等等）</p><p>4、ClassLoader类加载器</p><p>5、类运行时的一些优化（JIT Compiler即时编译器）</p><h1 id="1、内存结构"><a href="#1、内存结构" class="headerlink" title="1、内存结构"></a>1、内存结构</h1><h2 id="1-1、程序计数器"><a href="#1-1、程序计数器" class="headerlink" title="1.1、程序计数器"></a>1.1、程序计数器</h2><p><img src="/2022/10/26/JVM/WEBRESOURCEcb7171c291b81048105a4fcc1b3adb03.png" alt="WEBRESOURCEcb7171c291b81048105a4fcc1b3adb03"></p><ul><li><p>定义：Program Counter Register 程序计数器（寄存器）</p></li><li><p>Java中虚拟机指令执行流程：将源代码翻译成为jvm指令，再交给解释器，解释器再交给机器码，机器码再交给CPU运行</p></li><li><p>作用：实际上就是在程序运行中记住下一条jvm指令的执行地址</p></li><li><p>物理上实现程序计数器是通过寄存器(读取速度最快的一个单元)来实现的</p></li></ul><p><img src="/2022/10/26/JVM/WEBRESOURCE25c52f6bcc83666a2b7882eeb1aafa8b.png" alt="WEBRESOURCE25c52f6bcc83666a2b7882eeb1aafa8b"></p><ul><li><p>特点：</p></li><li><p>是一块较小的内存空间</p></li><li><p>是线程私有的，随着线程创建而创建，随着线程销毁而销毁</p></li><li><p>不会存在内存溢出</p></li></ul><h2 id="1-2、虚拟机栈"><a href="#1-2、虚拟机栈" class="headerlink" title="1.2、虚拟机栈"></a>1.2、虚拟机栈</h2><p><img src="/2022/10/26/JVM/WEBRESOURCE985e7c0ac9a60d961a873d7fd4404924.png" alt="WEBRESOURCE985e7c0ac9a60d961a873d7fd4404924"></p><h3 id="1-2-1、Java-Virtual-Machine-Stacks-Java虚拟机栈"><a href="#1-2-1、Java-Virtual-Machine-Stacks-Java虚拟机栈" class="headerlink" title="1.2.1、Java Virtual Machine Stacks(Java虚拟机栈)"></a>1.2.1、Java Virtual Machine Stacks(Java虚拟机栈)</h3><p><img src="/2022/10/26/JVM/WEBRESOURCEf9f8514f9942614b9db2a4882858fe5c.png" alt="WEBRESOURCEf9f8514f9942614b9db2a4882858fe5c"></p><ul><li>虚拟机栈：实际上就是线程运行需要的内存空间</li><li>每个栈有多个栈帧(Frame)组成，对应着每次方法调用时所占用的内存</li><li>栈帧：实际上就是每个方法运行时需要的内存</li><li>每个线程只能有一个活动栈帧，对应着当前正在执行的那个方法</li></ul><p><strong>用处：是用来存放在函数中定义的一些基本类型的变量和对象的引用变量</strong></p><p>问题辨析：</p><p>1.垃圾回收是否涉及栈内存？不涉及</p><p>2.栈内存分配越大越好吗？不是</p><p>3.方法内的局部变量是否线程安全？</p><p>如果方法内局部变量没有逃离方法的作用范围，那么它是线程安全的</p><p>如果是局部变量引用了对象，或逃离方法的作用范围，则需要考虑线程安全问题</p><p><img src="/2022/10/26/JVM/WEBRESOURCE478700b79798874b7d2c1a67fac3a8a9.png" alt="WEBRESOURCE478700b79798874b7d2c1a67fac3a8a9"></p><p>只有第一个方法中的sb是线程安全的，另外两个皆是线程不安全的，主要是看</p><h3 id="1-2-2、栈内存溢出"><a href="#1-2-2、栈内存溢出" class="headerlink" title="1.2.2、栈内存溢出"></a>1.2.2、栈内存溢出</h3><p>-Xss256k通过该参数来设置占内存大小</p><p>两种情况会导致占内存溢出(java.lang.StackOverflowError)：</p><ul><li><p>栈帧过多导致占内存溢出(方法递归调用没有限制，或方法循环调用)</p></li><li><p>栈帧过大导致占内存溢出(此类情况不常见)</p></li></ul><h3 id="1-2-3、线程运行诊断"><a href="#1-2-3、线程运行诊断" class="headerlink" title="1.2.3、线程运行诊断"></a>1.2.3、线程运行诊断</h3><p>案例1：cpu占用过多</p><p>解决方案：</p><p>①top命令查看cpu内存使用情况，有无占用cpu极高的进程</p><p>②使用ps H -eo pid,tid,%cpu命令，H意思是打印所有进程中所有线程信息，-eo后面带所感兴趣的内容</p><p>③找到进程中占用cpu过高的线程id</p><p>④使用ps H -eo pid,tid,%cpu | grep 线程id，来筛选出对应占用cpu过高的线程信息</p><p>⑤使用jstack 进程id 命令来查看到底是那个线程出现了问题</p><p>⑥找到对应16进制的nid就是异常线程，进一步定位到出现问题的源代码行数以此来解决问题</p><p><img src="/2022/10/26/JVM/WEBRESOURCE66d1731efb3000fc66666d0183362074.png" alt="WEBRESOURCE66d1731efb3000fc66666d0183362074"></p><p>案列2：程序运行很长时间没有结果</p><p>解决方案：</p><p>①使用jstack 进程id 命令来查看</p><p><img src="/2022/10/26/JVM/WEBRESOURCE18bfa381dad22654f3ac2ccde831e642.png" alt="WEBRESOURCE18bfa381dad22654f3ac2ccde831e642"></p><p><img src="/2022/10/26/JVM/WEBRESOURCEd28878fea598d5b0ce56a9d8156f1569.png" alt="WEBRESOURCEd28878fea598d5b0ce56a9d8156f1569"></p><h2 id="1-3、本地方法栈"><a href="#1-3、本地方法栈" class="headerlink" title="1.3、本地方法栈"></a>1.3、本地方法栈</h2><p><img src="/2022/10/26/JVM/WEBRESOURCE434ca1e65faa9ec0c2881244b85f3961.png" alt="WEBRESOURCE434ca1e65faa9ec0c2881244b85f3961"></p><p>本地方法(Native Method)：指不是由java编写的代码，java无法直接调用一些硬件结构和底层，需要通过C++或C语言的接口来间接调用硬件。</p><h2 id="1-4、堆（Heap）"><a href="#1-4、堆（Heap）" class="headerlink" title="1.4、堆（Heap）"></a>1.4、堆（Heap）</h2><p>定义：</p><ul><li>通过new关键字，创建对象都会使用堆内存</li></ul><p>特点</p><ul><li>它是线程共享的，堆中对象都需要考虑线程安全的问题</li><li>有垃圾回收机制</li></ul><p><strong>用处：是用来存放由new创建的对象和数组，即动态申请的内存都存放在堆内存</strong></p><h3 id="1-4-2、堆内存溢出"><a href="#1-4-2、堆内存溢出" class="headerlink" title="1.4.2、堆内存溢出"></a>1.4.2、堆内存溢出</h3><p>java.lang.OutOfMemoryError</p><p>-Xmx8m 设置堆大小的参数</p><p><img src="/2022/10/26/JVM/WEBRESOURCE5803d56511d00eed793f6dc0d2218794.png" alt="WEBRESOURCE5803d56511d00eed793f6dc0d2218794"></p><h3 id="1-4-3、堆内存诊断"><a href="#1-4-3、堆内存诊断" class="headerlink" title="1.4.3、堆内存诊断"></a>1.4.3、堆内存诊断</h3><p>1、jps工具</p><ul><li>查看当前系统中有哪些java进程</li></ul><p><img src="/2022/10/26/JVM/WEBRESOURCE51d16482e606b4cd95d2f4147ee89ca2.png" alt="WEBRESOURCE51d16482e606b4cd95d2f4147ee89ca2"></p><p>2、jmap工具</p><ul><li><p>jmap -heap 进程id</p></li><li><p>查看堆内存占用情况</p></li></ul><p>3、jconsole工具</p><ul><li>图形界面的，多功能的检测工具，可以连续监测</li></ul><p><img src="/2022/10/26/JVM/WEBRESOURCEa7bec0913fa275fc4bb630c57a6bdd2b.png" alt="WEBRESOURCEa7bec0913fa275fc4bb630c57a6bdd2b"></p><p>4、jvisualvm</p><ul><li>图形界面</li></ul><p><img src="/2022/10/26/JVM/WEBRESOURCEc770e97a68b73a5e3152462fbef6ec97.png" alt="WEBRESOURCEc770e97a68b73a5e3152462fbef6ec97"></p><p>案列</p><ul><li>垃圾回收后，内存占用仍然很高</li></ul><p>解决方案：</p><p>使用jvisualvm进行排查</p><h2 id="1-5、方法区"><a href="#1-5、方法区" class="headerlink" title="1.5、方法区"></a>1.5、方法区</h2><p><img src="/2022/10/26/JVM/WEBRESOURCEe08ac275d90a93d3eb8985ba2171024f.png" alt="WEBRESOURCEe08ac275d90a93d3eb8985ba2171024f"></p><h3 id="1-5-1、Java1-8中对方法中的定义"><a href="#1-5-1、Java1-8中对方法中的定义" class="headerlink" title="1.5.1、Java1.8中对方法中的定义"></a>1.5.1、Java1.8中对方法中的定义</h3><p><img src="/2022/10/26/JVM/WEBRESOURCE7f704c060d981682045cbee26a35eeeb.png" alt="WEBRESOURCE7f704c060d981682045cbee26a35eeeb"></p><h3 id="1-5-2、组成"><a href="#1-5-2、组成" class="headerlink" title="1.5.2、组成"></a>1.5.2、组成</h3><p><img src="/2022/10/26/JVM/WEBRESOURCE3463ee2dc6acab7dccf42a00cd82cbeb.png" alt="WEBRESOURCE3463ee2dc6acab7dccf42a00cd82cbeb"></p><h3 id="1-5-3、方法区内存溢出"><a href="#1-5-3、方法区内存溢出" class="headerlink" title="1.5.3、方法区内存溢出"></a>1.5.3、方法区内存溢出</h3><ul><li>1.8以前会导致永久代内存溢出</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">演示永久代内存溢出 java.lang.OutOfMemoryError: PermGen space<br>-XX:<span class="hljs-attribute">MaxPermSize</span>=8m<br></code></pre></td></tr></table></figure><ul><li>1.8之后会导致元空间内存溢出</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">演示元空间内存溢出 java.lang.OutOfMemoryError: Metaspace<br>-XX:<span class="hljs-attribute">MaxMetaspaceSize</span>=8M<br></code></pre></td></tr></table></figure><p>反编译指令：<img src="/2022/10/26/JVM/image-20221026091351137.png" alt="image-20221026091351137"></p><p><strong>javap</strong>的使用</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">javap </span>是<span class="hljs-keyword">JDK自带的反汇编器，可以查看java编译器为我们生成的字节码。通过它，我们可以对照源代码和字节码，从而了解很多编译器内部的工作。</span><br><span class="hljs-keyword"></span>语法：<br>　　 <span class="hljs-keyword">javap </span>[ 命令选项 ] class. . .<br>　　 <span class="hljs-keyword">javap </span>命令用于解析类文件。其输出取决于所用的选项。若没有使用选项， <span class="hljs-keyword">javap </span>将输出传递给它的类的 public 域及方法。 <span class="hljs-keyword">javap </span>将其输出到标准输出设备上。<br>命令选项<br>　　-help 输出 <span class="hljs-keyword">javap </span>的帮助信息。<br>　　-l 输出行及局部变量表。<br>　　-<span class="hljs-keyword">b </span>确保与 <span class="hljs-keyword">JDK </span><span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-keyword">javap </span>的向后兼容性。<br>　　-public 只显示 public 类及成员。<br>　　-protected 只显示 protected 和 public 类及成员。<br>　　-package 只显示包、protected 和 public 类及成员。这是缺省设置。<br>　　-private 显示所有类和成员。<br>　　-<span class="hljs-keyword">J[flag] </span>直接将 flag 传给运行时系统。<br>　　-s 输出内部类型签名。<br>　　-c 输出类中各方法的未解析的代码，即构成 <span class="hljs-keyword">Java </span>字节码的指令。<br>　　-verbose 输出堆栈大小、各方法的 locals 及 args 数,以及class文件的编译版本<br>　　-classpath[路径] 指定 <span class="hljs-keyword">javap </span>用来查找类的路径。如果设置了该选项，则它将覆盖缺省值或 CLASSPATH 环境变量。目录用冒号分隔。<br> 　 -<span class="hljs-keyword">bootclasspath[路径] </span>指定加载自举类所用的路径。缺省情况下，自举类是实现核心 <span class="hljs-keyword">Java </span>平台的类，位于 <span class="hljs-keyword">jrelib下面。</span><br><span class="hljs-keyword"></span>　　-<span class="hljs-keyword">extdirs[dirs] </span>覆盖搜索安装方式扩展的位置。扩展的缺省位置是 <span class="hljs-keyword">jrelibext。</span><br></code></pre></td></tr></table></figure><h3 id="1-5-4、运行时常量池"><a href="#1-5-4、运行时常量池" class="headerlink" title="1.5.4、运行时常量池"></a>1.5.4、运行时常量池</h3><ul><li>常量池，就是一张表，虚拟机指令根据这张常量表找到要执行的类名、方法名、参数类型、字面量等信息</li><li>运行时常量池，常量池是*.class文件中的，当该类被加载，它的常量池信息就会放入运行时常量池，并把里面的符号地址变为真实地址</li></ul><h3 id="1-5-5、StringTable"><a href="#1-5-5、StringTable" class="headerlink" title="1.5.5、StringTable"></a>1.5.5、StringTable</h3><p><img src="/2022/10/26/JVM/image-20221026095722397.png" alt="image-20221026095722397"></p><ol><li>常量池中的信息，都会被加载到运行时常量池中，这时a、b、ab都是常量池中的符号，还没有变为java字符串对象</li><li>当程序运行到该处时ldc #7会把a符号变为“a”字符串对象此时串池StringTable[]若没有“a”对象就会把对象“a”放入串池StringTable[“a”]、ldc #9会把b符号变为“b”字符串对象此时串池StringTable[“a”]若没有“a”对象就会把对象“a”放入串池StringTable[“a”,”b”]、ldc #11会把ab符号变为“ab”字符串对象此时串池StringTable[“a”,”b”]若没有“a”对象就会把对象“a”放入串池StringTable[“a”,”b”,”ab”]</li></ol><p><strong>StringTable特性</strong></p><ul><li>常量池中的字符串仅是符号，第一次用到时才变为对象</li><li>利用串池的机制，来避免重复创建字符串对象</li><li>字符串变量拼接的原理时StringBuilder(1.8)</li><li>字符串常量拼接的原理时编译期优化</li><li>可以使用intern方法，主动将串池中还没有的字符串对象放入串池<ul><li>jdk1.8将这个字符串对象尝试放入串池，<strong>如果有则并不会放入，如果没有则把元对象放入串池，会把串池中的对象返回</strong></li><li>jdk1.6将这个字符串对象尝试放入串池，<strong>如果有则并不会放入，如果没有会把此对象复制一份（副本跟原对象不同），将副本放入串池，会把串池中的副本对象返回</strong></li></ul></li></ul><h3 id="1-5-6、StringTable位置"><a href="#1-5-6、StringTable位置" class="headerlink" title="1.5.6、StringTable位置"></a>1.5.6、StringTable位置</h3><p><img src="/2022/10/26/JVM/WEBRESOURCE3463ee2dc6acab7dccf42a00cd82cbeb.png" alt="WEBRESOURCE3463ee2dc6acab7dccf42a00cd82cbeb"></p><h3 id="1-5-7、StringTable垃圾回收"><a href="#1-5-7、StringTable垃圾回收" class="headerlink" title="1.5.7、StringTable垃圾回收"></a>1.5.7、StringTable垃圾回收</h3><h3 id="1-5-8、性能调优"><a href="#1-5-8、性能调优" class="headerlink" title="1.5.8、性能调优"></a>1.5.8、性能调优</h3><ul><li>调整 -XX:StringTableSize&#x3D;桶个数</li><li>考虑将字符串对象是否入池</li></ul><h2 id="1-6、直接内存（操作系统的内存）"><a href="#1-6、直接内存（操作系统的内存）" class="headerlink" title="1.6、直接内存（操作系统的内存）"></a>1.6、直接内存（操作系统的内存）</h2><h3 id="1-6-1、Direct-Memory"><a href="#1-6-1、Direct-Memory" class="headerlink" title="1.6.1、Direct Memory"></a>1.6.1、Direct Memory</h3><ul><li>常见于NIO操作时，用于数据缓冲区</li><li>分配回收成本较高，但读写性能高</li><li>不受JVM内存回收管理</li></ul><p>传统IO流文件读写过程：</p><p><img src="/2022/10/26/JVM/image-20221026170923648.png" alt="image-20221026170923648"></p><p>NIO文件读写过程</p><p><img src="/2022/10/26/JVM/image-20221026171211997.png" alt="image-20221026171211997"></p><h2 id="1-6-2、分配和回收原理"><a href="#1-6-2、分配和回收原理" class="headerlink" title="1.6.2、分配和回收原理"></a>1.6.2、分配和回收原理</h2><ul><li>使用了Unsafe对象 完成直接内存的分配回收，并且回收需要主动调用freeMemory方法</li><li>ByteBuffer的实现类内部，使用了Cleaner（虚引用）来检测ByteBuffer对象，一旦ByteBuffer对象被垃圾回收，那么就会由ReferenceHandler线程通过Cleaner的clean方法调用freeMemory来释放直接内存</li></ul><p>-XX:+DisableExplicitGC （禁用显示的垃圾回收）也就是代码中的System.gc()</p><h1 id="2、垃圾回收"><a href="#2、垃圾回收" class="headerlink" title="2、垃圾回收"></a>2、垃圾回收</h1><h2 id="2-1、如何判断对象可以回收？"><a href="#2-1、如何判断对象可以回收？" class="headerlink" title="2.1、如何判断对象可以回收？"></a>2.1、如何判断对象可以回收？</h2><h3 id="2-1-1、引用计数法"><a href="#2-1-1、引用计数法" class="headerlink" title="2.1.1、引用计数法"></a>2.1.1、引用计数法</h3><p><strong>概念：</strong>只要一个对象被其他变量所引用，那我就让这个对象的计数加一，如果它被引用了两次那就让它的计数变成二，如果某个变量不再引用它了那么就让它的计数减一，当这个对象的引用计数变为零的时候那就意味着没有人引用它了，那么它就会被垃圾回收。</p><p><strong>问题：</strong>循环引用</p><p><img src="/2022/10/26/JVM/image-20221027085226369.png" alt="image-20221027085226369"></p><p>此时A、B的引用计数都为1，但没有对象使用他们了，又由于他们的引用计数都不唯一导致它们不能被垃圾回收。（早期python在垃圾回收时就采用了引用技术的算法。）</p><h3 id="2-1-2、可达性分析法"><a href="#2-1-2、可达性分析法" class="headerlink" title="2.1.2、可达性分析法"></a>2.1.2、可达性分析法</h3><p><strong>概念：</strong>首先会确定一系列根对象，根对象就是那些肯定不能当成垃圾被回收的对象。在垃圾回收之前首先会对堆中的所有对象进行一边扫描，看看哪些对象会被根对象直接或间接的引用，如果是这个对象就不能被回收，反之可以被回收。</p><ul><li>Java虚拟机中的垃圾回收器采用可达性分析算法来探索所有存活的对象</li><li>扫描堆中的对象，看是否能够沿着GC Root对象为起点的引用链找到该对象，找不到，表示可以回收</li><li>哪些对象可以作为GC Root？（System Class、Native Stack、Thread、Busy Monitor）</li></ul><p>使用过eclipse提供的Memory Analyzer(MAT)来帮助分析。</p><p>为了配合MAT的使用先运行起来再通过jmap快照抓取下来再用MAT进行分析。</p><h3 id="2-1-3、四种引用"><a href="#2-1-3、四种引用" class="headerlink" title="2.1.3、四种引用"></a>2.1.3、四种引用</h3><p><img src="/2022/10/26/JVM/image-20221027092433116.png" alt="image-20221027092433116"></p><h4 id="2-1-3-1、强引用"><a href="#2-1-3-1、强引用" class="headerlink" title="2.1.3.1、强引用"></a>2.1.3.1、强引用</h4><ul><li><p>定义：沿着某个GC Root的引用链能够找到的对象就属于强引用。</p></li><li><p>回收条件：只有当所有强引用都断开时该对象才能被垃圾回收。</p></li></ul><h4 id="2-1-3-2、软引用"><a href="#2-1-3-2、软引用" class="headerlink" title="2.1.3.2、软引用"></a>2.1.3.2、软引用</h4><ul><li><p>仅有软引用引用过该对象时，在垃圾回收后，内存仍不足时会再次触发垃圾回收，回收引用对象</p></li><li><p>可以配合引用队列来释放软引用自身</p></li></ul><h4 id="2-1-3-3、弱引用"><a href="#2-1-3-3、弱引用" class="headerlink" title="2.1.3.3、弱引用"></a>2.1.3.3、弱引用</h4><ul><li>仅有弱引用引用该对象时，在垃圾回收时，无论内存是否充足，都会回收弱引用对象</li><li>可以配合引用队列来释放弱引用自身</li></ul><h4 id="2-1-3-4、虚引用"><a href="#2-1-3-4、虚引用" class="headerlink" title="2.1.3.4、虚引用"></a>2.1.3.4、虚引用</h4><ul><li>必须配合引用该队列使用，主要配合ByteBuffer使用，被引用对象回收时，会将虚引用入队，由Reference Handler线程调用虚拟引用相关方法释放直接内存</li></ul><h4 id="2-1-3-5、终结器引用"><a href="#2-1-3-5、终结器引用" class="headerlink" title="2.1.3.5、终结器引用"></a>2.1.3.5、终结器引用</h4><ul><li>必须配合引用该队列使用，无需手动编码，但其内部配合引用队列使用，在垃圾回收时，终结器引用入队(被引用对象暂时没看被回收)，再由Finalizer线程通过终结器引用找到被引用对象并调用它的finalize方法，第二次GC时才能回收被引用对象。</li></ul><p><strong>软引用实例：</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示软引用, 配合引用队列</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo2_4</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-built_in">int</span> _4MB = <span class="hljs-number">4</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        List&lt;SoftReference&lt;<span class="hljs-built_in">byte</span>[]&gt;&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br><br>        <span class="hljs-comment">// 引用队列</span><br>        ReferenceQueue&lt;<span class="hljs-built_in">byte</span>[]&gt; queue = <span class="hljs-keyword">new</span> ReferenceQueue&lt;&gt;();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            <span class="hljs-comment">// 关联了引用队列， 当软引用所关联的 byte[]被回收时，软引用自己会加入到 queue 中去</span><br>            SoftReference&lt;<span class="hljs-built_in">byte</span>[]&gt; <span class="hljs-keyword">ref</span> = <span class="hljs-keyword">new</span> SoftReference&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[_4MB], queue);<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">ref</span>.<span class="hljs-keyword">get</span>());<br>            list.<span class="hljs-keyword">add</span>(<span class="hljs-keyword">ref</span>);<br>            System.<span class="hljs-keyword">out</span>.println(list.size());<br>        &#125;<br><br>        <span class="hljs-comment">// 从队列中获取无用的 软引用对象，并移除</span><br>        Reference&lt;? extends <span class="hljs-built_in">byte</span>[]&gt; poll = queue.poll();<br>        <span class="hljs-keyword">while</span>( poll != <span class="hljs-literal">null</span>) &#123;<br>            list.<span class="hljs-keyword">remove</span>(poll);<br>            poll = queue.poll();<br>        &#125;<br><br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;===========================&quot;</span>);<br>        <span class="hljs-keyword">for</span> (SoftReference&lt;<span class="hljs-built_in">byte</span>[]&gt; reference : list) &#123;<br>            System.<span class="hljs-keyword">out</span>.println(reference.<span class="hljs-keyword">get</span>());<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>弱引用实例</strong>：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示弱引用</span><br><span class="hljs-comment"> * -Xmx20m -XX:+PrintGCDetails -verbose:gc</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo2_5</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-built_in">int</span> _4MB = <span class="hljs-number">4</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        <span class="hljs-comment">//  list --&gt; WeakReference --&gt; byte[]</span><br>        List&lt;WeakReference&lt;<span class="hljs-built_in">byte</span>[]&gt;&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            WeakReference&lt;<span class="hljs-built_in">byte</span>[]&gt; <span class="hljs-keyword">ref</span> = <span class="hljs-keyword">new</span> WeakReference&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[_4MB]);<br>            list.<span class="hljs-keyword">add</span>(<span class="hljs-keyword">ref</span>);<br>            <span class="hljs-keyword">for</span> (WeakReference&lt;<span class="hljs-built_in">byte</span>[]&gt; w : list) &#123;<br>                System.<span class="hljs-keyword">out</span>.print(w.<span class="hljs-keyword">get</span>()+<span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>            System.<span class="hljs-keyword">out</span>.println();<br><br>        &#125;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;循环结束：&quot;</span> + list.size());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-1-4、垃圾回收算法"><a href="#2-1-4、垃圾回收算法" class="headerlink" title="2.1.4、垃圾回收算法"></a>2.1.4、垃圾回收算法</h3><h4 id="2-1-4-1、标记清除"><a href="#2-1-4-1、标记清除" class="headerlink" title="2.1.4.1、标记清除"></a>2.1.4.1、标记清除</h4><p>定义：Mark Sweep</p><p><img src="/2022/10/26/JVM/image-20221027135600774.png" alt="image-20221027135600774"></p><p>优点：速度快</p><p>缺点：容易产生内存碎片</p><h4 id="2-1-4-2、标记整理"><a href="#2-1-4-2、标记整理" class="headerlink" title="2.1.4.2、标记整理"></a>2.1.4.2、标记整理</h4><p>定义：Mark Compact</p><p><img src="/2022/10/26/JVM/image-20221027135813905.png" alt="image-20221027135813905"></p><p>优点：不会产生内存碎片</p><p>缺点：效率比较低</p><h4 id="2-1-4-3、复制"><a href="#2-1-4-3、复制" class="headerlink" title="2.1.4.3、复制"></a>2.1.4.3、复制</h4><p>定义：Copy</p><p><img src="/2022/10/26/JVM/image-20221027135944213.png" alt="image-20221027135944213"></p><p><img src="/2022/10/26/JVM/image-20221027135957779.png" alt="image-20221027135957779"></p><p><img src="/2022/10/26/JVM/image-20221027140013820.png" alt="image-20221027140013820"> </p><p><img src="/2022/10/26/JVM/image-20221027140030356.png" alt="image-20221027140030356"></p><p>优点：不会产生内存碎片</p><p>缺点：会占用双倍的内存空间</p><h2 id="2-2、分代垃圾回收"><a href="#2-2、分代垃圾回收" class="headerlink" title="2.2、分代垃圾回收"></a>2.2、分代垃圾回收</h2><p><strong>老年代：</strong>Java中长时间使用（长时间存活）的对象存储在老年代当中，老年代的垃圾回收很久才发生一次</p><p><strong>新生代</strong>：Java中用完了就可以丢弃的（朝生幕死）对象存储在新生代当中，新生代的垃圾回收(Minor GC)发生的比较频繁</p><p><img src="/2022/10/26/JVM/image-20221027140540693.png" alt="image-20221027140540693"></p><p><strong>分代垃圾回收的执行顺序：</strong></p><p><img src="/2022/10/26/JVM/image-20221027141430630.png" alt="image-20221027141430630"></p><ul><li><p>对象首先分配在伊甸园区域</p></li><li><p>当新生代空间不足时，触发minor GC，伊甸园和from存活的对象使用copy算法复制到to中，存活的对象年龄加一并且交换from和to</p></li><li><p>minor GC会引发stop the world，暂停其它用户的线程，等垃圾回收结束，用户线程才恢复运行</p></li><li><p>当对象寿命超过阈值时，会晋升至老年代，最大寿命是15（4bit）</p></li><li><p>当老年代空间不足，会尝试先出发minor GC，如果之后仍空间不足，那么会触发full GC(STW的时间更长)。</p></li><li><p>如果full GC之后空间仍不足，则会触发OOM(Out Of Memory)异常</p><p><strong>相关VM参数</strong></p><table><thead><tr><th>含义</th><th>参数</th></tr></thead><tbody><tr><td>堆初始大小</td><td>-Xms</td></tr><tr><td>堆最大大小</td><td>-Xmx或-XX:MaxHeapSize&#x3D;size</td></tr><tr><td>新生代大小</td><td>-Xmn或（-XX:NewSize&#x3D;size + -XX:MaxNewSize&#x3D;size）</td></tr><tr><td>幸存区比例（动态）</td><td>-XX:InitialSurvivorRatio&#x3D;ratio和-XX:+UseAdaptiveSizePolicy</td></tr><tr><td>幸存区比例</td><td>-XX:SurvivorRatio&#x3D;ratio</td></tr><tr><td>晋升阈值</td><td>-XX:MaxTenuringThreshold&#x3D;threshold</td></tr><tr><td>晋升详情</td><td>-XX:+PrintTenuringDistribution</td></tr><tr><td>GC详情</td><td>-XX:+PrintGCDetails -verbose:gc</td></tr><tr><td>Full GC 前 Minor GC</td><td>-XX:+ScavengeBeforeFullGC</td></tr></tbody></table></li></ul><h2 id="2-3、垃圾回收器"><a href="#2-3、垃圾回收器" class="headerlink" title="2.3、垃圾回收器"></a>2.3、垃圾回收器</h2><h2 id="2-4、垃圾回收调优"><a href="#2-4、垃圾回收调优" class="headerlink" title="2.4、垃圾回收调优"></a>2.4、垃圾回收调优</h2><h1 id="3、类加载与字节码技术"><a href="#3、类加载与字节码技术" class="headerlink" title="3、类加载与字节码技术"></a>3、类加载与字节码技术</h1><h1 id="4、内存模型"><a href="#4、内存模型" class="headerlink" title="4、内存模型"></a>4、内存模型</h1>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>JVM</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git提交项目笔记</title>
    <link href="/2022/10/22/Git%E6%8F%90%E4%BA%A4%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/10/22/Git%E6%8F%90%E4%BA%A4%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>1、打开想要提交或者克隆的项目文件夹</p><p>2、进入该文件夹打开Git Bash Here</p><p>3、初始化用户，告诉git你是谁</p><ul><li><p>git config –global user.name “你的名字或昵称”</p></li><li><p>git config –global user.email “你的邮箱”</p></li></ul><p>4、在该文件夹中执行下面命令，完成初始化</p><ul><li><p>git init</p></li><li><p>git remote add origin &lt;项目地址&gt; &#x2F;&#x2F;注:项目地址形式为:<a href="https://gitee.com/xxx/xxx.git%E6%88%96%E8%80%85">https://gitee.com/xxx/xxx.git或者</a> <a href="mailto:&#x67;&#105;&#x74;&#x40;&#103;&#105;&#116;&#x65;&#x65;&#46;&#x63;&#x6f;&#109;">&#x67;&#105;&#x74;&#x40;&#103;&#105;&#116;&#x65;&#x65;&#46;&#x63;&#x6f;&#109;</a>:xxx&#x2F;xxx.git</p></li><li><p>如果提交到github上则为： https:&#x2F;&#x2F;&lt;Personal access tokens(自己github上的tokens)&gt;@github.com&#x2F;Kblayt&#x2F;Kblayt.github.io.git</p></li></ul><p>5、若想克隆，只需要执行命令</p><ul><li>git clone &lt;项目地址&gt; &#x2F;&#x2F;注:项目地址形式为:<a href="https://gitee.com/xxx/xxx.git%E6%88%96%E8%80%85">https://gitee.com/xxx/xxx.git或者</a> <a href="mailto:&#x67;&#105;&#116;&#64;&#103;&#x69;&#116;&#101;&#x65;&#46;&#x63;&#x6f;&#x6d;">&#x67;&#105;&#116;&#64;&#103;&#x69;&#116;&#101;&#x65;&#46;&#x63;&#x6f;&#x6d;</a>:xxx&#x2F;xxx.git</li></ul><p>6、进入已经初始化好的或者克隆项目的目录然后执行：</p><p>从服务器下更新项目，因为已经clone过，所以不需要再更新</p><ul><li>git pull origin master</li></ul><p>7、做一些修改后执行如下命令完成一次完整的提交</p><ul><li><p>git add .</p></li><li><p>git commit -m “安装教程测试”</p></li><li><p>git push origin master</p></li></ul><p>注意：提交命令有两个，git push origin master（正常提交）和git push origin master -f（强制提交，强制提交可能会把之前的commit注释信息，不会改变修改的代码，慎用），都是提交到master分支 其他常见git命令</p><ul><li><p>查看所有分支 ：git branch -a</p></li><li><p>切换到某一分支：git checkout 分支名称</p></li><li><p>合并分支：git merge 原分支 目标分支</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>项目管理工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>gitee</tag>
      
      <tag>github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大数据</title>
    <link href="/2022/10/21/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    <url>/2022/10/21/%E5%A4%A7%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>大数据</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>增强学习</title>
    <link href="/2022/10/21/%E5%A2%9E%E5%BC%BA%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/10/21/%E5%A2%9E%E5%BC%BA%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>增强学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>深度学习</title>
    <link href="/2022/10/21/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/10/21/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>深度学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>机器学习</title>
    <link href="/2022/10/21/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/10/21/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>机器学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python基础</title>
    <link href="/2022/10/21/python%E5%9F%BA%E7%A1%80/"/>
    <url>/2022/10/21/python%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Python基础</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SSM</title>
    <link href="/2022/10/21/SSM/"/>
    <url>/2022/10/21/SSM/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h2 id="1、Spring是什么"><a href="#1、Spring是什么" class="headerlink" title="1、Spring是什么"></a>1、Spring是什么</h2><p>Spring是分层的Java  SE&#x2F;EE应用full-stack轻量级开源框架，以IoC(Inverse  Of  Control)和 AOP(Aspect  Oriented  Programming面向切面编程)为内核。</p><p>提供了展现层SpringMVC和持久层Spring  JDBCTemplate以及业务层事务管理等众多的企业级应用技术，还能整合开源世界众多著名的第三方框架和类库，逐渐成为使用最多的Java EE企业应用开源框架。</p><h2 id="2、Spring的发展历程"><a href="#2、Spring的发展历程" class="headerlink" title="2、Spring的发展历程"></a>2、Spring的发展历程</h2><p>略</p><h2 id="3、Spring的优势"><a href="#3、Spring的优势" class="headerlink" title="3、Spring的优势"></a>3、Spring的优势</h2><p>①方便接偶，简化开发</p><p>通过Spring提供的IoC容器，可以将对象的依赖关系交由Spring进行控制，避免硬编码所造成的过度耦合。用户也不必再为了单列模式、属性文件解析等这些很低层的需求写代码，可以更专注于上层的应用。</p><p>②AOP编程的支持</p><p>通过Spring的AOP功能，方便进行面向切面编程，许多不容易用传统OOP实现的功能可以通过AOP轻松实现。</p><p>③声明式事物的支持</p><p>可以将我们从单调烦闷的事务管理代码中解脱出来，通过声明方式灵活的进行事务管理，提高开发效率。</p><p>④方便程序的测试</p><p>可以用非容器依赖的编程方式进行几乎所有的测试工作，测试不再是昂贵的操作，而是随手可做的事情。</p><p>⑤方便集成各种优秀的框架</p><p>Spring对各种优秀框架（Struts、Hibernate、Hessian、Quartz等）的支持。</p><p>⑥降低JavaEE  API的使用难度</p><p>Spring对JavaEE  API（如JDBC、JavaMail、远程调用等）进行了薄薄的封装，使这些API的使用难度大为降低。</p><p>⑦Java源码是经典学习范例</p><p>Spring的源代码设计精妙、结构清晰、匠心独用，处处体现着大师对Java设计模式灵活运用以及对Java技术的高深造诣。它的源代码无疑是Java技术的最佳实践的范例。</p><h2 id="4、Spring的体系结构"><a href="#4、Spring的体系结构" class="headerlink" title="4、Spring的体系结构"></a>4、Spring的体系结构</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE3d63121abd7d1f5de2a13d0783ec8f5f.png"></p><p>Instrumentation（仪表）</p><h2 id="5、Spring快速入门"><a href="#5、Spring快速入门" class="headerlink" title="5、Spring快速入门"></a>5、Spring快速入门</h2><h3 id="5-1、Spring程序开发步骤"><a href="#5-1、Spring程序开发步骤" class="headerlink" title="5.1、Spring程序开发步骤"></a>5.1、Spring程序开发步骤</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE8d942c7c5823ee45b5ffa5a18f3d5f2a.png"></p><p>①使用Maven导入Spring开发的基本jar包</p><p>②编写Dao接口和实现类</p><p>③创建Spring核心配置文件</p><p>④在Spring配置文件中配置UserDaoImpl</p><p>⑤使用Spring的API获得Bean实例</p><h3 id="5-2、Spring快速入门代码实现"><a href="#5-2、Spring快速入门代码实现" class="headerlink" title="5.2、Spring快速入门代码实现"></a>5.2、Spring快速入门代码实现</h3><p>Spring的开发步骤</p><p>①导入jar包</p><p>②创建Bean</p><p>③创建applicationContext.xml</p><p>④在配置文件中进行配置</p><p>⑤创建ApplicationContext对象getBean</p><h2 id="6、Spring配置文件"><a href="#6、Spring配置文件" class="headerlink" title="6、Spring配置文件"></a>6、Spring配置文件</h2><h3 id="6-1、Bean标签的基本配置"><a href="#6-1、Bean标签的基本配置" class="headerlink" title="6.1、Bean标签的基本配置"></a>6.1、Bean标签的基本配置</h3><p>用于配置对象交由Spring来创建</p><p>默认情况下它调用的是类中的无参构造函数，如果没有无参构造函数则不能创建成功</p><p>基本属性：</p><ul><li><p>id：Bean实例在Spring容器中的唯一表示</p></li><li><p>class：Bean的全限定名称</p></li></ul><h3 id="6-2、Bean标签范围配置"><a href="#6-2、Bean标签范围配置" class="headerlink" title="6.2、Bean标签范围配置"></a>6.2、Bean标签范围配置</h3><p>scope：指对象的作用范围，取值如下：</p><p><img src="/2022/10/21/SSM/WEBRESOURCE813ac7758ad458ec25b49d81b1bff4ea.png"></p><p>①当scope的取值为singleton时</p><p>Bean的实例化个数：1个</p><p>Bean的实例化时机：当Spring核心文件被加载时，实例化配置的Bean实例</p><p>Bean的生命周期：</p><ul><li><p>对象创建：当应用加载，创建容器时，对象就被创建了</p></li><li><p>对象运行：只要容器在，对象一直活着</p></li><li><p>对象销毁：当应用卸载，销毁容器时，对象就被销毁了</p></li></ul><p>②当scope的取值为prototype时</p><p>Bean的实例化个数：多个</p><p>Bean的实例化时机：当调用getBean()方法时实例化Bean</p><p>Bean的生命周期：</p><ul><li><p>对象创建：当使用对象时，创建新的对象实例</p></li><li><p>对象运行：只要对象在使用中，就一直或者</p></li><li><p>对象销毁：当对象长时间不用时，被Java的垃圾回收器(GC)回收了</p></li></ul><h3 id="6-3、Bean生命周期配置"><a href="#6-3、Bean生命周期配置" class="headerlink" title="6.3、Bean生命周期配置"></a>6.3、Bean生命周期配置</h3><ul><li><p>init-method：指定类中的初始化方法名称</p></li><li><p>destroy-mothod：指定类中销毁方法名称</p></li></ul><h3 id="6-4、Bean实例化三种方式"><a href="#6-4、Bean实例化三种方式" class="headerlink" title="6.4、Bean实例化三种方式"></a>6.4、Bean实例化三种方式</h3><ul><li><p>无参构造方法实例化（最常用）</p></li><li><p>工厂静态方法实例化</p></li><li><p>工厂实例方法实例化</p></li></ul><h3 id="6-5、Bean的依赖注入分析"><a href="#6-5、Bean的依赖注入分析" class="headerlink" title="6.5、Bean的依赖注入分析"></a>6.5、Bean的依赖注入分析</h3><p>目前UserService实例和UserDao实例都存在与Spring容器中，当前的做法时在容器外部获得UserService实例和UserDao实例，然后在程序中进行结合。</p><p><img src="/2022/10/21/SSM/WEBRESOURCEf9fe0e28d90d88a4229bd9c6ffc30eb8.png"></p><p>因为UserService和UserDao都在Spring容器中，而最终程序直接使用的时UserService，所以可以在Spring容器中，将UserDao设置到UserService内部。</p><p><img src="/2022/10/21/SSM/WEBRESOURCE32c2321410fb1800364b5f6200cd8bb4.png"></p><h3 id="6-6、Bean的依赖注入概念"><a href="#6-6、Bean的依赖注入概念" class="headerlink" title="6.6、Bean的依赖注入概念"></a>6.6、Bean的依赖注入概念</h3><p>依赖注入（Dependency Injection）：它是Spring框架核心IOC的具体实现。</p><p>在编写程序时，通过控制反转，把对象的创建交给了Spring，但是代码中不可能出现没有依赖的情况。IOC解耦只是降低他们的依赖关系，但不会消除。例如：业务层仍会调用持久层的方法。</p><p>那这种业务层和持久层的依赖关系，在使用Spring之后，就让Spring来维护了。</p><p>简单的说，就是坐等框架把持久层对象传入业务层，而不用我们自己去获取。</p><p>如何将UserDao注入到UserService内部呢？</p><ul><li><p>set方法</p></li><li><p>构造方法</p></li></ul><p>具体实现为：</p><ul><li>set方法</li></ul><p>1）set方法①</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;<br>        &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 15:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserDao</span> userDao;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUserDao</span>(<span class="hljs-params">UserDao userDao</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">userDao</span> = userDao;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        userDao.<span class="hljs-title function_">save</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2）set方法②</p><p>P命名空间注入本质也是set方法注入，但比起上述的set方法注入更加方便，主要体现在配置文件中，如下：</p><p>首先，需要引入P命名空间：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">xmlns:</span>p=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span><br></code></pre></td></tr></table></figure><p>其次，需要修改注入方式</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span> p:<span class="hljs-attribute">userDao-ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><ul><li>构造方法</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;bean id<span class="hljs-operator">=</span><span class="hljs-string">&quot;userService&quot;</span> class<span class="hljs-operator">=</span><span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;<br>        &lt;constructor-arg name<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span> ref<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span>&gt;&lt;/constructor-arg&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 15:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">(UserDao userDao)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userDao = userDao;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.save();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="6-7、Bean的依赖注入的数据类型"><a href="#6-7、Bean的依赖注入的数据类型" class="headerlink" title="6.7、Bean的依赖注入的数据类型"></a>6.7、Bean的依赖注入的数据类型</h3><p>上面的操作，都是注入的引用Bean，除了对象的引用可以注入，普通数据类型或集合都可以在容器中进行注入</p><p>注入数据的三种数据类型</p><ul><li><p>普通数据类型</p></li><li><p>引用数据类型(UserDao引用注入到UserService，就是对象引用数据类型注入，6.6已讲)</p></li><li><p>集合数据类型</p></li></ul><p>具体实现为：</p><ul><li>普通数据类型</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;bean id<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span> class<span class="hljs-operator">=</span><span class="hljs-string">&quot;com.company.SpringIoC.dao.impl.UserDaoImpl&quot;</span>&gt;<br>        &lt;property name<span class="hljs-operator">=</span><span class="hljs-string">&quot;age&quot;</span> value<span class="hljs-operator">=</span><span class="hljs-string">&quot;18&quot;</span>&gt;&lt;/property&gt;<br>        &lt;property name<span class="hljs-operator">=</span><span class="hljs-string">&quot;name&quot;</span> value<span class="hljs-operator">=</span><span class="hljs-string">&quot;lhg&quot;</span>&gt;&lt;/property&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 14:22</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br>    <span class="hljs-keyword">private</span> int age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAge</span>(<span class="hljs-params">int age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(name+<span class="hljs-string">&quot;===&quot;</span>+age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>集合数据类型</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 14:22</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; strList;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,<span class="hljs-title class_">User</span>&gt; userMap;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Properties</span> properties;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setStrList</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">String</span>&gt; strList</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">strList</span> = strList;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUserMap</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, User&gt; userMap</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">userMap</span> = userMap;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setProperties</span>(<span class="hljs-params">Properties properties</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">properties</span> = properties;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(strList);<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(userMap);<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(properties);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;strList&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ccc<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userMap&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;u1&quot;</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">&quot;user1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;u2&quot;</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">&quot;user2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;properties&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p1&quot;</span>&gt;</span>111<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p2&quot;</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p3&quot;</span>&gt;</span>333<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.pojo.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;tom&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addr&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;hunan&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.pojo.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;lucy&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addr&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;beijing&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="/2022/10/21/SSM/WEBRESOURCE73f60dd7a65c6fabf702d4fd708eb887.png"></p><h3 id="6-8、引入其他配置文件-分模块开发"><a href="#6-8、引入其他配置文件-分模块开发" class="headerlink" title="6.8、引入其他配置文件(分模块开发)"></a>6.8、引入其他配置文件(分模块开发)</h3><p>实际开发中，Spring的配置内容非常多，这就导致Spring配置很繁杂且体积很大，所以，可以将部分配置拆解到其他配置文件中，而在Spring主配置文件通过import标签进行加载。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;import <span class="hljs-attribute">resource</span>=<span class="hljs-string">&quot;applicationContext-xxx.xml&quot;</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="/2022/10/21/SSM/WEBRESOURCE2299298cb398a2e87776ae85270644fb.png"></p><p>applicationContext.xml引用applicationContext-product.xml和applicationContext-user.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-product.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">import</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-user.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">import</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="6-9、Spring的重点配置知识要点"><a href="#6-9、Spring的重点配置知识要点" class="headerlink" title="6.9、Spring的重点配置知识要点"></a>6.9、Spring的重点配置知识要点</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE3603690e2304b8b167a9a91cd09f8848.png"></p><h2 id="7、Spring相关API"><a href="#7、Spring相关API" class="headerlink" title="7、Spring相关API"></a>7、Spring相关API</h2><h3 id="7-1、ApplicationContext的继承体系"><a href="#7-1、ApplicationContext的继承体系" class="headerlink" title="7.1、ApplicationContext的继承体系"></a>7.1、ApplicationContext的继承体系</h3><p>Diagram</p><p><img src="/2022/10/21/SSM/WEBRESOURCE91ca0f067d4d218d2539e29d4ee2b39d.png"></p><h3 id="7-2、ApplicationContext的实现类"><a href="#7-2、ApplicationContext的实现类" class="headerlink" title="7.2、ApplicationContext的实现类"></a>7.2、ApplicationContext的实现类</h3><p>①ClassPathXmlApplicationContext</p><p>它是从类的根路径下加载配置文件推荐使用这种</p><p>②FileSystemXmlApplicationContext</p><p>它是从磁盘路径上加载配置文件，配置文件可以在磁盘的任意位置</p><p>③AnnotationConfigApplicationContext</p><p>当使用注解配置容器对象时，需要使用此类来创建spring容器。它用来读取注解。</p><h3 id="7-3、getBean-方法的使用"><a href="#7-3、getBean-方法的使用" class="headerlink" title="7.3、getBean()方法的使用"></a>7.3、getBean()方法的使用</h3><p>主要学习使根据d获取和根据类型获取</p><p><img src="/2022/10/21/SSM/WEBRESOURCE94d8d9867d280c63554446ba106bb360.png"></p><h2 id="8、Spring配置数据源"><a href="#8、Spring配置数据源" class="headerlink" title="8、Spring配置数据源"></a>8、Spring配置数据源</h2><h3 id="8-1、数据源（连接池）的作用"><a href="#8-1、数据源（连接池）的作用" class="headerlink" title="8.1、数据源（连接池）的作用"></a>8.1、数据源（连接池）的作用</h3><ul><li><p>数据源(连接池)是提高程序性能而出现的</p></li><li><p>事先实例化数据源，初始化部分连接资源</p></li><li><p>使用连接资源时从数据源中获取</p></li><li><p>使用完毕后将连接资源归还给数据源</p></li></ul><p>常见的数据源(连接池)：DBCP、C3P0、BoneCP、Druid等</p><h3 id="8-2、数据源的开发步骤"><a href="#8-2、数据源的开发步骤" class="headerlink" title="8.2、数据源的开发步骤"></a>8.2、数据源的开发步骤</h3><p>①导入数据源的坐标和数据库驱动坐标</p><p>②创建数据源对象</p><p>③设置数据源的基本连接数据</p><p>④使用数据源获取连接资源和归还连接资源</p><h3 id="8-3、数据源的手动创建"><a href="#8-3、数据源的手动创建" class="headerlink" title="8.3、数据源的手动创建"></a>8.3、数据源的手动创建</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.SpringIoC_anno;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<br><span class="hljs-keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.beans.PropertyVetoException;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.ResourceBundle;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/27 14:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceTest</span> &#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建c3p0数据源</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br>        dataSource.setDriverClass(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        dataSource.setJdbcUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>);<br>        dataSource.setUser(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建druid数据源</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br>        dataSource.setDriverClassName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        dataSource.setUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>);<br>        dataSource.setUsername(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建c3p0数据源(加载properties配置文件)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//读取配置文件</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">resourceBundle</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;jdbc&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.url&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.password&quot;</span>);<br>        <span class="hljs-comment">//创建数据源对象 设置连接参数</span><br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br>        dataSource.setDriverClass(driver);<br>        dataSource.setJdbcUrl(url);<br>        dataSource.setUser(username);<br>        dataSource.setPassword(password);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>jdbc.properties</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">jdbc.driver</span>=com.mysql.cj.jdbc.Driver<br><span class="hljs-attr">jdbc.url</span>=jdbc:mysql://localhost:<span class="hljs-number">3306</span>/javaweb<br><span class="hljs-attr">jdbc.username</span>=root<br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure><h3 id="8-4、Spring配置数据源"><a href="#8-4、Spring配置数据源" class="headerlink" title="8.4、Spring配置数据源"></a>8.4、Spring配置数据源</h3><p>可以将DataSource的创建权交由Spring容器去完成</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.SpringIoC_anno;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<br><span class="hljs-keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;<br><span class="hljs-keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.ResourceBundle;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/27 14:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试Spring容器产生数据源对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">applicationContext</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> applicationContext.getBean(DataSource.class);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-5、抽取jdbc配置文件"><a href="#8-5、抽取jdbc配置文件" class="headerlink" title="8.5、抽取jdbc配置文件"></a>8.5、抽取jdbc配置文件</h3><p>applicationContext.xml加载jdbc.properties配置文件获得连接信息（Spring容器加载properties文件）</p><p>首先，需要引入context命名控件和约束路径：</p><ul><li><p>命名空间：xmlns:context&#x3D;”<a href="http://www.springframework.org/schema/context&quot;">http://www.springframework.org/schema/context&quot;</a></p></li><li><p>约束路径：<a href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a></p><p><a href="http://www.springframework.org/schema/context/spring-context.xsd">http://www.springframework.org/schema/context/spring-context.xsd</a></p></li></ul><p>再将外部properties文件使用context:property-placeholder标签加载到applicationContext.xml中来。</p><p>最后使用EL表达式调用对应值</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="hljs-string"><span class="hljs-tag"><span class="language-xml">                            http://www.springframework.org/schema/contxt http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><br><span class="language-xml"><span class="hljs-comment">&lt;!--加载外部的properties文件--&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:property-placeholder</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.driver&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.url&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.username&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.password&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="9、Spring注解开发"><a href="#9、Spring注解开发" class="headerlink" title="9、Spring注解开发"></a>9、Spring注解开发</h2><h3 id="9-1、Spring原始注解"><a href="#9-1、Spring原始注解" class="headerlink" title="9.1、Spring原始注解"></a>9.1、Spring原始注解</h3><p>Spring是轻代码而重配置的框架，配置比较繁重，影响开发效率，所以注解开发是一种趋势，注解代替xml配置文件可以简化配置，提高开发效率。</p><p>Spring原始注解主要是替代<Bean>的配置</p><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td>@Component</td><td>使用在类上用于实例化Bean</td></tr><tr><td>@Controller</td><td>使用在web层类上用于实例化Bean</td></tr><tr><td>@Service</td><td>使用在service层类上用于实例化Bean</td></tr><tr><td>@Repository</td><td>使用在dao层类上用于实例化Bean</td></tr><tr><td>@Autowired</td><td>使用在字段上用于根据类型依赖注入</td></tr><tr><td>@Qualifier</td><td>结合@Autowired一起使用用于根据名称进行依赖注入</td></tr><tr><td>@Resource</td><td>相当于@Autowired+@Qualifier，按照名称进行注入</td></tr><tr><td>@Value</td><td>注入普通属性</td></tr><tr><td>@Scope</td><td>标注Bean的作用范围</td></tr><tr><td>@PostConstruct</td><td>使用在方法上标注该方法是Bean的初始化方法</td></tr><tr><td>@PreDestroy</td><td>使用在方法上标注该方法时Bean的销毁方法</td></tr></tbody></table><p>在使用注解开发时，需要使用在applicationContext.xml中配置组件扫描。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!--配置组件扫描--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.company.SpringIoC_anno&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="9-2、Spring新注解"><a href="#9-2、Spring新注解" class="headerlink" title="9.2、Spring新注解"></a>9.2、Spring新注解</h3><p>使用上面的注解还不能全部代替xml配置文件，还需要使用注解替代的配置如下：</p><ul><li><p>非自定义的Bean的配置：<bean></p></li><li><p>加载properties文件的配置：<a href="context:property-placeholder">context:property-placeholder</a></p></li><li><p>组件扫描的配置：<a href="context:component-scan">context:component-scan</a></p></li><li><p>引入其他文件：<import></p></li></ul><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td>@Configuration</td><td>用于指定当前类是一个Spring配置类，当前创建容器时会从该类上加载注解</td></tr><tr><td>@ComponentScan</td><td>用于指定Spring在初始化容器时要扫描的包。<br>作用和在Spring的xml配置文件中的&lt;context:component-scan base-package&#x3D;”com.company.SpringIoC_anno”&#x2F;&gt;一样</td></tr><tr><td>@Bean</td><td>使用在方法上，标注将该方法的返回值存储Spring容器中</td></tr><tr><td>@PropertySource</td><td>用于加载properties文件中的配置</td></tr><tr><td>@Import</td><td>用于导入其他配置类</td></tr></tbody></table><h2 id="10、Srping集成Junit"><a href="#10、Srping集成Junit" class="headerlink" title="10、Srping集成Junit"></a>10、Srping集成Junit</h2><p>①导入spring继承Junit的坐标</p><p>②使用@Runwith直接替换原来的运行周期</p><p>③使用@ContextConfiguration指定配置文件或配置类</p><p>④使用@Autowired注入需要测试的对象</p><p>⑤创建测试方法进行测试</p><h2 id="11、Spring集成web环境"><a href="#11、Spring集成web环境" class="headerlink" title="11、Spring集成web环境"></a>11、Spring集成web环境</h2><h3 id="11-1、ApplicationContext应用上下文获取方式"><a href="#11-1、ApplicationContext应用上下文获取方式" class="headerlink" title="11.1、ApplicationContext应用上下文获取方式"></a>11.1、ApplicationContext应用上下文获取方式</h3><p>应用上下文对象是通过new ClasspathXmlApplicationContext(spring配置文件)方式获取的，但是每次从容其中获得Bean时都要编写new ClasspathXmlApplicationContext(spring配置文件)，这样的弊端是配置文件加载多次，应用上下文对象创建多次。</p><p>在Web项目中，可以使用ServletContextListener监听Web应用的启动，我们可以在Web应用启动时，就加载Spring的配置文件，创建应用上下文对象ApplicationContext，再将其存储到最大的域servletContext域中，这样就可以在任意位置从余种获得应用上下文ApplicationContext对象了。</p><h3 id="11-2、Spring提供给获取应用上下文的工具"><a href="#11-2、Spring提供给获取应用上下文的工具" class="headerlink" title="11.2、Spring提供给获取应用上下文的工具"></a>11.2、Spring提供给获取应用上下文的工具</h3><p>上面的分析不用手动实现，Spring提供了一个监听器ContextLoaderListener就是对上述功能的封装，该监听器内部加载Spring配置文件，创建应用上下文对象，并存储到ServletContext域中，提供了一个客户端工具WebApplicationContextUtils供使用者获得应用上下文对象。</p><p>所以我们需要做的只有两件事：</p><p>①在web.xml中配置ContextLoaderListener监听器(导入spring-web坐标)</p><p>②使用WebApplicationContextUtils获得应用上下文对象ApplicationContext</p><h1 id="Spring的AOP简介"><a href="#Spring的AOP简介" class="headerlink" title="Spring的AOP简介"></a>Spring的AOP简介</h1><h2 id="1-1、什么是AOP"><a href="#1-1、什么是AOP" class="headerlink" title="1.1、什么是AOP"></a>1.1、什么是AOP</h2><p>AOP为Aspect Oriented Programming的缩写，意思为面向切面编程，是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。</p><p>AOP时OOP的延续，是软件开发中的一个热点，也是Spring框架中的一个重要内容，是函数时变成的一种衍生泛型。利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p><h2 id="1-2、AOP的作用及其优势"><a href="#1-2、AOP的作用及其优势" class="headerlink" title="1.2、AOP的作用及其优势"></a>1.2、AOP的作用及其优势</h2><ul><li><p>作用：在程序运行期间，在不修改源码的情况下对方法进习性功能增强</p></li><li><p>优势：减少重复代码，提高开发效率，并且便于维护</p></li></ul><h2 id="1-3、AOP的底层实现"><a href="#1-3、AOP的底层实现" class="headerlink" title="1.3、AOP的底层实现"></a>1.3、AOP的底层实现</h2><p>实际上，AOP的底层是通过Spring提供的动态代理技术实现的。在运行期间，Spring通过动态代理技术动态的生成代理对象，代理对象方法执行时进行增强功能的接入，在去调用目标对象的方法，从而完成功能的增强。</p><h2 id="1-4、AOP的动态代理技术"><a href="#1-4、AOP的动态代理技术" class="headerlink" title="1.4、AOP的动态代理技术"></a>1.4、AOP的动态代理技术</h2><p>常用的动态代理技术：</p><ul><li><p>JDK代理：基于接口的动态代理技术</p></li><li><p>cglib代理：基于父类的动态代理技术</p></li></ul><p><img src="/2022/10/21/SSM/WEBRESOURCE3f15acacc6173069d50651dd296117f8.png"></p><h2 id="1-5、基于JDK的动态代理"><a href="#1-5、基于JDK的动态代理" class="headerlink" title="1.5、基于JDK的动态代理"></a>1.5、基于JDK的动态代理</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.Spring_aop;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//目标对象</span><br>        <span class="hljs-type">Target</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Target</span>();<br><br>        <span class="hljs-comment">//增强对象</span><br>        <span class="hljs-type">Advice</span> <span class="hljs-variable">advice</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Advice</span>();<br>        <span class="hljs-comment">//返回值就是动态生成的代理对象</span><br>        <span class="hljs-type">TargetInterface</span> <span class="hljs-variable">targetInterface</span> <span class="hljs-operator">=</span> (TargetInterface) Proxy.newProxyInstance(<br>                target.getClass().getClassLoader(), <span class="hljs-comment">//目标对象类加载器</span><br>                target.getClass().getInterfaces(),<span class="hljs-comment">//目标对象相同的接口字节码对象数组</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() &#123;<br>                    <span class="hljs-comment">//调用代理对象的任何方法 实质执行的都是invoke方法</span><br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>                        advice.before();<br>                        <span class="hljs-type">Object</span> <span class="hljs-variable">invoke</span> <span class="hljs-operator">=</span> method.invoke(target, args);<span class="hljs-comment">//执行目标方法</span><br>                        advice.afterReturning();<br>                        <span class="hljs-keyword">return</span> invoke;<br>                    &#125;<br>                &#125;<br>        );<br>        <span class="hljs-comment">//调用代理对象的方法</span><br>        targetInterface.save();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="1-6、基于cglib的动态代理"><a href="#1-6、基于cglib的动态代理" class="headerlink" title="1.6、基于cglib的动态代理"></a>1.6、基于cglib的动态代理</h2><p>难度过高、暂略。</p><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=125&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a">https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=125&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a</a></p><h2 id="1-7、AOP相关概念"><a href="#1-7、AOP相关概念" class="headerlink" title="1.7、AOP相关概念"></a>1.7、AOP相关概念</h2><p>Spring的AOP是新鲜底层就是对上面的动态代理的代码进行了封装，封装后我们只需要对需要关注的部分进行代码编写，并通过配置的方式完成指定目标的方法增强。</p><p>在正式讲解AOP的操作之前，我们必须理解AOP的相关术语，常用的术语如下：</p><ul><li><p>Target(目标对象)：代理的目标对象</p></li><li><p>Proxy(代理)：一个类被AOP织入增强后，就产生一个结果代理类</p></li><li><p>JoinPoint(连接点)：所谓连接点是指那些被拦截到的点。在Spring中这些点指的是方法，因为Spring支支持方法类型的连接点</p></li><li><p>Pointcut(切入点)：所谓切入点是指我们要对哪些Joinpoint进行拦截的定义</p></li><li><p>Advice(通知&#x2F;增强)：所谓通知是指拦截到Joinpoint之后所要做的事情就是通知</p></li><li><p>Aspect(切面)：是切入点和通知(引介)的结合</p></li><li><p>Weaving(织入)：是指把增强应用到目标对象来创建新的代理对象的过程。Spring采用动态代理织入，而AspectJ采用编译期织入和类装载器织入。</p></li></ul><h2 id="1-8、AOP开发的明确的事项"><a href="#1-8、AOP开发的明确的事项" class="headerlink" title="1.8、AOP开发的明确的事项"></a>1.8、AOP开发的明确的事项</h2><p>需要编写的内容</p><ul><li><p>编写核心业务代码（目标类的目标方法）</p></li><li><p>编写切面类，切面类中有通知（增强功能方法）</p></li><li><p>在配置文件中，配置织入关系，即将哪些通知与哪些连接点进行结合</p></li></ul><p>AOP底层使用哪种代理方式</p><p>在spring中，框架会根据目标是否实现了接口来决定采用哪种动态代理的方式。</p><p>目标对象有接口就会使用JDK的那种。</p><p>否则使用cglib那种。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--目标对象    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;targetImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.Test3.Service.TargetImpl&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--切面对象    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;targetAspect&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.Test3.Service.TargetAspect&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--配置织入： 告诉spring框架 哪些方法(切点)需要进行哪些增强(前置、后置)....    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 切点表达式的抽取--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(public void com.company.Test3.Service.TargetImpl.save())&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--声明切面    --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;targetAspect&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--切面：切点+通知    --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:before</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-returning</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;afterReturning&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">returning</span>=<span class="hljs-string">&quot;result&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:after-returning</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-1、XML配置AOP详解"><a href="#2-1、XML配置AOP详解" class="headerlink" title="2.1、XML配置AOP详解"></a>2.1、XML配置AOP详解</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE3cef0f6841539dee533856a3b79d5e83.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE48f073c93a1e6d842e1ab1836f35f91c.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEee1ada72ad976ebccbf4a5de7683208a.png"></p><h2 id="3-1、基于注解的AOP开发"><a href="#3-1、基于注解的AOP开发" class="headerlink" title="3.1、基于注解的AOP开发"></a>3.1、基于注解的AOP开发</h2><h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><h2 id="1、SpringMVC简介"><a href="#1、SpringMVC简介" class="headerlink" title="1、SpringMVC简介"></a>1、SpringMVC简介</h2><h3 id="1-1、SpringMVC概述"><a href="#1-1、SpringMVC概述" class="headerlink" title="1.1、SpringMVC概述"></a>1.1、SpringMVC概述</h3><p>SpringMVC是一种基于Java的实现MVC设计模型的请求驱动类型的轻量级Web框架，属于SpringFrameWork的后续产品，已经融合在Spring Web Flow中</p><p>SpringMVC已经称为目前最主流的MVC框架之一，并且随着Spring3.0的发布，全面超越Struts2，称为最优秀的MVC框架。它通过一套注解，让一个简单的Java类成为处理请求的控制器，而无需实现任何接口。同时它还支持RESTful编程风格的请求。</p><h3 id="1-2、SpringMVC快速入门"><a href="#1-2、SpringMVC快速入门" class="headerlink" title="1.2、SpringMVC快速入门"></a>1.2、SpringMVC快速入门</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE2a48a9d4bb83e804bac3fd07d7bd6073.png"></p><p>需求：客户端发起请求，服务器端接受请求，执行逻辑并进行试图跳转。</p><p>开发步骤：</p><p>①导入SpringMVC相关坐标</p><p>②配置SpringMVC核心控制器DispathcerServlet</p><p>③创建Controller类和视图页面</p><p>④使用注解配置Controller类中业务方法的映射地址</p><p>⑤配置SpringMVC核心文件spring-mvc.xml</p><p>⑥客户端发起请求测试</p><h3 id="1-3、SpringMVC流程图"><a href="#1-3、SpringMVC流程图" class="headerlink" title="1.3、SpringMVC流程图"></a>1.3、SpringMVC流程图</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE60ee809af5b78762fdae7725f18e02f5.png"></p><h2 id="2、SpringMVC组件解析"><a href="#2、SpringMVC组件解析" class="headerlink" title="2、SpringMVC组件解析"></a>2、SpringMVC组件解析</h2><h3 id="2-1、SpringMVC的执行流程"><a href="#2-1、SpringMVC的执行流程" class="headerlink" title="2.1、SpringMVC的执行流程"></a>2.1、SpringMVC的执行流程</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE25f679777ede905bb9cd702e917de75f.png"></p><p>①用户发送请求至前端控制器DispatcherServlet。</p><p>②DispatcherServlet收到请求调用HandlerMapping处理器映射器。</p><p>③处理器映射器找到具体的处理器(可以根据xml配置、注解进行查找)，生成处理器对象处理器拦截器(如果有则生成)一并返回给DispatcherServlet</p><p>④DispatcherServlet调用HandlerAdapter处理器适配器</p><p>⑤HandlerAdapter经过适配调用具体的处理器(Controller,也叫后端控制器)。</p><p>⑥Controller执行完成返回ModelAndView。</p><p>⑦HandlerAdapter将controller执行结果ModelAndView返回给DispatcherServlet。</p><p>⑧DispatcherServlet将ModelAndView传给ViewReslover视图解析器。</p><p>⑨ViewReslover解析后返回具体View。</p><p>⑩DispatcherServlet根据View进行渲染视图(即将模型数据填充至视图中)DispatcherServlet响应用户。</p><h3 id="2-2、SpringMVC注解解析"><a href="#2-2、SpringMVC注解解析" class="headerlink" title="2.2、SpringMVC注解解析"></a>2.2、SpringMVC注解解析</h3><p>@RequestMapping</p><p>作用：请求映射，主要是用于建立请求URL和处理请求方法之间的对应关系。</p><p>位置：</p><ul><li><p>类上：请求URL的第一级访问目录。此处不写的话，就相当于应用的根目录</p></li><li><p>方法上：请求URL的第二级访问目录，与类上的使用@ReqquestMapping标注的一级目录一起组成访问虚拟路径。</p></li></ul><p>属性：</p><ul><li><p>value：用于指定请求的URL。它和paht属性的作用是一样的</p></li><li><p>method：用于指定请求的方式</p></li><li><p>params：用于指定限制请求参数的条件。它支持简单的表达式。要求请求参数的key和value必须和配置的一摸一样。</p></li></ul><h3 id="2-3、知识要点"><a href="#2-3、知识要点" class="headerlink" title="2.3、知识要点"></a>2.3、知识要点</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE83f302b30935f8c9804b21aa072cbb88.png"></p><h2 id="3、SpringMVC的数据响应"><a href="#3、SpringMVC的数据响应" class="headerlink" title="3、SpringMVC的数据响应"></a>3、SpringMVC的数据响应</h2><h3 id="3-1、SpringMVC的数据相应方式"><a href="#3-1、SpringMVC的数据相应方式" class="headerlink" title="3.1、SpringMVC的数据相应方式"></a>3.1、SpringMVC的数据相应方式</h3><p><img src="/2022/10/21/SSM/WEBRESOURCEb84a6abf71eaf072ccccba135acd7514.png"></p><ul><li><p>使用map</p></li><li><p>使用ModelAndView</p></li><li><p>使用req.setAttribute</p></li></ul><h2 id="4、SpringMVC的请求"><a href="#4、SpringMVC的请求" class="headerlink" title="4、SpringMVC的请求"></a>4、SpringMVC的请求</h2><h3 id="4-1、获得请求参数"><a href="#4-1、获得请求参数" class="headerlink" title="4.1、获得请求参数"></a>4.1、获得请求参数</h3><p>格式：?name&#x3D;value&amp;name&#x3D;value</p><p>服务器端要获得请求的参数，有时还需要进行数据的封装，SpringMVC可以接受如下类型的参数：</p><ul><li><p>基本类型参数</p></li><li><p>POJO类型参数</p></li><li><p>数组类型参数</p></li><li><p>集合类型参数</p></li></ul><p>Controller中的业务方法的参数名称要与请求参数的name一致，参数值会自动映射匹配。</p><h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h2 id="1、Mybatis简介"><a href="#1、Mybatis简介" class="headerlink" title="1、Mybatis简介"></a>1、Mybatis简介</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE09193dd79b01d0115816d5418822641e.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE15a49bbb138e9222fef82bcbd77d1b4d.png"></p><h3 id="1-2、原始jdbc操作的分析"><a href="#1-2、原始jdbc操作的分析" class="headerlink" title="1.2、原始jdbc操作的分析"></a>1.2、原始jdbc操作的分析</h3><p>原始jdbc开发存在的问题如下：</p><p>①数据库连接创建、释放频繁造成系统资源浪费从而影响系统性能。</p><p>②sql语句在代码中硬编码，造成代码不宜维护，实际应用sql变化的可能比较大，sql变动需要改变java代码。</p><p>③查询操作时，需要手动将结果集中的数据手动封装到实体中。插入操作时，需要手动将实体的数据设置到sql语句的占位符位置</p><p>应对上述问题给出的解决方案：</p><p>①使用数据库连接池初始化连接资源</p><p>②将sql语句抽取到xml配置文件中</p><p>③使用反射、内省等底层技术，自动将实体与表进行属性与字段的自动映射</p><h3 id="1-3、什么是Mybatis"><a href="#1-3、什么是Mybatis" class="headerlink" title="1.3、什么是Mybatis"></a>1.3、什么是Mybatis</h3><ul><li><p>mybatis是一个优秀的基于java的持久层框架，它内部封装了jdbc，使开发者只需要关注sql语句本身，而不需要花费精力去处理加载驱动、创建链接、创建statement等繁杂的过程</p></li><li><p>mybatis通过xml或注解的方式将要执行的各种statement配置起来，并通过java对象和statement中sql的动态参数进行映射生成最终执行的sql语句</p></li><li><p>最后mybatis框架执行sql并将结果映射为java对象并返回，采用ORM思想解决了实体和数据库映射的我呢提，对jdbc进行了封装，屏蔽了jdbc api底层访问细节，是我们不用与jdbc api打交道，就可以完成对数据库的持久化操作。</p></li></ul><h2 id="2、Mybatis的快速入门"><a href="#2、Mybatis的快速入门" class="headerlink" title="2、Mybatis的快速入门"></a>2、Mybatis的快速入门</h2><p>MyBatis官网地址：<a href="https://mybatis.org/mybatis-3/">https://mybatis.org/mybatis-3/</a></p><h3 id="2-1、MyBatis开发步骤"><a href="#2-1、MyBatis开发步骤" class="headerlink" title="2.1、MyBatis开发步骤"></a>2.1、MyBatis开发步骤</h3><p>①添加MyBatis的坐标</p><p>②创建user数据表</p><p>③编写User实体类</p><p>④编写映射文件UserMapper.xml</p><p>⑤编写核心文件SqlMapConfig.xml</p><p>⑥编写测试类</p><p>ps:④UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;userMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span><br>        select * from user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ps:⑤SqlMapConfig.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--数据源环境    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=false<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--加载映射文件    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/company/mapper/UserMapper.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ps:⑥测试类</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//获取核心配置文件</span><br>InputStream resourceAsStream = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Resources</span>.</span></span>get<span class="hljs-constructor">ResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>)</span>;<br><span class="hljs-comment">//获取session工厂对象</span><br>SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SqlSessionFactoryBuilder()</span>.build(resourceAsStream);<br><span class="hljs-comment">//获得session会话对象</span><br>SqlSession sqlSession = sqlSessionFactory.<span class="hljs-keyword">open</span><span class="hljs-constructor">Session()</span>;<br><span class="hljs-comment">//执行操作 参数：namespace+id</span><br>List&lt;User&gt; userList = sqlSession.select<span class="hljs-constructor">List(<span class="hljs-string">&quot;userMapper.findAll&quot;</span>)</span>;<br><span class="hljs-comment">//打印数据</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(userList);<br><span class="hljs-comment">//释放资源</span><br>sqlSession.close<span class="hljs-literal">()</span>;<br></code></pre></td></tr></table></figure><h2 id="3、Mybatis映射文件概述"><a href="#3、Mybatis映射文件概述" class="headerlink" title="3、Mybatis映射文件概述"></a>3、Mybatis映射文件概述</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE1c4f8ffcac86042e493f22ffc2deae08.png"></p><h2 id="4、Mybatis的增删改查"><a href="#4、Mybatis的增删改查" class="headerlink" title="4、Mybatis的增删改查"></a>4、Mybatis的增删改查</h2><h3 id="4-1、MyBatis的插入数据操作"><a href="#4-1、MyBatis的插入数据操作" class="headerlink" title="4.1、MyBatis的插入数据操作"></a>4.1、MyBatis的插入数据操作</h3><h4 id="4-1-1、插入操作需要注意的问题："><a href="#4-1-1、插入操作需要注意的问题：" class="headerlink" title="4.1.1、插入操作需要注意的问题："></a>4.1.1、插入操作需要注意的问题：</h4><ul><li><p>插入语句使用insert标签</p></li><li><p>在映射文件中使用parameterType属性指定要插入的数据类型</p></li><li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p></li><li><p>插入操作使用的API是sqlSession.insert(“命名空间.id”，实体对象);</p></li><li><p>插入操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--插入操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;save&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span></span><br><span class="language-xml">    insert into user (id, username, password)values(#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">,#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml">,#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml">)</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setUsername(<span class="hljs-string">&quot;小羊&quot;</span>);<br>    user.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.insert(<span class="hljs-string">&quot;userMapper.save&quot;</span>,user);<br>    <span class="hljs-comment">//mybatis执行更新操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-1-2、修改操作需要注意的问题："><a href="#4-1-2、修改操作需要注意的问题：" class="headerlink" title="4.1.2、修改操作需要注意的问题："></a>4.1.2、修改操作需要注意的问题：</h4><ul><li><p>修改语句使用insert标签</p></li><li><p>在映射文件中使用parameterType属性指定要修改的数据类型</p></li><li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p></li><li><p>修改操作使用的API是sqlSession.update(“命名空间.id”，实体对象);</p></li><li><p>修改操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--修改操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span></span><br><span class="language-xml">    update user set username = #</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml">,password = #</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"> where id = #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setUsername(<span class="hljs-string">&quot;小绵羊&quot;</span>);<br>    user.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>    user.setId(<span class="hljs-number">4</span>);<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.update(<span class="hljs-string">&quot;userMapper.update&quot;</span>,user);<br>    <span class="hljs-comment">//mybatis执行更新操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-1-3、删除操作需要注意的问题："><a href="#4-1-3、删除操作需要注意的问题：" class="headerlink" title="4.1.3、删除操作需要注意的问题："></a>4.1.3、删除操作需要注意的问题：</h4><ul><li><p>删除语句使用insert标签</p></li><li><p>在映射文件中使用parameterType属性指定要删除的数据类型</p></li><li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p></li><li><p>删除操作使用的API是sqlSession.delete(“命名空间.id”，实体对象);</p></li><li><p>删除操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--删除操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delete&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="language-xml">    delete from user where id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.delete(<span class="hljs-string">&quot;userMapper.delete&quot;</span>,id);<br>    <span class="hljs-comment">//mybatis执行删除操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5、Mybatis核心配置文件"><a href="#5、Mybatis核心配置文件" class="headerlink" title="5、Mybatis核心配置文件"></a>5、Mybatis核心配置文件</h2><h3 id="5-1、MyBatis核心配置文件层级关系"><a href="#5-1、MyBatis核心配置文件层级关系" class="headerlink" title="5.1、MyBatis核心配置文件层级关系"></a>5.1、MyBatis核心配置文件层级关系</h3><ul><li><p>configuration配置</p></li><li><p>properties 属性</p></li><li><p>settings 设置</p></li><li><p>typeAliases 类型别名</p></li><li><p>typeHandlers 类型处理器</p></li><li><p>objectFactory 对象工厂</p></li><li><p>plugins 插件</p></li><li><p>environments 环境</p></li><li><p>environment 环境变量</p></li><li><p>transactionManager 事务管理器</p></li><li><p>dataSource 数据源</p></li><li><p>databaseIdProvider 数据库厂商便是</p></li><li><p>mappers 映射器</p></li></ul><h3 id="5-2、MyBatis常用配置解析"><a href="#5-2、MyBatis常用配置解析" class="headerlink" title="5.2、MyBatis常用配置解析"></a>5.2、MyBatis常用配置解析</h3><p>官方文档：<a href="https://mybatis.net.cn/configuration.html">https://mybatis.net.cn/configuration.html</a></p><p>1、environments标签</p><p>数据库环境的配置，支持多环境配置</p><p><img src="/2022/10/21/SSM/WEBRESOURCE83eaa2a0e2824e1060ad943aa222b732.png"></p><p>其中，事务管理器(transactionManager)类型有两种：</p><ul><li><p>JDBC：这个配置就是直接使用了JDBC的提交和回滚设置，它依赖于从数据源得到的链接来管理事务作用域</p></li><li><p>MANAGED：这个配置几乎没做什么。他从来不提交或回滚一个连接，而是让容器来管理事务的整个生命周期(比如JEE应用服务器的上下文)。默认情况下它会关闭连接，然而一些容器并不希望这样，因此需要将closeConnection属性设置为false来阻止它默认的关闭行为。</p></li></ul><p>其中，数据源(dataSource)类型有三种：</p><ul><li><p>UNPOOLED：这个数据源的实现只是每次请求打开和关闭链接</p></li><li><p>POOLED：这种数据源的实现利用”池“的概念将JDBC连接对象组织起来。</p></li><li><p>JNDI：这个数据源的实现是为了能在比如EJB或应用服务器这类容器中使用，容器可以其中或在外部配置数据源，然后放置一个JNDI上下文的引用。</p></li></ul><p>2、mapper标签</p><p>该标签的作用是加载映射的，加载方式有如下几种：</p><ul><li><p>使用相对于类路径的资源引用，例如：<mapper resource="org/mybatis/builder/builder/AuthorMapper.xml"/></p></li><li><p>使用完全限定资源定位符(URL)，例如：<mapper url="file:///var/mappers/AuthorMapper.xml"/></p></li><li><p>使用映射器接口实现类的完全限定类名，例如：<mapper class="org.mybatis.builder.AuthorMapper"/></p></li><li><p>将包内的映射器接口实现全部注册为映射器，例如：<package name="org.mybatis.builder"/></p></li></ul><p><img src="/2022/10/21/SSM/WEBRESOURCEdb3fe4d75af0a5ab2d11fe77f8b96b58.png"></p><p>3、Properties标签</p><p>实际开发中，习惯将数据源的配置信息单独抽取成一个properties文件，该标签可以加载额外配置的properties文件。</p><p><img src="/2022/10/21/SSM/WEBRESOURCE03324357bf4da77fab672943c6d4fe46.png"></p><p>4、typeAliases标签</p><p><img src="/2022/10/21/SSM/WEBRESOURCE718aa05b9a65243c539535055113dfc7.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE00352f0140ee769dd03be6056f636555.png"></p><h2 id="6、Mybatis相应API"><a href="#6、Mybatis相应API" class="headerlink" title="6、Mybatis相应API"></a>6、Mybatis相应API</h2><h3 id="6-1、SqlSession工厂构建器SqlSessionFactoryBuilder"><a href="#6-1、SqlSession工厂构建器SqlSessionFactoryBuilder" class="headerlink" title="6.1、SqlSession工厂构建器SqlSessionFactoryBuilder"></a>6.1、SqlSession工厂构建器SqlSessionFactoryBuilder</h3><p>常用API：SqlSessionFactory build(InputStream inputStream)</p><p>通过加载mybatis的核心文件的输入流的形式构建一个SqlSessionFactory对象</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">String resource <span class="hljs-operator">=</span> <span class="hljs-string">&quot;org/mybatis/builder/mybatis-config.xml&quot;</span><span class="hljs-comment">;</span><br>InputStream inputStream <span class="hljs-operator">=</span> Resources.getResourceAsStream(resource)<span class="hljs-comment">;</span><br>SqlSessionFactoryBuilder builder <span class="hljs-operator">=</span> new SqlSessionFactoryBuilder()<span class="hljs-comment">;</span><br>SqlSessionFactory factory <span class="hljs-operator">=</span> builder.build(inputStream)<br></code></pre></td></tr></table></figure><p>其中Resources工具类，这个类在org.apache.ibatis.io包中。Resources类帮助你从类路径下、系统文件或一个web URL中加载资源文件。</p><h3 id="6-2、SqlSession工厂对象SqlSessionFactory"><a href="#6-2、SqlSession工厂对象SqlSessionFactory" class="headerlink" title="6.2、SqlSession工厂对象SqlSessionFactory"></a>6.2、SqlSession工厂对象SqlSessionFactory</h3><p>SqlSessionFactory有多个方法创建SqlSession实力，常用的有如下两个：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">open</span><span class="hljs-constructor">Session()</span> 会默认开启一个事务，但事务不会自动提交。<br><span class="hljs-keyword">open</span><span class="hljs-constructor">Session(<span class="hljs-params">boolean</span> <span class="hljs-params">autoCommit</span>)</span>  参数为是否自动提交。<br></code></pre></td></tr></table></figure><h3 id="6-3、SqlSession会话对象"><a href="#6-3、SqlSession会话对象" class="headerlink" title="6.3、SqlSession会话对象"></a>6.3、SqlSession会话对象</h3><p>SqlSession实例在MyBatis中是非常强大的一个类。在这里你会看到所有执行语句、提交或回滚事务和获取映射器实例的方法。执行语句的方法主要有：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;T&gt; T selectOne(String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br>&lt;E&gt; List&lt;E&gt; selectList (Stringg <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">insert</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">update</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">delete</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br></code></pre></td></tr></table></figure><p>操作事务的主要方法有：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">commit</span>()</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rollback</span>()</span><br></code></pre></td></tr></table></figure><h2 id="7、Mybatis的dao层实现"><a href="#7、Mybatis的dao层实现" class="headerlink" title="7、Mybatis的dao层实现"></a>7、Mybatis的dao层实现</h2><h3 id="7-1、传统开发方式"><a href="#7-1、传统开发方式" class="headerlink" title="7.1、传统开发方式"></a>7.1、传统开发方式</h3><p>与javaweb结构相似</p><h3 id="7-2、代理开发方式"><a href="#7-2、代理开发方式" class="headerlink" title="7.2、代理开发方式"></a>7.2、代理开发方式</h3><h4 id="7-2-1、代理开发方式介绍"><a href="#7-2-1、代理开发方式介绍" class="headerlink" title="7.2.1、代理开发方式介绍"></a>7.2.1、代理开发方式介绍</h4><p>采用Mybatis的代理开发方式实现DAO层的开发，这种方式是我们后面进入企业的主流。</p><p>Mapper接口开发方法只需要程序员编写Mapper接口(相当于Dao接口)，有Mybatis框架根据接口定义创建接口的动态代理对象，代理对象的方法体同上边Dao接口实现类方法。</p><p>Mapper接口开发需要遵循一下规范：</p><p>①Mapper.xml文件中的namespace与mapper接口的全限定名相同</p><p>②Mapper接口方法名和Mapper.xml中定义的每个statement的id相同</p><p>③Mapper接口方法的输入参数类型和mapper.xml中定义的每个sql的parameterType的类型相同</p><p>④Mapper接口方法的输出参数类型和mapper.xml中定义的每个sql的resultType的类型相同</p><h4 id="7-2-2、编写UserMapper接口"><a href="#7-2-2、编写UserMapper接口" class="headerlink" title="7.2.2、编写UserMapper接口"></a>7.2.2、编写UserMapper接口</h4><p><img src="/2022/10/21/SSM/WEBRESOURCE75ba046470c50cde99e457b967986d74.png"></p><h2 id="8、Mybatis映射文件深入"><a href="#8、Mybatis映射文件深入" class="headerlink" title="8、Mybatis映射文件深入"></a>8、Mybatis映射文件深入</h2><h3 id="8-1、动态sql语句-https-mybatis-net-cn-dynamic-sql-html"><a href="#8-1、动态sql语句-https-mybatis-net-cn-dynamic-sql-html" class="headerlink" title="8.1、动态sql语句(https://mybatis.net.cn/dynamic-sql.html)"></a>8.1、动态sql语句(<a href="https://mybatis.net.cn/dynamic-sql.html">https://mybatis.net.cn/dynamic-sql.html</a>)</h3><h4 id="8-1-1、动态sql语句"><a href="#8-1-1、动态sql语句" class="headerlink" title="8.1.1、动态sql语句"></a>8.1.1、动态sql语句</h4><ul><li><if></li></ul><p>我们根据实体类的不同取值，使用不同的SQL语句来进行查新，比如在id如果不为空时可以根据id查询，如果username不为空时还要加入用户名作为条件。这种情况在我们的多条件组合查询中经常碰到。</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--根据Condition查询操作    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByCondition&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        select * from user</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="language-xml">                and id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and username=#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;password!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and password=#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ul><li><foreach></li></ul><p>循环执行sql的拼接操作，例如：select * from user where id in（1，2，5）</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByIds&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        select * from user</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;id in(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span></span><br><span class="language-xml">                #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="8-2、sql片段的抽取"><a href="#8-2、sql片段的抽取" class="headerlink" title="8.2、sql片段的抽取"></a>8.2、sql片段的抽取</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--sql语句抽取    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span>select * from user<span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--根据Condition查询操作    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByCondition&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="language-xml">                and id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and username=#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;password!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and password=#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByIds&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;id in(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span></span><br><span class="language-xml">                #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="9、Mybatis核心配置文件深入"><a href="#9、Mybatis核心配置文件深入" class="headerlink" title="9、Mybatis核心配置文件深入"></a>9、Mybatis核心配置文件深入</h2><h3 id="9-1、typeHandlers标签"><a href="#9-1、typeHandlers标签" class="headerlink" title="9.1、typeHandlers标签"></a>9.1、typeHandlers标签</h3><p>无论是MyBatis在处理语句(PreparedStatement)中设置一个参数时，还是从结果集中取出一个值时，都会用类型处理器将获取的值以合适的方式转换成Java类型。下标描述了一些默认的类型处理器(部分)</p><table><thead><tr><th>类处理器</th><th>Java类型</th><th>JDBC类型</th></tr></thead><tbody><tr><td>BooleanTypeHandler</td><td>java.lang.Boolean,boolean</td><td>数据库兼容的BOOLEAN</td></tr><tr><td>ByteTypeHandler</td><td>java.lang.Byte,byte</td><td>数据库兼容的NUMERIC或BYTE</td></tr><tr><td>ShortTypeHandler</td><td>java.lang.Short,short</td><td>数据库兼容的NUMERIC或SHORT INTEGER</td></tr><tr><td>IntegerTypeHandler</td><td>java.lang.Integer,int</td><td>数据库兼容的NUMERIC或INTEGER</td></tr><tr><td>LongTypeHnadler</td><td>java.lang.long,long</td><td>数据库兼容的NUMERIC或LONG INTEGER</td></tr></tbody></table><p>你可以重写类型处理器或创建自己的类型处理器来处理不持支的或非标准的类型。具体做法为：实现org.apache.ibatis.type.TybeHandler接口，或继承一个很便利的类org.apache.ibatis.type.BaseTypeHandler,然后可以选择性地将它映射到一个JDBC类型。例如需求：一个Java中的Date数据类型，我想将之存入到数据库的时候存成一个1790至今的毫秒数，取出来时转换成java的Date，即java的Date与数据库的varchar毫秒之间转换。</p><p>开发步骤：</p><p>①定义转换继承类BaseTypeHandler<T></p><p>②覆盖4个为实现的方法，其中setNonNullParameter为java程序设置数据到数据库的回调方法，getNullableResult为查询时mysql的字符串类型转换成java的Type类型的方法</p><p>③在MyBatis核心配置文件中进行注册</p><p>④测试转换是否正确</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_Dao.Handler;<br><br><span class="hljs-keyword">import</span> org.apache.ibatis.type.BaseTypeHandler;<br><span class="hljs-keyword">import</span> org.apache.ibatis.type.JdbcType;<br><br><span class="hljs-keyword">import</span> java.sql.CallableStatement;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateTypeHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;Date&gt; &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(PreparedStatement preparedStatement, <span class="hljs-type">int</span> i, Date date, JdbcType jdbcType)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> date.getTime();<br>        preparedStatement.setLong(i,time);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(ResultSet resultSet, String s)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> resultSet.getLong(s);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(ResultSet resultSet, <span class="hljs-type">int</span> i)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> resultSet.getLong(i);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(CallableStatement callableStatement, <span class="hljs-type">int</span> i)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> callableStatement.getLong(i);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--注册类型处理器    --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">typeHandlers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeHandler</span> <span class="hljs-attr">handler</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Handler.DateTypeHandler&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">typeHandler</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeHandlers</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="9-2、plugins标签"><a href="#9-2、plugins标签" class="headerlink" title="9.2、plugins标签"></a>9.2、plugins标签</h3><p>MyBatis可以使用第三方的插件来对功能进行扩展，分页助手PageHelper是将分页的复杂操作进行封装，使用简单的方式即可获得分页的相关数据</p><p>开发步骤：</p><p>①导入通用PageHelper的坐标</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.jsqlparser<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsqlparser<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>②在mybatis核心配置文件中配置PageHelper插件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置分页助手插件    --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageHelper&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dialect&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;mysql&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br></code></pre></td></tr></table></figure><p>③测试分页数据获取</p><h2 id="10、Mybatis的多表操作"><a href="#10、Mybatis的多表操作" class="headerlink" title="10、Mybatis的多表操作"></a>10、Mybatis的多表操作</h2><h3 id="10-1、一对一的封装查询"><a href="#10-1、一对一的封装查询" class="headerlink" title="10.1、一对一的封装查询()"></a>10.1、一对一的封装查询<resultMap>(<association>)</h3><ul><li>Order</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.sql.Timestamp;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> &#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> id;<br>  <span class="hljs-keyword">private</span> java.sql.Timestamp ordertime;<br>  <span class="hljs-keyword">private</span> Double total;<br><br>  <span class="hljs-comment">//表示当前订单属于哪一个用户</span><br>  <span class="hljs-keyword">private</span> User user;<br>&#125;<br><br></code></pre></td></tr></table></figure><ul><li>User</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> int id;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> username;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> password;<br>    <span class="hljs-keyword">private</span> Date Birthday;<br>&#125;<br><br></code></pre></td></tr></table></figure><ul><li>OrderMapper.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.OrderMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;orderMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--手动指定字段与实体属性的映射关系(column：数据库的字段名称 property：实体的属性名称)--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectOrders&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;orderMap&quot;</span>&gt;</span><br>        select *,o.id oid from `order` o,`user` u where o.uid=u.id<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><association>标签</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.OrderMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;orderMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--手动指定字段与实体属性的映射关系(column：数据库的字段名称 property：实体的属性名称)--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;Birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;Birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectOrders&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;orderMap&quot;</span>&gt;</span><br>        select *,o.id oid from `order` o,`user` u where o.uid=u.id<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-2、一对多或多对一的封装查询"><a href="#10-2、一对多或多对一的封装查询" class="headerlink" title="10.2、一对多或多对一的封装查询+"></a>10.2、一对多或多对一的封装查询<resultMap>+<collection></h3><ul><li><collection>标签</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.UserMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--property:集合名称--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;orderList&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userMap&quot;</span>&gt;</span><br>        select *,o.id oid from `user` u,`order` o where u.id=o.uid<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>User</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> Date Birthday;<br><br>    <span class="hljs-keyword">private</span> List&lt;Order&gt; orderList;<br>    <br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="10-3、多对多的封装查询"><a href="#10-3、多对多的封装查询" class="headerlink" title="10.3、多对多的封装查询+"></a>10.3、多对多的封装查询<resultMap>+<collection></h3><p><img src="/2022/10/21/SSM/WEBRESOURCE3318f9cbd6ce3ab910188e2530281530.png"></p><p>和一对多相似</p><h2 id="11、Mybatis的注解开发"><a href="#11、Mybatis的注解开发" class="headerlink" title="11、Mybatis的注解开发"></a>11、Mybatis的注解开发</h2><h3 id="11-1、MyBatis的常用注解"><a href="#11-1、MyBatis的常用注解" class="headerlink" title="11.1、MyBatis的常用注解"></a>11.1、MyBatis的常用注解</h3><p>这几年来注解开发越来越流行，Mybatis也可以使用注解开发方式，这样我们就可以减少编写Mapper映射文件了。我们先围绕一些基本的CRUD来学习，再学习复杂映射多表操作。</p><p>@Insert：实现新增</p><p>@Update：实现更新</p><p>@Delete：实现删除</p><p>@Select：实现查询</p><p>@Result：实现结果集封装</p><p>@Results：可以与@Result一起使用，封装多个结果集</p><p>@One：实现一对一结果集封装</p><p>@Many：实现一对多结果集封装</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Results</span>(id=<span class="hljs-string">&quot;groupWithUsers&quot;</span>,<br>         value = &#123; <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;groupId&quot;</span>, column = <span class="hljs-string">&quot;group_id&quot;</span>, id = true),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;name&quot;</span>, column = <span class="hljs-string">&quot;name&quot;</span>), <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;accountId&quot;</span>, column = <span class="hljs-string">&quot;account_id&quot;</span>),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;deleteFlag&quot;</span>, column = <span class="hljs-string">&quot;delete_Flag&quot;</span>),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;parentId&quot;</span>, column = <span class="hljs-string">&quot;parent_Id&quot;</span>), <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;userList&quot;</span>, javaType=List.class, many =<span class="hljs-variable">@Many</span>(select=<span class="hljs-string">&quot;selectUsersByGroupId&quot;</span>), column = <span class="hljs-string">&quot;group_id&quot;</span>)&#125;)<br><span class="hljs-comment">//查询</span><br><span class="hljs-variable">@Select</span>(&#123;<span class="hljs-string">&quot;select * from group where account_id=#&#123;accountId&#125; and delete_flag=0&quot;</span>&#125;)<br>List&lt;Group&gt; <span class="hljs-built_in">selectGroupWithUsers</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">&quot;accountId&quot;</span>) String accountId);<br> <br> <br><span class="hljs-variable">@Select</span>(&#123;<span class="hljs-string">&quot;select u.* from user u&quot;</span>,<br><span class="hljs-string">&quot;inner join user_group ug on u.user_id = ug.user_id&quot;</span>,<br><span class="hljs-string">&quot;where ug.group_id=#&#123;groupId&#125; and u.delete_flag=0&quot;</span><br>&#125;)<br>List&lt;User&gt; <span class="hljs-built_in">selectUsersByGroupId</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">&quot;groupId&quot;</span>) String groupId);<br><br></code></pre></td></tr></table></figure><h1 id="Spring与Mybatis的整合"><a href="#Spring与Mybatis的整合" class="headerlink" title="Spring与Mybatis的整合"></a>Spring与Mybatis的整合</h1><p><img src="/2022/10/21/SSM/WEBRESOURCEb85f881a311fe197b40fdb3c4fc3abb6.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEcf8846dd2f2ef47bcf68c2953b23cecd.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEe3ab70c2f586a09f8fe0b72d88f8b824.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE4231fd93fe416597d86830f309ab8fa7.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE699b422bba9bdd40a84faa2c9f4e5384.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE8353a293c162c1c7728f3312367fad88.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE66cc208e423d6e8b8f8d668663a8361a.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE8c6e280f2ddbec8ec55dacce5b06e0ce.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEe629d56ba9f288205e6ae57dfd3f1165.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEb15736c567cc6153e7dfbb2059579fd5.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE9d452d403992cc0392c08a6b5f23a0cd.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE991f998e3da65b66ab134ec7ac50bc7f.png"></p><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/aop/spring-aop.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/tx</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span><br><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.company.MS1&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspectj-autoproxy</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:annotation-driven</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;txManager&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=false<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Mybatis_config.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>com.company.mapper/ProviderMapper.xml<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-comment">&lt;!-- SqlSessionTemplate--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;sqlSessionTemplate&quot; class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;constructor-arg name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerMapper&quot; class=&quot;com.company.MS1.Mapper.Impl.ProviderMapperImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;sqlSessionTemplate&quot; ref=&quot;sqlSessionTemplate&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;    --&gt;</span><br><br><span class="hljs-comment">&lt;!-- MapperFactoryBean--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerMapper&quot; class=&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;mapperInterface&quot; value=&quot;com.company.MS1.Mapper.ProviderMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerService&quot; class=&quot;com.company.MS1.Service.Impl.ProviderServiceImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;providerMapper&quot; ref=&quot;providerMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;    --&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerService&quot; class=&quot;com.company.MS1.Service.Impl.ProviderServiceImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;providerMapper&quot; ref=&quot;providerMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!-- MapperScannerConfigurer--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;basePackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.company.MS1.Mapper&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--事务处理的配置--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;tx:advice id=&quot;transactionInterceptor&quot; transaction-manager=&quot;txManager&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;tx:attributes&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--            &lt;tx:method name=&quot;select*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--            &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;/tx:attributes&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/tx:advice&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    --&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;aop:config&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* com.company.MS1..*.*(..))&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;aop:advisor advice-ref=&quot;transactionInterceptor&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:advisor&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/aop:config&gt;--&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SSM</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>SpringMVC</tag>
      
      <tag>MyBatis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaWeb</title>
    <link href="/2022/10/21/JavaWeb/"/>
    <url>/2022/10/21/JavaWeb/</url>
    
    <content type="html"><![CDATA[<h1 id="1、JavaWeb基础"><a href="#1、JavaWeb基础" class="headerlink" title="1、JavaWeb基础"></a>1、JavaWeb基础</h1><h2 id="1-1、程序架构和Tomcat的操作"><a href="#1-1、程序架构和Tomcat的操作" class="headerlink" title="1.1、程序架构和Tomcat的操作"></a>1.1、程序架构和Tomcat的操作</h2><p>略</p><h2 id="1-2、部署Web项目、JSP入门"><a href="#1-2、部署Web项目、JSP入门" class="headerlink" title="1.2、部署Web项目、JSP入门"></a>1.2、部署Web项目、JSP入门</h2><p>略</p><h1 id="2、JSP实现数据传递和保存"><a href="#2、JSP实现数据传递和保存" class="headerlink" title="2、JSP实现数据传递和保存"></a>2、JSP实现数据传递和保存</h1><h2 id="2-1、JSP九大内置对象"><a href="#2-1、JSP九大内置对象" class="headerlink" title="2.1、JSP九大内置对象"></a>2.1、JSP九大内置对象</h2><p>JSP 中定义了 9 个内置对象，它们分别是：request、response、session、application、out、pagecontext、config、page 和 exception，这些对象在客户端和服务器端交互的过程中分别完成不同的功能。</p><table><thead><tr><th>对  象</th><th>类型</th><th>说  明</th></tr></thead><tbody><tr><td>request</td><td>javax.servlet.http.HttpServletRequest</td><td>获取用户请求信息</td></tr><tr><td>response</td><td>javax.servlet.http.HttpServletResponse</td><td>响应客户端请求，并将处理信息返回到客户端</td></tr><tr><td>out</td><td>javax.servlet.jsp.JspWriter</td><td>输出内容到 HTML 中</td></tr><tr><td>session</td><td>javax.servlet.http.HttpSession</td><td>用来保存用户信息</td></tr><tr><td>application</td><td>javax.servlet.ServletContext</td><td>所有用户共享信息</td></tr><tr><td>config</td><td>javax.servlet.ServletConfig</td><td>这是一个 Servlet 配置对象，用于 Servlet 和页面的初始化参数</td></tr><tr><td>pageContext</td><td>javax.servlet.jsp.PageContext</td><td>JSP 的页面容器，用于访问 page、request、application 和 session 的属性</td></tr><tr><td>page</td><td>javax.servlet.jsp.HttpJspPage</td><td>类似于 Java 类的 this 关键字，表示当前 JSP 页面</td></tr><tr><td>exception</td><td>java.lang.Throwable</td><td>该对象用于处理 JSP 文件执行时发生的错误和异常；只有在 JSP 页面的 page 指令中指定 isErrorPage 的取值 true 时，才可以在本页面使用 exception 对象。</td></tr></tbody></table><p>JSP 的内置对象主要有以下特点：</p><ul><li><p>由 JSP 规范提供，不用编写者实例化；</p></li><li><p>通过 Web 容器实现和管理；</p></li><li><p>所有 JSP 页面均可使用；</p></li><li><p>只有在脚本元素的表达式或代码段中才能使用。</p></li></ul><h2 id="2-2、四大域对象"><a href="#2-2、四大域对象" class="headerlink" title="2.2、四大域对象"></a>2.2、四大域对象</h2><p>在 JSP 九大内置对象中，包含四个域对象，它们分别是：pageContext（page 域对象）、request（request 域对象）、session（session 域对象）、以及 application（application 域对象）。</p><p>JSP 中的 4 个域对象都能通过以下 3 个方法，对属性进行保存、获取和移除操作。</p><table><thead><tr><th>返回值类型</th><th>方法</th><th>作用</th></tr></thead><tbody><tr><td>void</td><td>setAttribute(String name, Object o)</td><td>将属性保存到域对象中</td></tr><tr><td>Object</td><td>getAttribute(String name)</td><td>获取域对象中的属性值</td></tr><tr><td>void</td><td>removeAttribute(String name)</td><td>将属性从域对象中移除</td></tr></tbody></table><p>JSP 中的 4 个域对象的作用域各不相同，如下表。</p><table><thead><tr><th>作用域</th><th>描述</th><th>作用范围</th></tr></thead><tbody><tr><td>page</td><td>如果把属性保存到 pageContext 中，则它的作用域是 page。</td><td>该作用域中的属性只在当前 JSP 页面有效，跳转页面后失效。</td></tr><tr><td>request</td><td>如果把属性保存到 request 中，则它的作用域是 request。</td><td>该作用域中的属性只在当前请求范围内有效。request作用域是在一次请求当中<br>服务器跳转页面后有效，例如&lt;jsp:forward&gt;；<br>客户端跳转页面后无效，例如超链接。</td></tr><tr><td>session</td><td>如果把属性保存到 session 中，则它的作用域是 session。</td><td>该作用域中的属性只在当前会话范围内有效，网页关闭后失效。</td></tr><tr><td>application</td><td>如果把属性保存到 application 中，则它的作用域是 application。</td><td>该作用域中的属性在整个应用范围内有效，服务器重启后失效。</td></tr></tbody></table><h2 id="2-3、获取input输入框中的值"><a href="#2-3、获取input输入框中的值" class="headerlink" title="2.3、获取input输入框中的值"></a>2.3、获取input输入框中的值</h2><p>单值：</p><p>getParameter(inputname)</p><p>数组：</p><p>getParameterValues(inputname)</p><h2 id="2-4、post方式出现乱码情况的解决方法"><a href="#2-4、post方式出现乱码情况的解决方法" class="headerlink" title="2.4、post方式出现乱码情况的解决方法"></a>2.4、post方式出现乱码情况的解决方法</h2><p>在最开头设置request.setcharacterEncoding(“utf-8”)和response.setcharacterEncoding(“utf-8”)</p><p>get方式出现乱码情况</p><p>方式一：修改server.xml配置文件（不建议使用）</p><p>方式二：利用代码方式解决</p><p>userName  &#x3D;  new  string(userName.getParameter(“”)………);</p><h2 id="2-5、post与get的区别"><a href="#2-5、post与get的区别" class="headerlink" title="2.5、post与get的区别"></a>2.5、post与get的区别</h2><ol><li><p>GET提交的数据放在URL中，POST则不会。这是最显而易见的差别。这点意味着GET更不安全（POST也不安全，因为HTTP是明文传输抓包就能获取数据内容，要想安全还得加密）</p></li><li><p>GET回退浏览器无害，POST会再次提交请求（GET方法回退后浏览器再缓存中拿结果，POST每次都会创建新资源）</p></li><li><p>GET提交的数据大小有限制（是因为浏览器对URL的长度有限制，GET本身没有限制），POST也有但是大小很大有几个G。</p></li><li><p>GET可以被保存为书签，POST不可以。这一点也能感受到。</p></li><li><p>GET能被缓存，POST不能</p></li><li><p>GET只允许ASCII字符，POST没有限制</p></li><li><p>GET会保存再浏览器历史记录中，POST不会。这点也能感受到。</p></li><li><p>URL可传播</p></li></ol><p>一般情况下使用post方式</p><h2 id="2-6、转发和重定向"><a href="#2-6、转发和重定向" class="headerlink" title="2.6、转发和重定向"></a>2.6、转发和重定向</h2><p>转发a—&gt;b—&gt;转发—&gt;c(一次请求)</p><p>request.setAttribute(“msg”,“注册失败”)</p><p>request.getRequestDispatcher(filename).forward(request,response)</p><p>request.getAttribute(“msg”,“注册失败”)</p><p>重定向a—&gt;b重定向b—&gt;c(两次请求)</p><p>response.sendRedirect()</p><h1 id="3、使用JDBC-Java-DataBase-Connectivity-操作数据库"><a href="#3、使用JDBC-Java-DataBase-Connectivity-操作数据库" class="headerlink" title="3、使用JDBC(Java DataBase Connectivity)操作数据库"></a>3、使用JDBC(Java DataBase Connectivity)操作数据库</h1><p>Connection数据库连接</p><p>PreparedStatementsql语句</p><p>ResultSet执行查询时，返回的结果集</p><p>DriverManager管理驱动包中的连接</p><h2 id="3-1、JDBC访问数据库的步骤"><a href="#3-1、JDBC访问数据库的步骤" class="headerlink" title="3.1、JDBC访问数据库的步骤"></a>3.1、JDBC访问数据库的步骤</h2><ol><li><p>Class.forName()加载驱动</p></li><li><p>DriverManager获取Connection丽娜姐</p></li><li><p>创建Statement执行SQL语句</p></li><li><p>返回ResultSet</p></li><li><p>释放资源</p></li></ol><h2 id="3-2、JDCB公共部分的解耦"><a href="#3-2、JDCB公共部分的解耦" class="headerlink" title="3.2、JDCB公共部分的解耦"></a>3.2、JDCB公共部分的解耦</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.JDBC;<br><br><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/13 19:20</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb?characterEncoding=utf8&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123456&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        获取连接</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: java.sql.Connection</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:22</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">private</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span> (connection==<span class="hljs-literal">null</span>||connection.isClosed())&#123;<br>                <span class="hljs-comment">//1、建立连接</span><br>                Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>                <span class="hljs-comment">//2、获取链接</span><br>                connection = DriverManager.getConnection(url,user,password);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> connection;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        关闭连接</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: void</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:24</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeConnection</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span> (resultSet!=<span class="hljs-literal">null</span>)&#123;<br>                resultSet.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span> (preparedStatement!=<span class="hljs-literal">null</span>)&#123;<br>                preparedStatement.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span> (connection!=<span class="hljs-literal">null</span>)&#123;<br>                connection.close();<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        添加</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: int</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:36</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addNews</span><span class="hljs-params">(<span class="hljs-type">int</span> categoryId,String title)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">addNewsDetail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = <span class="hljs-built_in">this</span>.getConnection();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;insert into news_detail(categoryId, title) values (?,?)&quot;</span>;<br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setInt(<span class="hljs-number">1</span>,categoryId);<br>            preparedStatement.setString(<span class="hljs-number">2</span>,title);<br>            System.out.println(<span class="hljs-string">&quot;addNews param categoryId:&quot;</span>+categoryId+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>            addNewsDetail = preparedStatement.executeUpdate();<br>            System.out.println(<span class="hljs-string">&quot;addNews param categoryId:&quot;</span>+categoryId+<span class="hljs-string">&quot;,title:&quot;</span>+title+<span class="hljs-string">&quot;,result:&quot;</span>+addNewsDetail);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;queryNewsByTitle is error,param categoryId：&quot;</span>+categoryId+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>        &#125;<br>        <span class="hljs-keyword">return</span> addNewsDetail;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: int</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@time</span>: 2022/5/14 14:36</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">delNews</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">delNewsDetail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = <span class="hljs-built_in">this</span>.getConnection();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from news_detail where id=?&quot;</span>;<br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setInt(<span class="hljs-number">1</span>,id);<br>            System.out.println(<span class="hljs-string">&quot;addNews param id:&quot;</span>+id);<br>            delNewsDetail = preparedStatement.executeUpdate();<br>            System.out.println(<span class="hljs-string">&quot;addNews param id:&quot;</span>+id+<span class="hljs-string">&quot;,result:&quot;</span>+delNewsDetail);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;delNews is error,param id:&quot;</span>+id);<br>        &#125;<br>        <span class="hljs-keyword">return</span> delNewsDetail;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        修改</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: int</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:59</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateNews</span><span class="hljs-params">(<span class="hljs-type">int</span> id,String title)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">updateNewsDetail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = <span class="hljs-built_in">this</span>.getConnection();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update news_detail set title=? where id=?;&quot;</span>;<br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setString(<span class="hljs-number">1</span>,title);<br>            preparedStatement.setInt(<span class="hljs-number">2</span>,id);<br>            System.out.println(<span class="hljs-string">&quot;addNews param id:&quot;</span>+id+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>            updateNewsDetail = preparedStatement.executeUpdate();<br>            System.out.println(<span class="hljs-string">&quot;addNews param id:&quot;</span>+id+<span class="hljs-string">&quot;,title:&quot;</span>+title+<span class="hljs-string">&quot;,result:&quot;</span>+updateNewsDetail);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;updateNewsDetail is error,param id:&quot;</span>+id+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>        &#125;<br>        <span class="hljs-keyword">return</span> updateNewsDetail;<br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        查询</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: void</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:25</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryNewsByTitle</span><span class="hljs-params">(String queryTitle)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = <span class="hljs-built_in">this</span>.getConnection();<br>            <span class="hljs-comment">//3、发送指令(sql)</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select id,title from news_detail where title like ?&quot;</span>;<br>            System.out.println(<span class="hljs-string">&quot;NewsDao sql:&quot;</span>+sql);<br>            <span class="hljs-comment">//4、数据库执行指令</span><br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setString(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;%&quot;</span>+queryTitle+<span class="hljs-string">&quot;%&quot;</span>);<br>            resultSet = preparedStatement.executeQuery();<br>            <span class="hljs-keyword">while</span> (resultSet.next())&#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> resultSet.getInt(<span class="hljs-string">&quot;id&quot;</span>);<span class="hljs-comment">//使用columnLabel来获取列</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">title</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-string">&quot;title&quot;</span>);<span class="hljs-comment">//使用columnIndex来获取列</span><br>                System.out.println(<span class="hljs-string">&quot;id:&quot;</span>+id+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;queryNewsByTitle is error,param:&quot;</span>+queryTitle);<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            closeConnection();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        入口</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: void</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:52</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">NewsDao</span> <span class="hljs-variable">newsDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewsDao</span>();<br><br><span class="hljs-comment">//        //添加</span><br><span class="hljs-comment">//        int addNewCount = newsDao.addNews(3,&quot;爱上服务器二7345375&quot;);</span><br><span class="hljs-comment">//        System.out.println(&quot;main method para categoryId:3,title=爱上服务器二7345375,&quot;+&quot;result:&quot;+addNewCount);</span><br><span class="hljs-comment">//        if (addNewCount&lt;0)&#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加失败&quot;);</span><br><span class="hljs-comment">//        &#125;else &#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加成功&quot;);</span><br><span class="hljs-comment">//        &#125;</span><br><br><span class="hljs-comment">//        //删除</span><br><span class="hljs-comment">//        int delNewCount = newsDao.delNews(2);</span><br><span class="hljs-comment">//        System.out.println(&quot;main method para id:2&quot;+&quot;result:&quot;+delNewCount);</span><br><span class="hljs-comment">//        if (delNewCount&lt;0)&#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加失败&quot;);</span><br><span class="hljs-comment">//        &#125;else &#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加成功&quot;);</span><br><span class="hljs-comment">//        &#125;</span><br><br><span class="hljs-comment">//        //修改</span><br><span class="hljs-comment">//        int updateNewCount = newsDao.updateNews(4,&quot;哈哈哈哈哈哈哈哈哈哈哈&quot;);</span><br><span class="hljs-comment">//        System.out.println(&quot;main method para id:4&quot;+&quot;result:&quot;+updateNewCount);</span><br><span class="hljs-comment">//        if (updateNewCount&lt;0)&#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加失败&quot;);</span><br><span class="hljs-comment">//        &#125;else &#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加成功&quot;);</span><br><span class="hljs-comment">//        &#125;</span><br>        <span class="hljs-comment">//查询</span><br>        newsDao.queryNewsByTitle(<span class="hljs-string">&quot;哈哈哈哈哈哈哈哈哈&quot;</span>);<br><br><br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="3-3、Statement与PreparedStatement区别"><a href="#3-3、Statement与PreparedStatement区别" class="headerlink" title="3.3、Statement与PreparedStatement区别"></a>3.3、Statement与PreparedStatement区别</h2><p>Statement：Statement对象不使用SQL参数，不会解析并编译SQL语句，每次调用执行SQL语句时都要进行SQL语句的解析和编译操作，效率低。</p><p>PreparedStatement：创建PreparedStatement对象时使用SQL语句做参数，会解析并编译SQL语句（预编译）。也可以使用带占位符“?”的SQL语句做参数，在通过setXxx()方法给占位符赋值后执行SQL语句时无需再解析和编译SQL语句，直接执行的。当进行批处理（多次执行相同操作）时，效率高。</p><p>安全性相对来说PreparedStatement比Statement高一些。</p><h2 id="3-4、JDBC工作原理"><a href="#3-4、JDBC工作原理" class="headerlink" title="3.4、JDBC工作原理"></a>3.4、JDBC工作原理</h2><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE75396f683d74401cb2c2ff4c39f793b9.png"></p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE57a9f12c9fc1a7848b54ca07a475cf9f.png"></p><h1 id="4、DAO模式及单例模式"><a href="#4、DAO模式及单例模式" class="headerlink" title="4、DAO模式及单例模式"></a>4、DAO模式及单例模式</h1><h2 id="设计模式：https-www-runoob-com-design-pattern-singleton-pattern-html"><a href="#设计模式：https-www-runoob-com-design-pattern-singleton-pattern-html" class="headerlink" title="设计模式：https://www.runoob.com/design-pattern/singleton-pattern.html"></a>设计模式：<a href="https://www.runoob.com/design-pattern/singleton-pattern.html">https://www.runoob.com/design-pattern/singleton-pattern.html</a></h2><h2 id="4-1、DAO模式"><a href="#4-1、DAO模式" class="headerlink" title="4.1、DAO模式"></a>4.1、DAO模式</h2><p>DAO 模式</p><p>DAO (DataAccessobjects 数据存取对象)是指位于业务逻辑和持久化数据之间实现对持久化数据的访问。通俗来讲，就是将数据库操作都封装起来。</p><p>对外提供相应的接口在面向对象设计过程中，有一些”套路”用于解决特定问题称为模式。</p><p>DAO 模式提供了访问关系型数据库系统所需操作的接口，将数据访问和业务逻辑分离对上层提供面向对象的数据访问接口。</p><p>从以上 DAO 模式使用可以看出，DAO 模式的优势就在于它实现了两次隔离。</p><ul><li><p>1、隔离了数据访问代码和业务逻辑代码。业务逻辑代码直接调用DAO方法即可，完全感觉不到数据库表的存在。分工明确，数据访问层代码变化不影响业务逻辑代码,这符合单一职能原则，降低了藕合性，提高了可复用性。</p></li><li><p>2、隔离了不同数据库实现。采用面向接口编程，如果底层数据库变化，如由 MySQL 变成 Oracle 只要增加 DAO 接口的新实现类即可，原有 MySQ 实现不用修改。这符合 “开-闭” 原则。该原则降低了代码的藕合性，提高了代码扩展性和系统的可移植性。</p></li></ul><p>一个典型的DAO 模式主要由以下几部分组成。</p><ul><li><p>1、DAO接口： 把对数据库的所有操作定义成抽象方法，可以提供多种实现。</p></li><li><p>2、DAO 实现类： 针对不同数据库给出DAO接口定义方法的具体实现。</p></li><li><p>3、实体类：用于存放与传输对象数据。</p></li><li><p>4、数据库连接和关闭工具类： 避免了数据库连接和关闭代码的重复使用，方便修改。</p></li></ul><h2 id="4-2、DAO模式封装JDBC再解耦"><a href="#4-2、DAO模式封装JDBC再解耦" class="headerlink" title="4.2、DAO模式封装JDBC再解耦"></a>4.2、DAO模式封装JDBC再解耦</h2><p><img src="/2022/10/21/JavaWeb/WEBRESOURCEe2e6fa1394521576f61580ca14646764.png"></p><h2 id="4-3、单列模式"><a href="#4-3、单列模式" class="headerlink" title="4.3、单列模式"></a>4.3、单列模式</h2><p>单例模式（Singleton Pattern）是 Java 中最简单的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。</p><p>这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。</p><ul><li><p>1、单例类只能有一个实例。</p></li><li><p>2、单例类必须自己创建自己的唯一实例。</p></li><li><p>3、单例类必须给所有其他对象提供这一实例。</p></li></ul><h2 id="4-4、懒汉模式"><a href="#4-4、懒汉模式" class="headerlink" title="4.4、懒汉模式"></a>4.4、懒汉模式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.JDBC.Utils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:懒汉模式（多线程问题）</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/15 16:57</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigUtil_Lazy</span> &#123;<br><br>    <span class="hljs-keyword">private</span>  Properties properties;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigUtil_Lazy configUtilLazy;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> ConfigUtil_Lazy <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">if</span> (configUtilLazy ==<span class="hljs-literal">null</span>)&#123;<br>            configUtilLazy =<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConfigUtil_Lazy</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> configUtilLazy;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ConfigUtil_Lazy</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String filePath=<span class="hljs-string">&quot;database.properties&quot;</span>;<br>            inputStream = ConfigUtil_Lazy.class.getClassLoader().getResourceAsStream(filePath);<br>            properties = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (inputStream!=<span class="hljs-literal">null</span>)&#123;<br>                    inputStream.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getValueByKey</span><span class="hljs-params">(String key)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) properties.get(key);<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key+<span class="hljs-string">&quot;,value:&quot;</span>+value);<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="4-5、饿汉模式"><a href="#4-5、饿汉模式" class="headerlink" title="4.5、饿汉模式"></a>4.5、饿汉模式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.JDBC.Utils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:饿汉模式</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/15 18:59</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigUtil_Hunger</span> &#123;<br><br>    <span class="hljs-keyword">private</span> Properties properties;<br><br>    <span class="hljs-comment">//方式1:直接创建实体类对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">ConfigUtil_Hunger</span> <span class="hljs-variable">configUtil_hunger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConfigUtil_Hunger</span>();<br><br><span class="hljs-comment">//    //方式2：在静态代码块中创建实体类对象</span><br><span class="hljs-comment">//    public static ConfigUtil_Hunger configUtil_hunger;</span><br><span class="hljs-comment">//    static &#123;</span><br><span class="hljs-comment">//        configUtil_hunger = new ConfigUtil_Hunger();</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigUtil_Hunger <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> configUtil_hunger;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ConfigUtil_Hunger</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String filePath=<span class="hljs-string">&quot;database.properties&quot;</span>;<br>            inputStream = ConfigUtil_Hunger.class.getClassLoader().getResourceAsStream(filePath);<br>            properties = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (inputStream!=<span class="hljs-literal">null</span>)&#123;<br>                    inputStream.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getValueByKey</span><span class="hljs-params">(String key)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) properties.get(key);<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key+<span class="hljs-string">&quot;,value:&quot;</span>+value);<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="4-6、枚举式"><a href="#4-6、枚举式" class="headerlink" title="4.6、枚举式"></a>4.6、枚举式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.JDBC.Utils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:枚举单列模式</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/15 19:08</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ConfigUtil_Enum</span> &#123;<br><br>    INSTANCE;<br><br>    <span class="hljs-keyword">private</span> Properties properties;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ConfigUtil_Enum</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String filePath=<span class="hljs-string">&quot;database.properties&quot;</span>;<br>            inputStream = ConfigUtil_Hunger.class.getClassLoader().getResourceAsStream(filePath);<br>            properties = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (inputStream!=<span class="hljs-literal">null</span>)&#123;<br>                    inputStream.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getValueByKey</span><span class="hljs-params">(String key)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) properties.get(key);<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key+<span class="hljs-string">&quot;,value:&quot;</span>+value);<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="5、数据源及分层开发"><a href="#5、数据源及分层开发" class="headerlink" title="5、数据源及分层开发"></a>5、数据源及分层开发</h1><h2 id="5-1、理解数据源、连接池的作用"><a href="#5-1、理解数据源、连接池的作用" class="headerlink" title="5.1、理解数据源、连接池的作用"></a>5.1、理解数据源、连接池的作用</h2><p>之前的方式访问数据库存在一些缺陷：</p><ul><li><p>访问前现需要先获取连接</p></li><li><p>每次操作结束后，需要释放资源</p></li><li><p>频繁的连接导致系统的安全性和稳定性差</p></li></ul><p>使用数据源、连接池可以解决这些问题。</p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCEe1a20d7470c4336cf0f7ebeb24e5a0aa.png"></p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE792286b57b3af693bd16a256c1b768f4.png"></p><h2 id="5-2、掌握JNDI连接数据库（JNDI会出现严重的漏洞）"><a href="#5-2、掌握JNDI连接数据库（JNDI会出现严重的漏洞）" class="headerlink" title="5.2、掌握JNDI连接数据库（JNDI会出现严重的漏洞）"></a>5.2、掌握JNDI连接数据库（JNDI会出现严重的漏洞）</h2><p>通过JNDI–获取–&gt;DataSource–创建好连接对象–&gt;Connection—-&gt;连接池（管理连接对象）</p><p>1、修改Tomcat中conf的context.xml配置文件内容</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;Resource <span class="hljs-attribute">auth</span>=<span class="hljs-string">&quot;Container&quot;</span> <span class="hljs-attribute">driverClassName</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span><br>          <span class="hljs-attribute">maxActive</span>=<span class="hljs-string">&quot;100&quot;</span> <span class="hljs-attribute">maxIdle</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attribute">maxWait</span>=<span class="hljs-string">&quot;10000&quot;</span><br>          <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;jdbc/news&quot;</span> <span class="hljs-attribute">password</span>=<span class="hljs-string">&quot;123456&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;javax.sql.DataSource&quot;</span><br>          <span class="hljs-attribute">url</span>=<span class="hljs-string">&quot;jdbc:mysql://127.0.0.1:3306/javaweb&quot;</span> <span class="hljs-attribute">username</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><p>2、使用JNDI获取数据源，使用数据源获取连接对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">    通过数据源获取数据库连接对象</span><br><span class="hljs-comment">  * <span class="hljs-doctag">@return</span>:</span><br><span class="hljs-comment">  * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">  * <span class="hljs-doctag">@time</span>: 2022/5/16 8:48</span><br><span class="hljs-comment">  */</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">getConnection2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">//初始化上下文对象</span><br>        <span class="hljs-type">Context</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InitialContext</span>();<br>        <span class="hljs-comment">//获取与逻辑名称相关联的数据源对象</span><br>        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> (DataSource) context.lookup(<span class="hljs-string">&quot;java:comp/env/jdbc/news&quot;</span>);<br>        <span class="hljs-comment">//通过数据源获取数据库连接</span><br>        connection = dataSource.getConnection();<br>    &#125; <span class="hljs-keyword">catch</span> (NamingException e) &#123;<br>        e.printStackTrace();<br>    &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-3、使用JavaBean传递数据"><a href="#5-3、使用JavaBean传递数据" class="headerlink" title="5.3、使用JavaBean传递数据"></a>5.3、使用JavaBean传递数据</h2><p>JavaBean（pojo、entity、DTO、VO…）</p><ul><li><p>就是一个Java类</p></li><li><p>封装业务逻辑</p></li><li><p>封装数据</p></li></ul><p>列如：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package com.<span class="hljs-property">company</span>.<span class="hljs-property">JavaBean</span>.<span class="hljs-property">pojo</span>;<br><br><span class="hljs-keyword">import</span> java.<span class="hljs-property">io</span>.<span class="hljs-property">Serializable</span>;<br><span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Date</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:新闻JavaBean：封装数据</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/16 10:52</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">News</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final long serialVersionUID = -2227279597126347529L;<br><br>    <span class="hljs-keyword">private</span> int id;<br>    <span class="hljs-keyword">private</span> int categoryId;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> title;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-title class_">String</span> summary;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-title class_">String</span> content;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-title class_">String</span> picPath;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-title class_">String</span> author;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Date</span> createDate;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Date</span> modifyDate;<br><br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getId</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setId</span>(<span class="hljs-params">int id</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getCategoryId</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> categoryId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setCategoryId</span>(<span class="hljs-params">int categoryId</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">categoryId</span> = categoryId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getTitle</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> title;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setTitle</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> title</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = title;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSummary</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> summary;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setSummary</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> summary</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">summary</span> = summary;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getContent</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> content;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setContent</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> content</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = content;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getPicPath</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> picPath;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setPicPath</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> picPath</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">picPath</span> = picPath;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getAuthor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> author;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAuthor</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> author</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">author</span> = author;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Date</span> <span class="hljs-title function_">getCreateDate</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> createDate;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setCreateDate</span>(<span class="hljs-params"><span class="hljs-built_in">Date</span> createDate</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">createDate</span> = createDate;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Date</span> <span class="hljs-title function_">getModifyDate</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> modifyDate;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setModifyDate</span>(<span class="hljs-params"><span class="hljs-built_in">Date</span> modifyDate</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">modifyDate</span> = modifyDate;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;News&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;id=&quot;</span> + id +<br>                <span class="hljs-string">&quot;, categoryId=&quot;</span> + categoryId +<br>                <span class="hljs-string">&quot;, title=&#x27;&quot;</span> + title + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, summary=&#x27;&quot;</span> + summary + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, content=&#x27;&quot;</span> + content + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, picPath=&#x27;&quot;</span> + picPath + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, author=&#x27;&quot;</span> + author + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, createDate=&quot;</span> + createDate +<br>                <span class="hljs-string">&quot;, modifyDate=&quot;</span> + modifyDate +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>idea如何设置实体类自动生成SerialVersionUID：</p><p>IDEA的File-&gt;Settings-&gt;Editor-&gt;Inspections,然后在搜索框输入serialV，出现对应的</p><p>选择：</p><ul><li><p>Serializable class without ‘serialVersionUID’</p></li><li><p>‘serialVersionUID’ field not declared ‘private static final long’</p></li></ul><p>然后点击需要添加serialVersionUID的实体类名，Alt+Enter，出现Add ‘serialVersionUID’ field，即可给类添加serialVersionUID标识。</p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCEb4ff26f268f66c89eada8da65f986f0e.png"></p><h2 id="5-4、对service层的剥离"><a href="#5-4、对service层的剥离" class="headerlink" title="5.4、对service层的剥离"></a>5.4、对service层的剥离</h2><p>Controller—-&gt;service接口—-&gt;serviceImpl—-&gt;dao接口—-&gt;daoImpl—-&gt;mapper—-&gt;database</p><p>注：现阶段使用JSP直接调用service接口、daoImpl直接调用database，但在实际应用中，这种方法并不适用。各层之间使用JavaBean传递数据，即封装好的实体类。</p><h2 id="5-5、对MVC（Model、View、Controller）三层模式的初步解析"><a href="#5-5、对MVC（Model、View、Controller）三层模式的初步解析" class="headerlink" title="5.5、对MVC（Model、View、Controller）三层模式的初步解析"></a>5.5、对MVC（Model、View、Controller）三层模式的初步解析</h2><p>Model：模型代表一个存取数据的对象或 JAVA POJO。它也可以带有逻辑，在数据变化时更新控制器。</p><p>View： 视图代表模型包含的数据的可视化。</p><p>Controller： 控制器作用于模型和视图上。它控制数据流向模型对象，并在数据变化时更新视图。它使视图与模型分离开。</p><p>例如：</p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE73ea99d61d1f3d1b66cee9aa720aec3f.png"></p><h2 id="5-6、JSTL（JavaServer-Pages-Standard-Tag-Library：JSP标准标签库）"><a href="#5-6、JSTL（JavaServer-Pages-Standard-Tag-Library：JSP标准标签库）" class="headerlink" title="5.6、JSTL（JavaServer Pages Standard Tag Library：JSP标准标签库）"></a>5.6、JSTL（JavaServer Pages Standard Tag Library：JSP标准标签库）</h2><p>暂时了解以下三个标签：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:forward</span> <span class="hljs-attr">page</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">jsp:forward</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">jsp:useBean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">jsp:useBean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">jsp:include</span> <span class="hljs-attr">page</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">jsp:include</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="6、第三方控件"><a href="#6、第三方控件" class="headerlink" title="6、第三方控件"></a>6、第三方控件</h1><h2 id="6-1、CKeditor"><a href="#6-1、CKeditor" class="headerlink" title="6.1、CKeditor"></a>6.1、CKeditor</h2><p>略</p><h2 id="6-2、使用comons-fileupload-jar实现文件上传下载"><a href="#6-2、使用comons-fileupload-jar实现文件上传下载" class="headerlink" title="6.2、使用comons-fileupload.jar实现文件上传下载"></a>6.2、使用comons-fileupload.jar实现文件上传下载</h2><h3 id="6-2-1、上传"><a href="#6-2-1、上传" class="headerlink" title="6.2.1、上传"></a>6.2.1、上传</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">package com.company.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Javaweb</span>.</span></span>servlet;<br><br>import com.company.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Javaweb</span>.</span></span>pojo.News;<br>import com.company.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Javaweb</span>.</span></span>service.Impl.NewsServiceImpl;<br>import com.company.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Javaweb</span>.</span></span>service.NewsService;<br>import org.apache.commons.fileupload.FileItem;<br>import org.apache.commons.fileupload.FileItemFactory;<br>import org.apache.commons.fileupload.FileUploadException;<br>import org.apache.commons.fileupload.disk.DiskFileItemFactory;<br>import org.apache.commons.fileupload.servlet.ServletFileUpload;<br>import org.apache.commons.io.FilenameUtils;<br><br>import javax.servlet.ServletException;<br>import javax.servlet.http.HttpServlet;<br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;<br>import java.io.File;<br>import java.io.IOException;<br>import java.util.Date;<br>import java.util.List;<br>import java.util.UUID;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @description:用户增加新闻的处理Servlet，接收用户表单提交的新闻数据，调用Service的方法将新闻保存大哦数据库，跳转到新闻列表页面</span><br><span class="hljs-comment"> * @author: Kblayt</span><br><span class="hljs-comment"> * @time: 2022/5/23 18:49</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-keyword">class</span> AddServlet extends HttpServlet &#123;<br><br>    @Override<br>    protected void <span class="hljs-keyword">do</span><span class="hljs-constructor">Get(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>)</span> throws ServletException, IOException &#123;<br>        this.<span class="hljs-keyword">do</span><span class="hljs-constructor">Post(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>)</span>;<br>    &#125;<br><br>    @Override<br>    protected void <span class="hljs-keyword">do</span><span class="hljs-constructor">Post(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>)</span> throws ServletException, IOException &#123;<br>        request.set<span class="hljs-constructor">CharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>;<br>        News news=<span class="hljs-keyword">new</span> <span class="hljs-constructor">News()</span>;<br>        news.set<span class="hljs-constructor">CreateDate(<span class="hljs-params">new</span> Date()</span>);<br>        NewsService newsService=<span class="hljs-keyword">new</span> <span class="hljs-constructor">NewsServiceImpl()</span>;<br>        <span class="hljs-comment">//判断类型</span><br>        boolean isM= <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ServletFileUpload</span>.</span></span>is<span class="hljs-constructor">MultipartContent(<span class="hljs-params">request</span>)</span>;<br>        <span class="hljs-keyword">if</span>(isM)&#123;<br>            <span class="hljs-comment">//from 表单提示正确</span><br>            FileItemFactory fi=<span class="hljs-keyword">new</span> <span class="hljs-constructor">DiskFileItemFactory()</span>;<br>            ServletFileUpload sfu=<span class="hljs-keyword">new</span> <span class="hljs-constructor">ServletFileUpload(<span class="hljs-params">fi</span>)</span>;<br>            List&lt;FileItem&gt; <span class="hljs-built_in">list</span>= null;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-built_in">list</span> = sfu.parse<span class="hljs-constructor">Request(<span class="hljs-params">request</span>)</span>;<br>            &#125; catch (FileUploadException e) &#123;<br>                e.print<span class="hljs-constructor">StackTrace()</span>;<br>            &#125;<br>            <span class="hljs-keyword">for</span>(FileItem item:<span class="hljs-built_in">list</span>)&#123;<br>                <span class="hljs-comment">//判断类型，选择存值</span><br>                <span class="hljs-keyword">if</span>(item.is<span class="hljs-constructor">FormField()</span>)&#123;<br>                    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;title&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">Title(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;summary&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">Summary(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;newscontent&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">Content(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;picPath&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">PicPath(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;author&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">Author(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;categoryId&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        String s=item.get<span class="hljs-constructor">String(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>;<br>                        news.set<span class="hljs-constructor">CategoryId(Integer.<span class="hljs-params">parseInt</span>(<span class="hljs-params">s</span>)</span>);<br>                    &#125;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-comment">//文件的上传</span><br>                    String filename=item.get<span class="hljs-constructor">Name()</span>;<br>                    <span class="hljs-keyword">if</span>(filename!=null &amp;&amp;!<span class="hljs-string">&quot;&quot;</span>.equals(filename))&#123;<br>                        <span class="hljs-comment">//分割后缀名</span><br>                        String endName=<span class="hljs-string">&quot;.&quot;</span>+ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">FilenameUtils</span>.</span></span>get<span class="hljs-constructor">Extension(<span class="hljs-params">filename</span>)</span>;<br>                        <span class="hljs-comment">//拼接完整路径</span><br>                        String picPath=<span class="hljs-string">&quot;d:/&quot;</span>+ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">UUID</span>.</span></span>random<span class="hljs-constructor">UUID()</span>.<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>+endName;<br>                        news.set<span class="hljs-constructor">PicPath(<span class="hljs-params">picPath</span>)</span>;<br>                        <span class="hljs-comment">//根据路径封装文件</span><br>                        File file=<span class="hljs-keyword">new</span> <span class="hljs-constructor">File(<span class="hljs-params">picPath</span>)</span>;<br>                        <span class="hljs-comment">//上传</span><br>                        <span class="hljs-keyword">try</span> &#123;<br>                            item.write(file);<br>                        &#125; catch (Exception e) &#123;<br>                            e.print<span class="hljs-constructor">StackTrace()</span>;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        boolean flag=newsService.add<span class="hljs-constructor">News(<span class="hljs-params">news</span>)</span>;<br>        <span class="hljs-keyword">if</span>(flag)&#123;<br>            response.send<span class="hljs-constructor">Redirect(<span class="hljs-string">&quot;/admin/newsDetailList.jsp&quot;</span>)</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="6-2-2、下载"><a href="#6-2-2、下载" class="headerlink" title="6.2.2、下载"></a>6.2.2、下载</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.Javaweb.servlet;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.ServletOutputStream;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/24 10:48</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-built_in">this</span>.doPost(request, response);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><span class="hljs-comment">//        JSP页面中实现需要关闭 out</span><br><span class="hljs-comment">//        out.clear();</span><br><span class="hljs-comment">//        out=pageContext.pushBody();</span><br><span class="hljs-comment">//        //根据路径 获取文件</span><br>        String picPath=request.getParameter(<span class="hljs-string">&quot;picPath&quot;</span>);<br>        File file=<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(picPath);<br>        <span class="hljs-keyword">if</span>(file.exists())&#123;<br>            <span class="hljs-comment">//设置相应类型</span><br>            response.setContentType(<span class="hljs-string">&quot;application/x-msdownload&quot;</span>);<br>            <span class="hljs-comment">//设置相应头</span><br>            response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, <span class="hljs-string">&quot;attachment;filename=&quot;</span>+picPath);<br>            <span class="hljs-comment">//获取输入输出流</span><br>            InputStream is=<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(file);<br>            ServletOutputStream sos=response.getOutputStream();<br>            <span class="hljs-comment">//使用字节流输出</span><br>            <span class="hljs-type">byte</span> []b=<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-type">int</span> len=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span>((len=is.read(b))!=-<span class="hljs-number">1</span>)&#123;<br>                sos.write(b, <span class="hljs-number">0</span>, len);<br>            &#125;<br>            sos.close();<br>            is.close();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="7、分页查询"><a href="#7、分页查询" class="headerlink" title="7、分页查询"></a>7、分页查询</h1><h1 id="8、EL-Expression-Language-与JSTL-JavaServerPages-Standard-Tag-Library"><a href="#8、EL-Expression-Language-与JSTL-JavaServerPages-Standard-Tag-Library" class="headerlink" title="8、EL(Expression Language)与JSTL(JavaServerPages Standard Tag Library)"></a>8、EL(Expression Language)与JSTL(JavaServerPages Standard Tag Library)</h1><h2 id="8-1、EL表达式"><a href="#8-1、EL表达式" class="headerlink" title="8.1、EL表达式"></a>8.1、EL表达式</h2><p>为什么要使用EL表达式</p><ul><li><p>JSP脚本有哪些不足</p></li><li><p>代码结构混乱</p></li><li><p>脚本与HTML混合，容易出错</p></li><li><p>代码不宜与维护</p></li><li><p>使用EL表达式来优化程序代码，增加程序可读性</p></li></ul><h2 id="8-2、EL语法"><a href="#8-2、EL语法" class="headerlink" title="8.2、EL语法"></a>8.2、EL语法</h2><p>EL表达式</p><ul><li>${EL 表达式}例如：${username}</li></ul><p>EL操作符</p><ul><li><p>操作符“.”</p></li><li><p>获取对象的属性，例如：${news.title}</p></li><li><p>操作符“[]”</p></li><li><p>获取对象的属性，例如：${news[“title”]}</p></li><li><p>获取集合中的对象，例如：newsList[0]</p></li></ul><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE49988252cc330d20f8b4642a6b94ec11.png"></p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE444b5dbab8a3186b87439ffb875e0bc6.png"></p><h2 id="8-3、JSTL介绍"><a href="#8-3、JSTL介绍" class="headerlink" title="8.3、JSTL介绍"></a>8.3、JSTL介绍</h2><ul><li><p>JSTL</p></li><li><p>JSP标准标签库</p></li><li><p>实现JSP页面中的逻辑控制</p></li><li><p>JSTL使用步骤</p></li><li><p>添加jstl.jar和standard.jar包</p></li><li><p>在JSP页面中添加如下指令</p></li></ul><p>&lt;%@ taglib uri&#x3D;”<a href="http://java.sun.com/jsp/jstl/core&quot;">http://java.sun.com/jsp/jstl/core&quot;</a> prefix&#x3D;”c”%&gt;</p><p>&lt;%@ taglib uri&#x3D;”<a href="http://java.sun.com/jsp/jstl/fmt&quot;">http://java.sun.com/jsp/jstl/fmt&quot;</a> prefix&#x3D;”fmt”%&gt;</p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE2489f52d280439c37df16ec02776723c.png"></p><h1 id="9、Servlet"><a href="#9、Servlet" class="headerlink" title="9、Servlet"></a>9、Servlet</h1><h2 id="9-1、Servlet生命周期"><a href="#9-1、Servlet生命周期" class="headerlink" title="9.1、Servlet生命周期"></a>9.1、Servlet生命周期</h2><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE7f1a9492e9fe6eab45a38d07e88d749b.png"></p><h2 id="9-2、ServletAPI"><a href="#9-2、ServletAPI" class="headerlink" title="9.2、ServletAPI"></a>9.2、ServletAPI</h2><ul><li><p>javax.servlet.Servlet接口</p></li><li><p>所有Java Servlet的基础接口类，规定了必须由Servlet具体类实现的方法集。</p></li><li><p>javax.setvlet.GenericServlet类</p></li><li><p>是Servlet的通用版本，是一种与协议无关的Servlet</p></li><li><p>javax.servlet.http.HttpServlet类</p></li><li><p>在GenericServlet基础上扩展的基于Http协议的Servlet</p></li></ul><h2 id="9-3、Servlet中主要方法"><a href="#9-3、Servlet中主要方法" class="headerlink" title="9.3、Servlet中主要方法"></a>9.3、Servlet中主要方法</h2><ul><li><p>init()：Servlet的初始化方法，仅仅会执行一次。</p></li><li><p>service()：处理请求和生成响应。（派发器，用户请求类型调用响应的doGet()、doPost()）</p></li><li><p>doGet()：</p></li><li><p>doPost()：</p></li><li><p>destroy：在服务器停止并且程序中的Servlet对象不再使用的时候调用，只执行一次。</p></li></ul><h2 id="9-4、Servlet中重定向和转发相对路径和绝对路径问题"><a href="#9-4、Servlet中重定向和转发相对路径和绝对路径问题" class="headerlink" title="9.4、Servlet中重定向和转发相对路径和绝对路径问题"></a>9.4、Servlet中重定向和转发相对路径和绝对路径问题</h2><p>HttpServletResponse 重定向response.sendRedirect()</p><p>若当前路径为：<a href="http://localhost:8080/Javaweb/servlet/AddServlet.class">http://localhost:8080/Javaweb/servlet/AddServlet.class</a></p><ul><li><p>相对路径</p></li><li><p>response.sendRedirect(“newsDetailList.jsp”);</p></li><li><p>实际访问路径为：<a href="http://localhost:8080/Javaweb/servlet/newsDetailList.jsp">http://localhost:8080/Javaweb/servlet/newsDetailList.jsp</a></p></li><li><p>绝对路径</p></li><li><p>response.sendRedirect(“&#x2F;Javaweb&#x2F;jsp&#x2F;admin&#x2F;newsDetailList.jsp”);</p></li><li><p>实际访问路径为：<a href="http://localhost:8080/Javaweb/jsp/admin/newsDetailList.jsp">http://localhost:8080/Javaweb/jsp/admin/newsDetailList.jsp</a></p></li></ul><p>HttpServletRequest转发request.getRequestDispatcher().forword()</p><p>若当前路径为：<a href="http://localhost:8080/Javaweb/servlet/AddServlet.class">http://localhost:8080/Javaweb/servlet/AddServlet.class</a></p><ul><li><p>相对路径</p></li><li><p>request.getRequestDispatcher(“newsDetailList.jsp”).forword(request,response)</p></li><li><p>实际访问路径为：<a href="http://localhost:8080/Javaweb/servlet/newsDetailList.jsp">http://localhost:8080/Javaweb/servlet/newsDetailList.jsp</a></p></li><li><p>绝对路径</p></li><li><p>request.getRequestDispatcher(“&#x2F;jsp&#x2F;admin&#x2F;newsDetailList.jsp”).forword(request,response)</p></li><li><p>实际访问路径为：<a href="http://localhost:8080/Javaweb/jsp/admin/newsDetailList.jsp">http://localhost:8080/Javaweb/jsp/admin/newsDetailList.jsp</a></p></li></ul><h1 id="10、Filter-过滤器-和Listener-监听器"><a href="#10、Filter-过滤器-和Listener-监听器" class="headerlink" title="10、Filter(过滤器)和Listener(监听器)"></a>10、Filter(过滤器)和Listener(监听器)</h1><h2 id="10-1、过滤器"><a href="#10-1、过滤器" class="headerlink" title="10.1、过滤器"></a>10.1、过滤器</h2><ul><li><p>是向Web应用程序的请求和响应添加功能的Web服务组件</p></li><li><p>过滤器可以统一的集中处理请求和响应</p></li><li><p>使用过滤器技术实现对请求数据的过滤</p></li></ul><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE277454b3d7603570f51d24dcbf05ccbd.png"></p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCEe7df8ee34688604773aef094dcd20911.png"></p><p>过滤器的生命周期</p><p>init()（初始化）</p><p>doFilter()（执行过滤器）</p><p>destroy()（销毁）</p><h2 id="10-2、监听器"><a href="#10-2、监听器" class="headerlink" title="10.2、监听器"></a>10.2、监听器</h2><ul><li><p>Listener是Servlet的监听器</p></li><li><p>监听客户端的请求和服务器端的操作、</p></li><li><p>通过实现Listener接口的类可以在特定事件(Event)发生时，自动激发一些操作</p></li></ul><h3 id="10-2-1、HttpSessionBindingListener"><a href="#10-2-1、HttpSessionBindingListener" class="headerlink" title="10.2.1、HttpSessionBindingListener"></a>10.2.1、HttpSessionBindingListener</h3><ul><li><p>HttpSessionBindingListener</p></li><li><p>当一个实现了该接口的对象被捆绑到session中或从session中被解放的时候启用此监听器()session的值发生改变的时候)</p></li><li><p>关键点</p></li><li><p>创建实现HttpSessionBindingListener接口</p></li><li><p>valueBound()</p></li><li><p>valueUnbound()</p></li><li><p>不需要再web.xml中配置监听器</p></li><li><p>监听范围：一对一</p></li></ul><h3 id="10-2-2、HttpSessionListener"><a href="#10-2-2、HttpSessionListener" class="headerlink" title="10.2.2、HttpSessionListener"></a>10.2.2、HttpSessionListener</h3><ul><li><p>HttpSessionListener</p></li><li><p>在Web应用中，当一个session被创建或者被销毁时启用这个监听器</p></li><li><p>关键点</p></li><li><p>sessionCreate(HttpSessionEvent event)</p></li><li><p>客户第一次和服务器交互时触发</p></li><li><p>sessionDestroyed(HttpSessionEvent event)</p></li><li><p>销毁会话的时候触发</p></li><li><p>必须在web.xml中配置监听器</p></li><li><p>监听范围：这只一次就可以监听所有session</p></li></ul><h2 id="10-2-2、HttpContextListener"><a href="#10-2-2、HttpContextListener" class="headerlink" title="10.2.2、HttpContextListener"></a>10.2.2、HttpContextListener</h2><ul><li><p>HttpContextListener</p></li><li><p>在web应用中，当一个容器产生或销毁时启用这个监听器</p></li></ul><h1 id="11、Ajax与Jquery的使用"><a href="#11、Ajax与Jquery的使用" class="headerlink" title="11、Ajax与Jquery的使用"></a>11、Ajax与Jquery的使用</h1><p>参考：<a href="https://note.youdao.com/s/48YEmaJu">https://note.youdao.com/s/48YEmaJu</a></p><h1 id="12、实现在Linux上的项目部署"><a href="#12、实现在Linux上的项目部署" class="headerlink" title="12、实现在Linux上的项目部署"></a>12、实现在Linux上的项目部署</h1>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>JavaWeb</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaWeb</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git</title>
    <link href="/2022/10/21/Git/"/>
    <url>/2022/10/21/Git/</url>
    
    <content type="html"><![CDATA[<h1 id="1、版本控制"><a href="#1、版本控制" class="headerlink" title="1、版本控制"></a>1、版本控制</h1><h2 id="1-1、什么是版本控制"><a href="#1-1、什么是版本控制" class="headerlink" title="1.1、什么是版本控制"></a>1.1、什么是版本控制</h2><p>版本控制（Revision control）是一种在开发的过程中用于管理我们对文件、目录或工程等内容的修改历史，方便查看更改历史记录，备份以便恢复以前的版本的软件工程技术。</p><ul><li><p>实现跨区域多人协同开发</p></li><li><p>追踪和记载一个或者多个文件的历史记录</p></li><li><p>组织和保护你的源代码和文档</p></li><li><p>统计工作量</p></li><li><p>并行开发、提高开发效率</p></li><li><p>跟踪记录整个软件的开发过程</p></li><li><p>减轻开发人员的负担，节省时间，同时降低人为错误</p></li></ul><p>简单说就是用于管理多人协同开发项目的技术。</p><p>没有进行版本控制或者版本控制本身缺乏正确的流程管理，在软件开发过程中将会引入很多问题，如软件代码的一致性、软件内容的冗余、软件过程的事物性、软件开发过程中的并发性、软件源代码的安全性，以及软件的整合等问题。</p><p>无论是工作还是学习，或者是自己做笔记，都经历过这样一个阶段！我们就迫切需要一个版本控制工具！</p><p><img src="/2022/10/21/Git/WEBRESOURCE5781b88d50a965f6baa98c08f3bdc81d.jpeg"></p><p>多人开发就必须要使用版本控制！</p><h2 id="1-2、常见的版本控制工具"><a href="#1-2、常见的版本控制工具" class="headerlink" title="1.2、常见的版本控制工具"></a>1.2、常见的版本控制工具</h2><p>我们学习的东西，一定是当下最流行的！</p><p>主流的版本控制器有如下这些：</p><ul><li><p>Git</p></li><li><p>SVN（Subversion）</p></li><li><p>CVS（Concurrent Versions System）</p></li><li><p>VSS（Micorosoft Visual SourceSafe）</p></li><li><p>TFS（Team Foundation Server）</p></li><li><p>Visual Studio Online</p></li></ul><p>版本控制产品非常的多（Perforce、Rational ClearCase、RCS（GNU Revision Control System）、Serena Dimention、SVK、BitKeeper、Monotone、Bazaar、Mercurial、SourceGear Vault），现在影响力最大且使用最广泛的是Git与SVN</p><h2 id="1-3版本控制分类"><a href="#1-3版本控制分类" class="headerlink" title="1.3版本控制分类"></a>1.3版本控制分类</h2><h3 id="1-3-1、本地版本控制"><a href="#1-3-1、本地版本控制" class="headerlink" title="1.3.1、本地版本控制"></a>1.3.1、本地版本控制</h3><p>记录文件每次的更新，可以对每个版本做一个快照，或是记录补丁文件，适合个人用，如RCS。</p><p><img src="/2022/10/21/Git/WEBRESOURCE34d172540721e9729fe384f7eed4653a.png"></p><h3 id="1-3-2、集中版本控制-SVN"><a href="#1-3-2、集中版本控制-SVN" class="headerlink" title="1.3.2、集中版本控制  SVN"></a>1.3.2、集中版本控制  SVN</h3><p>所有的版本数据都保存在服务器上，协同开发者从服务器上同步更新或上传自己的修改</p><p><img src="/2022/10/21/Git/WEBRESOURCE6a78ce9141d1732ca8bd879058b34116.png"></p><p>所有的版本数据都存在服务器上，用户的本地只有自己以前所同步的版本，如果不连网的话，用户就看不到历史版本，也无法切换版本验证问题，或在不同分支工作。而且，所有数据都保存在单一的服务器上，有很大的风险这个服务器会损坏，这样就会丢失所有的数据，当然可以定期备份。代表产品：SVN、CVS、VSS</p><h3 id="1-3-3、分布式版本控制-Git"><a href="#1-3-3、分布式版本控制-Git" class="headerlink" title="1.3.3、分布式版本控制 Git"></a>1.3.3、分布式版本控制 Git</h3><p>每个人都拥有全部的代码！安全隐患！</p><p>所有版本信息仓库全部同步到本地的每个用户，这样就可以在本地查看所有版本历史，可以离线在本地提交，只需在连网时push到相应的服务器或其他用户那里。由于每个用户那里保存的都是所有的版本数据，只要有一个用户的设备没有问题就可以恢复所有的数据，但这增加了本地存储空间的占用。</p><p>不会因为服务器损坏或者网络问题，造成不能工作的情况！</p><p><img src="/2022/10/21/Git/WEBRESOURCEacdf78d4e5d49ec15b4e1d76fb8cc1c3.jpeg"></p><h2 id="1-4、Git与SVN的主要区别"><a href="#1-4、Git与SVN的主要区别" class="headerlink" title="1.4、Git与SVN的主要区别"></a>1.4、Git与SVN的主要区别</h2><p>SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而工作的时候，用的都是自己的电脑，所以首先要从中央服务器得到最新的版本，然后工作，完成工作后，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，对网络带宽要求较高。</p><p><img src="/2022/10/21/Git/WEBRESOURCEd57ed7f0e43c5642ac5c107ea02ab7e4.jpeg"></p><p>Git是分布式版本控制系统，没有中央服务器，每个人的电脑就是一个完整的版本库，工作的时候不需要联网了，因为版本都在自己电脑上。协同的方法是这样的：比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。Git可以直接看到更新了哪些代码和文件！</p><p>Git是目前世界上最先进的分布式版本控制系统。</p><h1 id="2、聊聊Git的历史"><a href="#2、聊聊Git的历史" class="headerlink" title="2、聊聊Git的历史"></a>2、聊聊Git的历史</h1><p>同生活中的许多伟大事物一样，Git 诞生于一个极富纷争大举创新的年代。</p><p>Linux 内核开源项目有着为数众广的参与者。绝大多数的 Linux 内核维护工作都花在了提交补丁和保存归档的繁琐事务上(1991－2002年间)。到 2002 年，整个项目组开始启用一个专有的分布式版本控制系统 BitKeeper 来管理和维护代码。</p><p>Linux社区中存在很多的大佬！破解研究 BitKeeper ！</p><p>到了 2005 年，开发 BitKeeper 的商业公司同 Linux 内核开源社区的合作关系结束，他们收回了 Linux 内核社区免费使用 BitKeeper 的权力。这就迫使 Linux 开源社区(特别是 Linux 的缔造者 Linus Torvalds)基于使用 BitKeeper 时的经验教训，开发出自己的版本系统。（2周左右！） 也就是后来的 Git！</p><p>Git是目前世界上最先进的分布式版本控制系统。</p><p>Git是免费、开源的，最初Git是为辅助 Linux 内核开发的，来替代 BitKeeper！</p><p><img src="/2022/10/21/Git/WEBRESOURCEe91ebf7ea6f112387a01257360b325ac.jpeg"></p><p>Linux和Git之父李纳斯·托沃兹（Linus Benedic Torvalds）1969、芬兰</p><h1 id="3、Git环境配置"><a href="#3、Git环境配置" class="headerlink" title="3、Git环境配置"></a>3、Git环境配置</h1><h2 id="3-1、软件下载"><a href="#3-1、软件下载" class="headerlink" title="3.1、软件下载"></a>3.1、软件下载</h2><p>打开 [git官网] <a href="https://git-scm.com/%EF%BC%8C%E4%B8%8B%E8%BD%BDgit%E5%AF%B9%E5%BA%94%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%88%E6%9C%AC%E3%80%82">https://git-scm.com/，下载git对应操作系统的版本。</a></p><p>所有东西下载慢的话就可以去找镜像！</p><p>官网下载太慢，我们可以使用淘宝镜像下载：<a href="http://npm.taobao.org/mirrors/git-for-windows/">http://npm.taobao.org/mirrors/git-for-windows/</a></p><p><img src="/2022/10/21/Git/WEBRESOURCE4e5f2652c7e918b34855c3feb6add319.jpeg"></p><p>下载对应的版本即可安装！</p><p>安装：无脑下一步即可！安装完毕就可以使用了！</p><h2 id="3-2、启动Git"><a href="#3-2、启动Git" class="headerlink" title="3.2、启动Git"></a>3.2、启动Git</h2><p>安装成功后在开始菜单中会有Git项，菜单下有3个程序：任意文件夹下右键也可以看到对应的程序！</p><p><img src="/2022/10/21/Git/WEBRESOURCEfee0d982805082ebdf7bc9e9af75f98e.png"></p><p>Git Bash：Unix与Linux风格的命令行，使用最多，推荐最多</p><p>Git CMD：Windows风格的命令行</p><p>Git GUI：图形界面的Git，不建议初学者使用，尽量先熟悉常用命令</p><h2 id="3-3、常用的Linux命令"><a href="#3-3、常用的Linux命令" class="headerlink" title="3.3、常用的Linux命令"></a>3.3、常用的Linux命令</h2><p>平时一定要多使用这些基础的命令！</p><p>1）、cd : 改变目录。</p><p>2）、cd . . 回退到上一个目录，直接cd进入默认目录</p><p>3）、pwd : 显示当前所在的目录路径。</p><p>4）、ls(ll):  都是列出当前目录中的所有文件，只不过ll(两个ll)列出的内容更为详细。</p><p>5）、touch : 新建一个文件 如 touch index.js 就会在当前目录下新建一个index.js文件。</p><p>6）、rm:  删除一个文件, rm index.js 就会把index.js文件删除。</p><p>7）、mkdir:  新建一个目录,就是新建一个文件夹。</p><p>8）、rm -r :  删除一个文件夹, rm -r src 删除src目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> -rf / 切勿在Linux中尝试！删除电脑中全部文件！<br></code></pre></td></tr></table></figure><p>9）、mv 移动文件, mv index.html src index.html 是我们要移动的文件, src 是目标文件夹,当然, 这样写,必须保证文件和目标文件夹在同一目录下。</p><p>10）、reset 重新初始化终端&#x2F;清屏。</p><p>11）、clear 清屏。</p><p>12）、history 查看命令历史。</p><p>13）、help 帮助。</p><p>14）、exit 退出。</p><p>15）、#表示注释</p><h2 id="3-4、Git配置"><a href="#3-4、Git配置" class="headerlink" title="3.4、Git配置"></a>3.4、Git配置</h2><p>所有的配置文件，其实都保存在本地！</p><p>查看配置 git config -l</p><p><img src="/2022/10/21/Git/WEBRESOURCE4374aa416f84a58c58615b990a71854d.jpeg"></p><p>查看不同级别的配置文件：</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">#查看系统configgit config</span> <span class="hljs-literal">--</span><span class="hljs-comment">system</span> <span class="hljs-literal">--</span><span class="hljs-comment">list　　#查看当前用户（global）配置git config</span> <span class="hljs-literal">--</span><span class="hljs-comment">global</span>  <span class="hljs-literal">--</span><span class="hljs-comment">list</span><br></code></pre></td></tr></table></figure><p>Git相关的配置文件：</p><p>1）、Git\etc\gitconfig  ：Git 安装目录下的 gitconfig     –system 系统级</p><p>2）、C:\Users\Administrator\ .gitconfig    只适用于当前登录用户的配置  –global 全局</p><p><img src="/2022/10/21/Git/WEBRESOURCEd020d58a5afd538f9c1cee8175e564e9.png"></p><p>这里可以直接编辑配置文件，通过命令设置后会响应到这里。</p><h2 id="设置用户名与邮箱（用户标识，必要）"><a href="#设置用户名与邮箱（用户标识，必要）" class="headerlink" title="设置用户名与邮箱（用户标识，必要）"></a>设置用户名与邮箱（用户标识，必要）</h2><p>当你安装Git后首先要做的事情是设置你的用户名称和e-mail地址。这是非常重要的，因为每次Git提交都会使用该信息。它被永远的嵌入到了你的提交中：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.name</span> <span class="hljs-string">&quot;kuangshen&quot;</span>  #名称git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.email</span> <span class="hljs-number">24736743</span>@qq<span class="hljs-selector-class">.com</span>   #邮箱<br></code></pre></td></tr></table></figure><p>只需要做一次这个设置，如果你传递了–global 选项，因为Git将总是会使用该信息来处理你在系统中所做的一切操作。如果你希望在一个特定的项目中使用不同的名称或e-mail地址，你可以在该项目中运行该命令而不要–global选项。总之–global为全局配置，不加为某个项目的特定配置。</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="></p><h1 id="4、Git基本理论（重要）"><a href="#4、Git基本理论（重要）" class="headerlink" title="4、Git基本理论（重要）"></a>4、Git基本理论（重要）</h1><h2 id="4-1、三个区域"><a href="#4-1、三个区域" class="headerlink" title="4.1、三个区域"></a>4.1、三个区域</h2><p>Git本地有三个工作区域：工作目录（Working Directory）、暂存区(Stage&#x2F;Index)、资源库(Repository或Git Directory)。如果在加上远程的git仓库(Remote Directory)就可以分为四个工作区域。文件在这四个区域之间的转换关系如下：</p><p><img src="/2022/10/21/Git/WEBRESOURCE0d40cd8de9988128d9d781f435577e6f.png"></p><ul><li><p>Workspace：工作区，就是你平时存放项目代码的地方</p></li><li><p>Index &#x2F; Stage：暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息</p></li><li><p>Repository：仓库区（或本地仓库），就是安全存放数据的位置，这里面有你提交到所有版本的数据。其中HEAD指向最新放入仓库的版本</p></li><li><p>Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中的一台电脑用于远程数据交换</p></li></ul><p>本地的三个区域确切的说应该是git仓库中HEAD指向的版本：</p><p><img src="/2022/10/21/Git/WEBRESOURCE02d33c7ff37bb246e0606c21dd83d0ce.png"></p><ul><li><p>Directory：使用Git管理的一个目录，也就是一个仓库，包含我们的工作空间和Git的管理空间。</p></li><li><p>WorkSpace：需要通过Git进行版本控制的目录和文件，这些目录和文件组成了工作空间。</p></li><li><p>.git：存放Git管理信息的目录，初始化仓库的时候自动创建。</p></li><li><p>Index&#x2F;Stage：暂存区，或者叫待提交更新区，在提交进入repo之前，我们可以把所有的更新放在暂存区。</p></li><li><p>Local Repo：本地仓库，一个存放在本地的版本库；HEAD会只是当前的开发分支（branch）。</p></li><li><p>Stash：隐藏，是一个工作状态保存栈，用于保存&#x2F;恢复WorkSpace中的临时状态。</p></li></ul><h2 id="4-2、工作流程"><a href="#4-2、工作流程" class="headerlink" title="4.2、工作流程"></a>4.2、工作流程</h2><p>git的工作流程一般是这样的：</p><p>１、在工作目录中添加、修改文件；</p><p>２、将需要进行版本管理的文件放入暂存区域；</p><p>３、将暂存区域的文件提交到git仓库。</p><p>因此，git管理的文件有三种状态：已修改（modified）,已暂存（staged）,已提交(committed)</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="></p><h1 id="5、Git项目搭建"><a href="#5、Git项目搭建" class="headerlink" title="5、Git项目搭建"></a>5、Git项目搭建</h1><h2 id="5-1、创建工作目录与常用指令"><a href="#5-1、创建工作目录与常用指令" class="headerlink" title="5.1、创建工作目录与常用指令"></a>5.1、创建工作目录与常用指令</h2><p>工作目录（WorkSpace)一般就是你希望Git帮助你管理的文件夹，可以是你项目的目录，也可以是一个空目录，建议不要有中文。</p><p>日常使用只要记住下图6个命令：</p><p><img src="/2022/10/21/Git/WEBRESOURCE2cab9f228518b50c6c129094774c1d19.png"></p><h2 id="5-2、本地仓库搭建"><a href="#5-2、本地仓库搭建" class="headerlink" title="5.2、本地仓库搭建"></a>5.2、本地仓库搭建</h2><p>创建本地仓库的方法有两种：一种是创建全新的仓库，另一种是克隆远程仓库。</p><p>1、创建全新的仓库，需要用GIT管理的项目的根目录执行：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># 在当前目录新建一个Git代码库$ git init</span><br></code></pre></td></tr></table></figure><p>2、执行后可以看到，仅仅在项目目录多出了一个.git目录，关于版本等的所有信息都在这个目录里面。</p><h2 id="5-3、克隆远程仓库"><a href="#5-3、克隆远程仓库" class="headerlink" title="5.3、克隆远程仓库"></a>5.3、克隆远程仓库</h2><p>1、另一种方式是克隆远程目录，由于是将远程服务器上的仓库完全镜像一份至本地！</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean"># 克隆一个项目和它的整个代码历史(版本信息)$ git clone [url]  # https:<span class="hljs-comment">//gitee.com/kuangstudy/openclass.git</span><br></code></pre></td></tr></table></figure><p>2、去 gitee 或者 github 上克隆一个测试！</p><h1 id="6、Git文件操作"><a href="#6、Git文件操作" class="headerlink" title="6、Git文件操作"></a>6、Git文件操作</h1><h2 id="6-1、文件的四种状态"><a href="#6-1、文件的四种状态" class="headerlink" title="6.1、文件的四种状态"></a>6.1、文件的四种状态</h2><p>版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前在什么状态，不然可能会提交了现在还不想提交的文件，或者要提交的文件没提交上。</p><ul><li><p>Untracked: 未跟踪, 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过git add 状态变为Staged.</p></li><li><p>Unmodify: 文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified. 如果使用git rm移出版本库, 则成为Untracked文件</p></li><li><p>Modified: 文件已修改, 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过git add可进入暂存staged状态, 使用git checkout 则丢弃修改过, 返回到unmodify状态, 这个git checkout即从库中取出文件, 覆盖当前修改 !</p></li><li><p>Staged: 暂存状态. 执行git commit则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为Unmodify状态. 执行git reset HEAD filename取消暂存, 文件状态为Modified</p></li></ul><h2 id="6-2、查看文件状态"><a href="#6-2、查看文件状态" class="headerlink" title="6.2、查看文件状态"></a>6.2、查看文件状态</h2><p>上面说文件有4种状态，通过如下命令可以查看到文件的状态：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean">#查看指定文件状态git status [filename]#查看所有文件状态git status# git add .                  添加所有文件到暂存区# git commit -m <span class="hljs-string">&quot;消息内容&quot;</span>    提交暂存区中的内容到本地仓库 -m 提交信息<br></code></pre></td></tr></table></figure><h2 id="6-3、忽略文件"><a href="#6-3、忽略文件" class="headerlink" title="6.3、忽略文件"></a>6.3、忽略文件</h2><p>有些时候我们不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等</p><p>在主目录下建立”.gitignore”文件，此文件有如下规则：</p><ol><li><p>忽略文件中的空行或以井号（#）开始的行将会被忽略。</p></li><li><p>可以使用Linux通配符。例如：星号（*）代表任意多个字符，问号（？）代表一个字符，方括号（[abc]）代表可选字符范围，大括号（{string1,string2,…}）代表可选的字符串等。</p></li><li><p>如果名称的最前面有一个感叹号（!），表示例外规则，将不被忽略。</p></li><li><p>如果名称的最前面是一个路径分隔符（&#x2F;），表示要忽略的文件在此目录下，而子目录中的文件不忽略。</p></li><li><p>如果名称的最后面是一个路径分隔符（&#x2F;），表示要忽略的是此目录下该名称的子目录，而非文件（默认文件或目录都忽略）。</p></li></ol><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">#为注释*.txt        #忽略所有 .txt结尾的文件,这样的话上传就不会被选中！!lib.txt     #但lib.txt除外<span class="hljs-regexp">/temp        #仅忽略项目根目录下的TODO文件,不包括其它目录tempbuild/</span>       #忽略build<span class="hljs-regexp">/目录下的所有文件doc/</span>*.txt    #会忽略 doc<span class="hljs-regexp">/notes.txt 但不包括 doc/</span>server/arch.txt<br></code></pre></td></tr></table></figure><h1 id="7、使用码云"><a href="#7、使用码云" class="headerlink" title="7、使用码云"></a>7、使用码云</h1><p>github 是有墙的，比较慢，在国内的话，我们一般使用 gitee ，公司中有时候会搭建自己的gitlab服务器</p><p>这个其实可以作为大家未来找工作的一个重要信息！</p><p>1、注册登录码云，完善个人信息</p><p>2、设置本机绑定SSH公钥，实现免密码登录！（免密码登录，这一步挺重要的，码云是远程仓库，我们是平时工作在本地仓库！)</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean"># 进入 C:\Users\Administrator\.ssh 目录# 生成公钥ssh-keygen<br></code></pre></td></tr></table></figure><p><img src="/2022/10/21/Git/WEBRESOURCE940564f6e1e011817aa5dbc800e7e8ac.jpeg"></p><p>3、将公钥信息public key 添加到码云账户中即可！</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="></p><p>4、使用码云创建一个自己的仓库！</p><p>许可证：开源是否可以随意转载，开源但是不能商业使用，不能转载，…  限制！</p><p>克隆到本地！</p><p><img src="/2022/10/21/Git/WEBRESOURCEfd19c479ccf30232601db572fb8f3c81.jpeg"></p><h1 id="8、IDEA中集成Git"><a href="#8、IDEA中集成Git" class="headerlink" title="8、IDEA中集成Git"></a>8、IDEA中集成Git</h1><h2 id="8-1、新建项目，绑定git。"><a href="#8-1、新建项目，绑定git。" class="headerlink" title="8.1、新建项目，绑定git。"></a>8.1、新建项目，绑定git。</h2><p><img src="/2022/10/21/Git/WEBRESOURCE04f24196c61b219edbb3e678cbac4781.jpeg"></p><p>注意观察idea中的变化</p><p><img src="/2022/10/21/Git/WEBRESOURCE87f45e62915ef55532164726f54fbbbb.png"></p><h2 id="8-2、修改文件，使用IDEA操作git。"><a href="#8-2、修改文件，使用IDEA操作git。" class="headerlink" title="8.2、修改文件，使用IDEA操作git。"></a>8.2、修改文件，使用IDEA操作git。</h2><ul><li><p>添加到暂存区</p></li><li><p>commit 提交</p></li><li><p>push到远程仓库</p></li></ul><h2 id="8-3、提交测试"><a href="#8-3、提交测试" class="headerlink" title="8.3、提交测试"></a>8.3、提交测试</h2><p>这些都是单个人的操作！</p><p>学习的方式最重要！学会学习！我上课的更多时候都是在教大家去学习一种理念和思想（学习方式）</p><p>有道无术、术尚可求。有术无道、止于术！</p><p>真正的教学，授人以渔！</p><h2 id="8-4、说明：GIT分支"><a href="#8-4、说明：GIT分支" class="headerlink" title="8.4、说明：GIT分支"></a>8.4、说明：GIT分支</h2><p>分支在GIT中相对较难，分支就是科幻电影里面的平行宇宙，如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，我们就需要处理一些问题了！</p><p><img src="/2022/10/21/Git/WEBRESOURCE938a99855af5fdf607f209749411aba8.png"></p><p><img src="/2022/10/21/Git/WEBRESOURCEe5506ec1efb324ac64ce8c7b74ec21e4.png"></p><p>git分支中常用指令：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean"># 列出所有本地分支git branch# 列出所有远程分支git branch -r# 新建一个分支，但依然停留在当前分支git branch [branch-name]# 新建一个分支，并切换到该分支git checkout -b [branch]# 合并指定分支到当前分支$ git merge [branch]# 删除分支$ git branch -d [branch-name]# 删除远程分支$ git push origin --delete [branch-name]$ git branch -dr [remote/branch]<br></code></pre></td></tr></table></figure><h1 id="9、IDEA中操作"><a href="#9、IDEA中操作" class="headerlink" title="9、IDEA中操作"></a>9、IDEA中操作</h1><p><img src="/2022/10/21/Git/WEBRESOURCE24a92beaa781c9bef1cc5d9227a4adc1.png"></p><p>如果同一个文件在合并分支时都被修改了则会引起冲突：解决的办法是我们可以修改冲突文件后重新提交！选择要保留他的代码还是你的代码！</p><p>master主分支应该非常稳定，用来发布新版本，一般情况下不允许在上面工作，工作一般情况下在新建的dev分支上工作，工作完后，比如上要发布，或者说dev分支代码稳定后可以合并到主分支master上来。</p>]]></content>
    
    
    <categories>
      
      <category>项目管理工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>gitee</tag>
      
      <tag>github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>红黑树(RBT)</title>
    <link href="/2022/10/21/%E7%BA%A2%E9%BB%91%E6%A0%91-RBT/"/>
    <url>/2022/10/21/%E7%BA%A2%E9%BB%91%E6%A0%91-RBT/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java反射与XML&amp;JSON</title>
    <link href="/2022/10/21/Java%E5%8F%8D%E5%B0%84%E4%B8%8EXML-Json/"/>
    <url>/2022/10/21/Java%E5%8F%8D%E5%B0%84%E4%B8%8EXML-Json/</url>
    
    <content type="html"><![CDATA[<h1 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h1><h2 id="类的加载概述和分类"><a href="#类的加载概述和分类" class="headerlink" title="类的加载概述和分类"></a>类的加载概述和分类</h2><h4 id="1-类加载的概述"><a href="#1-类加载的概述" class="headerlink" title="1.类加载的概述"></a>1.类加载的概述</h4><p>当程序要使用某个类时，如果该类还未被加载到内存中，则系统会通过加载，链接，初始化三步来实现对这个类进行初始化。</p><p>加载</p><p>就是指class文件读入内存，并且为之创建一个Class对象。任何类被使用时系统都会建立一个class对象。</p><p>链接</p><p>验证 是否有正确的内部结构，并和其它类协调一致。</p><p>准备 负责为类的静态成员分配内村，并设置默认初始化值。</p><p>解析 酱类的二进制数据中的符号引用替换为直接引用</p><p>初始化</p><p>默认初始化、显式初始化、构造方法初始化等等。</p><h4 id="2-加载时机"><a href="#2-加载时机" class="headerlink" title="2.加载时机"></a>2.加载时机</h4><p>创建类的实例（Person p &#x3D; new Person()）</p><p>访问类的静态变量，或者为静态变量赋值（p.静态变量 或者 p.静态变量 &#x3D; 0；）</p><p>调用类的静态方法</p><p>使用反射方式来强制创建某个类或接口对应的java.long.Class对象</p><p>初始化某个类的子类</p><p>直接使用java.exe命令来运行某个主类</p><h4 id="3-类加载器的概述"><a href="#3-类加载器的概述" class="headerlink" title="3.类加载器的概述"></a>3.类加载器的概述</h4><p>负责将.class文件加载到内存中，并为之生成对应的Class对象，虽然我们不需要关心类加载机制，但是了解这个机制我们就能更好地理解程序的运行。</p><h4 id="4-类加载器的分类"><a href="#4-类加载器的分类" class="headerlink" title="4.类加载器的分类"></a>4.类加载器的分类</h4><p>Bootstrap ClassLoader 根类加载器</p><p>Extension ClassLoader 扩展类加载器</p><p>System ClassLoader 系统类加载器</p><h4 id="5-类加载器的作用"><a href="#5-类加载器的作用" class="headerlink" title="5.类加载器的作用"></a>5.类加载器的作用</h4><p>Bootstrap ClassLoader 根类加载器</p><p>也被称为引导类加载器，负责Java核心类的加载</p><p>比如System，String等。在JDK中JRE的lib目录下rt.jar文件中</p><p>Extension ClassLoader扩展类加载器</p><p>负责JRE的扩展目录中jar的加载</p><p>在JDK中JRE的lib目录下ext目录</p><p>System ClassLoader 系统类加载器</p><p>负责在JVM启动时加载来自java命令的class文件，以及classpath环境变量所指定的jar包和类路径</p><h2 id="反射概述"><a href="#反射概述" class="headerlink" title="反射概述"></a>反射概述</h2><p>Java反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；</p><p>对于任意一个对象，都能够调用它的任意一个方法和属性；</p><p>这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。</p><p>要想解剖一个类，就必须要获取到该类的字节码文件对象</p><p>而解剖使用的就是Class类中的方法，所以要先获取到每一个字节码文件对应的Class类型对象。</p><h4 id="三种方式"><a href="#三种方式" class="headerlink" title="三种方式"></a>三种方式</h4><p>1.Object类的getClass()方法，判断两个对象是否时同一个字节码文件</p><p>2.静态属性class，锁对象</p><p>3.Class类中静态方法forName(),读取配置文件</p><p><img src="/2022/10/21/Java%E5%8F%8D%E5%B0%84%E4%B8%8EXML-Json/WEBRESOURCE59d8c4c388d4fa76527dcf6a69038ba1.png"></p><p><img src="/2022/10/21/Java%E5%8F%8D%E5%B0%84%E4%B8%8EXML-Json/WEBRESOURCE7903b6f0673f48b511e7f09f5aa7aab0.png"></p><h4 id="通过反射获取带参构造方法并使用"><a href="#通过反射获取带参构造方法并使用" class="headerlink" title="通过反射获取带参构造方法并使用"></a>通过反射获取带参构造方法并使用</h4><p>Constructor</p><p>Class类的newInstance()方法是使用该无参的构造函数创建对象，如果一个类没有无参的构造函数，就不能这样创建了，可以调用Class类的getConstructor（String.class,int.class）方法获取一个指定的构造函数然后再调用Constructor类的newInstance(“张三”，20)方法创建对象</p><h4 id="通过反射获取成员变量并使用"><a href="#通过反射获取成员变量并使用" class="headerlink" title="通过反射获取成员变量并使用"></a>通过反射获取成员变量并使用</h4><p>Field</p><p>Class.getField(String)方法可以获取类中的指定字段(可见的)，如果时私有的可以用getDeclaedField(“name”)方法获取，通过set(obj，”李四”)方法可以设置指定对象上该字段的值，如果是私有的需要先调用setAccessible(true)设置访问权限，用获取的指定的字段调用get(obj)可以获取指定对象中该字段的值</p><h4 id="通过反射获取方法并使用"><a href="#通过反射获取方法并使用" class="headerlink" title="通过反射获取方法并使用"></a>通过反射获取方法并使用</h4><p>Method</p><p>Class.getMethod(String，Class…)和Class.getDeclareMethod(String,Class…)方法可以获取类中的指定方法，调用invoke(object，object…)可以调用该法ing发，Class.getMethod(”eat“)invoke(obj)Class.getMethod(“eat”，int.class)invoke(obj,10)</p><h1 id="XML-amp-JSON"><a href="#XML-amp-JSON" class="headerlink" title="XML&amp;JSON"></a>XML&amp;JSON</h1><h2 id="XML（EXtensible-Markup-Language）"><a href="#XML（EXtensible-Markup-Language）" class="headerlink" title="XML（EXtensible Markup Language）"></a>XML（EXtensible Markup Language）</h2><p>可扩展标记语言</p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>与操作系统、编程语言的开发平台无关</p><p>实现不同系统之间的数据交换</p><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>数据交互</p><p>配置应用程序和网站</p><p>Ajax基石</p><h4 id="XML文档内容由一系列标签元素组成"><a href="#XML文档内容由一系列标签元素组成" class="headerlink" title="XML文档内容由一系列标签元素组成"></a>XML文档内容由一系列标签元素组成</h4><p>&lt;元素名 属性名&#x3D;”属性值“&gt;元素内容&lt;&#x2F;元素名&gt;</p><![CDATA[内容......]]><p>xml命名空间的作用</p><h4 id="解析XML技术"><a href="#解析XML技术" class="headerlink" title="解析XML技术"></a>解析XML技术</h4><p>DOM</p><p>基于XML文档树结构的解析</p><p>适用于多次访问的XML文档</p><p>特点：速度快，比较消耗资源</p><p>SAX</p><p>基于事件的解析</p><p>适用于大数据量的XML文档</p><p>特点：占用资源少，内存消耗小</p><p>DOM4J（主流）</p><p>非常优秀的Java XML API</p><p>性能优异、功能强大</p><p>开放源代码</p><p>DOM解析XML文件步骤</p><h2 id="JSON-JavaScript-Object-Notation"><a href="#JSON-JavaScript-Object-Notation" class="headerlink" title="JSON(JavaScript Object Notation)"></a>JSON(JavaScript Object Notation)</h2><p>轻量级的文本数据交换格式</p><p>具有自我描述性</p><p>比XML传输速度快</p><p>阿里开源JSON解析框架</p><p>FastJSON</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>反射</tag>
      
      <tag>XML</tag>
      
      <tag>JSON</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>多线程和网络编程</title>
    <link href="/2022/10/21/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    <url>/2022/10/21/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="多线程（Thread）"><a href="#多线程（Thread）" class="headerlink" title="多线程（Thread）"></a>多线程（Thread）</h1><h2 id="1-什么是线程、主线程和其他子线程"><a href="#1-什么是线程、主线程和其他子线程" class="headerlink" title="1.什么是线程、主线程和其他子线程"></a>1.什么是线程、主线程和其他子线程</h2><p>线程是程序执行的一条路径，一个进程中可以包含多条线程</p><p>多线程并发执行可以提高程序的效率，可以同时完成多项工作</p><p>main()方法即为主线程入口</p><h2 id="2-多线程并行和并发的区别"><a href="#2-多线程并行和并发的区别" class="headerlink" title="2.多线程并行和并发的区别"></a>2.多线程并行和并发的区别</h2><p>并行是指两个任务同时进行，就是甲任务进行的同时，乙任务也在进行。（需多核CPU）</p><p>并发是指两个任务都请求运行，而处理器只能接受一个任务，就把这两个任务安排轮流进行，由于时间间隔较短，使人感觉两个任务都在运行。</p><h2 id="3-Java程序运行原理和JVM的启动是多线程的吗？"><a href="#3-Java程序运行原理和JVM的启动是多线程的吗？" class="headerlink" title="3.Java程序运行原理和JVM的启动是多线程的吗？"></a>3.Java程序运行原理和JVM的启动是多线程的吗？</h2><p>A：Jva程序运行原理</p><p>Java命令会启动java虚拟机，启动JVM，等于启动了一个应用程序，也就是启动了一个进程。该进程会自动启动一个”主线程“，然后主线程去调用某个类的main方法。</p><p>B：JVM的启动是多线程的吗</p><p>JVM启动至少启动了垃圾回收线程和主线程，所以是多线程的。</p><h2 id="4-多线程程序实现的方式"><a href="#4-多线程程序实现的方式" class="headerlink" title="4.多线程程序实现的方式"></a>4.多线程程序实现的方式</h2><p>①继承Thread(无返回值)</p><p>定义类继承Thread</p><p>重写run()方法</p><p>把新线程要做的事写在run()方法中</p><p>创建线程对象</p><p>开启新线程，内部会自动执行run()方法</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadTest</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br>        MyThread mt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">MyThread</span>();                   <span class="hljs-comment">//4.创建Thread类的子类对象</span><br>        mt.<span class="hljs-built_in">start</span>();                                     <span class="hljs-comment">//5.开启线程</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span> ; i &lt; <span class="hljs-number">1000</span>; i++)&#123;<br>            System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;bbbbbbb&quot;</span>);<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Thread</span></span>&#123;               <span class="hljs-comment">//1.继承Thread</span><br>    public void run()&#123;                              <span class="hljs-comment">//2.重写run方法</span><br>        <span class="hljs-keyword">for</span> (int i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">1000</span>; i++)&#123;                 <span class="hljs-comment">//3.将要执行的代码写在run方法中</span><br>            <span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;aaaaaaaa&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>②实现Runnable接口(无返回值)</p><p>定义实现Runnable接口</p><p>实现run()方法</p><p>把新线程要做的事写在run()方法中</p><p>创建自定义的Runnable的子类对象</p><p>创建Thread对象，传入Runnable</p><p>调用start()开启新线程，内部会自动调用Runnable的run()方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">mr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();            <span class="hljs-comment">//4.创建Runnable的子类对象</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t</span>  <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);                  <span class="hljs-comment">//5.将子类对象当作参数传递给Thread的构造函数</span><br>        t.start();                                   <span class="hljs-comment">//6.开启线程</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; i &lt; <span class="hljs-number">1000</span>; i++)&#123;<br>            System.out.println(<span class="hljs-string">&quot;bbbbbbb&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">MyRunnable</span> <span class="hljs-symbol">implements</span> <span class="hljs-symbol">Runnable</span>&#123;        <span class="hljs-comment">//1.定义一个类实现Runnable</span><br>    @Override<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> run() &#123;                             <span class="hljs-comment">//2.重写run方法</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">1000</span>; i++)&#123;                 <span class="hljs-comment">//3.将要执行的代码写在run方法中</span><br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;aaaaaaaa&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>③Callable方式(有返回值)</p><h2 id="5-两种方式的区别"><a href="#5-两种方式的区别" class="headerlink" title="5.两种方式的区别"></a>5.两种方式的区别</h2><p>查看源码的区别：</p><p>①继承Thread：由于子类重写了Thread类的run()，当调用start()时，直接找子类的run()方法</p><p>②实现Runnable：构造函数中传入了Runnable的引用，成员变量记住了它，start()调用run()方法时内部判断成员变量Runnable的引用是否为空，不为空编译时看的时Runnable的run()，运行时执行的是子类的run()方法。</p><p>继承Thread</p><p>好处是：可以直接使用Thread类中的方法，代码简单</p><p>弊端是：如果已经有了父类，就不能用这种方法</p><p>实现Runnable接口</p><p>好处是：即使自己定义的线程类有了父类也没关系，因为有了父类也可以实现接口，而且接口是可以多实现的</p><p>弊端是：不能直接使用Thread中的方法需要先获取到线程对象后，才能得到Thread的方法，代码复杂</p><h2 id="6-匿名内部类实现线程的两种方式"><a href="#6-匿名内部类实现线程的两种方式" class="headerlink" title="6.匿名内部类实现线程的两种方式"></a>6.匿名内部类实现线程的两种方式</h2><p>①继承(extends)Thread类</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo4</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        <span class="hljs-keyword">new</span> Thread()&#123;                                       <span class="hljs-comment">//1.继承Thread类</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span> &#123;                             <span class="hljs-comment">//2.重写run方法</span><br>                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) &#123;            <span class="hljs-comment">//3.将执行的代码写入run方法中</span><br>                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;aaaaaaaaaaaaa&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;.start();                                          <span class="hljs-comment">//4.开启线程</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>②实现(implement)Runnable接口（可实现数据共享）</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo4</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> Runnable()&#123;                          <span class="hljs-comment">//1.将Runnable的子类对象传递给Thread的构造方法</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span>&#123;                              <span class="hljs-comment">//2.重写run方法</span><br>                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) &#123;            <span class="hljs-comment">//3.将执行的代码写入run方法中</span><br>                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;bbbbbbbbbb&quot;</span>);       <br>                &#125;<br>            &#125;<br>        &#125;).start();                                         <span class="hljs-comment">//4.开启线程</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>③(有返回值)</p><h2 id="7-线程的getName-、setName-、currentThread-方法"><a href="#7-线程的getName-、setName-、currentThread-方法" class="headerlink" title="7.线程的getName()、setName()、currentThread()方法"></a>7.线程的getName()、setName()、currentThread()方法</h2><p>currentThread()方法用于Runnable中，使之可以顺利的执行getName()、setName()方法。</p><h2 id="8-休眠线程"><a href="#8-休眠线程" class="headerlink" title="8.休眠线程"></a>8.休眠线程</h2><p>Thread.sleep(毫秒,纳秒)，控制当前线程休眠若干毫秒1s&#x3D;1000毫秒&#x3D;1000<em>1000</em>1000纳秒</p><h2 id="9-守护线程"><a href="#9-守护线程" class="headerlink" title="9.守护线程"></a>9.守护线程</h2><h2 id="10-线程的状态转换-五个状态"><a href="#10-线程的状态转换-五个状态" class="headerlink" title="10.线程的状态转换(五个状态)"></a>10.线程的状态转换(五个状态)</h2><h2 id="11-线程调度"><a href="#11-线程调度" class="headerlink" title="11.线程调度"></a>11.线程调度</h2><p>void setPriority(int newPriority)</p><p>static void sleep(long millis)</p><p>void join()强制</p><p>static void yield()”礼让“</p><p>void interrupt()</p><h2 id="12-锁synchronized"><a href="#12-锁synchronized" class="headerlink" title="12.锁synchronized"></a>12.锁synchronized</h2><p>①public synchronized void 方法名(){</p><p>}</p><p>②同步代码块</p><p>synchronized（this）{</p><p>&#x2F;&#x2F;所控制的变量或代码块</p><p>}</p><h1 id="网络编程（socket）-传输层）（TCP-x2F-IP）"><a href="#网络编程（socket）-传输层）（TCP-x2F-IP）" class="headerlink" title="网络编程（socket）(传输层）（TCP&#x2F;IP）"></a>网络编程（socket）(传输层）（TCP&#x2F;IP）</h1><h2 id="1-基础原理（7层模型）"><a href="#1-基础原理（7层模型）" class="headerlink" title="1.基础原理（7层模型）"></a>1.基础原理（7层模型）</h2><h2 id="2-什么是Socket"><a href="#2-什么是Socket" class="headerlink" title="2.什么是Socket"></a>2.什么是Socket</h2><p>流式套接字（SOCK_STREAM）</p><p>面向链接、可靠的数据传输服务，基于TCP协议</p><p>数据报式套接字（SOCK_DGRAM）</p><p>无连接服务(UDP)</p><p>原始套接字（SOCK_RAW）</p><p>操作下层</p><p>传输层的API</p><h2 id="3-java-net包"><a href="#3-java-net包" class="headerlink" title="3.java.net包"></a>3.java.net包</h2><p>Socket</p><p>ServerSocket</p><p>DatagramPacket</p><p>DatagramSocket</p><p>InetAddress</p><p>…</p><h2 id="4-基于TCP协议的socket网络编程一般可以分为以下几个步骤"><a href="#4-基于TCP协议的socket网络编程一般可以分为以下几个步骤" class="headerlink" title="4.基于TCP协议的socket网络编程一般可以分为以下几个步骤"></a>4.基于TCP协议的socket网络编程一般可以分为以下几个步骤</h2><p>&lt;C&#x2F;S&gt;模式</p><p>①创建Client端和Server端两个Socket对象，对于Client端时Socket对象、对于Server端是ServerSocket对象</p><p>②在Client端和Server端之间建立连接</p><p>③在输入和输出之间借助数据流来传递信息</p><p>④关闭所有数据流和Socket</p><h2 id="5-socket中实现对象的传输"><a href="#5-socket中实现对象的传输" class="headerlink" title="5.socket中实现对象的传输"></a>5.socket中实现对象的传输</h2><p>借助于序列化和反序列化就能实现</p><p><img src="/2022/10/21/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/WEBRESOURCE97f71c4a1f3001729950f4a437554737.png"></p><h2 id="6-多线程处理多请求"><a href="#6-多线程处理多请求" class="headerlink" title="6.多线程处理多请求"></a>6.多线程处理多请求</h2><p>借助多线程，实现多客户端与服务器网络通信</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>多线程</tag>
      
      <tag>网络编程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java实现10种排序</title>
    <link href="/2022/10/21/Java%E6%8E%92%E5%BA%8F/"/>
    <url>/2022/10/21/Java%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<p>#Java实现10种排序算法<br>参考：<a href="https://blog.csdn.net/weixin_44531966/article/details/116464294">https://blog.csdn.net/weixin_44531966/article/details/116464294</a></p><p>#Java排序实现<br>参考：<a href="https://blog.csdn.net/whp1473/article/details/79678974">https://blog.csdn.net/whp1473/article/details/79678974</a></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>排序算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java重写(Override)与重载(Overload)</title>
    <link href="/2022/10/21/Java%E9%87%8D%E5%86%99-Override-%E4%B8%8E%E9%87%8D%E8%BD%BD-Overload/"/>
    <url>/2022/10/21/Java%E9%87%8D%E5%86%99-Override-%E4%B8%8E%E9%87%8D%E8%BD%BD-Overload/</url>
    
    <content type="html"><![CDATA[<h1 id="重写-Override"><a href="#重写-Override" class="headerlink" title="重写(Override)"></a>重写(Override)</h1><p>重写是子类对父类的允许访问的方法的实现过程进行重新编写, 返回值和形参都不能改变。即外壳不变，核心重写！</p><p>重写的好处在于子类可以根据需要，定义特定于自己的行为。 也就是说子类能够根据需要实现父类的方法。</p><p>重写方法不能抛出新的检查异常或者比被重写方法申明更加宽泛的异常。例如： 父类的一个方法申明了一个检查异常 IOException，但是在重写这个方法的时候不能抛出 Exception 异常，因为 Exception 是 IOException 的父类，抛出 IOException 异常或者 IOException 的子类异常。</p><p>在面向对象原则里，重写意味着可以重写任何现有方法。实例如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;动物可以移动&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-title">extends</span> <span class="hljs-title">Animal</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;狗可以跑和走&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestDog</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String args[]</span>)</span>&#123;<br>      Animal a = <span class="hljs-keyword">new</span> Animal(); <span class="hljs-comment">// Animal 对象</span><br>      Animal b = <span class="hljs-keyword">new</span> Dog(); <span class="hljs-comment">// Dog 对象</span><br> <br>      a.move();<span class="hljs-comment">// 执行 Animal 类的方法</span><br> <br>      b.move();<span class="hljs-comment">//执行 Dog 类的方法</span><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上实例编译运行结果如下：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">动物可以移动<br>狗可以跑和走<br></code></pre></td></tr></table></figure><p>在上面的例子中可以看到，尽管 b 属于 Animal 类型，但是它运行的是 Dog 类的 move方法。</p><p>这是由于在编译阶段，只是检查参数的引用类型。</p><p>然而在运行时，Java 虚拟机(JVM)指定对象的类型并且运行该对象的方法。</p><p>因此在上面的例子中，之所以能编译成功，是因为 Animal 类中存在 move 方法，然而运行时，运行的是特定对象的方法。</p><p>思考以下例子：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;动物可以移动&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-title">extends</span> <span class="hljs-title">Animal</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;狗可以跑和走&quot;</span>);<br>   &#125;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bark</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;狗可以吠叫&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestDog</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String args[]</span>)</span>&#123;<br>      Animal a = <span class="hljs-keyword">new</span> Animal(); <span class="hljs-comment">// Animal 对象</span><br>      Animal b = <span class="hljs-keyword">new</span> Dog(); <span class="hljs-comment">// Dog 对象</span><br> <br>      a.move();<span class="hljs-comment">// 执行 Animal 类的方法</span><br>      b.move();<span class="hljs-comment">//执行 Dog 类的方法</span><br>      b.bark();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上实例编译运行结果如下：</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">TestDog.java:<span class="hljs-number">30</span>: cannot find symbol<br>symbol  : <span class="hljs-keyword">method</span> <span class="hljs-title function_">bark</span><span class="hljs-params">()</span><br><span class="hljs-title function_">location</span>: <span class="hljs-keyword">class</span> Animal<br>                b.bark()<span class="hljs-punctuation">;</span><br>                 ^<br></code></pre></td></tr></table></figure><p>该程序将抛出一个编译错误，因为b的引用类型Animal没有bark方法。</p><hr><h2 id="方法的重写规则"><a href="#方法的重写规则" class="headerlink" title="方法的重写规则"></a>方法的重写规则</h2><ul><li><p>参数列表与被重写方法的参数列表必须完全相同。</p></li><li><p>返回类型与被重写方法的返回类型可以不相同，但是必须是父类返回值的派生类（java5 及更早版本返回类型要一样，java7 及更高版本可以不同）。</p></li><li><p>访问权限不能比父类中被重写的方法的访问权限更低。例如：如果父类的一个方法被声明为 public，那么在子类中重写该方法就不能声明为 protected。</p></li><li><p>父类的成员方法只能被它的子类重写。</p></li><li><p>声明为 final 的方法不能被重写。</p></li><li><p>声明为 static 的方法不能被重写，但是能够被再次声明。</p></li><li><p>子类和父类在同一个包中，那么子类可以重写父类所有方法，除了声明为 private 和 final 的方法。</p></li><li><p>子类和父类不在同一个包中，那么子类只能够重写父类的声明为 public 和 protected 的非 final 方法。</p></li><li><p>重写的方法能够抛出任何非强制异常，无论被重写的方法是否抛出异常。但是，重写的方法不能抛出新的强制性异常，或者比被重写方法声明的更广泛的强制性异常，反之则可以。</p></li><li><p>构造方法不能被重写。</p></li><li><p>如果不能继承一个类，则不能重写该类的方法。</p></li></ul><hr><h2 id="Super-关键字的使用"><a href="#Super-关键字的使用" class="headerlink" title="Super 关键字的使用"></a>Super 关键字的使用</h2><p>当需要在子类中调用父类的被重写方法时，要使用 super 关键字。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">move</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;动物可以移动&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">move</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">move</span>(); <span class="hljs-comment">// 应用super类的方法</span><br>      <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;狗可以跑和走&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDog</span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> args[]</span>)&#123;<br> <br>      <span class="hljs-title class_">Animal</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(); <span class="hljs-comment">// Dog 对象</span><br>      b.<span class="hljs-title function_">move</span>(); <span class="hljs-comment">//执行 Dog类的方法</span><br> <br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上实例编译运行结果如下：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">动物可以移动<br>狗可以跑和走<br></code></pre></td></tr></table></figure><h2 id="重载-Overload"><a href="#重载-Overload" class="headerlink" title="重载(Overload)"></a>重载(Overload)</h2><p>重载(overloading) 是在一个类里面，方法名字相同，而参数不同。返回类型可以相同也可以不同。</p><p>每个重载的方法（或者构造函数）都必须有一个独一无二的参数类型列表。</p><p>最常用的地方就是构造器的重载。</p><p>重载规则:</p><ul><li><p>被重载的方法必须改变参数列表(参数个数或类型不一样)；</p></li><li><p>被重载的方法可以改变返回类型；</p></li><li><p>被重载的方法可以改变访问修饰符；</p></li><li><p>被重载的方法可以声明新的或更广的检查异常；</p></li><li><p>方法能够在同一个类中或者在一个子类中被重载。</p></li><li><p>无法以返回值类型作为重载函数的区分标准。</p></li></ul><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Overloading</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">test</span>()</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;test1&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> a</span>)</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;test2&quot;</span>);<br>    &#125;   <br> <br>    <span class="hljs-comment">//以下两个参数类型顺序不同</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> a,String s</span>)</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;test3&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;returntest3&quot;</span>;<br>    &#125;   <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test</span>(<span class="hljs-params">String s,<span class="hljs-built_in">int</span> a</span>)</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;test4&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;returntest4&quot;</span>;<br>    &#125;   <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span>&#123;<br>        Overloading o = <span class="hljs-keyword">new</span> Overloading();<br>        System.<span class="hljs-keyword">out</span>.println(o.test());<br>        o.test(<span class="hljs-number">1</span>);<br>        System.<span class="hljs-keyword">out</span>.println(o.test(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;test3&quot;</span>));<br>        System.<span class="hljs-keyword">out</span>.println(o.test(<span class="hljs-string">&quot;test4&quot;</span>,<span class="hljs-number">1</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="重写与重载之间的区别"><a href="#重写与重载之间的区别" class="headerlink" title="重写与重载之间的区别"></a>重写与重载之间的区别</h2><table><thead><tr><th>区别点</th><th>重载方法</th><th>重写方法</th></tr></thead><tbody><tr><td>参数列表</td><td>必须修改</td><td>一定不能修改</td></tr><tr><td>返回类型</td><td>可以修改</td><td>一定不能修改</td></tr><tr><td>异常</td><td>可以修改</td><td>可以减少或删除，一定不能抛出新的或者更广的异常</td></tr><tr><td>访问</td><td>可以修改</td><td>一定不能做更严格的限制（可以降低限制）</td></tr></tbody></table><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>方法的重写(Overriding)和重载(Overloading)是java多态性的不同表现，重写是父类与子类之间多态性的一种表现，重载可以理解成多态的具体表现形式。</p><ul><li><p>(1)方法重载是一个类中定义了多个方法名相同,而他们的参数的数量不同或数量相同而类型和次序不同,则称为方法的重载(Overloading)。</p></li><li><p>(2)方法重写是在子类存在方法与父类的方法的名字相同,而且参数的个数与类型一样,返回值也一样的方法,就称为重写(Overriding)。</p></li><li><p>(3)方法重载是一个类的多态性表现,而方法重写是子类与父类的一种多态性表现。</p></li></ul><p><img src="/2022/10/21/Java%E9%87%8D%E5%86%99-Override-%E4%B8%8E%E9%87%8D%E8%BD%BD-Overload/WEBRESOURCE45b7836d5382c120eea20fcb0db55d5b.png"></p><p><img src="/2022/10/21/Java%E9%87%8D%E5%86%99-Override-%E4%B8%8E%E9%87%8D%E8%BD%BD-Overload/WEBRESOURCE9f2ee55d8ea4cd593246c0c4fa8be779.png"></p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Java重写(Override)与重载(Overload)</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java高级</title>
    <link href="/2022/10/21/Java%E9%AB%98%E7%BA%A7/"/>
    <url>/2022/10/21/Java%E9%AB%98%E7%BA%A7/</url>
    
    <content type="html"><![CDATA[<p>#接口</p><p>##接口的描述：</p><p>接口就是一种公共的规范标准，只要符合规范标准，大家都可以通用，Java中的接口更多的体现在对行为的抽象</p><p>##接口的特点：</p><p>接口用关键字interface修饰</p><p>public interface 接口名{}</p><p>类实现接口用implements表示</p><p>public class 类名 implement 接口名{}</p><p>接口不能实例化</p><p>接口如何实例化呢？参照多态的方式，通过实现类对象实例化，这叫接口多态。</p><p>多态的形式：具体类多态，抽象类多态，接口多态。</p><p>多态的前提：有继承或者实现关系；有方法重写；有父（类&#x2F;接口）英勇只想（子&#x2F;实现）类对象</p><p>接口的实现类</p><p>要么重写接口中的所有抽象方法</p><p>要么是抽象类</p><p>##接口的成员特点：</p><p>###成员变量</p><p>###只能是常量</p><p>默认修饰符：public static final</p><p>###构造方法</p><p>接口没有构造方法，应为接口主要是对行为进行抽象的，是没有具体存在</p><p>一个类如果没有父类，默认继承自Object类</p><p>###成员方法</p><p>只能是抽象方法</p><p>默认修饰符：public abstract</p><p>#类和接口的关系：</p><p>类和类的关系</p><p>继承关系，只能单继承，但是可以多层继承</p><p>类和接口的关系</p><p>实现关系，可以单实线，也可以多实现，还可以在继承一个类的同时实现多个接口</p><p>接口和接口的关系</p><p>继承关系，可以单继承，也可以多继承</p><p>    </p><p>#抽象类和接口的区别</p><p>成员区别</p><p>|抽象类|变量，常量；有构造方法；有抽象方法，也有非抽象方法。|</p><p>|接口|常量；抽象方法。|</p><blockquote></blockquote><p>关系区别</p><p>|类与类|继承，单继承，多层继承|</p><p>|类与接口|实现，可以单实现，也可以多实现|</p><p>|接口与接口|继承，单继承，多继承|</p><blockquote></blockquote><p>设计理念区别</p><p>|抽象类|对类抽象，包括属性、行为|</p><p>|接口|对行为抽象，主要是行为|</p><blockquote></blockquote><p>形参和返回值</p><p>抽象类名作为形参和返回值</p><p>方法的形参是抽象类名，其实需要的时该抽象类的子类对象</p><p>方法的返回值是抽象类名，其实返回的是该抽象类的子类对象</p><p>接口名作为形参和和返回值</p><p>方法的形参是接口名，其实需要的是该接口的实现类对象</p><p>方法的返回值是接口名，其实返回的是该接口的实现类对象</p><p>内部类</p><p>内部类：就是在一个类中定义一个类。举例：在一个类A的内部定义一个类B，类B就被称为内部类</p><p>pblic class A{</p><p>public class B{</p><p>}</p><p>}</p><p>内部类的访问特点：</p><p>内部类可以直接访问外部类的成员，包括私有。</p><p>外部类要访问内部类的成员，必须创建对象。</p><p>成员内部类</p><p>按照内部类在类中定义的位置不同，可以分为如下两种形式</p><p>在类的成员位置：成员内部类</p><p>在类的局部位置：局部内部类</p><p>成员内部类，外界如何创建对象使用呢？</p><p>格式：外部类名.内部类名 对象名 &#x3D; 外部类对象.内部类对象；</p><p>范例：Outer.Inner oi &#x3D; new Outer().new Inner();</p><p>当成员内部类为私有时，在外部类中创建方法间接调用内部类：</p><p><img src="/2022/10/21/Java%E9%AB%98%E7%BA%A7/A671AF24A1314FA4B56D98FB43007486.png"></p><p>局部内部类</p><p>是在方法中定义的类，所以外界是无法直接使用的，需要在方法内部创建对象并使用</p><p>该类可以直接访问外部类的成员，也可以访问方法内的局部变量。</p><p>匿名内部类</p><p>格式：</p><p>new 类名或接口名（）{</p><p>重写方法；</p><p>}；</p><p>范例：</p><p>new Inter（）{</p><p>public void show（）{</p><p>}</p><p>}；</p><p>本质：是一个继承了该类或者实现了该接口的子类匿名对象</p><p><img src="/2022/10/21/Java%E9%AB%98%E7%BA%A7/32E1A5D1032C411B98EC1B46B2BBAE38.png"></p><p>调用：</p><p><img src="/2022/10/21/Java%E9%AB%98%E7%BA%A7/AB98A7AD90824370990DD54D9EE8E7D1.png"></p><p>Math,System,Object类的toString(),Object类的equals()</p><p>intellIj如何看方法的源码：选中方法，按下Ctrl+B</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Java高级</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java8新特性之Stream流的集合操作</title>
    <link href="/2022/10/21/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B9%8BStream%E6%B5%81%E7%9A%84%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C/"/>
    <url>/2022/10/21/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B9%8BStream%E6%B5%81%E7%9A%84%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="概JDK8-Stream详解"><a href="#概JDK8-Stream详解" class="headerlink" title="概JDK8 Stream详解"></a>概JDK8 Stream详解</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><blockquote></blockquote><p>Stream是Java8 API的新成员，它允许以声明性方式处理数据集合 。</p><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><blockquote></blockquote><p>（1）代码简洁：函数式编程写出的代码简洁且意图明确，使用stream接口让你从此告别for循环。<br>（2）多核友好：Java函数式编程使得编写并行程序从未如此简单，你需要的全部就是调用一下方法。</p><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs glsl"><span class="hljs-number">1</span>）第一步：把集合转换为流<span class="hljs-keyword">stream</span><br><span class="hljs-number">2</span>）第二步：操作<span class="hljs-keyword">stream</span>流<br><span class="hljs-keyword">stream</span>流在管道中经过中间操作（intermediate operation）的处理，最后由最终操作(terminal operation)得到前面处理的结果<br><br></code></pre></td></tr></table></figure><h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><blockquote></blockquote><p>两种：中间操作符、终止操作符</p><h3 id="中间操作符"><a href="#中间操作符" class="headerlink" title="中间操作符"></a>中间操作符</h3><table><thead><tr><th>流方法</th><th>含义</th><th>示例</th></tr></thead><tbody><tr><td>filter</td><td>用于通过设置的条件过滤出元素</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “”, “bc”, “efg”, “abcd”,””, “jkl”);List&lt;String&gt; filtered &#x3D; strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.toList());</td></tr><tr><td>distinct</td><td>返回一个元素各异（根据流所生成元素的hashCode和equals方法实现）的流。</td><td>List&lt;Integer&gt; numbers &#x3D; Arrays.asList(1, 2, 1, 3, 3, 2, 4);numbers.stream().filter(i -&gt; i % 2 &#x3D;&#x3D; 0).distinct().forEach(System.out::println);</td></tr><tr><td>limit</td><td>会返回一个不超过给定长度的流。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abc”, “bc”, “efg”, “abcd”,”jkl”, “jkl”);List&lt;String&gt; limited &#x3D; strings.stream().limit(3).collect(Collectors.toList());</td></tr><tr><td>skip</td><td>返回一个扔掉了前n个元素的流。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abc”, “bc”, “efg”, “abcd”,”jkl”, “jkl”);List&lt;String&gt; skiped &#x3D; strings.stream().skip(3).collect(Collectors.toList());</td></tr><tr><td>map</td><td>接受一个函数作为参数。这个函数会被应用到每个元素上，并将其映射成一个新的元素（使用映射一词，是因为它和转换类似，但其中的细微差别在于它是&quot;创建一个新版本”而不是去&quot;修改”）。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abc”, “bc”, “efg”, “abcd”,”jkl”, “jkl”);List&lt;String&gt; mapped &#x3D; strings.stream().map(str-&gt;str+”-itcast”).collect(Collectors.toList());</td></tr><tr><td>flatMap</td><td>使用flatMap方法的效果是，各个数组并不是分别映射成一个流，而是映射成流的内容。所有使用map(Arrays::stream)时生成的单个流都被合并起来，即扁平化为一个流。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abc”, “bc”, “efg”, “abcd”,”jkl”, “jkl”);Stream&lt;Character&gt; flatMap &#x3D; strings.stream().flatMap(Java8StreamTest::getCharacterByString);</td></tr><tr><td>sorted</td><td>返回排序后的流</td><td>List&lt;String&gt; strings1 &#x3D; Arrays.asList(“abc”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);List&lt;String&gt; sorted1 &#x3D; strings1.stream().sorted().collect(Collectors.toList());</td></tr></tbody></table><blockquote></blockquote><p>示例代码：<br>1）filter</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:根据条件过滤集合数据<br>* @return : void<br>*/<br>  @Test<br>  public void filter()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; filtered = strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.toList());<br>  out.println(filtered);<br>  &#125;<br></code></pre></td></tr></table></figure><p>2）distinct</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:去除集合中重复数据<br>* @return : void<br>*/<br>  @Test<br>  public void distinct()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; distincted = strings.stream().distinct().collect(Collectors.toList());<br>  out.println(distincted);<br>  &#125;<br></code></pre></td></tr></table></figure><p>3）limit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:指定获取集合前x条数据，重新构造一个新的集合<br>* @return : void<br>*/<br>  @Test<br>  public void limit()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; limited = strings.stream().limit(3).collect(Collectors.toList());<br>  out.println(limited);<br>  &#125;<br></code></pre></td></tr></table></figure><p>4）skip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:排除集合前x条数据，把后面的数据重新构造一个新的集合<br>* @return : void<br>*/<br>  @Test<br>  public void skip()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; skiped = strings.stream().skip(3).collect(Collectors.toList());<br>  out.println(skiped);<br>  &#125;<br></code></pre></td></tr></table></figure><p>5）map</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">    /**<br>    * 功能描述:对集合中所有元素统一处理<br>* @return : void<br>  */<br>  @Test<br>  public void map()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; mapped = strings.stream().map(str-&gt;str+&quot;-itcast&quot;).collect(Collectors.toList());<br>  out.println(mapped);<br>  &#125;<br></code></pre></td></tr></table></figure><p>6）flatMap</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:对集合中所有元素统一处理<br>* @return : void<br>*/<br>  @Test<br>  public void flatMap()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  Stream&lt;String&gt; stringStream = strings.stream().map(x -&gt; x);<br>  Stream&lt;String&gt; stringStream1 = strings.stream().flatMap(x -&gt; Arrays.asList(x.split(&quot; &quot;)).stream());<br>  &#125;<br></code></pre></td></tr></table></figure><p>7）sorted</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 对集合进行排序<br>* @return : void<br>*/<br>  @Test<br>  public void sorted()&#123;<br>  List&lt;String&gt; strings1 = Arrays.asList(&quot;abc&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; strings2 = Arrays.asList(&quot;张三&quot;, &quot;李四&quot;, &quot;王五&quot;, &quot;赵柳&quot;, &quot;张哥&quot;,&quot;李哥&quot;, &quot;王哥&quot;);<br>  List&lt;Integer&gt; strings3 = Arrays.asList(10, 2, 30, 22, 1,0, -9);<br>  List&lt;String&gt; sorted1 = strings1.stream().sorted().collect(Collectors.toList());<br>  List&lt;String&gt; sorted2 = strings2.stream().sorted(Collections.reverseOrder(Collator.getInstance(Locale.CHINA))).collect(Collectors.toList());<br>  List&lt;Integer&gt; sorted3 = strings3.stream().sorted().collect(Collectors.toList());<br>  out.println(sorted1);<br>  out.println(sorted2);<br>  out.println(sorted3);<br>  &#125;<br></code></pre></td></tr></table></figure><p>Map、flatMap区别</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-built_in">map</span>：对流中每一个元素进行处理<br>flatMap：流扁平化，让你把一个流中的“每个值”都换成另一个流，然后把所有的流连接起来成为一个流 <br>总结：<span class="hljs-built_in">map</span>是对一级元素进行操作，flatmap是对二级元素操作。<br><br></code></pre></td></tr></table></figure><p>本质区别：map返回一个值；flatmap返回一个流，多个值。</p><p>应用场景：map对集合中每个元素加工,返回加工后结果；flatmap对集合中每个元素加工后，做扁平化处理后（拆分层级，放到同一层）然后返回</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 方法一</span><br><span class="hljs-comment"> * 功能描述:  通过使用map、flatMap把字符串转换为字符输出对比区别</span><br><span class="hljs-comment"> * @return : void</span><br><span class="hljs-comment"> */</span><br>@Test<br>public void flat<span class="hljs-constructor">Map2Map()</span>&#123;<br>    List&lt;String&gt; strings = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span><span class="hljs-keyword">as</span><span class="hljs-constructor">List(<span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-string">&quot;bc&quot;</span>, <span class="hljs-string">&quot;efg&quot;</span>, <span class="hljs-string">&quot;abcd&quot;</span>,<span class="hljs-string">&quot;jkl&quot;</span>, <span class="hljs-string">&quot;jkl&quot;</span>)</span>;<br>    final Stream&lt;Character&gt; flatMap = strings.stream<span class="hljs-literal">()</span>.flat<span class="hljs-constructor">Map(Java8StreamTest::<span class="hljs-params">getCharacterByString</span>)</span>;<br>    flatMap.<span class="hljs-keyword">for</span><span class="hljs-constructor">Each(System.<span class="hljs-params">out</span>::<span class="hljs-params">println</span>)</span>;<br>    <span class="hljs-comment">//----------------------------------------------</span><br>    final Stream&lt;Stream&lt;Character&gt;&gt; mapStream = strings.stream<span class="hljs-literal">()</span>.map(Java8StreamTest::getCharacterByString);<br>    <span class="hljs-comment">//mapStream.forEach(System.out::println);</span><br>    out.println(<span class="hljs-string">&quot;------------------------------------------------&quot;</span>);<br>    mapStream.<span class="hljs-keyword">for</span><span class="hljs-constructor">Each(<span class="hljs-params">stream</span>-&gt; &#123;<span class="hljs-params">stream</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">character</span>-&gt;&#123;System.<span class="hljs-params">out</span>.<span class="hljs-params">println</span>(<span class="hljs-params">character</span>)</span>;&#125;);&#125;);<br><br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote></blockquote><p>公共方法（字符串转换为字符流）</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 功能描述:字符串转换为字符流</span><br><span class="hljs-comment">* @param str</span><br><span class="hljs-comment">* @return : java.util.stream.Stream&lt;java.lang.Character&gt;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-built_in">public</span> static Stream&lt;<span class="hljs-type">Character</span>&gt; getCharacterByString(String str) &#123;<br>    List&lt;<span class="hljs-type">Character</span>&gt; characterList = <span class="hljs-built_in">new</span> ArrayList&lt;&gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">Character</span> <span class="hljs-type">character</span> : str.toCharArray()) &#123;<br>    characterList.<span class="hljs-keyword">add</span>(<span class="hljs-type">character</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> characterList.stream();<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="终止操作符"><a href="#终止操作符" class="headerlink" title="终止操作符"></a>终止操作符</h3><table><thead><tr><th>流方法</th><th>含义</th><th>示例</th></tr></thead><tbody><tr><td>anyMatch</td><td>检查是否至少匹配一个元素，返回boolean。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);boolean b &#x3D; strings.stream().anyMatch(s -&gt; s &#x3D;&#x3D; “abc”);</td></tr><tr><td>allMatch</td><td>检查是否匹配所有元素，返回boolean。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);boolean b &#x3D; strings.stream().allMatch(s -&gt; s &#x3D;&#x3D; “abc”);</td></tr><tr><td>noneMatch</td><td>检查是否没有匹配所有元素，返回boolean。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);boolean b &#x3D; strings.stream().noneMatch(s -&gt; s &#x3D;&#x3D; “abc”);</td></tr><tr><td>findAny</td><td>将返回当前流中的任意元素。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);Optional&lt;String&gt; any &#x3D; strings.stream().findAny();</td></tr><tr><td>findFirst</td><td>返回第一个元素</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);Optional&lt;String&gt; first &#x3D; strings.stream().findFirst();</td></tr><tr><td>forEach</td><td>遍历流</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);strings.stream().forEach(s -&gt; out.println(s));</td></tr><tr><td>collect</td><td>收集器，将流转换为其他形式。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);Set&lt;String&gt; set &#x3D; strings.stream().collect(Collectors.toSet());List&lt;String&gt; list &#x3D; strings.stream().collect(Collectors.toList());Map&lt;String, String&gt; map &#x3D; strings.stream().collect(Collectors.toMap(v -&gt;v.concat(“_name”), v1 -&gt; v1, (v1, v2) -&gt; v1));</td></tr><tr><td>reduce</td><td>可以将流中元素反复结合起来，得到一个值。使用 reduce((T, T) -&gt; T) 和 reduce(T, (T, T) -&gt; T) 用于组合流中的元素，如求和，求积，求最大值等。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);Optional&lt;String&gt; reduce &#x3D; strings.stream().reduce((acc,item) -&gt; {return acc+item;});if(reduce.isPresent())out.println(reduce.get());</td></tr><tr><td>count</td><td>返回流中元素总数。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);long count &#x3D; strings.stream().count();</td></tr></tbody></table><blockquote></blockquote><p>示例代码<br>1）anyMatch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 判断集合中是否至少存在一个元素满足条件<br>* @return : void<br>*/<br>  @Test<br>  public void anyMatch()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  boolean b = strings.stream().anyMatch(s -&gt; s == &quot;abc&quot;);<br>  out.println(b);<br>  &#125;<br></code></pre></td></tr></table></figure><p>2）allMatch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 判断集合中是否所有元素都满足条件<br>* @return : void<br>*/<br>  @Test<br>  public void allMatch()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  boolean b = strings.stream().allMatch(s -&gt; s == &quot;abc&quot;);<br>  out.println(b);<br>  &#125;<br></code></pre></td></tr></table></figure><p>3）noneMatch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 判断集合中是否所有元素都不满足条件<br>* @return : void<br>*/<br>  @Test<br>  public void noneMatch()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  boolean b = strings.stream().noneMatch(s -&gt; s == &quot;abc&quot;);<br>  out.println(b);<br>  &#125;<br></code></pre></td></tr></table></figure><p>4）findAny</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 返回当前流中任意元素<br>* @return : void<br>*/<br>  @Test<br>  public void findAny()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  Optional&lt;String&gt; any = strings.stream().findAny();<br>  if(any.isPresent()) out.println(any.get());<br>  &#125;<br></code></pre></td></tr></table></figure><p>5）findFirst</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 返回当前流中第一个元素<br>* @return : void<br>*/<br>  @Test<br>  public void findFirst()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  Optional&lt;String&gt; first = strings.stream().findFirst();<br>  if(first.isPresent()) out.println(first.get());<br>  &#125;<br></code></pre></td></tr></table></figure><p>6）forEach java</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 遍历流<br>* @return : void<br>*/<br>  @Test<br>  public void foreach()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  strings.stream().forEach(s -&gt; out.println(s));<br>  &#125;<br></code></pre></td></tr></table></figure><p>7）collect</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 流转换为其他形式<br>* @return : void<br>*/<br>  @Test<br>  public void collect()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  Set&lt;String&gt; set = strings.stream().collect(Collectors.toSet());<br>  List&lt;String&gt; list = strings.stream().collect(Collectors.toList());<br>  Map&lt;String, String&gt; map = strings.stream().collect(Collectors.toMap(v -&gt;v.concat(&quot;_name&quot;), v1 -&gt; v1, (v1, v2) -&gt; v1));<br>  out.println(set);<br>  out.println(list);<br>  out.println(map);<br>  &#125;<br></code></pre></td></tr></table></figure><p>8）reduce</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 将流中元素反复结合起来，得到一个值<br>* @return : void<br>*/<br>  @Test<br>  public void reduce()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  //reduce方法一<br>  Optional&lt;String&gt; reduce1 = strings.stream().reduce((acc,item) -&gt; &#123;return acc+item;&#125;);<br>  //reduce方法二<br>  String reduce2 = strings.stream().reduce(&quot;itcast&quot;, (acc, item) -&gt; &#123;<br>  return acc + item;<br>  &#125;);<br>  //reduce方法三<br>  ArrayList&lt;String&gt; reduce3 = strings.stream().reduce(<br>  new ArrayList&lt;String&gt;(),<br>  new BiFunction&lt;ArrayList&lt;String&gt;, String, ArrayList&lt;String&gt;&gt;() &#123;<br>  @Override<br>  public ArrayList&lt;String&gt; apply(ArrayList&lt;String&gt; acc, String item) &#123;<br>  acc.add(item);<br>  return acc;<br>  &#125;<br>  &#125;,<br>  new BinaryOperator&lt;ArrayList&lt;String&gt;&gt;() &#123;<br>  @Override<br>  public ArrayList&lt;String&gt; apply(ArrayList&lt;String&gt; acc, ArrayList&lt;String&gt; item) &#123;<br>  return acc;<br>  &#125;<br>  &#125;<br>  );<br>  if(reduce1.isPresent())out.println(reduce1.get());<br>  out.println(reduce2);<br>  out.println(reduce3);<br>  &#125;<br></code></pre></td></tr></table></figure><p>9）count</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 功能描述 : 返回流中元素总数</span><br><span class="hljs-comment">* @return : void</span><br><span class="hljs-comment">*/</span><br>  @Test<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-keyword">count</span>()&#123;<br>  List&lt;String&gt; strings = Arrays.<span class="hljs-keyword">asList</span>(<span class="hljs-string">&quot;cv&quot;</span>, <span class="hljs-string">&quot;abd&quot;</span>, <span class="hljs-string">&quot;aba&quot;</span>, <span class="hljs-string">&quot;efg&quot;</span>, <span class="hljs-string">&quot;abcd&quot;</span>,<span class="hljs-string">&quot;jkl&quot;</span>, <span class="hljs-string">&quot;jkl&quot;</span>);<br>  <span class="hljs-keyword">long</span> <span class="hljs-keyword">count</span> = strings.stream().<span class="hljs-keyword">count</span>();<br>  out.<span class="hljs-keyword">println</span>(<span class="hljs-keyword">count</span>);<br>  &#125;<br></code></pre></td></tr></table></figure><p>注意：文章中因排序部分用到外部比较器，需要导入外部jar包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--apache集合操作工具包--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-collections4<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h1 id="https-www-cnblogs-com-shoshana-kong-p-14406683-html"><a href="#https-www-cnblogs-com-shoshana-kong-p-14406683-html" class="headerlink" title="https://www.cnblogs.com/shoshana-kong/p/14406683.html"></a><a href="https://www.cnblogs.com/shoshana-kong/p/14406683.html">https://www.cnblogs.com/shoshana-kong/p/14406683.html</a></h1>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java8新特性</tag>
      
      <tag>Stream流代替for循环</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IO流、序列化、反序列化</title>
    <link href="/2022/10/21/IO%E6%B5%81%E3%80%81%E5%BA%8F%E5%88%97%E5%8C%96%E3%80%81%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    <url>/2022/10/21/IO%E6%B5%81%E3%80%81%E5%BA%8F%E5%88%97%E5%8C%96%E3%80%81%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="IOStream"><a href="#IOStream" class="headerlink" title="IOStream"></a>IOStream</h1><p>1.字节流（操作字节）</p><p>字节流的抽象父类</p><p>InputStream</p><p>OutputStream</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">ByteCopy<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;jietu.png&quot;</span>);<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;copy.png&quot;</span>);<br><br>        <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<span class="hljs-comment">//“容器”</span><br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span> ((len=fis.read(bytes))!=-<span class="hljs-number">1</span>)&#123;<br>            fos.write(bytes,<span class="hljs-number">0</span>,len);<br>        &#125;<br>        fos.close();<br>        fis.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>BufferedInputStream类</p><p>BufferedOutputStream类</p><p>BufferedInputStream内置了一个缓冲区（数组）</p><p>从BufferedInputStream中读取一个字节时BufferedInputStream会一次性从文件中读取8192个，存在缓冲区中，每次返回给程序一个</p><p>程序再次读取时，就不用找文件了，直接从缓冲区中获取，知道缓冲区中所有的都被使用过，才重新从文件中读取8192个。</p><p>BufferedOutputStream也内置了一个缓冲区（数组）</p><p>程序向流中写出字节时，不会直接写到文件，先写到缓冲区中，知道缓冲区写满，BufferedOutputStream才会吧缓冲区中的数据一次</p><p>性写到文件里。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">BufferCopy<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;jietu.png&quot;</span>);<br>    <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(fis);<br>    <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;copy.png&quot;</span>);<br>    <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(fos);<br>    <br>    <span class="hljs-type">int</span> b;<br>    <span class="hljs-keyword">while</span> ((b = bis.read()) != -<span class="hljs-number">1</span>) &#123;<br>        bos.write(b);<br>    &#125;<br><br>    bis.close();<span class="hljs-comment">//close方法具备刷新的功能，在关闭之前们就会先刷新一次缓冲区，将缓冲区的字节全部都刷新到文件上，再关闭</span><br>    bos.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>字节流读取中文时是可能有问题的，因为有时可能会读到半个中文造成乱码。</p><p>输入输出的标准代码</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test4</span>()</span>&#123;<br>    FileInputStream fis;<br>    FileOutputStream fos;<br>    <span class="hljs-keyword">try</span> &#123;<br>        fis = <span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">&quot;jietu.png&quot;</span>);<br>        fos = <span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">&quot;copy.png&quot;</span>);<br>        <span class="hljs-built_in">int</span> b;<br>        <span class="hljs-keyword">while</span> ((b = fis.read()) != <span class="hljs-number">-1</span>) &#123;<br>            fos.write(b);<br>        &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>        e.printStackTrace();<br>    &#125;<span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span>(bis != <span class="hljs-literal">null</span>)<br>            fis.close();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                fos.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>2.字符流（操作字符）</p><p>字符流的抽象父类</p><p>Reader类</p><p>Writer类</p><p>DateInputStream类</p><p>DateOutputStream类</p><p>4.IO程序书写</p><p>使用前，导入IO包中的类</p><p>使用时，进行IO异常处理</p><p>使用后，释放资源</p><h1 id="Serializable（json、ProtoBuf）"><a href="#Serializable（json、ProtoBuf）" class="headerlink" title="Serializable（json、ProtoBuf）"></a>Serializable（json、ProtoBuf）</h1><p>(Java序列化就是指把Java对象转换为字节序列的过程</p><p>Java反序列化就是指把字节序列恢复为Java对象的过程。</p><p>序列化最重要的作用：在传递和保存对象时.保证对象的完整性和可传递性。对象转换为有序字节流,以便在网络上传输或者保存在本地文件中。</p><p>反序列化的最重要的作用：根据字节流中保存的对象状态及描述信息，通过反序列化重建对象。</p><p>总结：核心作用就是对象状态的保存和重建。（整个过程核心点就是字节流中所保存的对象状态及描述信息）</p><p>实体类序列化</p><p>对象序列化：ObjectOutputStream类</p><p>对象反序列化：ObjectInputStream类</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/2/28 11:29</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final long serialVersionUID = -<span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title class_">Name</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title class_">Age</span>;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Name</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-title class_">Name</span> = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getAge</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Age</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAge</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> age</span>) &#123;<br>        <span class="hljs-title class_">Age</span> = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_">String</span> name, <span class="hljs-title class_">String</span> age) &#123;<br>        <span class="hljs-title class_">Name</span> = name;<br>        <span class="hljs-title class_">Age</span> = age;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:序列化和反序列化</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/2/28 11:32</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SerializableTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//序列化</span><br>        FileOutputStream fos;<br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;object.out&quot;</span>);<br>            oos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(fos);<br>            s1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;lhg&quot;</span>,<span class="hljs-string">&quot;18&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                oos.writeObject(s1);<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">try</span> &#123;<br>                oos.flush();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">try</span> &#123;<br>                oos.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">//反序列化</span><br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;object.out&quot;</span>);<br>            ois = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(fis);<br>            <span class="hljs-type">Student</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> (Student) ois.readObject();<br>            System.out.println(s2.getName()+<span class="hljs-string">&quot;&quot;</span>+s2.getAge());<br>        &#125; <span class="hljs-keyword">catch</span> (IOException | ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            ois.close();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>IO流</tag>
      
      <tag>序列化</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/10/18/hello-world/"/>
    <url>/2022/10/18/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
