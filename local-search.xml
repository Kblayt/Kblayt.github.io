<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>23种设计模式</title>
    <link href="/2022/11/04/23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <url>/2022/11/04/23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="设计模式简介"><a href="#设计模式简介" class="headerlink" title="设计模式简介"></a>设计模式简介</h1><p>设计模式（Design pattern）代表了最佳的实践，通常被有经验的面向对象的软件开发人员所采用。设计模式是软件开发人员在软件开发过程中面临的一般问题的解决方案。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。</p><p>设计模式是一套被反复使用的、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理地运用设计模式可以完美地解决很多问题，每种模式在现实中都有相应的原理来与之对应，每种模式都描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是设计模式能被广泛应用的原因。</p><h2 id="什么是GOF（四人帮，全拼-Gang-of-Four）？"><a href="#什么是GOF（四人帮，全拼-Gang-of-Four）？" class="headerlink" title="什么是GOF（四人帮，全拼 Gang of Four）？"></a>什么是GOF（四人帮，全拼 Gang of Four）？</h2><p>在 1994 年，由 Erich Gamma、Richard Helm、Ralph Johnson 和 John Vlissides 四人合著出版了一本名为<strong>Design Patterns - Elements of Reusable Object-Oriented Software（中文译名：设计模式 - 可复用的面向对象软件元素）</strong>的书，该书首次提到了软件开发中设计模式的概念。</p><p>四位作者合称 <strong>GOF（四人帮，全拼 Gang of Four）</strong>。他们所提出的设计模式主要是基于以下的面向对象设计原则。</p><ul><li>对接口编程而不是对实现编程。</li><li>优先使用对象组合而不是继承</li></ul><h2 id="设计模式的使用"><a href="#设计模式的使用" class="headerlink" title="设计模式的使用"></a>设计模式的使用</h2><p>设计模式在软件开发中的两个主要途径</p><h3 id="开发人员的共同平台"><a href="#开发人员的共同平台" class="headerlink" title="开发人员的共同平台"></a>开发人员的共同平台</h3><p>设计模式提供了一个标准的术语体系，且具体到特定的情景。例如，单例设计模式意味着使用单个对象，这样所有熟悉单例设计模式的开发人员都能使用单个对象，并且可用通过这种方式告诉对方，程序使用的是单列模式</p><h3 id="最佳的时间"><a href="#最佳的时间" class="headerlink" title="最佳的时间"></a>最佳的时间</h3><p>设计模式已经经历了很长一段时间的发展，她们提供了软件开发过程中面临的一般问题的最佳解决方案。学习这些模式有助于经验不足的开发人员通过一种简单快捷的方式来学习软件设计。</p><h2 id="设计模式的类型"><a href="#设计模式的类型" class="headerlink" title="设计模式的类型"></a>设计模式的类型</h2><p>根据设计模式的参考书 <strong>Design Patterns - Elements of Reusable Object-Oriented Software（中文译名：设计模式 - 可复用的面向对象软件元素）</strong> 中所提到的，总共有 23 种设计模式。这些模式可以分为三大类：创建型模式（Creational Patterns）、结构型模式（Structural Patterns）、行为型模式（Behavioral Patterns）。当然，我们还会讨论另一类设计模式：<strong>J2EE 设计模式</strong></p><table><thead><tr><th align="left">序号</th><th align="left">模式 &amp; 描述</th><th align="left">包括</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>创建型模式</strong> 这些设计模式提供了一种在创建对象<br />的同时隐藏创建逻辑的方式，而不是使用 new 运<br />算符直接实例化对象。这使得程序在判断针对某<br />个给定实例需要创建哪些对象时更加灵活。</td><td align="left">工厂模式（Factory Pattern）<br />抽象工厂模式（Abstract Factory Pattern）<br />单例模式（Singleton Pattern）<br />建造者模式（Builder Pattern）<br />原型模式（Prototype Pattern）</td></tr><tr><td align="left">2</td><td align="left"><strong>结构型模式</strong> 这些设计模式关注类和对象的组合。<br />继承的概念被用来组合接口和定义组合对象获得<br />新功能的方式。</td><td align="left">适配器模式（Adapter Pattern）<br />桥接模式（Bridge Pattern）<br />过滤器模式（Filter、Criteria Pattern）<br />组合模式（Composite Pattern）<br />装饰器模式（Decorator Pattern）<br />外观模式（Facade Pattern）<br />享元模式（Flyweight Pattern）<br />代理模式（Proxy Pattern）</td></tr><tr><td align="left">3</td><td align="left"><strong>行为型模式</strong> 这些设计模式特别关注对象之间的<br />通信。</td><td align="left">责任链模式（Chain of Responsibility Pattern）<br />命令模式（Command Pattern）<br />解释器模式（Interpreter Pattern）<br />迭代器模式（Iterator Pattern）<br />中介者模式（Mediator Pattern）<br />备忘录模式（Memento Pattern）<br />观察者模式（Observer Pattern）<br />状态模式（State Pattern）<br />空对象模式（Null Object Pattern）<br />策略模式（Strategy Pattern）<br />模板模式（Template Pattern）<br />访问者模式（Visitor Pattern）</td></tr><tr><td align="left">4</td><td align="left"><strong>J2EE 模式</strong> 这些设计模式特别关注表示层。这些<br />模式是由 Sun Java Center 鉴定的。</td><td align="left">MVC 模式（MVC Pattern）<br />业务代表模式（Business Delegate Pattern）<br />组合实体模式（Composite Entity Pattern）<br />数据访问对象模式（Data Access Object Pattern）<br />前端控制器模式（Front Controller Pattern）<br />拦截过滤器模式（Intercepting Filter Pattern）<br />服务定位器模式（Service Locator Pattern）<br />传输对象模式（Transfer Object Pattern）</td></tr></tbody></table><p>设计模式之间的关系如下图所示：</p><p><img src="/23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/the-relationship-between-design-patterns.jpg" alt="设计模式之间的关系"></p><h2 id="设计模式的六大原则"><a href="#设计模式的六大原则" class="headerlink" title="设计模式的六大原则"></a>设计模式的六大原则</h2><p><strong>1、开闭原则（Open Close Principle）</strong></p><p>开闭原则的意思是：<strong>对扩展开放，对修改关闭</strong>。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。</p><p><strong>2、里氏代换原则（Liskov Substitution Principle）</strong></p><p>里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。</p><p><strong>3、依赖倒转原则（Dependence Inversion Principle）</strong></p><p>这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。</p><p><strong>4、接口隔离原则（Interface Segregation Principle）</strong></p><p>这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。</p><p><strong>5、迪米特法则，又称最少知道原则（Demeter Principle）</strong></p><p>最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。</p><p><strong>6、合成复用原则（Composite Reuse Principle）</strong></p><p>合成复用原则是指：尽量使用合成&#x2F;聚合的方式，而不是使用继承</p><h1 id="1、工厂模式"><a href="#1、工厂模式" class="headerlink" title="1、工厂模式"></a>1、工厂模式</h1><p>工厂模式（Factory Pattern）是Java种最常用的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。</p><p>在工厂模式种，我们在创建对象是不会对客户端暴露创建逻辑，并且是通过使用一个公共的接口来指向新创建的对象。</p><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><strong>意图：</strong>定义一个创建对象的接口，让其子类自己决定实例化哪一个工厂类，工厂模式使其创建过程延迟到子类进行。</p><p><strong>主要解决：</strong>主要解决接口选择的问题。</p><p><strong>何时使用：</strong>我们明确地计划不同条件下创建不同实例时。</p><p><strong>如何解决：</strong>让其子类实现工厂接口，返回的也是一个抽象的产品。</p><p><strong>关键代码：</strong>创建过程在其子类执行。</p><p><strong>应用实例：</strong> 1、您需要一辆汽车，可以直接从工厂里面提货，而不用去管这辆汽车是怎么做出来的，以及这个汽车里面的具体实现。 2、Hibernate 换数据库只需换方言和驱动就可以。</p><p><strong>优点：</strong> 1、一个调用者想创建一个对象，只要知道其名称就可以了。 2、扩展性高，如果想增加一个产品，只要扩展一个工厂类就可以。 3、屏蔽产品的具体实现，调用者只关心产品的接口。</p><p><strong>缺点：</strong>每次增加一个产品时，都需要增加一个具体类和对象实现工厂，使得系统中类的个数成倍增加，在一定程度上增加了系统的复杂度，同时也增加了系统具体类的依赖。这并不是什么好事。</p><p><strong>使用场景：</strong> 1、日志记录器：记录可能记录到本地硬盘、系统事件、远程服务器等，用户可以选择记录日志到什么地方。 2、数据库访问，当用户不知道最后系统采用哪一类数据库，以及数据库可能有变化时。 3、设计一个连接服务器的框架，需要三个协议，”POP3”、”IMAP”、”HTTP”，可以把这三个作为产品类，共同实现一个接口。</p><p><strong>注意事项：</strong>作为一种创建类模式，在任何需要生成复杂对象的地方，都可以使用工厂方法模式。有一点需要注意的地方就是复杂对象适合使用工厂模式，而简单对象，特别是只需要通过 new 就可以完成创建的对象，无需使用工厂模式。如果使用工厂模式，就需要引入一个工厂类，会增加系统的复杂度。</p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>我们将创建一个 <em>Shape</em> 接口和实现 <em>Shape</em> 接口的实体类。下一步是定义工厂类 <em>ShapeFactory</em>。</p><p><em>FactoryPatternDemo</em> 类使用 <em>ShapeFactory</em> 来获取 <em>Shape</em> 对象。它将向 <em>ShapeFactory</em> 传递信息（<em>CIRCLE &#x2F; RECTANGLE &#x2F; SQUARE</em>），以便获取它所需对象的类型。</p><p><img src="/2022/11/04/23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/AB6B814A-0B09-4863-93D6-1E22D6B07FF8.jpg" alt="工厂模式的 UML 图"></p><h3 id="步骤1"><a href="#步骤1" class="headerlink" title="步骤1"></a>步骤1</h3><p>创建一个接口：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Shape</span> &#123;<br>   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="步骤2"><a href="#步骤2" class="headerlink" title="步骤2"></a>步骤2</h3><p>创建实现接口的实体类。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Shape</span> &#123;<br> <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;Inside Rectangle::draw() method.&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Shape</span> &#123;<br> <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;Inside Square::draw() method.&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Shape</span> &#123;<br> <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;Inside Circle::draw() method.&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="步骤3"><a href="#步骤3" class="headerlink" title="步骤3"></a>步骤3</h3><p>创建一个工厂，生成基于给定信息的实体类的对象。</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShapeFactory</span> </span>&#123;<br>    <br>   <span class="hljs-comment">//使用 getShape 方法获取形状类型的对象</span><br>   <span class="hljs-keyword">public</span> Shape getShape(<span class="hljs-keyword">String</span> shapeType)&#123;<br>      <span class="hljs-keyword">if</span>(shapeType == <span class="hljs-literal">null</span>)&#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125;        <br>      <span class="hljs-keyword">if</span>(shapeType.equalsIgnoreCase(<span class="hljs-string">&quot;CIRCLE&quot;</span>))&#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">Circle</span>();<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(shapeType.equalsIgnoreCase(<span class="hljs-string">&quot;RECTANGLE&quot;</span>))&#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">Rectangle</span>();<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(shapeType.equalsIgnoreCase(<span class="hljs-string">&quot;SQUARE&quot;</span>))&#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-type">Square</span>();<br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="步骤4"><a href="#步骤4" class="headerlink" title="步骤4"></a>步骤4</h3><p>使用该工厂，通过传递类型信息来获取实体类的对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FactoryPatternDemo</span> &#123;<br> <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-type">ShapeFactory</span> <span class="hljs-variable">shapeFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShapeFactory</span>();<br> <br>      <span class="hljs-comment">//获取 Circle 的对象，并调用它的 draw 方法</span><br>      <span class="hljs-type">Shape</span> <span class="hljs-variable">shape1</span> <span class="hljs-operator">=</span> shapeFactory.getShape(<span class="hljs-string">&quot;CIRCLE&quot;</span>);<br> <br>      <span class="hljs-comment">//调用 Circle 的 draw 方法</span><br>      shape1.draw();<br> <br>      <span class="hljs-comment">//获取 Rectangle 的对象，并调用它的 draw 方法</span><br>      <span class="hljs-type">Shape</span> <span class="hljs-variable">shape2</span> <span class="hljs-operator">=</span> shapeFactory.getShape(<span class="hljs-string">&quot;RECTANGLE&quot;</span>);<br> <br>      <span class="hljs-comment">//调用 Rectangle 的 draw 方法</span><br>      shape2.draw();<br> <br>      <span class="hljs-comment">//获取 Square 的对象，并调用它的 draw 方法</span><br>      <span class="hljs-type">Shape</span> <span class="hljs-variable">shape3</span> <span class="hljs-operator">=</span> shapeFactory.getShape(<span class="hljs-string">&quot;SQUARE&quot;</span>);<br> <br>      <span class="hljs-comment">//调用 Square 的 draw 方法</span><br>      shape3.draw();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="步骤5"><a href="#步骤5" class="headerlink" title="步骤5"></a>步骤5</h3><p>执行程序，输出结果：</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs maxima">Inside Circle::<span class="hljs-built_in">draw</span>() <span class="hljs-built_in">method</span>.<br>Inside Rectangle::<span class="hljs-built_in">draw</span>() <span class="hljs-built_in">method</span>.<br>Inside Square::<span class="hljs-built_in">draw</span>() <span class="hljs-built_in">method</span>.<br></code></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>设计模式</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Design pattern</tag>
      
      <tag>设计模式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>redis</title>
    <link href="/2022/10/29/redis/"/>
    <url>/2022/10/29/redis/</url>
    
    <content type="html"><![CDATA[<h1 id="redis安装部署与启动"><a href="#redis安装部署与启动" class="headerlink" title="redis安装部署与启动"></a>redis安装部署与启动</h1><p><a href="https://www.runoob.com/redis/redis-install.html">https://www.runoob.com/redis/redis-install.html</a></p><h1 id="redis的简单调用"><a href="#redis的简单调用" class="headerlink" title="redis的简单调用"></a>redis的简单调用</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.springboot_redis;<br><br><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.HashOperations;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.ValueOperations;<br><br><span class="hljs-keyword">import</span> javax.annotation.Resource;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringbootRedisApplicationTests</span> &#123;<br><br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> RedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setKV</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">ValueOperations</span> <span class="hljs-variable">valueOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue();<br>        valueOperations.set(<span class="hljs-string">&quot;姓名&quot;</span>,<span class="hljs-string">&quot;Kblayt&quot;</span>,<span class="hljs-number">1</span>, TimeUnit.SECONDS);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getKV</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">ValueOperations</span> <span class="hljs-variable">valueOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> (String) valueOperations.get(<span class="hljs-string">&quot;姓名&quot;</span>);<br>        System.out.println(name);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setKMap</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">ValueOperations</span> <span class="hljs-variable">valueOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue();<br>        <span class="hljs-type">HashOperations</span> <span class="hljs-variable">hashOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForHash();<br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;姓名&quot;</span>,<span class="hljs-string">&quot;Kblayt&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;性别&quot;</span>,<span class="hljs-string">&quot;男&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;年龄&quot;</span>,<span class="hljs-string">&quot;19&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">JsonMap</span> <span class="hljs-operator">=</span> JSON.toJSONString(map);<br>        hashOperations.putAll(<span class="hljs-string">&quot;参与人员1&quot;</span>,map);<br>        valueOperations.set(<span class="hljs-string">&quot;参与人员2&quot;</span>,JsonMap);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getKMap1</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">HashOperations</span> <span class="hljs-variable">hashOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForHash();<br>        <span class="hljs-type">Map</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> hashOperations.entries(<span class="hljs-string">&quot;参与人员1&quot;</span>);<br>        System.out.println(msg);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getKMap2</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">ValueOperations</span> <span class="hljs-variable">valueOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue();<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> valueOperations.get(<span class="hljs-string">&quot;参与人员2&quot;</span>);<br>        System.out.println(msg.toString());<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>redis传输乱码配置</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package com.takeaway.merchantsprovider.config;<br><br><br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.<span class="hljs-keyword">Configuration</span>;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.<span class="hljs-keyword">connection</span>.RedisConnectionFactory;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;<br><br><span class="hljs-keyword">import</span> java.net.UnknownHostException;<br><br>@<span class="hljs-keyword">Configuration</span><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> RedisConfig &#123;<br>    @Bean<br>    @ConditionalOnMissingBean(<span class="hljs-type">name</span> = &quot;redisTemplate&quot;)<br>    <span class="hljs-built_in">public</span> RedisTemplate&lt;<span class="hljs-keyword">Object</span>, <span class="hljs-keyword">Object</span>&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory)<br>            throws UnknownHostException &#123;<br><br>        RedisTemplate&lt;<span class="hljs-keyword">Object</span>, <span class="hljs-keyword">Object</span>&gt; template = <span class="hljs-built_in">new</span> RedisTemplate&lt;&gt;();<br>        <span class="hljs-keyword">template</span>.setConnectionFactory(redisConnectionFactory);<br>        StringRedisSerializer stringRedisSerializer = <span class="hljs-built_in">new</span> StringRedisSerializer();<br>        <span class="hljs-keyword">template</span>.setKeySerializer(stringRedisSerializer);<br>        <span class="hljs-keyword">template</span>.setValueSerializer(stringRedisSerializer);<br>        <span class="hljs-keyword">template</span>.afterPropertiesSet();<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">template</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>各类中间件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>redis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nginx</title>
    <link href="/2022/10/29/nginx/"/>
    <url>/2022/10/29/nginx/</url>
    
    <content type="html"><![CDATA[<div class="row">    <embed src="Nginx_day01.pdf" width="100%" height="550" type="application/pdf"></div><div class="row">    <embed src="Nginx_day02.pdf" width="100%" height="550" type="application/pdf"></div><div class="row">    <embed src="Nginx_day03.pdf" width="100%" height="550" type="application/pdf"></div><div class="row">    <embed src="Nginx_day04.pdf" width="100%" height="550" type="application/pdf"></div><div class="row">    <embed src="Nginx_day05.pdf" width="100%" height="550" type="application/pdf"></div><p><a href="C:/Users/Kblayt/Desktop/youdaonote/youdaonote-pull/youdaonote/youdaonote-attachments/WEBRESOURCEc6d2252a79f1a3de703585df478bbf8bNginx.xmind">Nginx.xmind</a></p><h2 id="负载均衡有四种方式"><a href="#负载均衡有四种方式" class="headerlink" title="负载均衡有四种方式"></a>负载均衡有四种方式</h2><ul><li><p>轮询（默认）</p></li><li><p>权重轮询（weight）</p></li><li><p>ip_hash（让某一客户机在相当长的一段时间内只访问固定的后端的某台真实的web服务器）</p></li><li><p>least_conn（请求将被传递给当前拥有最少活跃连接的server，同时考虑权重weight的因素）</p></li></ul><h2 id="配置在niginx-conf中"><a href="#配置在niginx-conf中" class="headerlink" title="配置在niginx.conf中"></a>配置在niginx.conf中</h2><p>①http节点下面配置</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">upstream serverPools &#123;<br>#ip_hash;<br>#least_conn;<br><span class="hljs-built_in">server </span>localhost:8080 backup;<br><span class="hljs-built_in">server </span>localhost:8081 <span class="hljs-attribute">weight</span>=1;<br><span class="hljs-built_in">server </span>localhost:8082 <span class="hljs-attribute">weight</span>=2;<br><span class="hljs-built_in">server </span>localhost:8083 <span class="hljs-attribute">weight</span>=3;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>②server节点下配置</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">location <span class="hljs-regexp">/mystation/</span> &#123;<br>        proxy_pass  http:<span class="hljs-regexp">//</span>serverPools/;<br><span class="hljs-comment">#proxy_set_header Host $host;</span><br>    &#125;<br><br></code></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>各类中间件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>微服务框架与Docker(二)</title>
    <link href="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/"/>
    <url>/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/</url>
    
    <content type="html"><![CDATA[<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a><strong>Docker</strong></h1><h2 id="Docker-1"><a href="#Docker-1" class="headerlink" title="Docker"></a><strong>Docker</strong></h2><p>项目部署问题</p><p>Docker如何解决大型项目依赖关系复杂，不同组件依赖的兼容性问题？</p><ul><li>Docker允许开发中将应用、依赖、函数库、配置一起<strong>打包</strong>，形成可移植镜像</li><li>Docker应用运行在容器中，使用沙箱机制，相互<strong>隔离</strong></li></ul><p>Docker如何解决开发、测试、生产环境有差异的问题</p><ul><li>Docker镜像中包含完整运行环境，包括系统函数库，仅依赖系统的Linux内核，因此可以在任意Linux操作系统上运行</li></ul><table><thead><tr><th>ZooKeeper</th><th>Dubbo</th><th>ActiveMQ</th><th>Redis</th><th>MySQL</th></tr></thead><tbody><tr><td><strong>Portainer</strong></td><td><strong>ElasticSearch</strong></td><td><strong>Kibana</strong></td><td><strong>Logstash</strong></td><td></td></tr></tbody></table><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101053397.png" alt="image-20221103101053397"></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>Docker是一个快速交付应用、运行应用的技术：</p><p>1.可以将程序及其依赖、运行环境一起打包为一个镜像，可以迁移到任意Linux操作系统</p><p>2.运行时利用沙箱机制形成隔离容器，各个应用互不干扰</p><p>3.启动、移除都可以通过一行命令完成，方便快捷</p><h2 id="Docker与虚拟机"><a href="#Docker与虚拟机" class="headerlink" title="Docker与虚拟机"></a><strong>Docker与虚拟机</strong></h2><p>虚拟机（virtual machine）是在操作系统中模拟硬件设备，然后运行另一个操作系统，比如在 Windows系统里面运行 Ubuntu 系统，这样就可以运行任意的Ubuntu应用了。<img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101114303.png" alt="image-20221103101114303"></p><h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>Docker和虚拟机的差异：</p><p>•docker是一个系统进程；虚拟机是在操作系统中的操作系统</p><p>•docker体积小、启动速度快、性能好；虚拟机体积大、启动速度慢、性能一般</p><h2 id="Docker架构"><a href="#Docker架构" class="headerlink" title="Docker架构"></a><strong>Docker架构</strong></h2><h3 id="容器和镜像"><a href="#容器和镜像" class="headerlink" title="容器和镜像"></a><strong>容器和镜像</strong></h3><p><strong>镜像（Image）</strong>：Docker将应用程序及其所需的依赖、函数库、环境、配置等文件打包在一起，称为镜像。</p><p><strong>容器（Container）</strong>：镜像中的应用程序运行后形成的进程就是<strong>容器</strong>，只是Docker会给容器做隔离，对外不可见。</p><h3 id="Docker和DockerHub"><a href="#Docker和DockerHub" class="headerlink" title="Docker和DockerHub"></a><strong>Docker和DockerHub</strong></h3><p>DockerHub：<a href="https://hub.docker.com/">DockerHub</a>是一个Docker镜像的托管平台。这样的平台称为Docker Registry。国内也有类似于DockerHub的公开服务，比如<a href="https://c.163yun.com/hub">网易云镜像服务</a>、<a href="https://cr.console.aliyun.com/">阿里云镜像库</a>等。</p><h3 id="docker架构"><a href="#docker架构" class="headerlink" title="docker架构"></a><strong>docker架构</strong></h3><p>Docker是一个CS架构的程序，由两部分组成：</p><ul><li>服务端(server)：Docker守护进程，负责处理Docker指令，管理镜像、容器等</li><li>客户端(client)：通过命令或RestAPI向Docker服务端发送指令。可以在本地或远程向服务端发送指令</li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101310555.png" alt="image-20221103101310555"></p><h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>镜像：</p><ul><li>将应用程序及其依赖、环境、配置打包在一起</li></ul><p>容器：</p><ul><li>镜像运行起来就是容器，一个镜像可以运行多个容器</li></ul><p>Docker结构：</p><ul><li>服务端：接收命令或远程请求，操作镜像或容器</li><li>客户端：发送命令或者请求到Docker服务端</li></ul><p>DockerHub：</p><ul><li>一个镜像托管的服务器，类似的还有阿里云镜像服务，统称为DockerRegistry</li></ul><h2 id="安装Docker（参考centos7安装docker）"><a href="#安装Docker（参考centos7安装docker）" class="headerlink" title="安装Docker（参考centos7安装docker）"></a><strong>安装Docker</strong>（参考centos7安装docker）</h2><h2 id="Docker基本操作"><a href="#Docker基本操作" class="headerlink" title="Docker基本操作"></a><strong>Docker基本操作</strong></h2><h3 id="镜像操作"><a href="#镜像操作" class="headerlink" title="镜像操作"></a><strong>镜像操作</strong></h3><ul><li>镜像名称一般分两部分组成：[repository]:[tag]。</li><li>在没有指定tag时，默认是latest，代表最新版本的镜像</li></ul><p>例如：mysql:5.7</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101434783.png" alt="image-20221103101434783"></p><p>docker –help、docker images –help查看帮助文档</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101441028.png" alt="image-20221103101441028"></p><p>利用dockersave将nginx镜像导出磁盘，然后再通过load加载回来：</p><p>步骤一：利用docker xx –help命令查看docker save和docker load的语法</p><p>步骤二：使用docker save导出镜像到磁盘 </p><p>步骤三：使用docker load加载镜像</p><h4 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a><strong>总结</strong></h4><p>镜像操作有哪些？</p><ul><li>docker images</li><li>docker rmi</li><li>docker pull</li><li>docker push</li><li>docker save </li><li>docker load</li></ul><h3 id="容器操作"><a href="#容器操作" class="headerlink" title="容器操作"></a><strong>容器操作</strong></h3><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101456037.png" alt="image-20221103101456037"></p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101459085.png" alt="image-20221103101459085"></p><h4 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a><strong>总结</strong></h4><p>dockerrun命令的常见参数有哪些？</p><ul><li>–name：指定容器名称</li><li>-p：指定端口映射</li><li>-d：让容器后台运行</li></ul><p>查看容器日志的命令：</p><ul><li>docker logs</li><li>添加 -f</li></ul><p>参数可以持续查看日志</p><p>查看容器状态：</p><ul><li>docker ps</li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101531610.png" alt="image-20221103101531610"></p><h4 id="总结-5"><a href="#总结-5" class="headerlink" title="总结"></a><strong>总结</strong></h4><p>查看容器状态：</p><ul><li>docker ps</li><li>添加-a参数查看所有状态的容器</li></ul><p>删除容器：</p><ul><li>docker rm</li><li>不能删除运行中的容器，除非添加 -f 参数</li></ul><p>进入容器：</p><ul><li>命令是docker exec -it [容器名] [要执行的命令]</li><li>exec命令可以进入容器修改文件，但是在容器内修改文件是不推荐的</li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101601141.png" alt="image-20221103101601141"></p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101605054.png" alt="image-20221103101605054"></p><h3 id="数据卷（容器数据管理）"><a href="#数据卷（容器数据管理）" class="headerlink" title="数据卷（容器数据管理）"></a><strong>数据卷（容器数据管理）</strong></h3><p>容器与数据耦合存在的问题</p><ul><li>不便于修改：当我们要修改Nginx的html内容时，需要进入容器内部修改，很不方便。</li><li>数据不可服用：在容器内的修改对外是不可见的。所有修改对新创建的容器是不可复用的。</li><li>升级维护困难：数据在容器内，如果要升级容器必然删除就容器，所有数据都跟着删除了。</li></ul><p>数据卷（volume）是一个虚拟目录，指向宿主机文件系统中的某个目录。</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101650554.png" alt="image-20221103101650554"></p><h4 id="数据卷操作的基本语法如下："><a href="#数据卷操作的基本语法如下：" class="headerlink" title="数据卷操作的基本语法如下："></a><strong>数据卷操作的基本语法如下：</strong></h4><ul><li>docker volume [COMMAND]</li></ul><p>docker volume命令是数据卷操作，根据命令后跟随的command来确定下一步的操作：</p><ul><li>create 创建一个volume</li><li>inspect 显示一个或多个volume的信息</li><li>ls 列出所有的volume</li><li>prune 删除未使用的volume</li><li>rm 删除一个或多个指定的volume</li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101713739.png" alt="image-20221103101713739"></p><h4 id="总结-6"><a href="#总结-6" class="headerlink" title="总结"></a><strong>总结</strong></h4><p>数据卷的作用：</p><ul><li>将容器与数据分离，解耦合，方便操作容器内数据，保证数据安全</li></ul><p>数据卷操作：</p><ul><li>docker volume create</li><li>docker volume ls</li><li>docker volume inspect</li><li>docker volume rm</li><li>docker volume prune</li></ul><h4 id="挂载数据卷"><a href="#挂载数据卷" class="headerlink" title="挂载数据卷"></a><strong>挂载数据卷</strong></h4><p>我们在创建容器时，可以通过-v参数来挂在一个数据卷到某个容器目录</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101745919.png" alt="image-20221103101745919"></p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101748208.png" alt="image-20221103101748208"></p><h4 id="总结-7"><a href="#总结-7" class="headerlink" title="总结"></a><strong>总结</strong></h4><p>数据卷挂载方式：</p><ul><li>-v volumeName: &#x2F;targetContainerPath</li><li>如果容器运行时volume不存在，会自动被创建出来</li></ul><p>案例：创建并运行一个MySQL容器，将宿主机目录直接挂载到容器</p><p>提示：目录挂载与数据卷挂载的语法是类似的：</p><ul><li>-v [宿主机目录]:[容器内目录]</li><li>-v [宿主机文件]:[容器内文件]</li></ul><p>实现思路如下：</p><p>1.在将课前资料中的mysql.tar文件上传到虚拟机，通过load命令加载为镜像</p><p>2.创建目录&#x2F;tmp&#x2F;mysql&#x2F;data</p><p>3.创建目录&#x2F;tmp&#x2F;mysql&#x2F;conf，将课前资料提供的hmy.cnf文件上传到&#x2F;tmp&#x2F;mysql&#x2F;conf</p><p>4.去DockerHub查阅资料，创建并运行MySQL容器，要求：</p><p>①挂载&#x2F;tmp&#x2F;mysql&#x2F;data到mysql容器内数据存储目录</p><p>②挂载&#x2F;tmp&#x2F;mysql&#x2F;conf&#x2F;hmy.cnf到mysql容器的配置文件</p><p>③设置MySQL密码</p><h4 id="数据卷挂载的方式对比："><a href="#数据卷挂载的方式对比：" class="headerlink" title="数据卷挂载的方式对比："></a><strong>数据卷挂载的方式对比：</strong></h4><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101825721.png" alt="image-20221103101825721"></p><p><strong>总结</strong></p><p>1.docker run的命令中通过 -v 参数挂载文件或目录到容器中：</p><p>​①-v volume名称:容器内目录</p><p>​②-v 宿主机文件:容器内文件</p><p>​③-v 宿主机目录:容器内目录</p><p>2.数据卷挂载与目录直接挂载的</p><p>​①数据卷挂载耦合度低，由docker来管理目录，但是目录较深，不好找</p><p>​②目录挂载耦合度高，需要我们自己管理目录，不过目录容易寻找查看</p><h2 id="Dockerfile自定义镜像"><a href="#Dockerfile自定义镜像" class="headerlink" title="Dockerfile自定义镜像"></a><strong>Dockerfile自定义镜像</strong></h2><h3 id="镜像结构"><a href="#镜像结构" class="headerlink" title="镜像结构"></a><strong>镜像结构</strong></h3><ul><li>镜像是将应用程序及其需要的系统函数库、环境、配置、依赖打包而成。</li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103101936256.png" alt="image-20221103101936256"></p><h3 id="总结-8"><a href="#总结-8" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>镜像是分层结构，每一层称为一个Layer</p><ul><li>BaseImage层：包含基本的系统函数库、环境变量、文件系统</li><li>Entrypoint：入口，是镜像中应用启动的命令</li><li>其它：在BaseImage基础上添加依赖、安装程序、完成整个应用的安装和配置</li></ul><h3 id="什么是dockerfile"><a href="#什么是dockerfile" class="headerlink" title="什么是dockerfile"></a><strong>什么是dockerfile</strong></h3><p>Dockerfile就是要给文本文件，其中包含一个个的指令，用指令来说明要执行什么操作来构建镜像。每一个指令都会形成一层Layer。</p><table><thead><tr><th>指令</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>FROM</td><td>指定基础镜像</td><td>FROM centos:6</td></tr><tr><td>ENV</td><td>设置环境变量，可在后面指令使用</td><td>ENV key value</td></tr><tr><td>COPY</td><td>拷贝本地文件到镜像的指定目录</td><td>COPY .&#x2F;mysql-5.7.rpm &#x2F;tmp</td></tr><tr><td>RUN</td><td>执行Linux的shell命令，一般是安装过程的命令</td><td>RUN yum install gcc</td></tr><tr><td>EXPOSE</td><td>指定容器运行时监听的端口，是给镜像使用者看的</td><td>EXPOSE 8080</td></tr><tr><td>ENTRYPOINT</td><td>镜像中应用的启动命令，容器运行时调用</td><td>ENTRYPOINT java -jar xx.jar</td></tr></tbody></table><p>更新详细语法说明，请参考官网文档： <a href="https://docs.docker.com/engine/reference/builder">https://docs.docker.com/engine/reference/builder</a></p><p>Dockerfile实际上就是方便编程人员生成一个脚本文件方便以后再次需要安装或者执行某个操作时不需要再次去输入Docker指令</p><p>Dockerfile执行指令：docker build -t [docker文件名称]</p><p>实际上shell指令也能生成脚本文件，在secureCRT工具中Script-&gt;Start Recording Script、Start Recording Scrip、run</p><h3 id="总结-9"><a href="#总结-9" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>1.Dockerfile的本质是一个文件，通过指令描述镜像的构建过程</p><p>2.Dockerfile的第一行必须是FROM，从一个基础镜像来构建</p><p>3.基础镜像可以是基本操作系统，如Ubuntu。也可以是其他人制作好的镜像，例如：java:8-alpine</p><h2 id="DockerCompose"><a href="#DockerCompose" class="headerlink" title="DockerCompose"></a><strong>DockerCompose</strong></h2><p>什么是DockerCompose</p><ul><li>Docker Compose可以基于Compose文件帮我们快速的部署分布式应用，而无需手动一个个创建和运行容器！</li><li>Compose文件是一个文本文件，通过指令定义集群中的每个容器如何运行。</li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">version:</span> <span class="hljs-string">&quot;3.8&quot;</span><br><span class="hljs-symbol">services:</span><br><span class="hljs-symbol">  mysql:</span><br><span class="hljs-symbol">    image:</span> mysql:<span class="hljs-number">5.7</span><span class="hljs-number">.25</span><br><span class="hljs-symbol">    environment:</span><br><span class="hljs-symbol">     MYSQL_ROOT_PASSWORD:</span><span class="hljs-number">123</span> <br><span class="hljs-symbol">    volumes:</span><br>     - <span class="hljs-string">&quot;/tmp/mysql/data:/var/lib/mysql&quot;</span><br>     -  <span class="hljs-string">&quot;/tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf&quot;</span><br><span class="hljs-symbol">  web:</span><br><span class="hljs-symbol">    build:</span> .<br><span class="hljs-symbol">    ports:</span><br>     -<span class="hljs-string">&quot;8090:8090&quot;</span><br></code></pre></td></tr></table></figure><p>DockerCompose的详细语法参考官网：<a href="https://docs.docker.com/compose/compose-file/">https://docs.docker.com/compose/compose-file/</a></p><h2 id="DockerCompose部署"><a href="#DockerCompose部署" class="headerlink" title="DockerCompose部署"></a><strong>DockerCompose部署</strong></h2><h3 id="实现思路如下："><a href="#实现思路如下：" class="headerlink" title="实现思路如下："></a><strong>实现思路如下：</strong></h3><p>①查看课前资料提供的cloud-demo文件夹，里面已经编写好了docker-compose文件</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103102135824.png" alt="image-20221103102135824"></p><p>②修改自己的cloud-demo项目，将数据库、nacos地址都命名为docker-compose中的服务名</p><p>③使用maven打包工具，将项目中的每个微服务都打包为app.jar</p><p>④将打包好的app.jar拷贝到cloud-demo中的每一个对应的子目录中</p><p>⑤将cloud-demo上传至虚拟机，利用 docker-compose up -d 来部署</p><h2 id="Docker镜像中心"><a href="#Docker镜像中心" class="headerlink" title="Docker镜像中心"></a><strong>Docker镜像中心</strong></h2><h3 id="搭建私有镜像中心"><a href="#搭建私有镜像中心" class="headerlink" title="搭建私有镜像中心"></a><strong>搭建私有镜像中心</strong></h3><p>镜像仓库（Docker Registry ）有公共的和私有的两种形式：</p><ul><li>公共仓库：例如Docker官方的<a href="https://hub.docker.com/">Docker Hub</a>，国内也有一些云服务商提供类似于Docker Hub 的公开服务，比如<a href="https://c.163.com/hub">网易云镜像服务</a>、<a href="https://hub.daocloud.io/">DaoCloud</a><a href="https://hub.daocloud.io/">镜像服务</a>、<a href="https://cr.console.aliyun.com/">阿里云镜像服务</a>等。</li><li>除了使用公开仓库外，用户还可以在本地搭建私有 Docker Registry。企业自己的镜像最好是采用私有Docker Registry来实现。</li></ul><h3 id="向镜像仓库推送镜像"><a href="#向镜像仓库推送镜像" class="headerlink" title="向镜像仓库推送镜像"></a><strong>向镜像仓库推送镜像</strong></h3><h3 id="从镜像仓库拉取镜像"><a href="#从镜像仓库拉取镜像" class="headerlink" title="从镜像仓库拉取镜像"></a><strong>从镜像仓库拉取镜像</strong></h3><h1 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a><strong>RabbitMQ</strong></h1><h2 id="同步通讯"><a href="#同步通讯" class="headerlink" title="同步通讯"></a><strong>同步通讯</strong></h2><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103102249544.png" alt="image-20221103102249544"></p><p>优点：</p><ul><li>时效性较强，可以立即得到结果</li></ul><p>缺点：</p><ul><li>耦合度高：每次加入新的需求，都要修改原来的代码</li><li>性能下降：调用者需要等待服务提供者响应，如果调用链过长则响应时间等于每次调用的时间之和。</li><li>资源浪费：调用链中的每个服务在等待响应过程中，不能释放请求占用的资源，高并发场景下会极度浪费系统资源</li><li>级联失败：如果服务提供者出现问题，所有调用方都会跟着出问题，如同多米诺骨牌一样，迅速导致整个微服务群故障</li></ul><h2 id="异步通讯"><a href="#异步通讯" class="headerlink" title="异步通讯"></a><strong>异步通讯</strong></h2><p>异步调用常见实现就是事件驱动模式</p><p>异步通信的优点：</p><ul><li>耦合度低</li><li>吞吐量提升</li><li>故障隔离</li><li>流量削峰</li></ul><p>异步通信的缺点：</p><ul><li>依赖于Broker的可靠性、安全性、吞吐能力</li><li>架构复杂了，业务没有明显的流程线，不好追踪管理</li></ul><h2 id="什么是MQ"><a href="#什么是MQ" class="headerlink" title="什么是MQ"></a><strong>什么是MQ</strong></h2><p>MQ（MessageQueue），消息队列，字面来看就是存放消息的队列。也就是事件驱动架构中的Broker</p><p>MQ常见框架</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103102327484.png" alt="image-20221103102327484"></p><h2 id="RabbitMQ快速入门"><a href="#RabbitMQ快速入门" class="headerlink" title="RabbitMQ快速入门"></a><strong>RabbitMQ快速入门</strong></h2><h1 id="RabbitMQ概述和安装"><a href="#RabbitMQ概述和安装" class="headerlink" title="RabbitMQ概述和安装"></a><strong>RabbitMQ概述和安装</strong></h1><h2 id="RabbitMQ的结构和概念"><a href="#RabbitMQ的结构和概念" class="headerlink" title="RabbitMQ的结构和概念"></a><strong>RabbitMQ的结构和概念</strong></h2><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103102811650.png" alt="image-20221103102811650"></p><h2 id="总结-10"><a href="#总结-10" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>RabbitMQ中的几个概念：</p><ul><li>channel：操作MQ的工具</li><li>exchange：路由消息到队列中</li><li>queue：缓存消息</li><li>virtual host：虚拟主机，是对queue、exchange等资源的逻辑分组</li></ul><h2 id="五种常见的消息模型"><a href="#五种常见的消息模型" class="headerlink" title="五种常见的消息模型"></a><strong>五种常见的消息模型</strong></h2><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103102907677.png" alt="image-20221103102907677"></p><p>官方的BasicQueue是基于最基础的消息队列模型来实现的，只包括三个角色：</p><ul><li>publisher：消息发布这，将消息发送到队列queue</li><li>queue：消息队列，负责接受并缓存消息</li><li>consumer：订阅队列，处理队列中的消息</li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103102915336.png" alt="image-20221103102915336"></p><p>实现步骤：</p><ul><li>导入课前资料中的demo工程</li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103102922183.png" alt="image-20221103102922183"></p><ul><li>运行publisher服务中的测试类PublisherTest中的测试方法testSendMessage()</li><li>查看RabbitMQ控制台的消息</li><li>启动consumer服务，查看是否能接收消息</li></ul><h2 id="总结-11"><a href="#总结-11" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>基本消息队列的消息发送流程：</p><p>1.建立connection</p><p>2.创建channel</p><p>3.利用channel声明队列</p><p>4.利用channel向队列发送消息</p><p>基本消息队列的消息接收流程：</p><p>1.建立connection</p><p>2.创建channel</p><p>3.利用channel声明队列</p><p>4.定义consumer的消费行为handleDelivery()</p><p>5.利用channel将消费者与队列绑定</p><h1 id="SpringAMQP"><a href="#SpringAMQP" class="headerlink" title="SpringAMQP"></a><strong>SpringAMQP</strong></h1><h2 id="SpringAMQP-1"><a href="#SpringAMQP-1" class="headerlink" title="SpringAMQP"></a><strong>SpringAMQP</strong></h2><p>SpringAmqp的官方地址：<a href="https://spring.io/projects/spring-amqp">https://spring.io/projects/spring-amqp</a></p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103102952419.png" alt="image-20221103102952419"></p><h2 id="BasicQueue"><a href="#BasicQueue" class="headerlink" title="BasicQueue"></a><strong>BasicQueue</strong></h2><p>利用SpringAMQP实现BasicQueue中的基础消息队列功能</p><p>流程如下：</p><p>1.在父工程中引入spring-amqp的依赖，因为publisher和consumer服务都需要amqp依赖，因此这里把依赖直接放到父工程中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--AMQP依赖，包含RabbitMQ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.在publisher服务中利用RabbitTemplate发送消息到simple.queue这个队列</p><ul><li>在publisher服务中编写application.yml，添加mq连接信息：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">rabbitmq:</span><br>      <span class="hljs-attr">host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span> <span class="hljs-comment"># 主机名</span><br>          <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span> <span class="hljs-comment"># 端口    </span><br>          <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/</span> <span class="hljs-comment"># 虚拟主机     </span><br>          <span class="hljs-attr">username:</span> <span class="hljs-string">itcast</span> <span class="hljs-comment"># 用户名    </span><br>          <span class="hljs-attr">password:</span> <span class="hljs-number">123321</span> <span class="hljs-comment"># 密码</span><br></code></pre></td></tr></table></figure><ul><li>在publisher服务中新建一个测试类，编写测试方法：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringAmqpTest</span>&#123;<br>    <span class="hljs-meta">@Autowired</span>    <br>    privateRabbitTemplate rabbitTemplate;    <br>    <span class="hljs-meta">@Test</span>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSimpleQueue</span><span class="hljs-params">()</span>&#123;<br>             <span class="hljs-type">String</span> <span class="hljs-variable">queueName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;simple.queue&quot;</span>;        <br>             <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello, spring amqp!&quot;</span>;        <br>             rabbitTemplate.convertAndSend(queueName,message);    <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3.在consumer服务中编写消费逻辑，绑定simple.queue这个队列</p><ul><li>在sonsumer服务中编写application.yml，添加mq连接信息：</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">rabbitmq:</span><br>      <span class="hljs-attr">host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span> <span class="hljs-comment"># 主机名</span><br>          <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span> <span class="hljs-comment"># 端口    </span><br>          <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/</span> <span class="hljs-comment"># 虚拟主机     </span><br>          <span class="hljs-attr">username:</span> <span class="hljs-string">itcast</span> <span class="hljs-comment"># 用户名    </span><br>          <span class="hljs-attr">password:</span> <span class="hljs-number">123321</span> <span class="hljs-comment"># 密码</span><br></code></pre></td></tr></table></figure><ul><li>在consumer服务中新建一个类，编写消费逻辑：</li></ul><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringRabbitListener</span>&#123;<br>    <span class="hljs-meta">@RabbitListener(queues = <span class="hljs-string">&quot;simple.queue&quot;</span>)</span>    <br>    <span class="hljs-keyword">public</span> void listenSimpleQueueMessage(String msg) throwsInterruptedException &#123;<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;spring 消费者接收到消息 ：【&quot;</span> + msg + <span class="hljs-string">&quot;】&quot;</span>);    <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="总结-12"><a href="#总结-12" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>什么是AMQP？</p><ul><li>应用间消息通信的一种协议，与语言和平台无关。</li></ul><p>SpringAMQP如何发送消息？</p><ul><li>引入amqp的starter依赖</li><li>配置RabbitMQ地址</li><li>利用RabbitTemplate的convertAndSend方法</li></ul><h2 id="WorkQueue"><a href="#WorkQueue" class="headerlink" title="WorkQueue"></a><strong>WorkQueue</strong></h2><p>Work queue，工作队列，可以提高消息处理速度，避免队列消息堆积</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103103205861.png" alt="image-20221103103205861"></p><p>模拟WorkQueue，实现一个队列绑定多个消费者</p><p>基本思路如下：</p><p>1.在publisher服务中定义测试方法，每秒产生50条消息，发送到simple.queue</p><p>2.在consumer服务中定义两个消息监听者，都监听simple.queue队列</p><p>3.消费者1每秒处理50条消息，消费者2每秒处理10条消息</p><p>实现步骤：</p><p>1.生产者循环发送消息到simple.queue(在publisher服务中添加一个测试方法，循环发送50条消息到simple.queue队列)</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Test<br>public void test<span class="hljs-constructor">WorkQueue()</span>throws InterruptedException&#123;<br>    <span class="hljs-comment">// 队列名称    </span><br>    StringqueueName = <span class="hljs-string">&quot;simple.queue&quot;</span>;    <br>    <span class="hljs-comment">// 消息    </span><br>    Stringmessage = <span class="hljs-string">&quot;hello,message__&quot;</span>;    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">50</span>;i++) &#123;<br>            <span class="hljs-comment">// 发送消息        </span><br>            rabbitTemplate.convert<span class="hljs-constructor">AndSend(<span class="hljs-params">queueName</span>, <span class="hljs-params">message</span> + <span class="hljs-params">i</span>)</span>;<br>            <span class="hljs-comment">// 避免发送太快        </span><br>            <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">20</span>);    <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2.编写两个消费者，都监听simple.queue</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@<span class="hljs-constructor">RabbitListener(<span class="hljs-params">queues</span> = <span class="hljs-string">&quot;simple.queue&quot;</span>)</span><br>public void listen<span class="hljs-constructor">SimpleQueueMessage(Stringmsg)</span> throwsInterruptedException &#123;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;spring 消费者1接收到消息：【&quot;</span> + msg + <span class="hljs-string">&quot;】&quot;</span>);<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">25</span>);<br>&#125;<br><br>@<span class="hljs-constructor">RabbitListener(<span class="hljs-params">queues</span> = <span class="hljs-string">&quot;simple.queue&quot;</span>)</span> <br>public void listen<span class="hljs-constructor">SimpleQueueMessage2(Stringmsg)</span> throwsInterruptedException &#123;<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>err.println(<span class="hljs-string">&quot;spring 消费者2接收到消息：【&quot;</span> + msg + <span class="hljs-string">&quot;】&quot;</span>);<br>    <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">100</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>3.消费预取限制（目的是解决消费预取机制导致的消息会平均分配的问题）</p><p>修改application.xml文件，设置preFetch这个值，可以控制预取消息的上限：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">rabbitmq:</span><br>      <span class="hljs-attr">host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span> <span class="hljs-comment"># 主机名</span><br>          <span class="hljs-attr">port:</span> <span class="hljs-number">5672</span> <span class="hljs-comment"># 端口    </span><br>          <span class="hljs-attr">virtual-host:</span> <span class="hljs-string">/</span> <span class="hljs-comment"># 虚拟主机     </span><br>          <span class="hljs-attr">username:</span> <span class="hljs-string">itcast</span> <span class="hljs-comment"># 用户名    </span><br>          <span class="hljs-attr">password:</span> <span class="hljs-number">123321</span> <span class="hljs-comment"># 密码    </span><br>          <span class="hljs-attr">listener:</span>      <br>               <span class="hljs-attr">simple:</span><br>                   <span class="hljs-attr">prefetch:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># 每次只能获取一条消息，处理完成才能获取下一个消息</span><br></code></pre></td></tr></table></figure><h2 id="总结-13"><a href="#总结-13" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>Work模型的使用：</p><ul><li>多个消费者绑定到一个队列，同一条消息只会被一个消费者处理</li><li>通过设置prefetch来控制消费者预取的消息数量</li></ul><h2 id="发布-Publish-x2F-订阅-Subscirbe"><a href="#发布-Publish-x2F-订阅-Subscirbe" class="headerlink" title="发布(Publish)&#x2F;订阅(Subscirbe)"></a><strong>发布(Publish)&#x2F;订阅(Subscirbe)</strong></h2><p>发布订阅模式与之前的两种模型的区别就是允许将同一消息发送给多个消费者。实现方式是加入了exchange(交换机)。</p><p>常见的exchange类型包括：</p><ul><li>Fanout：广播</li><li>Direct：路由</li><li>Topic：话题</li></ul><p>ps：exchange负责消息路由，而不是存储，路由失败则消息丢失。</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103103300909.png" alt="image-20221103103300909"></p><h3 id="发布订阅之-FanoutExchange"><a href="#发布订阅之-FanoutExchange" class="headerlink" title="发布订阅之-FanoutExchange"></a><strong>发布订阅之-FanoutExchange</strong></h3><p>Fanout Exchange会将接收到的消息路由到每一个跟其绑定的queue</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103103336106.png" alt="image-20221103103336106"></p><p>实现思路如下：</p><p>1.在consumer服务中，利用代码声明队列、交换机，并将两者绑定</p><p>2.在consumer服务中，编写两个消费者方法，分别监听fanout.queue1和fanout.queue2</p><p>3.在publisher中编写测试方法，向itcast.fanout发送消息</p><p>步骤1：在consumer服务声明Exchange、Queue、Binding</p><p>SpringAMQP提供了声明交换机、队列、绑定关系的API，例如：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103103342723.png" alt="image-20221103103342723"></p><p>在consumer服务常见一个类，添加@Configuration注解，并声明FanoutExchange、Queue和绑定关系对象Binding，代码如下：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FanoutConfig</span>&#123;<br>    <span class="hljs-comment">// 声明FanoutExchange交换机    </span><br>    <span class="hljs-meta">@Bean</span>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">FanoutExchangefanoutExchange</span>()&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FanoutExchange</span>(<span class="hljs-string">&quot;itcast.fanout&quot;</span>);    <br>    &#125;    <br>    <span class="hljs-comment">// 声明第1个队列    </span><br>    <span class="hljs-meta">@Bean</span>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Queue</span> <span class="hljs-title function_">fanoutQueue1</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(<span class="hljs-string">&quot;fanout.queue1&quot;</span>);<br>    &#125;    <br>    <span class="hljs-comment">//绑 定队列1和交换机    </span><br>    <span class="hljs-meta">@Bean</span>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Binding</span> <span class="hljs-title function_">bindingQueue1</span>(<span class="hljs-params">Queue fanoutQueue1,FanoutExchange fanoutExchange</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-title class_">BindingBuilder</span>.<span class="hljs-title function_">bind</span>(fanoutQueue1).<span class="hljs-title function_">to</span>(fanoutExchange);<br>    &#125;    <br>    <span class="hljs-comment">// ...略， 以相同方式声明第2个队列，并完成绑定</span><br>&#125;<br></code></pre></td></tr></table></figure><p>步骤2：在consumer服务声明两个消费者</p><p>在consumer服务的SpringRabbitListener类中，添加两个方法，分别监听fanout.queue1和fanout.queue2：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@RabbitListener</span>(queues = <span class="hljs-string">&quot;fanout.queue1&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">listenFanoutQueue1</span>(<span class="hljs-params">Stringmsg</span>) &#123;<br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;消费者1接收到Fanout消息：【&quot;</span> + msg + <span class="hljs-string">&quot;】&quot;</span>);<br>&#125;<br><span class="hljs-meta">@RabbitListener</span>(queues = <span class="hljs-string">&quot;fanout.queue2&quot;</span>) <br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">listenFanoutQueue2</span>(<span class="hljs-params">Stringmsg</span>) &#123;<br>    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;消费者2接收到Fanout消息：【&quot;</span> + msg + <span class="hljs-string">&quot;】&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>步骤3：在publisher服务发送消息到FanoutExchange</p><p>在publisher服务的SpringAmqpTest类中添加测试方法：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">testFanoutExchange</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// 队列名称    </span><br>    <span class="hljs-title class_">StringexchangeName</span> = <span class="hljs-string">&quot;itcast.fanout&quot;</span>;    <br>    <span class="hljs-comment">// 消息    </span><br>    <span class="hljs-title class_">Stringmessage</span> = <span class="hljs-string">&quot;hello,everyone!&quot;</span>;    <br>    <span class="hljs-comment">// 发送消息，参数分别是：交互机名称、RoutingKey（暂时为空）、消息     </span><br>    rabbitTemplate.<span class="hljs-title function_">convertAndSend</span>(exchangeName, <span class="hljs-string">&quot;&quot;</span>, message);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="总结-14"><a href="#总结-14" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>交换机的作用是什么？</p><ul><li>接收publisher发送的消息</li><li>将消息按照规则路由到与之绑定的队列</li><li>不能缓存消息，路由失败，消息丢失</li><li>FanoutExchange的会将消息路由到每个绑定的队列</li></ul><p>声明队列、交换机、绑定关系的Bean是什么？</p><ul><li>Queue</li><li>FanoutExchange</li><li>Binding</li></ul><h3 id="发布订阅之-DirectExchange"><a href="#发布订阅之-DirectExchange" class="headerlink" title="发布订阅之-DirectExchange"></a><strong>发布订阅之-DirectExchange</strong></h3><p>Direct Exchange 会将接收到的消息根据规则路由到指定的Queue，因此称为路由模式（routes）。</p><ul><li>每一个Queue都与Exchange设置一个BindingKey</li><li>发布者发送消息时，指定消息的RoutingKey</li><li>Exchange将消息路由到BindingKey与消息RoutingKey一致的队列</li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103103504956.png" alt="image-20221103103504956"></p><p>实现思路如下：</p><p>1.利用@RabbitListener声明Exchange、Queue、RoutingKey</p><p>2.在consumer服务中，编写两个消费者方法，分别监听direct.queue1和direct.queue2</p><p>3.在publisher中编写测试方法，向itcast. direct发送消息</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%BA%8C/image-20221103103514811.png" alt="image-20221103103514811"></p><p>步骤1：在consumer服务声明Exchange、Queue</p><p>1.在consumer服务中，编写两个消费者方法，分别监听direct.queue1和direct.queue2，</p><p>2.并利用@RabbitListener声明Exchange、Queue、RoutingKey</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@RabbitListener</span>(bindings = <span class="hljs-variable">@QueueBinding</span>(<br>        value = <span class="hljs-variable">@Queue</span>(name = <span class="hljs-string">&quot;direct.queue1&quot;</span>),<br>        exchange = <span class="hljs-variable">@Exchange</span>(name = <span class="hljs-string">&quot;itcast.direct&quot;</span>, type = ExchangeTypes.DIRECT),<br>        key = &#123;<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;blue&quot;</span>&#125;<br>))<br>public void <span class="hljs-built_in">listenDirectQueue1</span>(String System.msg)&#123;<br>        <span class="hljs-selector-tag">out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;消费者1接收到Direct消息：【&quot;</span>+msg+<span class="hljs-string">&quot;】&quot;</span>);<br>&#125;<br><br>@<span class="hljs-selector-tag">RabbitListener</span>(bindings = <span class="hljs-variable">@QueueBinding</span>(<br>        value = <span class="hljs-variable">@Queue</span>(name= <span class="hljs-string">&quot;direct.queue2&quot;</span>),<br>        exchange = <span class="hljs-variable">@Exchange</span>(name = <span class="hljs-string">&quot;itcast.direct&quot;</span>, type = ExchangeTypes.DIRECT),<br>        key = &#123;<span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>&#125;<br>))<br><span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">listenDirectQueue2</span>(String System.msg)&#123;<br>        <span class="hljs-selector-tag">out</span><span class="hljs-selector-class">.println</span>(<span class="hljs-string">&quot;消费者2接收到Direct消息：【&quot;</span>+msg+<span class="hljs-string">&quot;】 &quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>步骤2：在publisher服务发送消息到DirectExchange</p><p>在publisher服务的SpringAmqpTest类中添加测试方法：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">testDirectExchange</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// 队列名称</span><br>    <span class="hljs-title class_">String</span> exchangeName = <span class="hljs-string">&quot;itcast.direct&quot;</span>;<br>    <span class="hljs-comment">// 消息 </span><br>    <span class="hljs-title class_">String</span> message = <span class="hljs-string">&quot;红色警报！日本乱排核废水，导致海洋生物变异，惊现哥斯拉！&quot;</span>;<br>    <span class="hljs-comment">// 发送消息，参数依次为：交换机名称，RoutingKey，消息</span><br>    rabbitTemplate.<span class="hljs-title function_">convertAndSend</span>(exchangeName, <span class="hljs-string">&quot;red&quot;</span>, message);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="总结-15"><a href="#总结-15" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>描述下Direct交换机与Fanout交换机的差异？</p><ul><li>Fanout交换机将消息路由给每一个与之绑定的队列</li><li>Direct交换机根据RoutingKey判断路由给哪个队列</li><li>如果多个队列具有相同的RoutingKey，则与Fanout功能类似</li></ul><p>基于@RabbitListener注解声明队列和交换机有哪些常见注解？</p><ul><li>@Queue</li><li>@Exchange</li></ul><h3 id="发布订阅之-TopicExchange"><a href="#发布订阅之-TopicExchange" class="headerlink" title="发布订阅之-TopicExchange"></a><strong>发布订阅之-TopicExchange</strong></h3><h1 id="ElasticSearch"><a href="#ElasticSearch" class="headerlink" title="ElasticSearch"></a><strong>ElasticSearch</strong></h1><h1 id="RestClient"><a href="#RestClient" class="headerlink" title="RestClient"></a><strong>RestClient</strong></h1><h1 id="DSL查询语法"><a href="#DSL查询语法" class="headerlink" title="DSL查询语法"></a><strong>DSL查询语法</strong></h1><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringCloud</category>
      
    </categories>
    
    
    <tags>
      
      <tag>微服务框架与Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>微服务框架与Docker(一)</title>
    <link href="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/"/>
    <url>/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103093422400.png" alt="image-20221103093422400"></p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103093426678.png" alt="image-20221103093426678"></p><p>软件架构分类：单体式、微服务</p><p>微服务架构的相关概念：Provider和Consumer，PRC和Restful，分布式和集群。</p><p>国内最知名的微服务技术框架就是：</p><ul><li><p>Dubbo&#x2F;Duboox</p></li><li><ul><li><a href="http://dubbo.io/">http://dubbo.io/</a></li><li><a href="https://github.com/dangdangdotcom/dubbox">https://github.com/dangdangdotcom/dubbox</a></li></ul></li><li><p>SpringCloud</p></li><li><ul><li><a href="http://projects.spring.io/spring-cloud/">http://projects.spring.io/spring-cloud/</a></li></ul></li></ul><p>微服务架构特征：</p><ul><li>单一职责：微服务拆分粒度更小，每个服务都对应唯一的业务能力，做到单一职责，避免重复业务开发</li><li>面向服务：微服务对外暴露业务接口</li><li>自治：团队独立、技术独立、数据独立、部署独立</li><li>隔离性强：服务调用做好隔离、容错、降级、避免出现联机问题</li></ul><h1 id="微服务技术对比"><a href="#微服务技术对比" class="headerlink" title="微服务技术对比"></a><strong>微服务技术对比</strong></h1><table><thead><tr><th></th><th>Dubbo</th><th>SpringCloud</th><th>SpringCloudAlibaba</th></tr></thead><tbody><tr><td>注册中心</td><td>zookeeper、Redis</td><td>Eureka、Consul</td><td>Nacos、Eureka</td></tr><tr><td>服务远程调用</td><td>Dubbo协议</td><td>Feign(http协议)</td><td>Dubbo、Feign</td></tr><tr><td>配置中心</td><td>无</td><td>SpringCloudConfig</td><td>SpringCloudConfig、Nacos</td></tr><tr><td>服务网关</td><td>无</td><td>SpringCloudGateway、Zuul</td><td>SpringCloudGateway、Zuul</td></tr><tr><td>服务监控和保护</td><td>dubbo-admin，功能弱</td><td>Hystrix</td><td>Sentinel</td></tr></tbody></table><p><strong>所有可能会碰到四种微服务方式</strong>：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103093555150.png" alt="image-20221103093555150"></p><h1 id="微服务拆分及远程调用"><a href="#微服务拆分及远程调用" class="headerlink" title="微服务拆分及远程调用"></a><strong>微服务拆分及远程调用</strong></h1><p>服务拆分注意事项</p><p>1、不同微服务，不要重复开发相同业务</p><p>2、微服务数据独立，不要访问其他微服务的数据库</p><p>3、微服务可以将自己的业务暴露为接口，供其他微服务调用</p><p>微服务远程调用</p><p>步骤：（例订单查询）</p><p>①注册RestTemplate</p><p>在order-service的OrderApplication中注册RestTemplate</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@MapperScan</span>(<span class="hljs-string">&quot;cn.itcast.order.mapper&quot;</span>)<br><span class="hljs-meta">@SpringBootApplication</span> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderApplication</span> &#123;   <br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) &#123;        <br>         <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">OrderApplication</span>.<span class="hljs-property">class</span>,args);    <br>     &#125;     <br>     <span class="hljs-meta">@Bean</span>    <br>     <span class="hljs-keyword">public</span> <span class="hljs-title class_">RestTemplate</span> <span class="hljs-title function_">restTemplate</span>(<span class="hljs-params"></span>)&#123;<br>         returnnew <span class="hljs-title class_">RestTemplate</span>();<br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>②服务远程调用RestTemplate</p><p>修改oerder-service中的OrderService的queryOrderById方法：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">@Service<br>public <span class="hljs-keyword">class</span> OrderService &#123;<br>        @Autowired<br>        <span class="hljs-keyword">private</span> RestTemplate restTemplate;    <br>        <br>        public Order query<span class="hljs-constructor">OrderById(Long <span class="hljs-params">orderId</span>)</span> &#123;<br>                <span class="hljs-comment">// 1.查询订单        </span><br>                Orderorder = orderMapper.find<span class="hljs-constructor">ById(<span class="hljs-params">orderId</span>)</span>;        <br>                <span class="hljs-comment">// TODO2.查询用户         </span><br>                Stringurl = <span class="hljs-string">&quot;http://localhost:8081/user/&quot;</span> +  order.get<span class="hljs-constructor">UserId()</span>;        <br>                User user = restTemplate.get<span class="hljs-constructor">ForObject(<span class="hljs-params">url</span>,User.<span class="hljs-params">class</span>)</span>;        <br>                <span class="hljs-comment">// 3.封装user信息        </span><br>                order.set<span class="hljs-constructor">User(<span class="hljs-params">user</span>)</span>;        <br>                <span class="hljs-comment">// 4.返回        </span><br>                returnorder;    <br>                &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="提供者与消费者"><a href="#提供者与消费者" class="headerlink" title="提供者与消费者"></a><strong>提供者与消费者</strong></h2><ul><li>服务提供者：一次业务中，被其它微服务调用的服务。（提供接口给其它微服务）</li><li>服务消费者：一次业务中，调用其它微服务的服务。（调用其它微服务提供的接口）</li></ul><h1 id="Eureka注册中心"><a href="#Eureka注册中心" class="headerlink" title="Eureka注册中心"></a><strong>Eureka注册中心</strong></h1><p>硬编码模式的服务远程调用会出现一系列问题：</p><ul><li><p>服务消费者该如何获取服务提供者的地址信息？</p></li><li><ul><li>服务提供者启动时向eureka注册自己的信息</li><li>eureka保存这些信息</li><li>消费者根据服务名称向eureka拉取提供者信息</li></ul></li><li><p>如果有多个服务提供者，消费者该如何选择？</p></li><li><ul><li>服务消费者利用负载均衡算法，从服务列表中挑选一个</li></ul></li><li><p>消费者如何得知服务提供者的健康状态？</p></li><li><ul><li>服务提供者会每隔30秒向EurekaServer发送心跳请求，报告健康状态</li><li>eureka会更新记录服务列表信息，心跳不正常会被踢出</li><li>消费者就可以拉取到最新的信息</li></ul></li></ul><p>在Eureka架构中，微服务角色有两类：</p><ul><li><p>EurekaServer：服务端，注册中心</p></li><li><ul><li>记录服务信息</li><li>心跳监控</li></ul></li><li><p>EurekaClient：客户端</p></li><li><ul><li><p>Provider：服务提供者，例如案例中的user-service</p></li><li><ul><li>注册自己的信息到EurekaServer</li><li>每隔30秒向EurekaServer发送心跳</li></ul></li><li><p>consumer：服务消费者，例如案例中的order-service</p></li><li><ul><li>根据服务名称从EurekaServer拉取服务列表</li><li>基于服务列表做负载均衡，选中一个微服务后发起远程调用</li></ul></li></ul></li></ul><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103093709350.png" alt="image-20221103093709350"></p><h2 id="1、搭建EurekaServer"><a href="#1、搭建EurekaServer" class="headerlink" title="1、搭建EurekaServer"></a><strong>1、搭建EurekaServer</strong></h2><p>搭建EurekaServer服务步骤如下：</p><p>①创建项目，引入spring-cloud-starter-netflix-eureka-server的依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>②编写启动类，添加@EnableEurekaServer注解</p><p>③添加application.yml文件，编写下面的配置：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml">server:<br>  port: 10086 #服务端口<br>spring:<br>  application:<br>      name: eurekaserver #eureka的服务名称<br>eureka:<br>  client:<br>      service-url: #eureka的地址信息<br>            defaultZone:http://127.0.0.1:10086/eureka/<br></code></pre></td></tr></table></figure><h2 id="2、注册服务"><a href="#2、注册服务" class="headerlink" title="2、注册服务"></a><strong>2、注册服务</strong></h2><p>将服务注册到eureka</p><p>将user-service服务注册到EurekaServer步骤如下：</p><p>①在user-service项目引入spring-cloud-starter-netflix-eureka-client的依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>②在application.yml文件，编写下面的配置：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">spring:</span><br><span class="hljs-symbol">  application:</span><br><span class="hljs-symbol">      name:</span> userservice<br><span class="hljs-symbol">eureka:</span><br><span class="hljs-symbol">  client:</span><br>      service-url:<br><span class="hljs-symbol">            defaultZone:</span>http:<span class="hljs-comment">//127.0.0.1:10086/eureka/</span><br></code></pre></td></tr></table></figure><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103093813501.png" alt="image-20221103093813501"></p><h2 id="3、服务发现"><a href="#3、服务发现" class="headerlink" title="3、服务发现"></a><strong>3、服务发现</strong></h2><p>在一个服务中完成服务拉取，然后通过负载均衡挑选一个服务，实现远程调用。</p><p>服务拉取是基于服务名称获取服务列表，然后在对服务列表做负载均衡</p><p>①修改OrderService的代码，修改访问的url路径，用服务名代替ip、端口：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">Stringurl</span> = <span class="hljs-string">&quot;http://userservice/user/&quot;</span>+order.getUserId()<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p><strong>②</strong>在order-service项目的启动类OrderApplication中的RestTemplate添加<strong>负载均衡</strong>注解：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Bean</span><br><span class="hljs-variable">@LoadBalanced</span><br>public RestTemplate <span class="hljs-built_in">restTemplate</span>() &#123;<br>    <span class="hljs-selector-tag">returnnew</span> <span class="hljs-selector-tag">RestTemplate</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>1.搭建EurekaServer</p><ul><li>引入eureka-server依赖</li><li>添加@EnableEurekaServer注解</li><li>在application.yml中配置eureka地址</li></ul><p>2.服务注册</p><ul><li>引入eureka-client依赖</li><li>在application.yml中配置eureka地址</li></ul><p>3.服务发现</p><ul><li>引入eureka-client依赖</li><li>在application.yml中配置eureka地址</li><li>给RestTemplate添加@LoadBalanced注解</li><li>用服务提供者的服务名称远程调用</li></ul><h1 id="Ribbon负载均衡（Eureka中负载均衡的实现组件）"><a href="#Ribbon负载均衡（Eureka中负载均衡的实现组件）" class="headerlink" title="Ribbon负载均衡（Eureka中负载均衡的实现组件）"></a><strong>Ribbon负载均衡（Eureka中负载均衡的实现组件）</strong></h1><h2 id="负载均衡原理"><a href="#负载均衡原理" class="headerlink" title="负载均衡原理"></a><strong>负载均衡原理</strong></h2><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103093905461.png" alt="image-20221103093905461"></p><h2 id="负载均衡策略"><a href="#负载均衡策略" class="headerlink" title="负载均衡策略"></a><strong>负载均衡策略</strong></h2><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103093914932.png" alt="image-20221103093914932"></p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103093917780.png" alt="image-20221103093917780"></p><p>通过定义IRule实现可以修改负载均衡规则，有两种方式：</p><p>①代码方式：在order-service中的OrderApplication类中，定义一个新的IRule：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs csharp">@Bean<br><span class="hljs-function"><span class="hljs-keyword">public</span> IRule <span class="hljs-title">randomRule</span>()</span>&#123;<br>    <span class="hljs-function">returnnew <span class="hljs-title">RandomRule</span>()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>②配置文件方式：在order-service的application.yml文件中，添加新的配置也可以修改规则：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">userservice:</span><br><span class="hljs-symbol">  ribbon:</span><br><span class="hljs-symbol">      NFLoadBalancerRuleClassName:</span> com.netflix.loadbalancer.RandomRule<span class="hljs-meta">#负载均衡规则</span><br></code></pre></td></tr></table></figure><h2 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a><strong>懒加载</strong></h2><p>Ribbon默认是采用懒加载，即第一次访问时才会去创建LoadBalanceClient，请求时间会很长。</p><p>而饥饿加载则会在项目启动时创建，降低第一次访问的耗时，通过下面配置开启饥饿加载：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">ribbon:</span><br>  <span class="hljs-attr">eager-load:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># 开启饥饿加载     </span><br>      <span class="hljs-string">clients:userservice</span> <span class="hljs-comment"># 指定对userservice这个服务饥饿加载</span><br></code></pre></td></tr></table></figure><h1 id="Nacos注册中心"><a href="#Nacos注册中心" class="headerlink" title="Nacos注册中心"></a><strong>Nacos注册中心</strong></h1><h2 id="Nacos安装指南"><a href="#Nacos安装指南" class="headerlink" title="Nacos安装指南"></a><strong>Nacos安装指南</strong></h2><p>参考：<a href="https://www.bilibili.com/video/BV1LQ4y127n4?p=17&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a">https://www.bilibili.com/video/BV1LQ4y127n4?p=17&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a</a></p><h3 id="服务注册到Nacos"><a href="#服务注册到Nacos" class="headerlink" title="服务注册到Nacos"></a><strong>服务注册到Nacos</strong></h3><p>①在cloud-demo父工程中添加spring-cloud-alibaba的依赖管理：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>②注释掉order-service和user-service中原有的eureka依赖</p><p>③添加nacos的客户端依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- nacos客户端依赖包 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>④修改user-service&amp;order-service中的application.yml文件，注释eureka地址，添加nacos地址：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">spring：<br>    <span class="hljs-keyword">cloud：</span><br><span class="hljs-keyword"></span>        nacos：<br>            server-<span class="hljs-keyword">addr：localhost：8848 </span><span class="hljs-comment">#nacos服务地址</span><br></code></pre></td></tr></table></figure><p>⑤启动并测试</p><h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>1.Nacos服务搭建</p><p>​①下载安装包</p><p>​②解压</p><p>​③在bin目录下运行指令：startup.cmd -m standalone</p><p>2.Nacos服务注册或发现</p><p>​①引入nacos.discovery依赖</p><p>​②配置nacos地址spring.cloud.nacos.server-addr</p><h2 id="Nacos服分级存储模型"><a href="#Nacos服分级存储模型" class="headerlink" title="Nacos服分级存储模型"></a><strong>Nacos服分级存储模型</strong></h2><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094311954.png" alt="image-20221103094311954"></p><h3 id="服务跨集群调用问题"><a href="#服务跨集群调用问题" class="headerlink" title="服务跨集群调用问题"></a><strong>服务跨集群调用问题</strong></h3><p>服务调用尽可能选择本地集群的服务，跨集群调用延迟较高，本地集群不可访问时，再去访问其他集群</p><h3 id="服务集群属性"><a href="#服务集群属性" class="headerlink" title="服务集群属性"></a><strong>服务集群属性</strong></h3><p>①修改application.yml，添加如下内容</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">spring:</span><br><span class="hljs-symbol">    cloud:</span><br><span class="hljs-symbol">        nacos:</span><br>            server-add:localhost:<span class="hljs-number">8848</span> <span class="hljs-meta">#nacos 服务端地址</span><br><span class="hljs-symbol">            discovery:</span><br>                cluster-name:HZ <span class="hljs-meta"># 配置集群名称,也就是机房位置，例如:HZ，杭州</span><br></code></pre></td></tr></table></figure><h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>1.Nacos服务分级存储模型</p><p>​①一级是服务，例如userservice</p><p>​②二级是集群，例如杭州或上海</p><p>​③三级是实例，例如杭州机房的某台部署了userservice的服务器</p><p>2.如何设置实例的集群属性</p><p>​①修改application.yml文件，添加spring.cloud.nacos.discovery.cluster-name属性即可</p><h2 id="Nacos的负载均衡"><a href="#Nacos的负载均衡" class="headerlink" title="Nacos的负载均衡"></a><strong>Nacos的负载均衡</strong></h2><h3 id="根据集群负载均衡"><a href="#根据集群负载均衡" class="headerlink" title="根据集群负载均衡"></a><strong>根据集群负载均衡</strong></h3><p>①修改order-service中的application.yml，设置集群为HZ：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>      <span class="hljs-attr">nacos:</span><br>            <span class="hljs-string">server-addr:localhost:8848</span> <span class="hljs-comment"># nacos 服务端地址</span><br>            <span class="hljs-attr">discovery:</span><br>                    <span class="hljs-attr">cluster-name:</span> <span class="hljs-string">HZ</span> <span class="hljs-comment"># 配置集群名称，也就是机房位置</span><br></code></pre></td></tr></table></figure><p>②然后再order-service中设置负载均衡的IRule为NacosRule，这个规则有限会寻找与自己统计群的服务：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">userservice:<br>  ribbon:<br>     NFLoadBalancerRuleClassName:com<span class="hljs-selector-class">.alibaba</span><span class="hljs-selector-class">.cloud</span><span class="hljs-selector-class">.nacos</span><span class="hljs-selector-class">.ribbon</span><span class="hljs-selector-class">.NacosRule</span> #负载均衡规则<br></code></pre></td></tr></table></figure><h3 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>1.NacosRule负载均衡策略</p><p>​①优先选择同集群服务实例列表</p><p>​②本地集群找不到提供者，才去其它集群寻找，并且会报警告</p><p>​③确定了可用实例列表后，再采用随机负载均衡挑选实例</p><h3 id="根据权重负载均衡"><a href="#根据权重负载均衡" class="headerlink" title="根据权重负载均衡"></a><strong>根据权重负载均衡</strong></h3><p>实际部署中会出现这样的场景：</p><p>服务器设备性能有差异，部分实例所在机器性能较好，另一些较差，我们希望性能好的机器承担更多的用户请求</p><p>Nacos提供了权重配置来控制访问频率，权重越大则访问频率越高</p><p>①在Nacos控制台可以设置实例的权重值，首先选中实例后面的编辑按钮</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094656488.png" alt="image-20221103094656488"></p><p>②将权重设置为0.1，测试可以发现8081被访问到的频率大大降低</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094701023.png" alt="image-20221103094701023"></p><h3 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>1.实例的权重控制</p><p>①Nacos控制台可以设置实例的权重值，0~1之间</p><p>②同集群内的多个实例，权重越高被访问的频率越高</p><p>③权重设置为0则完全不会被访问</p><h2 id="环境隔离-namespace"><a href="#环境隔离-namespace" class="headerlink" title="环境隔离-namespace"></a><strong>环境隔离-namespace</strong></h2><p>Nacos中服务存储和数据存储的最外层都是一个名为namespace的东西，用来做最外层隔离</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094721255.png" alt="image-20221103094721255"></p><p>①在Nacos控制台可以创建namespace，用来隔离不同环境</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094726811.png" alt="image-20221103094726811"></p><p><strong>②</strong>然后填写一个新的命名空间信息：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094734583.png" alt="image-20221103094734583"></p><p>③保存后会在控制台看到这个命名空间的id</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094740214.png" alt="image-20221103094740214"></p><p>④修改order-service的application.yml，添加namespace：</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">spring:</span><br><span class="hljs-symbol">  datasource:</span><br><span class="hljs-symbol">      url:</span>jdbc:mysql:<span class="hljs-comment">//localhost:3306/heima?useSSL=false</span><br><span class="hljs-symbol">      username:</span>root<br><span class="hljs-symbol">      password:</span><span class="hljs-number">123</span><br>      driver-class-name:com.mysql.jdbc.Driver<br><span class="hljs-symbol">   cloud:</span><br><span class="hljs-symbol">       nacos:</span><br>             server-addr:localhost:<span class="hljs-number">8848</span><br><span class="hljs-symbol">             discovery:</span><br>                     cluster-name: SH <span class="hljs-meta"># 上海</span><br><span class="hljs-symbol">                     namespace:</span><span class="hljs-number">492</span>a7d5d<span class="hljs-number">-237</span>b<span class="hljs-number">-46</span>a1-a99a-fa8e98e4b0f9 <span class="hljs-meta"># 命名空间，填ID</span><br></code></pre></td></tr></table></figure><p>⑤重启order-service后，再来查看控制台：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094756679.png" alt="image-20221103094756679"></p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094758647.png" alt="image-20221103094758647"></p><p>⑥此时访问order-service，因为namespace不同，会导致找不到userservice，控制台会报错：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094806032.png" alt="image-20221103094806032"></p><h3 id="总结-5"><a href="#总结-5" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>1.Nacos环境隔离</p><p>​①每个namespace都有唯一id</p><p>​②服务设置namespace时要写id而不是名称</p><p>​③不同namespace下的服务互相不可见</p><h2 id="Nacos注册中心与Eureka注册成中心的对比"><a href="#Nacos注册中心与Eureka注册成中心的对比" class="headerlink" title="Nacos注册中心与Eureka注册成中心的对比"></a><strong>Nacos注册中心与Eureka注册成中心的对比</strong></h2><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103094857086.png" alt="image-20221103094857086"></p><h3 id="临时实力和非临时实力"><a href="#临时实力和非临时实力" class="headerlink" title="临时实力和非临时实力"></a><strong>临时实力和非临时实力</strong></h3><p>服务注册到Nacos时，可以选择注册为临时或非临时实例，通过下面的配置来设置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>      <span class="hljs-attr">nacos:</span><br>            <span class="hljs-attr">discovery:</span><br>                    <span class="hljs-attr">ephemeral:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># 设置为非临时实例</span><br></code></pre></td></tr></table></figure><p>临时实例宕机时，会从nacos的服务列表中提出，而非临时实例则不会</p><h3 id="总结-6"><a href="#总结-6" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>1.Nacos与eureka的共同点</p><p>​①都支持服务注册和服务拉取</p><p>​②都支持服务提供者心跳方式做健康检测</p><p>2.Nacos与Eureka的区别</p><p>​①Nacos支持服务端主动检测提供者状态：临时实例采用心跳模式，非临时实例采用主动检测模式</p><p>​②临时实例心跳不正常会被剔除，非临时实例则不会被剔除</p><p>​③Nacos支持服务列表变更的消息推送模式，服务列表更新更及时</p><p>​④Nacos集群默认采用AP方式，当集群中存在非临时实例时，采用CP模式；Eureka采用AP方式</p><h1 id="Nacos配置管理"><a href="#Nacos配置管理" class="headerlink" title="Nacos配置管理"></a><strong>Nacos配置管理</strong></h1><h2 id="统一配置管理"><a href="#统一配置管理" class="headerlink" title="统一配置管理"></a><strong>统一配置管理</strong></h2><p>①在Nacos中添加配置信息：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095007974.png" alt="image-20221103095007974"></p><p>②在弹出表单中填写配置信息：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095013228.png" alt="image-20221103095013228"></p><p>配置获取的步骤如下：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095020264.png" alt="image-20221103095020264"></p><p>①引入Nacos的配置管理客户端依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--nacos配置管理依赖--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>②在userservice中的resource目录添加一个bootstrap.yml文件，这个文件是引导文件，优先级高于application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">userservice</span> <span class="hljs-comment"># 服务名称  </span><br>  <span class="hljs-attr">profiles:</span>    <br>      <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span> <span class="hljs-comment">#开发环境，这里是dev   </span><br>  <span class="hljs-attr">cloud:</span><br>      <span class="hljs-attr">nacos:</span><br>         <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span> <span class="hljs-comment"># Nacos地址      </span><br>         <span class="hljs-attr">config:</span><br>                <span class="hljs-string">file-extension:yaml</span> <span class="hljs-comment"># 文件后缀名</span><br></code></pre></td></tr></table></figure><h3 id="总结-7"><a href="#总结-7" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>将配置交给Nacos管理的步骤</p><p>​①在Nacos中添加配置文件</p><p>​②在微服务中引入nacos的config依赖</p><p>​③在微服务中添加bootstrap.yml，配置nacos地址、当前环境、服务名称、文件后缀名。这些决定了程序启动时去nacos读取哪个文件</p><h2 id="配置热更新"><a href="#配置热更新" class="headerlink" title="配置热更新"></a><strong>配置热更新</strong></h2><p>Nacos中的配置文件变更后，微服务无需重启就可以感知。不过需要通过下面两种配置实现：</p><p>方式一：在@Value注入的变量所在类上添加注解@RefreshScope</p><p>​    <img src="data:image/png;base64,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" alt="0"></p><p>方式二：使用@ConfigurationProperties注解</p><p>​    <img src="data:image/png;base64,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" alt="0"></p><h3 id="总结-8"><a href="#总结-8" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>Nacos配置更改后，微服务可以实现热更新，方式：</p><p>​①通过@Value注解注入，结合@RefreshScope来刷新</p><p>​②通过@ConfigurationProperties注入，自动刷新</p><p>注意事项：</p><ul><li>不是所有的配置都适合放到配置中心，维护起来比较麻烦</li><li>建议将一些关键参数，需要运行时调整的参数放到nacos配置中心，一般都是自定义配置</li></ul><h2 id="多环境配置共享"><a href="#多环境配置共享" class="headerlink" title="多环境配置共享"></a><strong>多环境配置共享</strong></h2><p>微服务启动时会从nacos读取多个配置文件：</p><p>[spring.application.name]-[spring.profiles.active].yaml，例如：userservice-dev.yaml</p><p>[spring.application.name].yaml，例如：userservice.yaml</p><p>无论profile如何变化，[spring.application.name].yaml这个文件一定会加载，因此多环境共享配置可以写入这个文件</p><p>多种配置的优先级：</p><p>​    <img src="data:image/png;base64,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" alt="0"></p><h3 id="总结-9"><a href="#总结-9" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>微服务会从nacos读取的配置文件：</p><p>①[服务名]-[spring.profile.active].yaml，环境配置</p><p>②[服务名].yaml，默认配置，多环境共享</p><p>优先级：</p><p>①[服务名]-[环境].yaml &gt;[服务名].yaml &gt; 本地配置</p><h2 id="多服务共享配置"><a href="#多服务共享配置" class="headerlink" title="多服务共享配置"></a><strong>多服务共享配置</strong></h2><p>不同微服务之间可以共享配置文件，通过下面的两种方式来指定：</p><p>方式一：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">userservice</span> <span class="hljs-comment">#服务名称</span><br>  <span class="hljs-attr">profiles:</span><br>      <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span> <span class="hljs-comment"># 环境，  </span><br>  <span class="hljs-attr">cloud:</span><br>      <span class="hljs-attr">nacos:</span><br>            <span class="hljs-string">server-addr:localhost:8848</span> <span class="hljs-comment"># Nacos地址      </span><br>            <span class="hljs-attr">config:</span><br>                 <span class="hljs-string">file-extension:yaml</span> <span class="hljs-comment"># 文件后缀名        </span><br>                 <span class="hljs-attr">shared-configs:</span> <span class="hljs-comment">#多微服务间共享的配置列表       </span><br>                    <span class="hljs-bullet">-</span> <span class="hljs-string">dataId:common.yaml</span> <span class="hljs-comment"># 要共享的配置文件id</span><br></code></pre></td></tr></table></figure><p>方式二：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">userservice</span> <span class="hljs-comment">#服务名称</span><br>  <span class="hljs-attr">profiles:</span><br>      <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span> <span class="hljs-comment"># 环境，  </span><br>  <span class="hljs-attr">cloud:</span><br>      <span class="hljs-attr">nacos:</span><br>            <span class="hljs-string">server-addr:localhost:8848</span> <span class="hljs-comment"># Nacos地址      </span><br>            <span class="hljs-attr">config:</span><br>                 <span class="hljs-string">file-extension:yaml</span> <span class="hljs-comment"># 文件后缀名        </span><br>                 <span class="hljs-attr">shared-configs:</span> <span class="hljs-comment">#多微服务间共享的配置列表       </span><br>                    <span class="hljs-bullet">-</span> <span class="hljs-string">dataId:extend.yaml</span> <span class="hljs-comment"># 要共享的配置文件id</span><br></code></pre></td></tr></table></figure><p>多种配置的优先级</p><p>​    <img src="data:image/png;base64,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" alt="0"></p><h3 id="总结-10"><a href="#总结-10" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>微服务默认读取的配置文件：</p><p>​①[服务名]-[spring.profile.active].yaml，默认配置</p><p>​②[服务名].yaml，多环境共享</p><p>不同微服务共享的配置文件：</p><p>​①通过shared-configs指定</p><p>​②通过extension-configs指定</p><p>优先级：</p><p>​①环境配置 &gt;服务名.yaml &gt; extension-config&gt; extension-configs &gt; shared-configs &gt; 本地配置</p><h2 id="搭建Nacos集群"><a href="#搭建Nacos集群" class="headerlink" title="搭建Nacos集群"></a><strong>搭建Nacos集群</strong></h2><p><a href="https://www.bilibili.com/video/BV1LQ4y127n4?p=29&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a">https://www.bilibili.com/video/BV1LQ4y127n4?p=29&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a</a></p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095532214.png" alt="image-20221103095532214"></p><h3 id="总结-11"><a href="#总结-11" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>集群搭建步骤：</p><p>​①搭建MySQL集群并初始化数据库表</p><p>​②下载解压nacos</p><p>​③修改集群配置（节点信息）、数据库配置</p><p>​④分别启动多个nacos节点</p><p>​⑤nginx反向代理</p><h1 id="Feign远程调用"><a href="#Feign远程调用" class="headerlink" title="Feign远程调用"></a><strong>Feign远程调用</strong></h1><h2 id="Feign替代RestTemplate"><a href="#Feign替代RestTemplate" class="headerlink" title="Feign替代RestTemplate"></a><strong>Feign替代RestTemplate</strong></h2><p>RestTemplate方式调用存在的问题</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Stringurl = &quot;http://userservice/user/&quot;+ <span class="hljs-keyword">order</span>.getUserId();<br><span class="hljs-keyword">User</span> <span class="hljs-keyword">user</span> = restTemplate.getForObject(url, <span class="hljs-keyword">User</span>.<span class="hljs-keyword">class</span>);<br></code></pre></td></tr></table></figure><p>存在下面的问题：</p><ul><li>代码可读性差，编程体验不统一</li><li>参数复杂URL难以维护</li></ul><p>Feign是一个声明式的http客户端，官方地址：<a href="https://github.com/OpenFeign/feign">https://github.com/OpenFeign/feign</a></p><p>其作用就是帮助我们优雅的实现http请求的发送，解决上面提到的问题。</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095706215.png" alt="image-20221103095706215"></p><p>使用Feign的步骤如下：</p><p>①引入依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>②在order-service的启动类添加注解开启Feign的功能：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095720971.png" alt="image-20221103095720971"></p><p>③编写Feign客户端：</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@FeignClient</span>(<span class="hljs-string">&quot;userservice&quot;</span>)<br>public interface UserClient&#123;<br>    <br>    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">&quot;/user/&#123;id&#125;&quot;</span>)     <br>    User <span class="hljs-built_in">findById</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">&quot;id&quot;</span>) Long id);<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>主要是基于SpringMVC的注解来声明远程调用的信息，比如：</p><ul><li>服务名称：userservice</li><li>请求方式：GET</li><li>请求路径：&#x2F;user&#x2F;{id}</li><li>请求参数：Long id</li><li>返回值类型：User</li></ul><p>④用Feign客户端代替RestTemplate</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095736026.png" alt="image-20221103095736026"></p><h3 id="总结-12"><a href="#总结-12" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>Feign的使用步骤</p><p>①引入依赖</p><p>②添加@EnableFeignClients注解</p><p>③编写FeignClient接口</p><p>④使用FeignClient中定义的方法代替RestTemplate</p><h2 id="Feign的自定义配置"><a href="#Feign的自定义配置" class="headerlink" title="Feign的自定义配置"></a><strong>Feign的自定义配置</strong></h2><p>Feign运行自定义配置来覆盖默认配置，可以修改的配置如下：</p><table><thead><tr><th>类型</th><th>作用</th><th>说明</th></tr></thead><tbody><tr><td>feign.Logger.Level</td><td>修改日志级别</td><td>包含四种不同的级别：NONE,BASIC,HEADERS,FULL</td></tr><tr><td>feign.codec.Decoder</td><td>响应结果的解析器</td><td>http远程调用的结果做解析，例如解析json字符串为java对象</td></tr><tr><td>feign.codec.Encoder</td><td>请求参数编码</td><td>将请求参数编码，便于通过http请求发送</td></tr><tr><td>fegn.Contract</td><td>支持的注解格式</td><td>默认是SpringMVC的注解</td></tr><tr><td>feign.Retryer</td><td>失败重试机制</td><td>请求失败的重试机制，默认是没有，不过会使用Ribbon的重试</td></tr></tbody></table><p>配置Feign日志有两种方式：</p><p>方式一：配置文件方式</p><p>①全局生效</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095820759.png" alt="image-20221103095820759"></p><p>②局部生效</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095825937.png" alt="image-20221103095825937"></p><p>方式二：java代码方式，需要先声明一个Bean：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095846007.png" alt="image-20221103095846007"></p><p>①而后如果是全局配置，则把它放到@EnableFeignClients这个注解中：（加到启动类中）</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095851150.png" alt="image-20221103095851150"></p><p>②如果是局部配置，则把它放到@FeignClient这个注解中：（加到具体的FeignClient注解中）</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103095901385.png" alt="image-20221103095901385"></p><h3 id="总结-13"><a href="#总结-13" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>Feign的日志配置:</p><p>1.方式一是配置文件，feign.client.config.xxx.loggerLevel</p><p>​①如果xxx是default则代表全局</p><p>​②如果xxx是服务名称，例如userservice则代表某服务</p><p>2.方式二是java代码配置Logger.Level这个Bean</p><p>​①如果在@EnableFeignClients注解声明则代表全局</p><p>​②如果在@FeignClient注解中声明则代表某服务</p><h2 id="Feign的性能优化"><a href="#Feign的性能优化" class="headerlink" title="Feign的性能优化"></a><strong>Feign的性能优化</strong></h2><p>Feign底层的客户端实现：</p><ul><li>URLConnection：默认实现，不支持连接池</li><li>Apache HttpClient ：支持连接池</li><li>OKHttp：支持连接池</li></ul><p>因此优化Feign的性能主要包括：</p><p>①使用连接池代替默认的URLConnection</p><p>②日志级别，最好用basic或none</p><h3 id="Feign的性能优化-连接池配置"><a href="#Feign的性能优化-连接池配置" class="headerlink" title="Feign的性能优化-连接池配置"></a><strong>Feign的性能优化-连接池配置</strong></h3><p>引入依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--httpClient的依赖 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>feign-httpclient<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>配置连接池：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">feign:</span><br>  <span class="hljs-attr">client:</span><br>      <span class="hljs-attr">config:</span><br>          <span class="hljs-attr">default:</span> <span class="hljs-comment">#default全局的配置</span><br>               <span class="hljs-string">loggerLevel:BASIC</span> <span class="hljs-comment"># 日志级别，BASIC就是基本的请求和响应信息   </span><br>  <span class="hljs-attr">httpclient:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#开启feign对HttpClient的支持    </span><br>    <span class="hljs-attr">max-connections:</span> <span class="hljs-number">200</span> <span class="hljs-comment">#最大的连接数    </span><br>    <span class="hljs-attr">max-connections-per-route:</span> <span class="hljs-number">50</span> <span class="hljs-comment">#每个路径的最大连接数</span><br></code></pre></td></tr></table></figure><h3 id="总结-14"><a href="#总结-14" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>Feign的优化：</p><p>1.日志级别尽量用basic</p><p>2.使用HttpClient或OKHttp代替URLConnection</p><p>​①引入feign-httpClient依赖</p><p>​②配置文件开启httpClient功能，设置连接池参数</p><h2 id="Feign的最佳实践"><a href="#Feign的最佳实践" class="headerlink" title="Feign的最佳实践"></a><strong>Feign的最佳实践</strong></h2><p>方法一（继承）：给消费者的FeignClient和提供者的controller定义统一的父接口作为标准。</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100023985.png" alt="image-20221103100023985"></p><p>方法二（抽取）：将FeignClient抽取为独立模块，并且把接口有关的POJO、默认的Feign配置都放到这个模块中，提供给所有消费者使用</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100031246.png" alt="image-20221103100031246"></p><p><strong>实现最佳实践方式二的步骤如下：</strong></p><p>1.首先创建一个module，命名为feign-api，然后引入feign的starter依赖</p><p>2.将order-service中编写的UserClient、User、DefaultFeignConfiguration都复制到feign-api项目中</p><p>3.在order-service中引入feign-api的依赖</p><p>4.修改order-service中的所有与上述三个组件有关的import部分，改成导入feign-api中的包</p><p>5.重启测试</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100046386.png" alt="image-20221103100046386"></p><h3 id="总结-15"><a href="#总结-15" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>Feign的最佳实践：</p><p>①让controller和FeignClient继承同一接口</p><p>②将FeignClient、POJO、Feign的默认配置都定义到一个项目中，供所有消费者使用</p><p>不同包的FeignClient的导入有两种方式：</p><p>①在@EnableFeignClients注解中添加basePackages，指定FeignClient所在的包</p><p>②在@EnableFeignClients注解中添加clients，指定具体FeignClient的字节码</p><h1 id="Gateway服务网关"><a href="#Gateway服务网关" class="headerlink" title="Gateway服务网关"></a><strong>Gateway服务网关</strong></h1><h2 id="为什么需要网关"><a href="#为什么需要网关" class="headerlink" title="为什么需要网关"></a><strong>为什么需要网关</strong></h2><p>网关功能:</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100117614.png" alt="image-20221103100117614"></p><p>在SpringCloud中网关的实现包括两种：</p><ul><li>gateway</li><li>zuul</li></ul><p>Zuul是基于Servlet的是实现，属于阻塞式编程。二SpringCloudGateway则是基于Spring5中提供的WebFlux，属于响应式编程的实现，具备更好的性能。</p><h2 id="gateway快速入门"><a href="#gateway快速入门" class="headerlink" title="gateway快速入门"></a><strong>gateway快速入门</strong></h2><p>搭建网关服务的步骤：</p><p>1.创建新的module，引入SpringCloudGateway的依赖和Nacos的服务发现依赖：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--网关依赖--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--nacos服务发现依赖--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2.编写路由配置及nacos地址</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">server:</span><br><span class="hljs-symbol">  port:</span><span class="hljs-number">10010</span> <span class="hljs-meta">#网关端口</span><br><span class="hljs-symbol">spring:</span><br><span class="hljs-symbol">  application:</span><br><span class="hljs-symbol">    name:</span>gateway <span class="hljs-meta"># 服务名称</span><br><span class="hljs-symbol">  cloud:</span><br><span class="hljs-symbol">    nacos:</span><br>      server-addr:localhost:<span class="hljs-number">8848</span> <span class="hljs-meta"># nacos地址</span><br><span class="hljs-symbol">    gateway:</span><br><span class="hljs-symbol">      routes:</span><span class="hljs-meta">#网关路由配置</span><br>        - id:user-service <span class="hljs-meta"># 路由id，自定义，只要唯一即可</span><br>          <span class="hljs-meta"># uri: http:<span class="hljs-comment">//127.0.0.1:8081 #路由的目标地址 http就是固定地址</span></span><br><span class="hljs-symbol">          uri:</span>lb:<span class="hljs-comment">//userservice # 路由的目标地址 lb(loadBalance)就是负载均衡，后面跟服务名称</span><br><span class="hljs-symbol">          predicates:</span><span class="hljs-meta">#路由断言，也就是判断请求是否符合路由规则的条件</span><br>            - P<span class="hljs-attr">ath</span><span class="hljs-operator">=</span><span class="hljs-keyword">/user/</span>** <span class="hljs-meta">#这个是按照路径匹配，只要以/user/开头就符合要求</span><br></code></pre></td></tr></table></figure><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100154232.png" alt="image-20221103100154232"></p><h3 id="总结-16"><a href="#总结-16" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>网关搭建步骤：</p><p>1.创建项目，引入nacos服务发现和gateway依赖</p><p>2.配置application.yml，包括服务基本信息、nacos地址、路由</p><p>路由配置包括：</p><p>1.路由id：路由的唯一标示</p><p>2.路由目标（uri）：路由的目标地址，http代表固定地址，lb代表根据服务名负载均衡</p><p>3.路由断言（predicates）：判断路由的规则，</p><p>4.路由过滤器（filters）：对请求或响应做处理</p><h2 id="路由断言工厂（Route-Predicate-Factory）"><a href="#路由断言工厂（Route-Predicate-Factory）" class="headerlink" title="路由断言工厂（Route Predicate Factory）"></a><strong>路由断言工厂（Route Predicate Factory）</strong></h2><ul><li>我们在配置文件中写的断言规则只是字符串，这些字符串会被Predicate Factory读取并处理，转变为路由判断的条件</li><li>例如Path&#x3D;&#x2F;user&#x2F;**是按照路径匹配，这个规则是由org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory类来处理的</li><li>像这样的断言工厂在SpringCloudGateway还有十几个</li></ul><p>Spring提供了十一种基本的Predicate工厂：</p><p><a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-after-route-predicate-factory">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-after-route-predicate-factory</a></p><table><thead><tr><th>名称</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>After</td><td>是某个时间点后的请求</td><td>-  After&#x3D;2037-01-20T17:42:47.789-07:00[America&#x2F;Denver]</td></tr><tr><td>Before</td><td>是某个时间点之前的请求</td><td>-  Before&#x3D;2031-04-13T15:14:47.433+08:00[Asia&#x2F;Shanghai]</td></tr><tr><td>Between</td><td>是某两个时间点之前的请求</td><td>-  Between&#x3D;2037-01-20T17:42:47.789-07:00[America&#x2F;Denver],  2037-01-21T17:42:47.789-07:00[America&#x2F;Denver]</td></tr><tr><td>Cookie</td><td>请求必须包含某些cookie</td><td>- Cookie&#x3D;chocolate, ch.p</td></tr><tr><td>Header</td><td>请求必须包含某些header</td><td>- Header&#x3D;X-Request-Id, \d+</td></tr><tr><td>Host</td><td>请求必须是访问某个host（域名）</td><td>-  Host&#x3D;<strong>.somehost.org,</strong>.anotherhost.org</td></tr><tr><td>Method</td><td>请求方式必须是指定方式</td><td>- Method&#x3D;GET,POST</td></tr><tr><td>Path</td><td>请求路径必须符合指定规则</td><td>- Path&#x3D;&#x2F;red&#x2F;{segment},&#x2F;blue&#x2F;**</td></tr><tr><td>Query</td><td>请求参数必须包含指定参数</td><td>- Query&#x3D;name, Jack或者-  Query&#x3D;name</td></tr><tr><td>RemoteAddr</td><td>请求者的ip必须是指定范围</td><td>- RemoteAddr&#x3D;192.168.1.1&#x2F;24</td></tr><tr><td>Weight</td><td>权重处理</td><td></td></tr></tbody></table><h3 id="总结-17"><a href="#总结-17" class="headerlink" title="总结"></a><strong>总结</strong></h3><ul><li>lPredicateFactory的作用是什么？</li></ul><p>读取用户定义的断言条件，对请求做出判断</p><ul><li>lPath&#x3D;&#x2F;user&#x2F;**是什么含义？</li></ul><p>路径是以&#x2F;user开头的就认为是符合的</p><h2 id="过滤器工厂（GatewayFilter）"><a href="#过滤器工厂（GatewayFilter）" class="headerlink" title="过滤器工厂（GatewayFilter）"></a><strong>过滤器工厂（GatewayFilter）</strong></h2><p>GatewayFilter是网关中提供的一种过滤器，可以队进入网关的请求和微服务返回的相应做处理：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100301657.png" alt="image-20221103100301657"></p><p>Spring提供了31种不同的路由过滤器工厂：</p><p><a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories</a></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>AddRequestHeader</td><td>给当前请求添加一个请求头</td></tr><tr><td>RemoveRequestHeader</td><td>移除请求中的一个请求头</td></tr><tr><td>AddResponseHeader</td><td>给响应结果中添加一个响应头</td></tr><tr><td>RemoveResponseHeader</td><td>从响应结果中移除有一个响应头</td></tr><tr><td>RequestRateLimiter</td><td>限制请求的流量</td></tr><tr><td>…</td><td></td></tr></tbody></table><p>给所有进入userservice的请求添加一个请求头：Truth&#x3D;itcast is freaking awesome！</p><p>实现方式：在gateway中修改application.yml文件，给userservice的路由添加过滤器</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100317754.png" alt="image-20221103100317754"></p><p>默认过滤器</p><p>如果要对所有的路由都生效，则可以将过滤器工厂写道default下：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100326699.png" alt="image-20221103100326699"></p><h3 id="总结-18"><a href="#总结-18" class="headerlink" title="总结"></a><strong>总结</strong></h3><ul><li>过滤器的作用是什么？</li></ul><p>①对路由的请求或响应做加工处理，比如添加请求头</p><p>②配置在路由下的过滤器只对当前路由的请求生效</p><ul><li>defaultFilters的作用是什么？</li></ul><p>①对所有路由都生效的过滤器</p><h2 id="全局过滤器（GlobalFilter）"><a href="#全局过滤器（GlobalFilter）" class="headerlink" title="全局过滤器（GlobalFilter）"></a><strong>全局过滤器（GlobalFilter）</strong></h2><p>全局过滤器的作用也是处理一切进入网关的请求和微服务响应，与GatewayFilter的作用一样。</p><p>区别在于GatewayFilter通过配置定义，处理逻辑是固定的。而GlobalFilter的逻辑需要自己写代码实现。</p><p>定义方式是实现GlobalFilter接口。</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">public</span><span class="hljs-keyword">interface</span> <span class="hljs-title class_">GlobalFilter</span>&#123;<br>   <span class="hljs-comment">/**  </span><br><span class="hljs-comment">    *  处理当前请求，有必要的话通过&#123;<span class="hljs-doctag">@link</span> GatewayFilterChain&#125;将请求交给下一个过滤器处理</span><br><span class="hljs-comment">    *</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@paramexchange</span> 请求上下文，里面可以获取Request、Response等信息    </span><br><span class="hljs-comment">    * <span class="hljs-doctag">@paramchain</span> 用来把请求委托给下一个过滤器    </span><br><span class="hljs-comment">    * <span class="hljs-doctag">@return</span>&#123;<span class="hljs-doctag">@code</span> Mono&lt;Void&gt;&#125; 返回标示当前过滤器业务结束    </span><br><span class="hljs-comment">    */</span>   <br>   Mono&lt;<span class="hljs-built_in">Void</span>&gt;filter(ServerWebExchange exchange, GatewayFilterChain chain);<br>&#125;<br></code></pre></td></tr></table></figure><p>案例：定义全局过滤器，拦截并判断用户身份</p><p>需求：定义全局过滤器，拦截请求，判断请求的参数是否满足下面条件：</p><ul><li>参数中是否有authorization，</li><li>authorization参数值是否为admin</li></ul><p>如果同时满足则放行，否则拦截</p><p>实现案例：</p><p>自定义类，实现GlobalFilter接口，添加@Order注解：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-meta">@Order</span>(-<span class="hljs-number">1</span>)<br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthorizeFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GlobalFilter</span>&#123;<br>    <span class="hljs-meta">@Override</span>    <br>    publicMono&lt;<span class="hljs-title class_">Void</span>&gt; <span class="hljs-title function_">filter</span>(<span class="hljs-params">ServerWebExchangeexchange, GatewayFilterChain chain</span>) &#123;<br>            <span class="hljs-comment">// 1.获取请求参数        </span><br>            <span class="hljs-title class_">MultiValueMap</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt;params = exchange.<span class="hljs-title function_">getRequest</span>().<span class="hljs-title function_">getQueryParams</span>();        <br>            <span class="hljs-comment">// 2.获取authorization参数        </span><br>            <span class="hljs-title class_">String</span> auth = params.<span class="hljs-title function_">getFirst</span>(<span class="hljs-string">&quot;authorization&quot;</span>);        <br>            <span class="hljs-comment">// 3.校验        </span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;admin&quot;</span>.<span class="hljs-title function_">equals</span>(auth)) &#123;<br>                  <span class="hljs-comment">// 放行            </span><br>                  <span class="hljs-keyword">return</span> chain.<span class="hljs-title function_">filter</span>(exchange);        <br>            &#125;        <br>            <span class="hljs-comment">// 4.拦截        </span><br>                  <span class="hljs-comment">// 4.1.禁止访问        </span><br>                  exchange.<span class="hljs-title function_">getResponse</span>().<span class="hljs-title function_">setStatusCode</span>(<span class="hljs-title class_">HttpStatus</span>.<span class="hljs-property">FORBIDDEN</span>);        <br>                  <span class="hljs-comment">// 4.2.结束处理        </span><br>                  <span class="hljs-keyword">return</span> exchange.<span class="hljs-title function_">getResponse</span>().<span class="hljs-title function_">setComplete</span>();    <br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a><strong>总结：</strong></h3><ul><li>全局过滤器的作用是什么？</li></ul><p>对所有路由都生效的过滤器，并且可以自定义处理逻辑</p><ul><li>实现全局过滤器的步骤？</li></ul><p>①实现GlobalFilter接口</p><p>②添加@Order注解或实现Ordered接口</p><p>③编写处理逻辑</p><h2 id="过滤器执行顺序"><a href="#过滤器执行顺序" class="headerlink" title="过滤器执行顺序"></a><strong>过滤器执行顺序</strong></h2><p>请求进入网关会碰到三类过滤器：当前路由的过滤器、DefaultFilter、GlobalFilter</p><p>请求路由后，会将当前路由过滤器和DefaultFilter、GlobalFilter，合并到一个过滤器链（集合）中，排序后依次执行每个过滤器</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A1%86%E6%9E%B6%E4%B8%8EDocker-%E4%B8%80/image-20221103100443308.png" alt="image-20221103100443308"></p><ul><li>每一个过滤器都必须指定一个int类型的order值，<strong>order值越小，优先级越高，执行顺序越靠前。</strong></li><li>GlobalFilter通过实现Ordered接口，或者添加@Order注解来指定order值，由我们自己指定</li><li>路由过滤器和defaultFilter的order由Spring指定，默认是按照声明顺序从1递增。</li><li>当过滤器的order值一样时，会按照 defaultFilter &gt; 路由过滤器 &gt; GlobalFilter的顺序执行。</li></ul><p>可以参考下面几个类的源码来查看：</p><p>**org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator#getFilters()**方法是先加载defaultFilters，然后再加载某个route的filters，然后合并。</p><p><strong>org.springframework.cloud.gateway.handler.FilteringWebHandler#handle</strong>()方法会加载全局过滤器，与前面的过滤器合并后根据order排序，组织过滤器链</p><h3 id="总结-19"><a href="#总结-19" class="headerlink" title="总结"></a><strong>总结</strong></h3><ul><li>路由过滤器、defaultFilter、全局过滤器的执行顺序？</li></ul><p>①order值越小，优先级越高</p><p>②当order值一样时，顺序是defaultFilter最先，然后是局部的路由过滤器，最后是全局过滤器</p><h2 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a><strong>跨域问题</strong></h2><p>跨域：域名不一致就是跨域，主要包括：</p><ul><li><p>域名不同：<a href="http://www.taobao.com/">www.taobao.com</a> 和 <a href="http://www.taobao.org/">www.taobao.org</a> 和 <a href="http://www.jd.com/">www.jd.com</a> 和 miaosha.jd.com</p></li><li><p>域名相同，端口不同：localhost:8080和localhost8081</p></li></ul><p>跨域问题：浏览器禁止请求的发起者与服务端发生跨域ajax请求，请求被浏览器拦截的问题</p><p>解决方案：CORS</p><p>网关处理跨域采用的同样是CORS方案，并且只需要简单配置即可实现：</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">spring:<br>  cloud:<br>      gateway:      <br>      # 。。。  <br>              globalcors: # 全局的跨域处理<br>                  add-to-simple-url-handler-mapping: true # 解决options请求被拦截问题<br>                  corsConfigurations:          <br>         &#x27;<span class="hljs-string">[/**]</span>&#x27;:            <br>             allowedOrigins: # 允许哪些网站的跨域请求<br>                        - <span class="hljs-string">&quot;http://localhost:8090&quot;</span>              <br>                        - <span class="hljs-string">&quot;http://www.leyou.com&quot;</span>            <br>             allowedMethods: # 允许的跨域ajax的请求方式<br>                       - <span class="hljs-string">&quot;<span class="hljs-keyword">GET</span>&quot;</span>              <br>                       - <span class="hljs-string">&quot;<span class="hljs-keyword">POST</span>&quot;</span>              <br>                       - <span class="hljs-string">&quot;<span class="hljs-keyword">DELETE</span>&quot;</span>              <br>                       - <span class="hljs-string">&quot;<span class="hljs-keyword">PUT</span>&quot;</span>              <br>                       - <span class="hljs-string">&quot;<span class="hljs-keyword">OPTIONS</span>&quot;</span>            <br>             allowedHeaders: <span class="hljs-string">&quot;*&quot;</span> # 允许在请求中携带的头信息<br>                     allowCredentials:true # 是否允许携带cookie<br>             maxAge:<span class="hljs-number">360000</span> # 这次跨域检测的有效期<br></code></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringCloud</category>
      
    </categories>
    
    
    <tags>
      
      <tag>微服务框架与Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>微服务项目打包</title>
    <link href="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/"/>
    <url>/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<h1 id="微服务项目打包"><a href="#微服务项目打包" class="headerlink" title="微服务项目打包"></a>微服务项目打包</h1><h2 id="1、项目结构说明"><a href="#1、项目结构说明" class="headerlink" title="1、项目结构说明"></a>1、项目结构说明</h2><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/image-20221029104254419.png" alt="image-20221029104254419"></p><p>其中TakeAwayBack为父项目，其它项目为子项目，Common为其它项目所依赖的公共项目。</p><h2 id="2、打包步骤"><a href="#2、打包步骤" class="headerlink" title="2、打包步骤"></a>2、打包步骤</h2><h3 id="2-1、配置父项目的pom文件"><a href="#2-1、配置父项目的pom文件" class="headerlink" title="2.1、配置父项目的pom文件"></a>2.1、配置父项目的pom文件</h3><p>修改打包为pom（一般父级的打包方式为pom，所以只要有子项目的项目都需要配置packaging节点为pom。比如：如果MerchantsConsumer下有子项目那么该项目pon文件中的packaging节点也要配置为pom）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br></code></pre></td></tr></table></figure><p>指定该父模块下面有哪些子模块</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>AdminConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>AdminProvider<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>BuyerConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>BuyerProvider<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>Common<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>MerchantsConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>MerchantsProvider<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>TakeawayGateway<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br></code></pre></td></tr></table></figure><p>指定Java的版本号</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>     <br></code></pre></td></tr></table></figure><p>在最外层的父项目配置apache的maven打包插件，其它该项目下的父项目不需要配置这个</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>$&#123;java.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>$&#123;java.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.19.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>    <span class="hljs-comment">&lt;!--默认关掉单元测试 --&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><p>完整总父项目的pom文件如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>AdminConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>AdminProvider<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>BuyerConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>BuyerProvider<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>Common<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>MerchantsConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>MerchantsProvider<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>TakeawayGateway<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.takeaway<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>TakeAwayBack<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>TakeAwayBack<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>$&#123;java.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>$&#123;java.version&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.19.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>    <span class="hljs-comment">&lt;!--默认关掉单元测试 --&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2、配置子项目的pom文件"><a href="#2-2、配置子项目的pom文件" class="headerlink" title="2.2、配置子项目的pom文件"></a>2.2、配置子项目的pom文件</h3><p>在parent节点下面加上relativePath，作用是指明依赖哪个父模块pom文件(编写规则与绝对路径相对路径相似)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span><br></code></pre></td></tr></table></figure><p>修改打包方式为jar</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br></code></pre></td></tr></table></figure><p>加上SpringBoot的maven打包插件，并且指定运行的主入口类(SpringBoot的maven产检，用这个产检打包的Jar包可以直接运行，但是不可依赖！)，如果该子项目需要被其他项目依赖，那么还需设置classifier节点为exec（不加会报错Cannot find Class）。（在这个项目中Common项目需要加，其它项目不用加）</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>exec<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                     <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>exec<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- 指定该Main Class为全局的唯一入口 --&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.zzh.demo.EntiyApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">layout</span>&gt;</span>ZIP<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span><br>               <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span><br>                   <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span><br>                       <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span><br>                           <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span><span class="hljs-comment">&lt;!--可以把依赖的包都打包到生成的Jar包中--&gt;</span><br>                       <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span><br>                   <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span><br>               <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span><br>           <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><p>指定一下build的编码规则</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><p>完整的pom文件为:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.takeaway<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>TakeAwayBack<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.takeaway<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>AdminConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>AdminConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>AdminConsumer<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-context<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>Common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-netflix-hystrix --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!--WebSocket--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-websocket<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.75<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>exec<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- 指定该Main Class为全局的唯一入口 --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.takeaway.adminconsumer.AdminConsumerApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">layout</span>&gt;</span>ZIP<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span><span class="hljs-comment">&lt;!--可以把依赖的包都打包到生成的Jar包中--&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-3、项目总打包"><a href="#2-3、项目总打包" class="headerlink" title="2.3、项目总打包"></a>2.3、项目总打包</h3><p>点击maven中的package（第一次可以不clean，如果出错了请先clean之后再package）</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/image-20221029115316876.png" alt="image-20221029115316876"></p><p>打包完成如下图：</p><p><img src="/2022/10/29/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/image-20221029115355897.png" alt="image-20221029115355897"></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringCloud</category>
      
    </categories>
    
    
    <tags>
      
      <tag>微服务项目打包</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>RabbitMQ部署指南</title>
    <link href="/2022/10/29/RabbitMQ%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/"/>
    <url>/2022/10/29/RabbitMQ%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="RabbitMQ部署指南"><a href="#RabbitMQ部署指南" class="headerlink" title="RabbitMQ部署指南"></a>RabbitMQ部署指南</h1><h1 id="1-单机部署"><a href="#1-单机部署" class="headerlink" title="1.单机部署"></a>1.单机部署</h1><p>我们在Centos7虚拟机中使用Docker来安装。</p><h2 id="1-1-下载镜像"><a href="#1-1-下载镜像" class="headerlink" title="1.1.下载镜像"></a>1.1.下载镜像</h2><p>方式一：在线拉取</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> pull rabbitmq:<span class="hljs-number">3</span>-management<br><br></code></pre></td></tr></table></figure><p>方式二：从本地加载</p><p>在课前资料已经提供了镜像包：</p><p><img src="/WEBRESOURCE0cbd3a023160ff7412cd9cf626deef19.png" alt="WEBRESOURCE0cbd3a023160ff7412cd9cf626deef19"></p><p>上传到虚拟机中后，使用命令加载镜像即可：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">docker load -<span class="hljs-selector-tag">i</span> mq<span class="hljs-selector-class">.tar</span><br><br></code></pre></td></tr></table></figure><h2 id="1-2-安装MQ"><a href="#1-2-安装MQ" class="headerlink" title="1.2.安装MQ"></a>1.2.安装MQ</h2><p>执行下面的命令来运行MQ容器：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs livescript">docker run <span class="hljs-string">\</span><br> -e RABBITMQ_DEFAULT_USER=itcast <span class="hljs-string">\</span><br> -e RABBITMQ_DEFAULT_PASS=<span class="hljs-number">123321</span> <span class="hljs-string">\</span><br> --name mq <span class="hljs-string">\</span><br> --hostname mq1 <span class="hljs-string">\</span><br> -p <span class="hljs-number">15672</span>:<span class="hljs-number">15672</span> <span class="hljs-string">\</span><br> -p <span class="hljs-number">5672</span>:<span class="hljs-number">5672</span> <span class="hljs-string">\</span><br> -d <span class="hljs-string">\</span><br> rabbitmq:<span class="hljs-number">3</span>-management<br><br></code></pre></td></tr></table></figure><h1 id="2-集群部署"><a href="#2-集群部署" class="headerlink" title="2.集群部署"></a>2.集群部署</h1><p>接下来，我们看看如何安装RabbitMQ的集群。</p><h2 id="2-1-集群分类"><a href="#2-1-集群分类" class="headerlink" title="2.1.集群分类"></a>2.1.集群分类</h2><p>在RabbitMQ的官方文档中，讲述了两种集群的配置方式：</p><ul><li><p>普通模式：普通模式集群不进行数据同步，每个MQ都有自己的队列、数据信息（其它元数据信息如交换机等会同步）。例如我们有2个MQ：mq1，和mq2，如果你的消息在mq1，而你连接到了mq2，那么mq2会去mq1拉取消息，然后返回给你。如果mq1宕机，消息就会丢失。</p></li><li><p>镜像模式：与普通模式不同，队列会在各个mq的镜像节点之间同步，因此你连接到任何一个镜像节点，均可获取到消息。而且如果一个节点宕机，并不会导致数据丢失。不过，这种方式增加了数据同步的带宽消耗。</p></li></ul><p>我们先来看普通模式集群。</p><h2 id="2-2-设置网络"><a href="#2-2-设置网络" class="headerlink" title="2.2.设置网络"></a>2.2.设置网络</h2><p>首先，我们需要让3台MQ互相知道对方的存在。</p><p>分别在3台机器中，设置 &#x2F;etc&#x2F;hosts文件，添加如下内容：</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">192.168.150.101</span> mq1<br><span class="hljs-number">192.168.150.102</span> mq2<br><span class="hljs-number">192.168.150.103</span> mq3<br><br></code></pre></td></tr></table></figure><p>并在每台机器上测试，是否可以ping通对方：</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringCloud</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RabbitMQ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nacos集群搭建</title>
    <link href="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="Nacos集群搭建"><a href="#Nacos集群搭建" class="headerlink" title="Nacos集群搭建"></a>Nacos集群搭建</h1><h1 id="1-集群结构图"><a href="#1-集群结构图" class="headerlink" title="1.集群结构图"></a>1.集群结构图</h1><p>官方给出的Nacos集群图：</p><p><img src="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/image-20210409210621117.png"></p><p>其中包含3个nacos节点，然后一个负载均衡器代理3个Nacos。这里负载均衡器可以使用nginx。</p><p>我们计划的集群结构：</p><p><img src="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/image-20210409211355037.png"></p><p>三个nacos节点的地址：</p><table><thead><tr><th>节点</th><th>ip</th><th>port</th></tr></thead><tbody><tr><td>nacos1</td><td>192.168.150.1</td><td>8845</td></tr><tr><td>nacos2</td><td>192.168.150.1</td><td>8846</td></tr><tr><td>nacos3</td><td>192.168.150.1</td><td>8847</td></tr></tbody></table><h1 id="2-搭建集群"><a href="#2-搭建集群" class="headerlink" title="2.搭建集群"></a>2.搭建集群</h1><p>搭建集群的基本步骤：</p><ul><li><p>搭建数据库，初始化数据库表结构</p></li><li><p>下载nacos安装包</p></li><li><p>配置nacos</p></li><li><p>启动nacos集群</p></li><li><p>nginx反向代理</p></li></ul><h2 id="2-1-初始化数据库"><a href="#2-1-初始化数据库" class="headerlink" title="2.1.初始化数据库"></a>2.1.初始化数据库</h2><p>Nacos默认数据存储在内嵌数据库Derby中，不属于生产可用的数据库。</p><p>官方推荐的最佳实践是使用带有主从的高可用数据库集群，主从模式的高可用数据库可以参考传智教育的后续高手课程。</p><p>这里我们以单点的数据库为例来讲解。</p><p>首先新建一个数据库，命名为nacos，而后导入下面的SQL：</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">CREATE TABLE `config_info` (<br>  `id` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,<br>  `dat<span class="hljs-built_in">a_id</span>` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;dat<span class="hljs-built_in">a_id</span>&#x27;,<br>  `group_id` varchar(<span class="hljs-number">255</span>) DEFAULT NULL,<br>  `content` longtext <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;content&#x27;,<br>  `md5` varchar(<span class="hljs-number">32</span>) DEFAULT NULL COMMENT &#x27;md5&#x27;,<br>  `gmt_create` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,<br>  `gmt_modified` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,<br>  `src_user` text COMMENT &#x27;source user&#x27;,<br>  `src_ip` varchar(<span class="hljs-number">50</span>) DEFAULT NULL COMMENT &#x27;source ip&#x27;,<br>  `app_name` varchar(<span class="hljs-number">128</span>) DEFAULT NULL,<br>  `tenant_id` varchar(<span class="hljs-number">128</span>) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,<br>  `c_desc` varchar(<span class="hljs-number">256</span>) DEFAULT NULL,<br>  `c_use` varchar(<span class="hljs-number">64</span>) DEFAULT NULL,<br>  `effect` varchar(<span class="hljs-number">64</span>) DEFAULT NULL,<br>  `type` varchar(<span class="hljs-number">64</span>) DEFAULT NULL,<br>  `c_schema` text,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `uk_configinfo_datagrouptenant` (`dat<span class="hljs-built_in">a_id</span>`,`group_id`,`tenant_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info&#x27;<span class="hljs-comment">;</span><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   数据库全名 = nacos_config   */</span><br><span class="hljs-comment">/*   表名称 = config_info_aggr   */</span><br><span class="hljs-comment">/******************************************/</span><br>CREATE TABLE `config_info_aggr` (<br>  `id` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,<br>  `dat<span class="hljs-built_in">a_id</span>` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;dat<span class="hljs-built_in">a_id</span>&#x27;,<br>  `group_id` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;group_id&#x27;,<br>  `datum_id` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;datum_id&#x27;,<br>  `content` longtext <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;内容&#x27;,<br>  `gmt_modified` datetime <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;修改时间&#x27;,<br>  `app_name` varchar(<span class="hljs-number">128</span>) DEFAULT NULL,<br>  `tenant_id` varchar(<span class="hljs-number">128</span>) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`dat<span class="hljs-built_in">a_id</span>`,`group_id`,`tenant_id`,`datum_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;增加租户字段&#x27;<span class="hljs-comment">;</span><br><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   数据库全名 = nacos_config   */</span><br><span class="hljs-comment">/*   表名称 = config_info_beta   */</span><br><span class="hljs-comment">/******************************************/</span><br>CREATE TABLE `config_info_beta` (<br>  `id` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,<br>  `dat<span class="hljs-built_in">a_id</span>` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;dat<span class="hljs-built_in">a_id</span>&#x27;,<br>  `group_id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;group_id&#x27;,<br>  `app_name` varchar(<span class="hljs-number">128</span>) DEFAULT NULL COMMENT &#x27;app_name&#x27;,<br>  `content` longtext <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;content&#x27;,<br>  `bet<span class="hljs-built_in">a_ips</span>` varchar(<span class="hljs-number">1024</span>) DEFAULT NULL COMMENT &#x27;betaIps&#x27;,<br>  `md5` varchar(<span class="hljs-number">32</span>) DEFAULT NULL COMMENT &#x27;md5&#x27;,<br>  `gmt_create` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,<br>  `gmt_modified` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,<br>  `src_user` text COMMENT &#x27;source user&#x27;,<br>  `src_ip` varchar(<span class="hljs-number">50</span>) DEFAULT NULL COMMENT &#x27;source ip&#x27;,<br>  `tenant_id` varchar(<span class="hljs-number">128</span>) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `uk_configinfobet<span class="hljs-built_in">a_datagrouptenant</span>` (`dat<span class="hljs-built_in">a_id</span>`,`group_id`,`tenant_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info_beta&#x27;<span class="hljs-comment">;</span><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   数据库全名 = nacos_config   */</span><br><span class="hljs-comment">/*   表名称 = config_info_tag   */</span><br><span class="hljs-comment">/******************************************/</span><br>CREATE TABLE `config_info_tag` (<br>  `id` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,<br>  `dat<span class="hljs-built_in">a_id</span>` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;dat<span class="hljs-built_in">a_id</span>&#x27;,<br>  `group_id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;group_id&#x27;,<br>  `tenant_id` varchar(<span class="hljs-number">128</span>) DEFAULT &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,<br>  `tag_id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;tag_id&#x27;,<br>  `app_name` varchar(<span class="hljs-number">128</span>) DEFAULT NULL COMMENT &#x27;app_name&#x27;,<br>  `content` longtext <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;content&#x27;,<br>  `md5` varchar(<span class="hljs-number">32</span>) DEFAULT NULL COMMENT &#x27;md5&#x27;,<br>  `gmt_create` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,<br>  `gmt_modified` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,<br>  `src_user` text COMMENT &#x27;source user&#x27;,<br>  `src_ip` varchar(<span class="hljs-number">50</span>) DEFAULT NULL COMMENT &#x27;source ip&#x27;,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`dat<span class="hljs-built_in">a_id</span>`,`group_id`,`tenant_id`,`tag_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info_tag&#x27;<span class="hljs-comment">;</span><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   数据库全名 = nacos_config   */</span><br><span class="hljs-comment">/*   表名称 = config_tags_relation   */</span><br><span class="hljs-comment">/******************************************/</span><br>CREATE TABLE `config_tags_relation` (<br>  `id` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;id&#x27;,<br>  `tag_name` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;tag_name&#x27;,<br>  `tag_type` varchar(<span class="hljs-number">64</span>) DEFAULT NULL COMMENT &#x27;tag_type&#x27;,<br>  `dat<span class="hljs-built_in">a_id</span>` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;dat<span class="hljs-built_in">a_id</span>&#x27;,<br>  `group_id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;group_id&#x27;,<br>  `tenant_id` varchar(<span class="hljs-number">128</span>) DEFAULT &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,<br>  `nid` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT,<br>  PRIMARY KEY (`nid`),<br>  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_tag_relation&#x27;<span class="hljs-comment">;</span><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   数据库全名 = nacos_config   */</span><br><span class="hljs-comment">/*   表名称 = group_capacity   */</span><br><span class="hljs-comment">/******************************************/</span><br>CREATE TABLE `group_capacity` (<br>  `id` bigint(<span class="hljs-number">20</span>) unsigned <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT COMMENT &#x27;主键ID&#x27;,<br>  `group_id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;&#x27; COMMENT &#x27;Group ID，空字符表示整个集群&#x27;,<br>  `quota` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;配额，<span class="hljs-number">0</span>表示使用默认值&#x27;,<br>  `usage` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;使用量&#x27;,<br>  `max_size` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;单个配置大小上限，单位为字节，<span class="hljs-number">0</span>表示使用默认值&#x27;,<br>  `max_aggr_count` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;聚合子配置最大个数，，<span class="hljs-number">0</span>表示使用默认值&#x27;,<br>  `max_aggr_size` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;单个聚合数据的子配置大小上限，单位为字节，<span class="hljs-number">0</span>表示使用默认值&#x27;,<br>  `max_history_count` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;最大变更历史数量&#x27;,<br>  `gmt_create` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,<br>  `gmt_modified` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `uk_group_id` (`group_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;集群、各Group容量信息表&#x27;<span class="hljs-comment">;</span><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   数据库全名 = nacos_config   */</span><br><span class="hljs-comment">/*   表名称 = his_config_info   */</span><br><span class="hljs-comment">/******************************************/</span><br>CREATE TABLE `his_config_info` (<br>  `id` bigint(<span class="hljs-number">64</span>) unsigned <span class="hljs-literal">NOT</span> NULL,<br>  `nid` bigint(<span class="hljs-number">20</span>) unsigned <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT,<br>  `dat<span class="hljs-built_in">a_id</span>` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL,<br>  `group_id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL,<br>  `app_name` varchar(<span class="hljs-number">128</span>) DEFAULT NULL COMMENT &#x27;app_name&#x27;,<br>  `content` longtext <span class="hljs-literal">NOT</span> NULL,<br>  `md5` varchar(<span class="hljs-number">32</span>) DEFAULT NULL,<br>  `gmt_create` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP,<br>  `gmt_modified` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP,<br>  `src_user` text,<br>  `src_ip` varchar(<span class="hljs-number">50</span>) DEFAULT NULL,<br>  `op_type` char(<span class="hljs-number">10</span>) DEFAULT NULL,<br>  `tenant_id` varchar(<span class="hljs-number">128</span>) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,<br>  PRIMARY KEY (`nid`),<br>  KEY `idx_gmt_create` (`gmt_create`),<br>  KEY `idx_gmt_modified` (`gmt_modified`),<br>  KEY `idx_did` (`dat<span class="hljs-built_in">a_id</span>`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;多租户改造&#x27;<span class="hljs-comment">;</span><br><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   数据库全名 = nacos_config   */</span><br><span class="hljs-comment">/*   表名称 = tenant_capacity   */</span><br><span class="hljs-comment">/******************************************/</span><br>CREATE TABLE `tenant_capacity` (<br>  `id` bigint(<span class="hljs-number">20</span>) unsigned <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT COMMENT &#x27;主键ID&#x27;,<br>  `tenant_id` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;&#x27; COMMENT &#x27;Tenant ID&#x27;,<br>  `quota` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;配额，<span class="hljs-number">0</span>表示使用默认值&#x27;,<br>  `usage` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;使用量&#x27;,<br>  `max_size` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;单个配置大小上限，单位为字节，<span class="hljs-number">0</span>表示使用默认值&#x27;,<br>  `max_aggr_count` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;聚合子配置最大个数&#x27;,<br>  `max_aggr_size` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;单个聚合数据的子配置大小上限，单位为字节，<span class="hljs-number">0</span>表示使用默认值&#x27;,<br>  `max_history_count` int(<span class="hljs-number">10</span>) unsigned <span class="hljs-literal">NOT</span> NULL DEFAULT &#x27;<span class="hljs-number">0</span>&#x27; COMMENT &#x27;最大变更历史数量&#x27;,<br>  `gmt_create` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;,<br>  `gmt_modified` datetime <span class="hljs-literal">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#x27;修改时间&#x27;,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `uk_tenant_id` (`tenant_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;租户容量信息表&#x27;<span class="hljs-comment">;</span><br><br><br>CREATE TABLE `tenant_info` (<br>  `id` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,<br>  `kp` varchar(<span class="hljs-number">128</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;kp&#x27;,<br>  `tenant_id` varchar(<span class="hljs-number">128</span>) default &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,<br>  `tenant_name` varchar(<span class="hljs-number">128</span>) default &#x27;&#x27; COMMENT &#x27;tenant_name&#x27;,<br>  `tenant_desc` varchar(<span class="hljs-number">256</span>) DEFAULT NULL COMMENT &#x27;tenant_desc&#x27;,<br>  `create_source` varchar(<span class="hljs-number">32</span>) DEFAULT NULL COMMENT &#x27;create_source&#x27;,<br>  `gmt_create` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;创建时间&#x27;,<br>  `gmt_modified` bigint(<span class="hljs-number">20</span>) <span class="hljs-literal">NOT</span> NULL COMMENT &#x27;修改时间&#x27;,<br>  PRIMARY KEY (`id`),<br>  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;tenant_info&#x27;<span class="hljs-comment">;</span><br><br>CREATE TABLE `users` (<br>`username` varchar(<span class="hljs-number">50</span>) <span class="hljs-literal">NOT</span> NULL PRIMARY KEY,<br>`password` varchar(<span class="hljs-number">500</span>) <span class="hljs-literal">NOT</span> NULL,<br>`enabled` boolean <span class="hljs-literal">NOT</span> NULL<br>)<span class="hljs-comment">;</span><br><br>CREATE TABLE `roles` (<br>`username` varchar(<span class="hljs-number">50</span>) <span class="hljs-literal">NOT</span> NULL,<br>`role` varchar(<span class="hljs-number">50</span>) <span class="hljs-literal">NOT</span> NULL,<br>UNIQUE INDEX `idx_user_role` (`username` ASC, `role` ASC) USING BTREE<br>)<span class="hljs-comment">;</span><br><br>CREATE TABLE `permissions` (<br>    `role` varchar(<span class="hljs-number">50</span>) <span class="hljs-literal">NOT</span> NULL,<br>    `resource` varchar(<span class="hljs-number">255</span>) <span class="hljs-literal">NOT</span> NULL,<br>    `action` varchar(<span class="hljs-number">8</span>) <span class="hljs-literal">NOT</span> NULL,<br>    UNIQUE INDEX `uk_role_permission` (`role`,`resource`,`action`) USING BTREE<br>)<span class="hljs-comment">;</span><br><br>INSERT INTO users (username, password, enabled) VALUES (&#x27;nacos&#x27;, &#x27;$<span class="hljs-number">2</span>a$<span class="hljs-number">10</span>$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;, <span class="hljs-literal">TRUE</span>)<span class="hljs-comment">;</span><br><br>INSERT INTO roles (username, role) VALUES (&#x27;nacos&#x27;, &#x27;ROLE_ADMIN&#x27;)<span class="hljs-comment">;</span><br><br></code></pre></td></tr></table></figure><h2 id="2-2-下载nacos"><a href="#2-2-下载nacos" class="headerlink" title="2.2.下载nacos"></a>2.2.下载nacos</h2><p>nacos在GitHub上有下载地址：<a href="https://github.com/alibaba/nacos/tags%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%AC%E4%B8%8B%E8%BD%BD%E3%80%82">https://github.com/alibaba/nacos/tags，可以选择任意版本下载。</a></p><p>本例中才用1.4.1版本：</p><p><img src="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/image-20210409212119411.png"></p><h2 id="2-3-配置Nacos"><a href="#2-3-配置Nacos" class="headerlink" title="2.3.配置Nacos"></a>2.3.配置Nacos</h2><p>将这个包解压到任意非中文目录下，如图：</p><p><img src="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/image-20210402161843337.png"></p><p>目录说明：</p><ul><li><p>bin：启动脚本</p></li><li><p>conf：配置文件</p></li></ul><p>进入nacos的conf目录，修改配置文件cluster.conf.example，重命名为cluster.conf：</p><p><img src="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/image-20210409212459292.png"></p><p>然后添加内容：</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">127.0.0.1:8845</span><br><span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">8846</span><br><span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">8847</span><br><br></code></pre></td></tr></table></figure><p>然后修改application.properties文件，添加数据库配置</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">spring.datasource.platform</span>=mysql<br><br><span class="hljs-attr">db.num</span>=<span class="hljs-number">1</span><br><br><span class="hljs-attr">db.url.0</span>=jdbc:mysql://<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">3306</span>/nacos?characterEncoding=utf8&amp;connectTimeout=<span class="hljs-number">1000</span>&amp;socketTimeout=<span class="hljs-number">3000</span>&amp;autoReconnect=<span class="hljs-literal">true</span>&amp;useUnicode=<span class="hljs-literal">true</span>&amp;useSSL=<span class="hljs-literal">false</span>&amp;serverTimezone=UTC<br><span class="hljs-attr">db.user.0</span>=root<br><span class="hljs-attr">db.password.0</span>=<span class="hljs-number">123</span><br><br></code></pre></td></tr></table></figure><h2 id="2-4-启动"><a href="#2-4-启动" class="headerlink" title="2.4.启动"></a>2.4.启动</h2><p>将nacos文件夹复制三份，分别命名为：nacos1、nacos2、nacos3</p><p><img src="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/image-20210409213335538.png"></p><p>然后分别修改三个文件夹中的application.properties，</p><p>nacos1:</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">server</span>.<span class="hljs-keyword">port</span>=8845<br><br></code></pre></td></tr></table></figure><p>nacos2:</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">server</span>.<span class="hljs-keyword">port</span>=8846<br><br></code></pre></td></tr></table></figure><p>nacos3:</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">server</span>.<span class="hljs-keyword">port</span>=8847<br><br></code></pre></td></tr></table></figure><p>然后分别启动三个nacos节点：</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dos">startup.<span class="hljs-built_in">cmd</span><br><br></code></pre></td></tr></table></figure><h2 id="2-5-nginx反向代理"><a href="#2-5-nginx反向代理" class="headerlink" title="2.5.nginx反向代理"></a>2.5.nginx反向代理</h2><p>找到课前资料提供的nginx安装包：</p><p><img src="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/image-20210410103253355.png"></p><p>解压到任意非中文目录下：</p><p><img src="/2022/10/29/Nacos%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/image-20210410103322874.png"></p><p>修改conf&#x2F;nginx.conf文件，配置如下：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> nacos-cluster &#123;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:8845</span>;<br><span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:8846</span>;<br><span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:8847</span>;<br>&#125;<br><br><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span>  localhost;<br><br>    <span class="hljs-section">location</span> /nacos &#123;<br>        <span class="hljs-attribute">proxy_pass</span> http://nacos-cluster;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>而后在浏览器访问：<a href="http://localhost/nacos%E5%8D%B3%E5%8F%AF%E3%80%82">http://localhost/nacos即可。</a></p><p>代码中application.yml文件配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:80</span> <span class="hljs-comment"># Nacos地址</span><br><br></code></pre></td></tr></table></figure><h2 id="2-6-优化"><a href="#2-6-优化" class="headerlink" title="2.6.优化"></a>2.6.优化</h2><ul><li><p>实际部署时，需要给做反向代理的nginx服务器设置一个域名，这样后续如果有服务器迁移nacos的客户端也无需更改配置.</p></li><li><p>Nacos的各个节点应该部署到多个不同服务器，做好容灾和隔离</p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringCloud</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nacos集群搭建</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nacos安装指南</title>
    <link href="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/"/>
    <url>/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="Nacos安装指南"><a href="#Nacos安装指南" class="headerlink" title="Nacos安装指南"></a>Nacos安装指南</h1><p><a href="C:/Users/Kblayt/Desktop/youdaonote/youdaonote-pull/youdaonote/youdaonote-attachments/WEBRESOURCE33c451eccdc661d94d641a1b381f2af1Nacos.xmind">Nacos.xmind</a></p><h1 id="1-Windows安装"><a href="#1-Windows安装" class="headerlink" title="1.Windows安装"></a>1.Windows安装</h1><p>开发阶段采用单机安装即可。</p><h2 id="1-1-下载安装包"><a href="#1-1-下载安装包" class="headerlink" title="1.1.下载安装包"></a>1.1.下载安装包</h2><p>在Nacos的GitHub页面，提供有下载链接，可以下载编译好的Nacos服务端或者源代码：</p><p>GitHub主页：<a href="https://github.com/alibaba/nacos">https://github.com/alibaba/nacos</a></p><p>GitHub的Release下载页：<a href="https://github.com/alibaba/nacos/releases">https://github.com/alibaba/nacos/releases</a></p><p>如图：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402161102887.png" alt="image-20210402161102887"></p><p>本课程采用1.4.1.版本的Nacos，课前资料已经准备了安装包：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402161130261.png" alt="image-20210402161130261"></p><p>windows版本使用nacos-server-1.4.1.zip包即可。</p><h2 id="1-2-解压"><a href="#1-2-解压" class="headerlink" title="1.2.解压"></a>1.2.解压</h2><p>将这个包解压到任意非中文目录下，如图：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402161843337.png" alt="image-20210402161843337"></p><p>目录说明：</p><ul><li><p>bin：启动脚本</p></li><li><p>conf：配置文件</p></li></ul><h2 id="1-3-端口配置"><a href="#1-3-端口配置" class="headerlink" title="1.3.端口配置"></a>1.3.端口配置</h2><p>Nacos的默认端口是8848，如果你电脑上的其它进程占用了8848端口，请先尝试关闭该进程。</p><p>如果无法关闭占用8848端口的进程，也可以进入nacos的conf目录，修改配置文件中的端口：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402162008280.png" alt="image-20210402162008280"></p><p>修改其中的内容：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402162251093.png" alt="image-20210402162251093"></p><h2 id="1-4-启动"><a href="#1-4-启动" class="headerlink" title="1.4.启动"></a>1.4.启动</h2><p>启动非常简单，进入bin目录，结构如下：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402162350977.png" alt="image-20210402162350977"></p><p>然后执行命令即可：</p><ul><li>windows命令：</li></ul><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dos">startup.<span class="hljs-built_in">cmd</span> -m standalone<br><br></code></pre></td></tr></table></figure><p>执行后的效果如图：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402162526774.png" alt="image-20210402162526774"></p><h2 id="1-5-访问"><a href="#1-5-访问" class="headerlink" title="1.5.访问"></a>1.5.访问</h2><p>在浏览器输入地址：<a href="http://127.0.0.1:8848/nacos%E5%8D%B3%E5%8F%AF%EF%BC%9A">http://127.0.0.1:8848/nacos即可：</a></p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402162630427.png" alt="image-20210402162630427"></p><p>默认的账号和密码都是nacos，进入后：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402162709515.png" alt="image-20210402162709515"></p><h1 id="2-Linux安装"><a href="#2-Linux安装" class="headerlink" title="2.Linux安装"></a>2.Linux安装</h1><p>Linux或者Mac安装方式与Windows类似。</p><h2 id="2-1-安装JDK"><a href="#2-1-安装JDK" class="headerlink" title="2.1.安装JDK"></a>2.1.安装JDK</h2><p>Nacos依赖于JDK运行，索引Linux上也需要安装JDK才行。</p><p>上传jdk安装包：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402172334810.png" alt="image-20210402172334810"></p><p>上传到某个目录，例如：&#x2F;usr&#x2F;local&#x2F;</p><p>然后解压缩：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">tar -xvf jdk-<span class="hljs-number">8</span>u144-linux-x64<span class="hljs-selector-class">.tar</span><span class="hljs-selector-class">.gz</span><br><br></code></pre></td></tr></table></figure><p>然后重命名为java</p><p>配置环境变量：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">JAVA_HOME</span>=/usr/local/java<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$PATH</span>:$JAVA_HOME/bin<br><br></code></pre></td></tr></table></figure><p>设置环境变量：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">source</span> <span class="hljs-regexp">/etc/</span>profile<br><br></code></pre></td></tr></table></figure><h2 id="2-2-上传安装包"><a href="#2-2-上传安装包" class="headerlink" title="2.2.上传安装包"></a>2.2.上传安装包</h2><p>如图：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402161102887.png" alt="image-20210402161102887"></p><p>也可以直接使用课前资料中的tar.gz：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402161130261.png" alt="image-20210402161130261"></p><p>上传到Linux服务器的某个目录，例如&#x2F;usr&#x2F;local&#x2F;src目录下：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402163715580.png" alt="image-20210402163715580"></p><h2 id="2-3-解压"><a href="#2-3-解压" class="headerlink" title="2.3.解压"></a>2.3.解压</h2><p>命令解压缩安装包：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> -xvf nacos-server-<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">1</span>.tar.gz<br><br></code></pre></td></tr></table></figure><p>然后删除安装包：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">rm</span> -rf nacos-server-<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">1</span>.tar.gz<br><br></code></pre></td></tr></table></figure><p>目录中最终样式：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402163858429.png" alt="image-20210402163858429"></p><p>目录内部：</p><p><img src="/2022/10/29/Nacos%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/image-20210402164414827.png" alt="image-20210402164414827"></p><h2 id="2-4-端口配置"><a href="#2-4-端口配置" class="headerlink" title="2.4.端口配置"></a>2.4.端口配置</h2><p>与windows中类似</p><h2 id="2-5-启动"><a href="#2-5-启动" class="headerlink" title="2.5.启动"></a>2.5.启动</h2><p>在nacos&#x2F;bin目录中，输入命令启动Nacos：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">sh </span>startup.<span class="hljs-keyword">sh </span>-m standalone<br><br></code></pre></td></tr></table></figure><h1 id="3-Nacos的依赖"><a href="#3-Nacos的依赖" class="headerlink" title="3.Nacos的依赖"></a>3.Nacos的依赖</h1><p>父工程：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>客户端：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- nacos客户端依赖包 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><br></code></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringCloud</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nacos安装指南</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7安装Docker</title>
    <link href="/2022/10/29/Centos7%E5%AE%89%E8%A3%85Docker/"/>
    <url>/2022/10/29/Centos7%E5%AE%89%E8%A3%85Docker/</url>
    
    <content type="html"><![CDATA[<h1 id="0-安装Docker"><a href="#0-安装Docker" class="headerlink" title="0.安装Docker"></a>0.安装Docker</h1><p>Docker 分为 CE 和 EE 两大版本。CE 即社区版（免费，支持周期 7 个月），EE 即企业版，强调安全，付费使用，支持周期 24 个月。</p><p>Docker CE 分为 stable test 和 nightly 三个更新频道。</p><p>官方网站上有各种环境下的 安装指南，这里主要介绍 Docker CE 在 CentOS上的安装。</p><h1 id="1-CentOS安装Docker"><a href="#1-CentOS安装Docker" class="headerlink" title="1.CentOS安装Docker"></a>1.CentOS安装Docker</h1><p>Docker CE 支持 64 位版本 CentOS 7，并且要求内核版本不低于 3.10， CentOS 7 满足最低内核的要求，所以我们在CentOS 7安装Docker。</p><h2 id="1-1-卸载（可选）"><a href="#1-1-卸载（可选）" class="headerlink" title="1.1.卸载（可选）"></a>1.1.卸载（可选）</h2><p>如果之前安装过旧版本的Docker，可以使用下面命令卸载：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs livescript">yum remove docker <span class="hljs-string">\</span><br>                  docker-client <span class="hljs-string">\</span><br>                  docker-client-latest <span class="hljs-string">\</span><br>                  docker-common <span class="hljs-string">\</span><br>                  docker-latest <span class="hljs-string">\</span><br>                  docker-latest-logrotate <span class="hljs-string">\</span><br>                  docker-logrotate <span class="hljs-string">\</span><br>                  docker-selinux <span class="hljs-string">\</span><br>                  docker-engine-selinux <span class="hljs-string">\</span><br>                  docker-engine <span class="hljs-string">\</span><br>                  docker-ce<br><br></code></pre></td></tr></table></figure><h2 id="1-2-安装docker"><a href="#1-2-安装docker" class="headerlink" title="1.2.安装docker"></a>1.2.安装docker</h2><p>首先需要大家虚拟机联网，安装yum工具</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">yum</span> install -y yum-utils \<br>           device-mapper-persistent-<span class="hljs-class"><span class="hljs-keyword">data</span> \</span><br>           lvm2 <span class="hljs-comment">--skip-broken</span><br><br></code></pre></td></tr></table></figure><p>然后更新本地镜像源：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 设置docker镜像源</span><br>yum-config-manager \<br>    --add-repo \<br>    https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/centos/</span>docker-ce.repo<br>    <br>sed -i <span class="hljs-string">&#x27;s/download.docker.com/mirrors.aliyun.com\/docker-ce/g&#x27;</span> <span class="hljs-regexp">/etc/yum</span>.repos.d/docker-ce.repo<br><br>yum makecache fast<br><br></code></pre></td></tr></table></figure><p>然后输入命令：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> -y docker-ce<br><br></code></pre></td></tr></table></figure><p>docker-ce为社区免费版本。稍等片刻，docker即可安装成功。</p><h2 id="1-3-启动docker"><a href="#1-3-启动docker" class="headerlink" title="1.3.启动docker"></a>1.3.启动docker</h2><p>Docker应用需要用到各种端口，逐一去修改防火墙设置。非常麻烦，因此建议大家直接关闭防火墙！</p><p>启动docker前，一定要关闭防火墙后！！</p><p>启动docker前，一定要关闭防火墙后！！</p><p>启动docker前，一定要关闭防火墙后！！</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-meta"># 关闭</span><br>systemctl <span class="hljs-keyword">stop</span> firewalld<br><span class="hljs-meta"># 禁止开机启动防火墙</span><br>systemctl <span class="hljs-keyword">disable</span> firewalld<br><br></code></pre></td></tr></table></figure><p>通过命令启动docker：</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl start docker  <span class="hljs-comment"># 启动docker服务</span><br><br><span class="hljs-params">system</span>ctl stop docker  <span class="hljs-comment"># 停止docker服务</span><br><br><span class="hljs-params">system</span>ctl restart docker  <span class="hljs-comment"># 重启docker服务</span><br><br></code></pre></td></tr></table></figure><p>然后输入命令，可以查看docker版本：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker -v</span><br><br></code></pre></td></tr></table></figure><p>如图：</p><p><img src="/2022/10/29/Centos7%E5%AE%89%E8%A3%85Docker/WEBRESOURCE0cc64d0658051d2e441626162799fd29.png" alt="WEBRESOURCE0cc64d0658051d2e441626162799fd29"></p><h2 id="1-4-配置镜像加速"><a href="#1-4-配置镜像加速" class="headerlink" title="1.4.配置镜像加速"></a>1.4.配置镜像加速</h2><p>docker官方镜像仓库网速较差，我们需要设置国内镜像服务：</p><p>参考阿里云的镜像加速文档：<a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a></p><h1 id="2-CentOS7安装DockerCompose"><a href="#2-CentOS7安装DockerCompose" class="headerlink" title="2.CentOS7安装DockerCompose"></a>2.CentOS7安装DockerCompose</h1><h2 id="2-1-下载"><a href="#2-1-下载" class="headerlink" title="2.1.下载"></a>2.1.下载</h2><p>Linux下需要通过命令下载：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 安装</span><br>curl -L https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/docker/</span>compose<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/1.23.1/</span>docker-compose-`uname -s`-`uname -m` &gt; <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>docker-compose<br><br></code></pre></td></tr></table></figure><p>如果下载速度较慢，或者下载失败，可以使用课前资料提供的docker-compose文件：</p><p><img src="/2022/10/29/Centos7%E5%AE%89%E8%A3%85Docker/WEBRESOURCE87edc261969e51ab61c4107bd9b6725b.png" alt="WEBRESOURCE87edc261969e51ab61c4107bd9b6725b"></p><p>上传到&#x2F;usr&#x2F;local&#x2F;bin&#x2F;目录也可以。</p><h2 id="2-2-修改文件权限"><a href="#2-2-修改文件权限" class="headerlink" title="2.2.修改文件权限"></a>2.2.修改文件权限</h2><p>修改文件权限：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 修改权限</span><br>chmod +x <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>docker-compose<br><br></code></pre></td></tr></table></figure><h2 id="2-3-Base自动补全命令："><a href="#2-3-Base自动补全命令：" class="headerlink" title="2.3.Base自动补全命令："></a>2.3.Base自动补全命令：</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 补全命令</span><br>curl -L https:<span class="hljs-regexp">//</span>raw.githubusercontent.com<span class="hljs-regexp">/docker/</span>compose<span class="hljs-regexp">/1.29.1/</span>contrib<span class="hljs-regexp">/completion/</span>bash<span class="hljs-regexp">/docker-compose &gt; /</span>etc<span class="hljs-regexp">/bash_completion.d/</span>docker-compose<br><br></code></pre></td></tr></table></figure><p>如果这里出现错误，需要修改自己的hosts文件：</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;199.232.68.133 raw.githubusercontent.com&quot;</span> &gt;&gt; <span class="hljs-regexp">/etc/</span>hosts<br><br></code></pre></td></tr></table></figure><h1 id="3-Docker镜像仓库"><a href="#3-Docker镜像仓库" class="headerlink" title="3.Docker镜像仓库"></a>3.Docker镜像仓库</h1><p>搭建镜像仓库可以基于Docker官方提供的DockerRegistry来实现。</p><p>官网地址：<a href="https://hub.docker.com/_/registry">https://hub.docker.com/_/registry</a></p><h2 id="3-1-简化版镜像仓库"><a href="#3-1-简化版镜像仓库" class="headerlink" title="3.1.简化版镜像仓库"></a>3.1.简化版镜像仓库</h2><p>Docker官方的Docker Registry是一个基础版本的Docker镜像仓库，具备仓库管理的完整功能，但是没有图形化界面。</p><p>搭建方式比较简单，命令如下：</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">docker run -d <span class="hljs-string">\</span><br>    --restart=always <span class="hljs-string">\</span><br>    --name registry<span class="hljs-string">\</span><br>    -p <span class="hljs-number">5000</span>:<span class="hljs-number">5000</span> <span class="hljs-string">\</span><br>    -v registry-data:/<span class="hljs-keyword">var</span>/lib/registry <span class="hljs-string">\</span><br>    registry<br><br></code></pre></td></tr></table></figure><p>命令中挂载了一个数据卷registry-data到容器内的&#x2F;var&#x2F;lib&#x2F;registry 目录，这是私有镜像库存放数据的目录。</p><p>访问<a href="http://yourip:5000/v2/_catalog">http://YourIp:5000/v2/_catalog</a> 可以查看当前私有镜像服务中包含的镜像</p><h2 id="3-2-带有图形化界面版本"><a href="#3-2-带有图形化界面版本" class="headerlink" title="3.2.带有图形化界面版本"></a>3.2.带有图形化界面版本</h2><p>使用DockerCompose部署带有图象界面的DockerRegistry，命令如下：</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">version</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&#x27;3.0&#x27;</span><br><span class="hljs-attribute">services</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">registry</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">registry</span><br>    <span class="hljs-attribute">volumes</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./registry-data:/var/lib/registry</span><br>  <span class="hljs-attribute">ui</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">image</span><span class="hljs-punctuation">:</span> <span class="hljs-string">joxit/docker-registry-ui:static</span><br>    <span class="hljs-attribute">ports</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">8080:80</span><br>    <span class="hljs-attribute">environment</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">REGISTRY_TITLE=传智教育私有仓库</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">REGISTRY_URL=http://registry:5000</span><br>    <span class="hljs-attribute">depends_on</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">registry</span><br><br></code></pre></td></tr></table></figure><h2 id="3-3-配置Docker信任地址"><a href="#3-3-配置Docker信任地址" class="headerlink" title="3.3.配置Docker信任地址"></a>3.3.配置Docker信任地址</h2><p>我们的私服采用的是http协议，默认不被Docker信任，所以需要做一个配置：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># 打开要修改的文件</span><br>vi <span class="hljs-regexp">/etc/</span>docker/daemon.json<br><span class="hljs-comment"># 添加内容：</span><br><span class="hljs-string">&quot;insecure-registries&quot;</span>:[<span class="hljs-string">&quot;http://192.168.150.101:8080&quot;</span>]<br><span class="hljs-comment"># 重加载</span><br>systemctl daemon-reload<br><span class="hljs-comment"># 重启docker</span><br>systemctl restart docker<br><br></code></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringCloud</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Centos7安装Docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>并发编程与多线程</title>
    <link href="/2022/10/28/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    <url>/2022/10/28/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="1、什么是并发与并行"><a href="#1、什么是并发与并行" class="headerlink" title="1、什么是并发与并行"></a>1、什么是并发与并行</h1><p>并行：之两个或多个时间在<strong>同一时刻</strong>发生（同时发生）</p><p>并发：之两个或多个时间在<strong>同一个时间段内</strong>发生。</p><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20221103140028421.png" alt="image-20221103140028421"></p><h1 id="2、什么是进程、线程"><a href="#2、什么是进程、线程" class="headerlink" title="2、什么是进程、线程"></a>2、什么是进程、线程</h1><p><strong>进程：</strong></p><ul><li>进程是正在运行的程序的实例。</li><li>进程是线程的容器，即一个进程中可以开启多个线程。</li><li>比如打开一个浏览器、打开一个word等操作，都会创建进程。</li></ul><p><strong>线程：</strong></p><ul><li>线程是进程内部的一个独立执行单元。</li><li>一个进程可以同时并发运行多个线程。</li><li>比如进程可以理解为医院，线程是挂号、就诊、缴费、拿药等业务活动</li></ul><p><strong>多线程</strong>：多个线程并发执行</p><h1 id="3、线程创建"><a href="#3、线程创建" class="headerlink" title="3、线程创建"></a>3、线程创建</h1><p>Java中线程有四种创建方式：</p><ul><li>继承Thread类</li><li>实现Runnable接口</li><li>实现Callable接口</li><li>线程池</li></ul><h2 id="3-1、继承Thread类"><a href="#3-1、继承Thread类" class="headerlink" title="3.1、继承Thread类"></a>3.1、继承Thread类</h2><p><strong>MyThread.class</strong></p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Thread</span></span>&#123;<br><br>public void run()&#123;<br><span class="hljs-keyword">for</span>(int i&lt;<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)&#123;<br><span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;myThread执行了:&quot;</span>+<span class="hljs-keyword">new</span> <span class="hljs-type">Date</span>().getTime());<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ThreadCreateDemo.class:</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadCreateDemo</span>&#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)&#123;<br><span class="hljs-comment">//1.创建自定义线程类实例</span><br><span class="hljs-title class_">MyThread</span> myThread = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br><span class="hljs-comment">//2.启动线程</span><br>myThread.<span class="hljs-title function_">start</span>();<br><span class="hljs-comment">//3.在main主线程打印行信息</span><br><span class="hljs-keyword">for</span>(int i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)&#123;<br><span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;main主线程执行了：&quot;</span>+<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>());<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-2、实现Runnable接口"><a href="#3-2、实现Runnable接口" class="headerlink" title="3.2、实现Runnable接口"></a>3.2、实现Runnable接口</h2><p><strong>MyRunnable.class:</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyRunnable</span> <span class="hljs-title">implements</span> <span class="hljs-title">Runnable</span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)&#123;<br>System.<span class="hljs-keyword">out</span>.println(Thread.currentThread().getName()+<span class="hljs-string">&quot;执行时间是：&quot;</span>+<span class="hljs-keyword">new</span> Date().getTime()+<span class="hljs-string">&quot;;执行次数是：&quot;</span>+i)<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ThreadCreateDemo.class:</strong></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadCreateDemo</span>&#123;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span></span>&#123;<br><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)&#123;<br>System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;main主线程执行了：&quot;</span>+<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().<span class="hljs-built_in">getTime</span>());<br>&#125;<br><span class="hljs-comment">//通过thread类执行MyRunnable类</span><br>Thread thread = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">MyRunnable</span>(),<span class="hljs-string">&quot;MyRunnable&quot;</span>);<br>thread.<span class="hljs-built_in">start</span>();<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-3、实现Callable接口"><a href="#3-3、实现Callable接口" class="headerlink" title="3.3、实现Callable接口"></a>3.3、实现Callable接口</h2><p>Callable需要使用FutureTask类帮助执行，FutureTask类结构如下：</p><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20221103142346879.png" alt="image-20221103142346879"></p><p>Future接口：</p><ul><li>判断任务是否完成：isDone()</li><li>能够终端任务：cancel()</li><li>能够获取任务执行结果：get()</li></ul><p><strong>MyCallable.class:</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> MyCallable implements Callable&lt;String&gt;&#123;<br><span class="hljs-built_in">public</span> String <span class="hljs-keyword">call</span>() throws <span class="hljs-keyword">Exception</span>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)&#123;<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(Thread.currentThread().getName()+&quot;执行时间是：&quot;+<span class="hljs-built_in">new</span> <span class="hljs-type">Date</span>().getTime()+&quot;；循环次数是：&quot;+i);<br>&#125;<br><span class="hljs-keyword">return</span> &quot;MyCallable接口执行完成&quot;;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ThreadCreateDemo.class:</strong></p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThreadCreateDemo</span></span>&#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args)&#123;<br><span class="hljs-comment">//1、创建FutureTask实例，创建MyCallable实例</span><br>FutureTask&lt;<span class="hljs-keyword">String</span>&gt; task = <span class="hljs-keyword">new</span> <span class="hljs-type">FutureTask</span>&lt;<span class="hljs-keyword">String</span>&gt;(<span class="hljs-keyword">new</span> <span class="hljs-type">MyCallable</span>());<br><span class="hljs-comment">//2、创建Thread实例，执行FutureTask</span><br>Thread thread = <span class="hljs-keyword">new</span> <span class="hljs-type">Thread</span>(task,<span class="hljs-string">&quot;MyCallable&quot;</span>);<br>thread.start();<br><span class="hljs-comment">//3、在主线程打印信息</span><br><span class="hljs-keyword">for</span>(int i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)&#123;<br>System.out.println(<span class="hljs-string">&quot;main主线程执行了：&quot;</span>+<span class="hljs-keyword">new</span> <span class="hljs-type">Date</span>().getTime());<br>&#125;<br><span class="hljs-comment">//4、获取并打印MyCallable执行结果</span><br><span class="hljs-keyword">try</span>&#123;<br><span class="hljs-keyword">String</span> result = task.<span class="hljs-keyword">get</span>();<br>System.out.println(<span class="hljs-string">&quot;MyCallable执行结果是：&quot;</span>+result)<br>&#125;<span class="hljs-keyword">catch</span> (ExecutionException e)&#123;<br>e.printStackTrace();<br>&#125;<br><br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-4、线程池-Executor"><a href="#3-4、线程池-Executor" class="headerlink" title="3.4、线程池-Executor"></a>3.4、线程池-Executor</h2><p><strong>线程池线类关系图</strong>：</p><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/1378444-20191125143829962-1722847086.png" alt="img"></p><p><strong>MyRunnable.class:</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyRunnable</span> <span class="hljs-title">implements</span> <span class="hljs-title">Runnable</span>&#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)&#123;<br>System.<span class="hljs-keyword">out</span>.println(Thread.currentThread().getName()+<span class="hljs-string">&quot;执行时间是：&quot;</span>+<span class="hljs-keyword">new</span> Date().getTime()+<span class="hljs-string">&quot;;执行次数是：&quot;</span>+i)<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ThreadCreateDemo.class:</strong></p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThreadCreateDemo</span></span>&#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args)&#123;<br><span class="hljs-comment">//1.使用Executors获取线程池对象</span><br>ExecutorService executorService = Executors.<span class="hljs-keyword">new</span><span class="hljs-type">FixedThreadPool</span>(<span class="hljs-number">10</span>);<span class="hljs-comment">//(10个线程)</span><br><span class="hljs-comment">//2.通过线程池对象获取线程并执行MyRunnable实例</span><br>executorService.execute(<span class="hljs-keyword">new</span> <span class="hljs-type">MyRunnable</span>());<br><span class="hljs-comment">//3.主线程打印信息</span><br><span class="hljs-keyword">for</span>(int i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)&#123;<br>System.out.println(<span class="hljs-string">&quot;main主线程执行了：&quot;</span>+<span class="hljs-keyword">new</span> <span class="hljs-type">Date</span>().getTime());<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-5、小结"><a href="#3-5、小结" class="headerlink" title="3.5、小结"></a>3.5、小结</h2><h3 id="3-5-1、实现接口和继承Thread类比较"><a href="#3-5-1、实现接口和继承Thread类比较" class="headerlink" title="3.5.1、实现接口和继承Thread类比较"></a>3.5.1、实现接口和继承Thread类比较</h3><ul><li>接口更高适合多个相同的程序代码的线程去共享同一个资源。</li><li>接口可以避免java中的单继承的局限性。</li><li>接口代码可以被多个线程共享，代码和线程独立。</li><li>线程池只能放入实现Runnable或Callable接口的线程，不能直接放入继承Thread的类。</li></ul><p>扩充：在java中，每次程序运行至少启动2个线程。一个是main线程，一个是垃圾收集线程。</p><h3 id="3-5-2、Runnable和Callable接口比较"><a href="#3-5-2、Runnable和Callable接口比较" class="headerlink" title="3.5.2、Runnable和Callable接口比较"></a>3.5.2、Runnable和Callable接口比较</h3><p><strong>相同点：</strong></p><ul><li>两者都是借口。</li><li>两者都可用来编写多线程程序。</li><li>两者都需要调用Thread.start()启动线程。</li></ul><p><strong>不同点：</strong></p><ul><li>实现Callable接口的线程能返回执行结果，而实现Runnable接口的线程不能返回结果。</li><li>Callable接口的call()方法允许抛出异常，而Runnable接口的run()方法不允许抛异常。</li><li>实现Callable接口的线程可以调用Future.cancel取消执行，而实现Runnable接口的线程不能</li></ul><p><strong>注意点：</strong></p><ul><li>Callable接口支持返回执行结果，此时需要调用FutureTask.get()方法实现，此方法会阻塞主线程直到获取“将来”结果，当不调用此方法时，主线程不会阻塞。</li></ul><h1 id="4、线程生命周期"><a href="#4、线程生命周期" class="headerlink" title="4、线程生命周期"></a>4、线程生命周期</h1><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20221103152613817.png" alt="image-20221103152613817"></p><h2 id="4-1、新建"><a href="#4-1、新建" class="headerlink" title="4.1、新建"></a>4.1、新建</h2><ul><li>new关键字创建了一个线程之后，该线程就处于新建状态。</li><li>JVM为线程分配内存，初始化成员变量值。</li></ul><h2 id="4-2、就绪"><a href="#4-2、就绪" class="headerlink" title="4.2、就绪"></a>4.2、就绪</h2><ul><li>当线程对象调用了start()方法之后，该线程处于就绪状态。</li><li>JVM为线程创建方法栈和程序计数器，等待线程调度器调度。</li></ul><h2 id="4-3、运行"><a href="#4-3、运行" class="headerlink" title="4.3、运行"></a>4.3、运行</h2><ul><li>就绪状态的线程获得CPU资源，开始运行run()方法，该线程进如运行状态</li></ul><h2 id="4-4、阻塞"><a href="#4-4、阻塞" class="headerlink" title="4.4、阻塞"></a>4.4、阻塞</h2><p>当发生如下情况时，线程将会进入阻塞状态</p><ul><li>线程调用sleep()方法主动放弃所占用的处理器资源</li><li>线程调用了一个阻塞式IO方法，在该方法返回之前，该线程被阻塞</li><li>线程试图获得一个同步锁（同步监视器），但该同步锁正在被其他线程所持有。</li><li>线程在等待某个通知（notify）</li><li>程序调用了线程的suspend()方法将该线程挂起。但这个方法容易导致死锁，所以应尽量避免使用该方法</li></ul><h2 id="4-5、死亡"><a href="#4-5、死亡" class="headerlink" title="4.5、死亡"></a>4.5、死亡</h2><p>线程会以如下三种方式结束，结束后就处于死亡状态：</p><ul><li>run()或call()方法执行完成，线程正常结束。</li><li>线程抛出一个未捕获的Exception或Error。</li><li>调用该线程stop()方法来结束该线程，该方法容易导致死亡锁，不推荐使用。</li></ul><h1 id="5、线程安全问题"><a href="#5、线程安全问题" class="headerlink" title="5、线程安全问题"></a>5、线程安全问题</h1><h2 id="5-1、什么是线程安全"><a href="#5-1、什么是线程安全" class="headerlink" title="5.1、什么是线程安全"></a>5.1、什么是线程安全</h2><p>如果有多个线程同时运行同一个实现了Runnable接口的类，程序每次运行结果和单线程运行的结果是一样的，而且其他的变量的值也和预期的是一样的，就是线程安全的。反之，则是线程不安全的。</p><h2 id="5-2、问题演示"><a href="#5-2、问题演示" class="headerlink" title="5.2、问题演示"></a>5.2、问题演示</h2><p><strong>Ticket.class</strong></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> Ticket implements Runnable&#123;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> ticketNum = <span class="hljs-number">100</span>;<br><br>public void run<span class="hljs-literal">()</span>&#123;<br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br><span class="hljs-keyword">if</span>(ticketNum &gt;<span class="hljs-number">0</span>)&#123;<br><span class="hljs-keyword">try</span>&#123;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">100</span>);<br>&#125;catch(InterruptedException e)&#123;<br>e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br><span class="hljs-comment">//2.打印进程号和票号，票数减1</span><br>String name = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.print<span class="hljs-constructor">Ln(<span class="hljs-string">&quot;线程：&quot;</span>+<span class="hljs-params">name</span>+<span class="hljs-string">&quot;售票：&quot;</span>+<span class="hljs-params">ticketNum</span>--)</span><br>&#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>TicketDemo.class</strong></p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketDemo</span></span>&#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args)&#123;<br>Ticket ticket = <span class="hljs-keyword">new</span> <span class="hljs-type">Ticket</span>();<br>Thread thread1 = <span class="hljs-keyword">new</span> <span class="hljs-type">Thread</span>(ticket,<span class="hljs-string">&quot;窗口1&quot;</span>);<br>Thread thread2 = <span class="hljs-keyword">new</span> <span class="hljs-type">Thread</span>(ticket,<span class="hljs-string">&quot;窗口2&quot;</span>);<br>Thread thread3 = <span class="hljs-keyword">new</span> <span class="hljs-type">Thread</span>(ticket,<span class="hljs-string">&quot;窗口3&quot;</span>);<br><br>thread1.start();<br>thread2.start();<br>thread3.start();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>程序出现了两个问题：</p><p>1、相同的票数，比如5这张票被卖了两回。</p><p>2、不存在的票，比如0票与-1票，是不存在的。</p><h2 id="5-3、问题分析"><a href="#5-3、问题分析" class="headerlink" title="5.3、问题分析"></a>5.3、问题分析</h2><p>线程安全问题都是由全局变量及静态变量引起的。</p><p>若每个线程对全局变量、静态变量只读，不屑，一般来说，这个变量是线程安全的。</p><p>若有多个线程同时执行写操作，一般都需要考虑线程同步，否则的话就可能影响线程安全。</p><p>综上所述，线程安全问题根本原因：</p><ul><li>多个线程在操作共享的数据。</li><li>操作共享数据的线程代码有多条。</li><li>多个线程对共享数据有些操作。</li></ul><h2 id="5-4、问题解决-线程同步"><a href="#5-4、问题解决-线程同步" class="headerlink" title="5.4、问题解决-线程同步"></a>5.4、问题解决-线程同步</h2><p>​要解决以上线程问题，只要在某个线程修改共享资源的时候，其他线程不能修改该资源，等待修改完毕同步之后，才能去抢夺CPU资源，完成对应的操作，保证了数据的同步性，解决了线程不安全的现象。</p><p>​为了保证每个现车给都能正常执行共享资源操作，Java引入了7中线程同步机制：</p><ul><li>同步代码块（synchronized）</li><li>同步方法（synchronized）</li><li>同步锁（ReentrantLock）</li><li>特殊域变量（volatile）</li><li>局部变量（ThreadLocal）</li><li>阻塞队列（LinkedBloclingQueue）</li><li>原子变量（Atomic*）</li></ul><h3 id="5-4-1、同步代码块的方式（synchronized）"><a href="#5-4-1、同步代码块的方式（synchronized）" class="headerlink" title="5.4.1、同步代码块的方式（synchronized）"></a>5.4.1、同步代码块的方式（synchronized）</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ticket</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span>&#123;<br><span class="hljs-keyword">private</span> int ticketNum = <span class="hljs-number">100</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-title class_">Object</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br><br><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>)&#123;<br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br><span class="hljs-title function_">synchronized</span>(<span class="hljs-params">obj</span>)&#123;<br><span class="hljs-keyword">if</span>(ticketNum &gt;<span class="hljs-number">0</span>)&#123;<br><span class="hljs-keyword">try</span>&#123;<br><span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">sleep</span>(<span class="hljs-number">100</span>);<br>&#125;<span class="hljs-keyword">catch</span>(<span class="hljs-title class_">InterruptedException</span> e)&#123;<br>e.<span class="hljs-title function_">printStackTrace</span>();<br>&#125;<br><span class="hljs-comment">//2.打印进程号和票号，票数减1</span><br><span class="hljs-title class_">String</span> name = <span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">currentThread</span>().<span class="hljs-title function_">getName</span>();<br><span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">printLn</span>(<span class="hljs-string">&quot;线程：&quot;</span>+name+<span class="hljs-string">&quot;售票：&quot;</span>+ticketNum--)<br>&#125;<br>&#125;<br><br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><strong>同步锁是自定义的obj对象</strong></li><li><strong>这种方式会将多线程变为单线程</strong></li></ul><h3 id="5-4-2、同步方法的方式（synchronized）"><a href="#5-4-2、同步方法的方式（synchronized）" class="headerlink" title="5.4.2、同步方法的方式（synchronized）"></a>5.4.2、同步方法的方式（synchronized）</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> Ticket implements Runnable&#123;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> ticketNum = <span class="hljs-number">100</span>;<br><br>public void run<span class="hljs-literal">()</span>&#123;<br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>sale<span class="hljs-constructor">Ticket()</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> synchronized void sale<span class="hljs-constructor">Ticket()</span>&#123;<br><span class="hljs-keyword">if</span>(ticketNum &gt;<span class="hljs-number">0</span>)&#123;<br><span class="hljs-keyword">try</span>&#123;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>sleep(<span class="hljs-number">100</span>);<br>&#125;catch(InterruptedException e)&#123;<br>e.print<span class="hljs-constructor">StackTrace()</span>;<br>&#125;<br><span class="hljs-comment">//2.打印进程号和票号，票数减1</span><br>String name = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.print<span class="hljs-constructor">Ln(<span class="hljs-string">&quot;线程：&quot;</span>+<span class="hljs-params">name</span>+<span class="hljs-string">&quot;售票：&quot;</span>+<span class="hljs-params">ticketNum</span>--)</span><br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>对于非static方法，同步锁就是this。</li><li>对于static方法，同步锁时当前方法所在类的字节码对象(类名.class)</li></ul><h3 id="5-4-3、同步锁方式（ReentrantLock）"><a href="#5-4-3、同步锁方式（ReentrantLock）" class="headerlink" title="5.4.3、同步锁方式（ReentrantLock）"></a>5.4.3、同步锁方式（ReentrantLock）</h3><p><strong>同步锁：</strong></p><p>java.util.concurrent.locks.Lock 机制提供了比synchronized代码块和synchronized方法更广泛的锁定操作，同步代码块同步方法具有的功能Lock都有，除此之外更加强大，更提现面向对象。</p><p><strong>同步锁方法：</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">lock</span>():加同步锁。</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">unlock</span>():释放同步锁。</span><br></code></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Ticket</span> <span class="hljs-title">implements</span> <span class="hljs-title">Runnable</span>&#123;<br><span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> ticketNum = <span class="hljs-number">100</span>;<br><span class="hljs-keyword">private</span> Lock <span class="hljs-keyword">lock</span> = <span class="hljs-keyword">new</span> ReentrantLock(<span class="hljs-literal">true</span>);<span class="hljs-comment">//参数是是否公平锁：true是公平锁，多个线程都公平拥有执行权。false非公平，独占锁。</span><br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span>&#123;<br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br><span class="hljs-keyword">lock</span>.<span class="hljs-keyword">lock</span>();<br><span class="hljs-keyword">try</span>&#123;<br><span class="hljs-keyword">if</span>(ticketNum &gt;<span class="hljs-number">0</span>)&#123;<br><span class="hljs-keyword">try</span>&#123;<br>Thread.sleep(<span class="hljs-number">100</span>);<br>&#125;<span class="hljs-keyword">catch</span>(InterruptedException e)&#123;<br>e.printStackTrace();<br>&#125;<br><span class="hljs-comment">//2.打印进程号和票号，票数减1</span><br>String name = Thread.currentThread().getName();<br>System.<span class="hljs-keyword">out</span>.printLn(<span class="hljs-string">&quot;线程：&quot;</span>+name+<span class="hljs-string">&quot;售票：&quot;</span>+ticketNum--)<br>&#125;<br>&#125; <span class="hljs-keyword">finally</span>&#123;<br><span class="hljs-keyword">lock</span>.unlock();<br>&#125;<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-5、小结"><a href="#5-5、小结" class="headerlink" title="5.5、小结"></a>5.5、小结</h2><p>Synchronized和Lock区别</p><ul><li>synchronized是java内置关键字，在jvm层面，lock是个java类。</li><li>synchronized无法判断是否获取锁的状态，Lock可以判断是否获取到锁。</li><li>synchronized会自动释放锁（a线程执行完同步代码会释放锁，b线程执行过程中发生异常会释放锁），Lock需要在finally中手动释放锁（unlock()方法释放锁），否则容易造成线程死锁。</li><li>用synchronized关键字的两个线程1和线程2，如果当前线程1获得锁，线程2线程等待。如果线程1阻塞，线程2则会一直等待下去，而Lock锁就不一定会等待下去，如果尝试获取不到锁，线程可以不用一直等待就结束了。</li><li>synchronized的锁可重入、不可中断、非公平、而Lock锁可重入、可判断、可公平（两者皆可）</li><li>Lock锁适合大量同步的代码的同步问题，synchronized锁适合代码少量的同步问题。</li></ul><h1 id="6、线程死锁"><a href="#6、线程死锁" class="headerlink" title="6、线程死锁"></a>6、线程死锁</h1><h2 id="6-1、什么是死锁"><a href="#6-1、什么是死锁" class="headerlink" title="6.1、什么是死锁"></a>6.1、什么是死锁</h2><p>​多线程以及多进程改善了系统资源的利用率并提高了系统的处理能。然而，并发执行也带来了新的问题——死锁。</p><p>​所谓死锁是指多个线程因竞争资源而造成的一种僵局（互相等待），若无外力所用，这些进程都将无法向前推进。</p><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20221103165227368.png" alt="image-20221103165227368"></p><h2 id="6-2、死锁产生的必要条件"><a href="#6-2、死锁产生的必要条件" class="headerlink" title="6.2、死锁产生的必要条件"></a>6.2、死锁产生的必要条件</h2><p>​以下这四个条件是死锁的必要条件，只要系统发生死锁，这些条件必然成立，而只要以下条件之一不满足，就不会发生死锁。</p><h3 id="6-2-1、互斥条件"><a href="#6-2-1、互斥条件" class="headerlink" title="6.2.1、互斥条件"></a>6.2.1、互斥条件</h3><p>​进程要求对所分配的资源（如打印机）进行排他性控制，即在一段时间内某资源仅为一个进程所占有。此时若有其他进程请求该资源，则请求进程只能等待。</p><h3 id="6-2-2、不可剥夺条件"><a href="#6-2-2、不可剥夺条件" class="headerlink" title="6.2.2、不可剥夺条件"></a>6.2.2、不可剥夺条件</h3><p>​进程所获得的资源在未使用完毕之前，不能被其他进程强行夺走，即只能由获得该资源的进程自己来释放（只能是主动释放）。</p><h3 id="6-2-3、请求与保持条件"><a href="#6-2-3、请求与保持条件" class="headerlink" title="6.2.3、请求与保持条件"></a>6.2.3、请求与保持条件</h3><p>​进程已经保持了至少一个资源，但又提出了新的资源请求，而该资源已被其他进程占有，此时请求进程被阻塞，但对自己已获得的资源保持不放。</p><h3 id="6-2-4、循环等待条件"><a href="#6-2-4、循环等待条件" class="headerlink" title="6.2.4、循环等待条件"></a>6.2.4、循环等待条件</h3><p>​存在一种进程资源的循环等待链，链中没有给进程已获得的资源同时被链中下一个进程锁请求。即存在于给处于等待状态的进程集合{p1,p1…,pn},其中pi等待的资源被p(i+1)占有（i0，1，…，n-1），pn等待的资源被p0占有，如图：</p><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20221103165844699.png" alt="循环等待"></p><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20221103165935140.png" alt="满足条件但无死循环"></p><h2 id="6-3、死锁处理"><a href="#6-3、死锁处理" class="headerlink" title="6.3、死锁处理"></a>6.3、死锁处理</h2><h3 id="6-3-1、死锁预防"><a href="#6-3-1、死锁预防" class="headerlink" title="6.3.1、死锁预防"></a>6.3.1、死锁预防</h3><ul><li>预防思索：通过设置某些限制条件，去破坏产生死锁的四个必要条件中的一个或几个条件，来防止死锁的发生。</li><li>避免死锁：在资源的动态分配过程中，用某种方法去防止系统进入不安全的状态，从而避免死锁的发生。</li><li>检测死锁：允许系统在运行过程中发生死锁，但可设置检测机构及时检测死锁的发生，并采取适当措施加以清除。</li><li>解除死锁：当检测出死锁后，便采取适当措施将进程从死锁状态中解脱出来。</li></ul><h4 id="6-3-1-1、破坏”互斥“条件"><a href="#6-3-1-1、破坏”互斥“条件" class="headerlink" title="6.3.1.1、破坏”互斥“条件"></a>6.3.1.1、破坏”互斥“条件</h4><p>”互斥条件“是无法破坏的，因此，在思索预防里主要是破坏其他几个必要条件，而不去涉及破坏”互斥“条件。</p><h4 id="6-3-1-2、破坏”占有并等待“条件"><a href="#6-3-1-2、破坏”占有并等待“条件" class="headerlink" title="6.3.1.2、破坏”占有并等待“条件"></a>6.3.1.2、破坏”占有并等待“条件</h4><p>破坏”占有并等待“条件，就是在系统中不允许进程在已获得某种资源的情况下，申请其他资源。即要想出一个办法，组织进程在持有资源的同时申请其他资源。</p><ul><li>方法一：一次性分配资源，即创建进程时，要求它申请所需要的全部资源，系统或满足其所有要求，或什么也不给它。</li><li>方法二：要求每个进程提出新的资源申请前，释放它所占有的资源。这样，一个进程在需要资源 s 时，须先把它先前占有的资源 R 释放掉，然后才能提出对 s 的申请面积十它可能很快又要用到资源 R 。</li></ul><h4 id="6-3-1-3、破坏”不可抢占“条件"><a href="#6-3-1-3、破坏”不可抢占“条件" class="headerlink" title="6.3.1.3、破坏”不可抢占“条件"></a>6.3.1.3、破坏”不可抢占“条件</h4><p>破坏”不可抢占“条件就是允许资源实行抢夺。</p><ul><li>方法一：如果占有某些资源的一个进程进行进一步资源请求被拒绝，则该进程必须释放它最初占有的资源，如果有必要，可再次请求这些资源和另外的资源。</li><li>方法二：如果一个进程请求当前被另一个进程占有的一个资源，则操作系统可以抢占另一个进程，要求它释放资源。之后任意两个进程的优先级都不相同的条件下，方法二才能预防死锁。</li></ul><h4 id="6-3-1-4、破坏”循环等待“条件"><a href="#6-3-1-4、破坏”循环等待“条件" class="headerlink" title="6.3.1.4、破坏”循环等待“条件"></a>6.3.1.4、破坏”循环等待“条件</h4><p>破环”循环等待“条件的一种方法，是将系统中的所有资源统一编号，进程可在任何时刻提出资源申请，但所有申请必须按照资源的编号顺序（升序）提出。这样做就能保证系统不出现死锁。</p><h3 id="6-3-2、死锁避免"><a href="#6-3-2、死锁避免" class="headerlink" title="6.3.2、死锁避免"></a>6.3.2、死锁避免</h3><p>​避免死锁不严格限制产生死锁的必要条件的存在，因为即使死锁的必要条件存在，也不一定发生死锁。</p><h4 id="6-3-2-1、有序资源分配发"><a href="#6-3-2-1、有序资源分配发" class="headerlink" title="6.3.2.1、有序资源分配发"></a>6.3.2.1、有序资源分配发</h4><p>该算法实现步骤如下：</p><ul><li>必须为所有资源统一编号，例如打印机为1、传真机为2、磁盘为3等</li><li>同类资源必须一次申请完，例如打印机和传真机一般为同一个机器，必须同时申请</li><li>不同类资源必须按顺序申请</li></ul><p>例如：有两个进程P1和P2，有两个资源R1和R2</p><p>P1请求资源：R1、R2</p><p>P2请求资源：R1、R2</p><p>这样就破坏了环路条件，避免了死锁的发生。</p><h4 id="6-3-2-2、银行家算法"><a href="#6-3-2-2、银行家算法" class="headerlink" title="6.3.2.2、银行家算法"></a>6.3.2.2、银行家算法</h4><p>​银行家算法（Banker’s Algorithm）是一个避免死锁（Deadlock）的著名算法，是由艾兹格.迪杰斯特拉在1965年为T.H.E系统设计的一种避免死锁的算法。它以银行借贷系统的分配策略为基础，判断并保证系统的安全运行。流程图如下：</p><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20221103180400921.png" alt="image-20221103180400921"></p><p>​银行家算法的基本思想是分配资源之前，判断系统是否是安全的。若是，才分配。它是最具有代表性的避免死锁的算法。</p><p>设进程i提出请求REQUEST[i],则银行家算法按如下规则进行判断。</p><ol><li><p>如果REQUEST[i]&lt;&#x3D;NEED[i,j],则转②。否则，出错。</p></li><li><p>如果REQUEST[i]&lt;&#x3D;AVAILABLE[i,j],则转③。否则，等待。</p></li><li><p>系统试探分配资源，修改相关数据：</p><p>AVAILABLE[i]  -&#x3D; REQUEST[i];&#x2F;&#x2F;可用资源数-请求资源数</p><p>ALLOCATION[i] +&#x3D; REQUEST[i];&#x2F;&#x2F;已分配资源数+请求资源数</p><p>NEED[i] -&#x3D; REQUEST[i];&#x2F;&#x2F;需要资源数-请求资源数</p></li><li><p>系统执行安全性检查，如果安全，则分配成立；否则试探险性分配作废，系统恢复原装，进程等待。</p></li></ol><h4 id="6-3-2-3、顺序枷锁"><a href="#6-3-2-3、顺序枷锁" class="headerlink" title="6.3.2.3、顺序枷锁"></a>6.3.2.3、顺序枷锁</h4><p>​当个多个线程需要相同的一些锁，但是按照不同的顺序加锁，死锁就很容易发生。</p><p>​例如一下两个线程就会死锁：</p><p>Thread1：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">lock</span> <span class="hljs-title">A</span> (<span class="hljs-params"><span class="hljs-keyword">when</span> C locked</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">lock</span> <span class="hljs-title">B</span> (<span class="hljs-params"><span class="hljs-keyword">when</span> C locked</span>)</span><br><span class="hljs-function">wait <span class="hljs-keyword">for</span> C</span><br></code></pre></td></tr></table></figure><p>Thread2：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">wait for <span class="hljs-selector-tag">A</span><br>wait for <span class="hljs-selector-tag">B</span><br>lock C (when <span class="hljs-selector-tag">A</span> locked)<br></code></pre></td></tr></table></figure><p>​如果能确保所有的线程都是按照相同的顺序获得锁，那么死锁就不会发生。</p><p>​例如以下两个线程就不会死锁</p><p>Thread1：</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cos"><span class="hljs-keyword">lock</span> A<br><span class="hljs-keyword">lock</span> B<br><span class="hljs-keyword">lock</span> C<br></code></pre></td></tr></table></figure><p>Thread2：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">wait </span>for A<br><span class="hljs-keyword">wait </span>for <span class="hljs-keyword">B</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">wait </span>for C<br></code></pre></td></tr></table></figure><p>​按照顺序加锁是一种有效的死锁预防机制。但是，这种方式需要事先知道所有可能会用到的锁，但总是有些时候是无法预知的，所有该种方式只适合特定场景。</p><h4 id="6-3-2-4、限时加锁"><a href="#6-3-2-4、限时加锁" class="headerlink" title="6.3.2.4、限时加锁"></a>6.3.2.4、限时加锁</h4><p>​限时加锁是线程在尝试获取锁的时候加一个超时时间，若超过这个时间则放弃对该所请求，并回退并释放所有已经获得的锁，然后等待一段随机的时间再重试</p><p>​以下是一个例子，展示了两个线程以不同的顺序尝试获取相同的两个锁，在发生超时后回退并重试的场景：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Thread1 locks A<br>Thread2 locks B<br>Thread1 attempts <span class="hljs-keyword">to</span> lock B <span class="hljs-keyword">but</span> <span class="hljs-keyword">is</span> blocked<br>Thread2 attempts <span class="hljs-keyword">to</span> lock A <span class="hljs-keyword">but</span> <span class="hljs-keyword">is</span> blocked<br>Thread1&#x27;s lock attempt <span class="hljs-keyword">on</span> B <span class="hljs-keyword">times</span> out<br>Thread1 backs up <span class="hljs-keyword">and</span> releases A <span class="hljs-keyword">as</span> well<br>Thread1 waits randomly(e.g<span class="hljs-number">.257</span>millis) <span class="hljs-keyword">before</span> retrying<br>Thread2&#x27;s lock attempt <span class="hljs-keyword">on</span> A <span class="hljs-keyword">times</span> out<br>Thread2 backs up <span class="hljs-keyword">and</span> releases B <span class="hljs-keyword">as</span> well<br>Thread2 waits randomly(e.g<span class="hljs-number">.43</span>millis) <span class="hljs-keyword">before</span> retrying<br></code></pre></td></tr></table></figure><p>​在上面的例子中，线程2比线程1早200ms进行重试加锁，因此它可以先成功地获取到两个锁。这时，线程1尝试获取锁A并且处于等待状态。当线程2结束时，线程1也可以顺利的获得这两个锁。</p><p>​这种方式有两个缺点：</p><ul><li>当线程数量少时，该种方式可避免死锁，但当线程数量过多，这些线程的加锁时限相同的概率就会高很多，可能会导致超时后重试的死循环。</li><li>Java中不能对synchronized同步块设置超时时间。你需要创建一个自定义锁，或使用Java5中java.util.concurrent包下的工具。</li></ul><h3 id="6-3-3、死锁检测"><a href="#6-3-3、死锁检测" class="headerlink" title="6.3.3、死锁检测"></a>6.3.3、死锁检测</h3><p>​预防和避免死锁系统开销大且不能充分利用资源，更好的方法是不采取任何限制性措施，而是提供检测和解脱死锁的手段，这就是死锁检测和恢复。</p><p>死锁检测数据结构：</p><ul><li>E是现有资源向量（existing resource vector），代码每种已存在资源的总数。</li><li>A是可用资源向量（available resource vector），那么Ai表示当前可供使用的资源数（即没有分配的资源）</li><li>C是当前分配矩阵（current allocation matrix），C的第i行代表Pi当前所持有的每一种类型资源的资源数</li><li>R是请求矩阵（request matrix），R的每一行代表P所需要的资源的数量</li></ul><p><img src="/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B/image-20221104093135512.png" alt="image-20221104093135512"></p><p>死锁检测步骤：</p><p>1）寻找一个没有结束标记的进程Pi，对于它而言R矩阵的第i行向量小于或等于A。</p><p>2）如果找到了这样一个进程，执行该进程，然后将C矩阵的第i行向量加到A中，标记该进程，并转到第1步。</p><p>3）如果没有这样的进程，那么算法终止</p><p>4）算法结束时，所有没有标记过的进程都是死锁进程。</p><h3 id="6-3-4、死锁恢复"><a href="#6-3-4、死锁恢复" class="headerlink" title="6.3.4、死锁恢复"></a>6.3.4、死锁恢复</h3><p><strong>利用抢占恢复：</strong></p><ul><li>临时将某个资源从它的当前所属进程转移到另一个进程。</li><li>这种做法很可能需要人工干预，主要做法是否可行需取决于资源本身的特性。</li></ul><p><strong>利用滚回恢复：</strong></p><ul><li>周期性的将进程的状态进行备份，当发现进程死锁后，根据备份将该进程复位到一个更早的，还没有取得所需的资源的状态，接着就把这些金源分配给其他死锁进程。</li></ul><p><strong>通过杀死进程恢复：</strong></p><ul><li>最直接简单的方式就是杀死一个或若干个进程。</li><li>尽可能保证杀死的进程可用从头再来而不带来副作用。</li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>并发与多线程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>多线程</tag>
      
      <tag>并发编程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JVM</title>
    <link href="/2022/10/26/JVM/"/>
    <url>/2022/10/26/JVM/</url>
    
    <content type="html"><![CDATA[<hr><p>title: JVM<br>date: 2022-10-26 15:11:15<br>categories:<br>    - Java<br>    - JVM<br>tags:<br>    - JVM<br>    - JVM调优</p><hr><h1 id="什么是JVM-？"><a href="#什么是JVM-？" class="headerlink" title="什么是JVM  ？"></a>什么是JVM  ？</h1><p> 定义：</p><p>Java Virtual  Machine ＿ java程序的运行环环境（java二进制字节码的运行环境）</p><p>好处：</p><p>一次编写，到处运行</p><p>自动内存管理，垃圾回收功能</p><p>数组下标越界检查</p><p>多态</p><p>比较：</p><p>JVM，JRE，JDK</p><p><img src="/JVM/63923723e6a1ee131cc1e80176ef78f8.jpeg" alt="63923723e6a1ee131cc1e80176ef78f8"></p><h1 id="学习JVM有什么用"><a href="#学习JVM有什么用" class="headerlink" title="学习JVM有什么用"></a>学习JVM有什么用</h1><p>面试</p><p>理解底层的实现原理</p><p>中高级程序员必备技能</p><p><img src="/JVM/WEBRESOURCE25e1cb46f11e9645a38327ed44b90a70.png" alt="WEBRESOURCE25e1cb46f11e9645a38327ed44b90a70"></p><p><img src="/JVM/WEBRESOURCE41561026b067c83cc38dbac758f4c182.png" alt="WEBRESOURCE41561026b067c83cc38dbac758f4c182"></p><p>1、JVM内存结构</p><p>2、GC垃圾回收</p><p>3、Java Class（类的字节码结构、编译器的优化等等）</p><p>4、ClassLoader类加载器</p><p>5、类运行时的一些优化（JIT Compiler即时编译器）</p><h1 id="1、内存结构"><a href="#1、内存结构" class="headerlink" title="1、内存结构"></a>1、内存结构</h1><h2 id="1-1、程序计数器"><a href="#1-1、程序计数器" class="headerlink" title="1.1、程序计数器"></a>1.1、程序计数器</h2><p><img src="/JVM/WEBRESOURCEcb7171c291b81048105a4fcc1b3adb03.png" alt="WEBRESOURCEcb7171c291b81048105a4fcc1b3adb03"></p><ul><li><p>定义：Program Counter Register 程序计数器（寄存器）</p></li><li><p>Java中虚拟机指令执行流程：将源代码翻译成为jvm指令，再交给解释器，解释器再交给机器码，机器码再交给CPU运行</p></li><li><p>作用：实际上就是在程序运行中记住下一条jvm指令的执行地址</p></li><li><p>物理上实现程序计数器是通过寄存器(读取速度最快的一个单元)来实现的</p></li></ul><p><img src="/JVM/WEBRESOURCE25c52f6bcc83666a2b7882eeb1aafa8b.png" alt="WEBRESOURCE25c52f6bcc83666a2b7882eeb1aafa8b"></p><ul><li><p>特点：</p></li><li><p>是一块较小的内存空间</p></li><li><p>是线程私有的，随着线程创建而创建，随着线程销毁而销毁</p></li><li><p>不会存在内存溢出</p></li></ul><h2 id="1-2、虚拟机栈"><a href="#1-2、虚拟机栈" class="headerlink" title="1.2、虚拟机栈"></a>1.2、虚拟机栈</h2><p><img src="/JVM/WEBRESOURCE985e7c0ac9a60d961a873d7fd4404924.png" alt="WEBRESOURCE985e7c0ac9a60d961a873d7fd4404924"></p><h3 id="1-2-1、Java-Virtual-Machine-Stacks-Java虚拟机栈"><a href="#1-2-1、Java-Virtual-Machine-Stacks-Java虚拟机栈" class="headerlink" title="1.2.1、Java Virtual Machine Stacks(Java虚拟机栈)"></a>1.2.1、Java Virtual Machine Stacks(Java虚拟机栈)</h3><p><img src="/JVM/WEBRESOURCEf9f8514f9942614b9db2a4882858fe5c.png" alt="WEBRESOURCEf9f8514f9942614b9db2a4882858fe5c"></p><ul><li>虚拟机栈：实际上就是线程运行需要的内存空间</li><li>每个栈有多个栈帧(Frame)组成，对应着每次方法调用时所占用的内存</li><li>栈帧：实际上就是每个方法运行时需要的内存</li><li>每个线程只能有一个活动栈帧，对应着当前正在执行的那个方法</li></ul><p><strong>用处：是用来存放在函数中定义的一些基本类型的变量和对象的引用变量</strong></p><p>问题辨析：</p><p>1.垃圾回收是否涉及栈内存？不涉及</p><p>2.栈内存分配越大越好吗？不是</p><p>3.方法内的局部变量是否线程安全？</p><p>如果方法内局部变量没有逃离方法的作用范围，那么它是线程安全的</p><p>如果是局部变量引用了对象，或逃离方法的作用范围，则需要考虑线程安全问题</p><p><img src="/JVM/WEBRESOURCE478700b79798874b7d2c1a67fac3a8a9.png" alt="WEBRESOURCE478700b79798874b7d2c1a67fac3a8a9"></p><p>只有第一个方法中的sb是线程安全的，另外两个皆是线程不安全的，主要是看</p><h3 id="1-2-2、栈内存溢出"><a href="#1-2-2、栈内存溢出" class="headerlink" title="1.2.2、栈内存溢出"></a>1.2.2、栈内存溢出</h3><p>-Xss256k通过该参数来设置占内存大小</p><p>两种情况会导致占内存溢出(java.lang.StackOverflowError)：</p><ul><li><p>栈帧过多导致占内存溢出(方法递归调用没有限制，或方法循环调用)</p></li><li><p>栈帧过大导致占内存溢出(此类情况不常见)</p></li></ul><h3 id="1-2-3、线程运行诊断"><a href="#1-2-3、线程运行诊断" class="headerlink" title="1.2.3、线程运行诊断"></a>1.2.3、线程运行诊断</h3><p>案例1：cpu占用过多</p><p>解决方案：</p><p>①top命令查看cpu内存使用情况，有无占用cpu极高的进程</p><p>②使用ps H -eo pid,tid,%cpu命令，H意思是打印所有进程中所有线程信息，-eo后面带所感兴趣的内容</p><p>③找到进程中占用cpu过高的线程id</p><p>④使用ps H -eo pid,tid,%cpu | grep 线程id，来筛选出对应占用cpu过高的线程信息</p><p>⑤使用jstack 进程id 命令来查看到底是那个线程出现了问题</p><p>⑥找到对应16进制的nid就是异常线程，进一步定位到出现问题的源代码行数以此来解决问题</p><p><img src="/JVM/WEBRESOURCE66d1731efb3000fc66666d0183362074.png" alt="WEBRESOURCE66d1731efb3000fc66666d0183362074"></p><p>案列2：程序运行很长时间没有结果</p><p>解决方案：</p><p>①使用jstack 进程id 命令来查看</p><p><img src="/JVM/WEBRESOURCE18bfa381dad22654f3ac2ccde831e642.png" alt="WEBRESOURCE18bfa381dad22654f3ac2ccde831e642"></p><p><img src="/JVM/WEBRESOURCEd28878fea598d5b0ce56a9d8156f1569.png" alt="WEBRESOURCEd28878fea598d5b0ce56a9d8156f1569"></p><h2 id="1-3、本地方法栈"><a href="#1-3、本地方法栈" class="headerlink" title="1.3、本地方法栈"></a>1.3、本地方法栈</h2><p><img src="/JVM/WEBRESOURCE434ca1e65faa9ec0c2881244b85f3961.png" alt="WEBRESOURCE434ca1e65faa9ec0c2881244b85f3961"></p><p>本地方法(Native Method)：指不是由java编写的代码，java无法直接调用一些硬件结构和底层，需要通过C++或C语言的接口来间接调用硬件。</p><h2 id="1-4、堆（Heap）"><a href="#1-4、堆（Heap）" class="headerlink" title="1.4、堆（Heap）"></a>1.4、堆（Heap）</h2><p>定义：</p><ul><li>通过new关键字，创建对象都会使用堆内存</li></ul><p>特点</p><ul><li>它是线程共享的，堆中对象都需要考虑线程安全的问题</li><li>有垃圾回收机制</li></ul><p><strong>用处：是用来存放由new创建的对象和数组，即动态申请的内存都存放在堆内存</strong></p><h3 id="1-4-2、堆内存溢出"><a href="#1-4-2、堆内存溢出" class="headerlink" title="1.4.2、堆内存溢出"></a>1.4.2、堆内存溢出</h3><p>java.lang.OutOfMemoryError</p><p>-Xmx8m 设置堆大小的参数</p><p><img src="/JVM/WEBRESOURCE5803d56511d00eed793f6dc0d2218794.png" alt="WEBRESOURCE5803d56511d00eed793f6dc0d2218794"></p><h3 id="1-4-3、堆内存诊断"><a href="#1-4-3、堆内存诊断" class="headerlink" title="1.4.3、堆内存诊断"></a>1.4.3、堆内存诊断</h3><p>1、jps工具</p><ul><li>查看当前系统中有哪些java进程</li></ul><p><img src="/JVM/WEBRESOURCE51d16482e606b4cd95d2f4147ee89ca2.png" alt="WEBRESOURCE51d16482e606b4cd95d2f4147ee89ca2"></p><p>2、jmap工具</p><ul><li><p>jmap -heap 进程id</p></li><li><p>查看堆内存占用情况</p></li></ul><p>3、jconsole工具</p><ul><li>图形界面的，多功能的检测工具，可以连续监测</li></ul><p><img src="/JVM/WEBRESOURCEa7bec0913fa275fc4bb630c57a6bdd2b.png" alt="WEBRESOURCEa7bec0913fa275fc4bb630c57a6bdd2b"></p><p>4、jvisualvm</p><ul><li>图形界面</li></ul><p><img src="/JVM/WEBRESOURCEc770e97a68b73a5e3152462fbef6ec97.png" alt="WEBRESOURCEc770e97a68b73a5e3152462fbef6ec97"></p><p>案列</p><ul><li>垃圾回收后，内存占用仍然很高</li></ul><p>解决方案：</p><p>使用jvisualvm进行排查</p><h2 id="1-5、方法区"><a href="#1-5、方法区" class="headerlink" title="1.5、方法区"></a>1.5、方法区</h2><p><img src="/JVM/WEBRESOURCEe08ac275d90a93d3eb8985ba2171024f.png" alt="WEBRESOURCEe08ac275d90a93d3eb8985ba2171024f"></p><h3 id="1-5-1、Java1-8中对方法中的定义"><a href="#1-5-1、Java1-8中对方法中的定义" class="headerlink" title="1.5.1、Java1.8中对方法中的定义"></a>1.5.1、Java1.8中对方法中的定义</h3><p><img src="/JVM/WEBRESOURCE7f704c060d981682045cbee26a35eeeb.png" alt="WEBRESOURCE7f704c060d981682045cbee26a35eeeb"></p><h3 id="1-5-2、组成"><a href="#1-5-2、组成" class="headerlink" title="1.5.2、组成"></a>1.5.2、组成</h3><p><img src="/JVM/WEBRESOURCE3463ee2dc6acab7dccf42a00cd82cbeb.png" alt="WEBRESOURCE3463ee2dc6acab7dccf42a00cd82cbeb"></p><h3 id="1-5-3、方法区内存溢出"><a href="#1-5-3、方法区内存溢出" class="headerlink" title="1.5.3、方法区内存溢出"></a>1.5.3、方法区内存溢出</h3><ul><li>1.8以前会导致永久代内存溢出</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">演示永久代内存溢出 java.lang.OutOfMemoryError: PermGen space<br>-XX:<span class="hljs-attribute">MaxPermSize</span>=8m<br></code></pre></td></tr></table></figure><ul><li>1.8之后会导致元空间内存溢出</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">演示元空间内存溢出 java.lang.OutOfMemoryError: Metaspace<br>-XX:<span class="hljs-attribute">MaxMetaspaceSize</span>=8M<br></code></pre></td></tr></table></figure><p>反编译指令：<img src="/JVM/image-20221026091351137.png" alt="image-20221026091351137"></p><p><strong>javap</strong>的使用</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">javap </span>是<span class="hljs-keyword">JDK自带的反汇编器，可以查看java编译器为我们生成的字节码。通过它，我们可以对照源代码和字节码，从而了解很多编译器内部的工作。</span><br><span class="hljs-keyword"></span>语法：<br>　　 <span class="hljs-keyword">javap </span>[ 命令选项 ] class. . .<br>　　 <span class="hljs-keyword">javap </span>命令用于解析类文件。其输出取决于所用的选项。若没有使用选项， <span class="hljs-keyword">javap </span>将输出传递给它的类的 public 域及方法。 <span class="hljs-keyword">javap </span>将其输出到标准输出设备上。<br>命令选项<br>　　-help 输出 <span class="hljs-keyword">javap </span>的帮助信息。<br>　　-l 输出行及局部变量表。<br>　　-<span class="hljs-keyword">b </span>确保与 <span class="hljs-keyword">JDK </span><span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-keyword">javap </span>的向后兼容性。<br>　　-public 只显示 public 类及成员。<br>　　-protected 只显示 protected 和 public 类及成员。<br>　　-package 只显示包、protected 和 public 类及成员。这是缺省设置。<br>　　-private 显示所有类和成员。<br>　　-<span class="hljs-keyword">J[flag] </span>直接将 flag 传给运行时系统。<br>　　-s 输出内部类型签名。<br>　　-c 输出类中各方法的未解析的代码，即构成 <span class="hljs-keyword">Java </span>字节码的指令。<br>　　-verbose 输出堆栈大小、各方法的 locals 及 args 数,以及class文件的编译版本<br>　　-classpath[路径] 指定 <span class="hljs-keyword">javap </span>用来查找类的路径。如果设置了该选项，则它将覆盖缺省值或 CLASSPATH 环境变量。目录用冒号分隔。<br> 　 -<span class="hljs-keyword">bootclasspath[路径] </span>指定加载自举类所用的路径。缺省情况下，自举类是实现核心 <span class="hljs-keyword">Java </span>平台的类，位于 <span class="hljs-keyword">jrelib下面。</span><br><span class="hljs-keyword"></span>　　-<span class="hljs-keyword">extdirs[dirs] </span>覆盖搜索安装方式扩展的位置。扩展的缺省位置是 <span class="hljs-keyword">jrelibext。</span><br></code></pre></td></tr></table></figure><h3 id="1-5-4、运行时常量池"><a href="#1-5-4、运行时常量池" class="headerlink" title="1.5.4、运行时常量池"></a>1.5.4、运行时常量池</h3><ul><li>常量池，就是一张表，虚拟机指令根据这张常量表找到要执行的类名、方法名、参数类型、字面量等信息</li><li>运行时常量池，常量池是*.class文件中的，当该类被加载，它的常量池信息就会放入运行时常量池，并把里面的符号地址变为真实地址</li></ul><h3 id="1-5-5、StringTable"><a href="#1-5-5、StringTable" class="headerlink" title="1.5.5、StringTable"></a>1.5.5、StringTable</h3><p><img src="/JVM/image-20221026095722397.png" alt="image-20221026095722397"></p><ol><li>常量池中的信息，都会被加载到运行时常量池中，这时a、b、ab都是常量池中的符号，还没有变为java字符串对象</li><li>当程序运行到该处时ldc #7会把a符号变为“a”字符串对象此时串池StringTable[]若没有“a”对象就会把对象“a”放入串池StringTable[“a”]、ldc #9会把b符号变为“b”字符串对象此时串池StringTable[“a”]若没有“a”对象就会把对象“a”放入串池StringTable[“a”,”b”]、ldc #11会把ab符号变为“ab”字符串对象此时串池StringTable[“a”,”b”]若没有“a”对象就会把对象“a”放入串池StringTable[“a”,”b”,”ab”]</li></ol><p><strong>StringTable特性</strong></p><ul><li>常量池中的字符串仅是符号，第一次用到时才变为对象</li><li>利用串池的机制，来避免重复创建字符串对象</li><li>字符串变量拼接的原理时StringBuilder(1.8)</li><li>字符串常量拼接的原理时编译期优化</li><li>可以使用intern方法，主动将串池中还没有的字符串对象放入串池<ul><li>jdk1.8将这个字符串对象尝试放入串池，<strong>如果有则并不会放入，如果没有则把元对象放入串池，会把串池中的对象返回</strong></li><li>jdk1.6将这个字符串对象尝试放入串池，<strong>如果有则并不会放入，如果没有会把此对象复制一份（副本跟原对象不同），将副本放入串池，会把串池中的副本对象返回</strong></li></ul></li></ul><h3 id="1-5-6、StringTable位置"><a href="#1-5-6、StringTable位置" class="headerlink" title="1.5.6、StringTable位置"></a>1.5.6、StringTable位置</h3><p><img src="/JVM/WEBRESOURCE3463ee2dc6acab7dccf42a00cd82cbeb.png" alt="WEBRESOURCE3463ee2dc6acab7dccf42a00cd82cbeb"></p><h3 id="1-5-7、StringTable垃圾回收"><a href="#1-5-7、StringTable垃圾回收" class="headerlink" title="1.5.7、StringTable垃圾回收"></a>1.5.7、StringTable垃圾回收</h3><h3 id="1-5-8、性能调优"><a href="#1-5-8、性能调优" class="headerlink" title="1.5.8、性能调优"></a>1.5.8、性能调优</h3><ul><li>调整 -XX:StringTableSize&#x3D;桶个数</li><li>考虑将字符串对象是否入池</li></ul><h2 id="1-6、直接内存（操作系统的内存）"><a href="#1-6、直接内存（操作系统的内存）" class="headerlink" title="1.6、直接内存（操作系统的内存）"></a>1.6、直接内存（操作系统的内存）</h2><h3 id="1-6-1、Direct-Memory"><a href="#1-6-1、Direct-Memory" class="headerlink" title="1.6.1、Direct Memory"></a>1.6.1、Direct Memory</h3><ul><li>常见于NIO操作时，用于数据缓冲区</li><li>分配回收成本较高，但读写性能高</li><li>不受JVM内存回收管理</li></ul><p>传统IO流文件读写过程：</p><p><img src="/JVM/image-20221026170923648.png" alt="image-20221026170923648"></p><p>NIO文件读写过程</p><p><img src="/JVM/image-20221026171211997.png" alt="image-20221026171211997"></p><h2 id="1-6-2、分配和回收原理"><a href="#1-6-2、分配和回收原理" class="headerlink" title="1.6.2、分配和回收原理"></a>1.6.2、分配和回收原理</h2><ul><li>使用了Unsafe对象 完成直接内存的分配回收，并且回收需要主动调用freeMemory方法</li><li>ByteBuffer的实现类内部，使用了Cleaner（虚引用）来检测ByteBuffer对象，一旦ByteBuffer对象被垃圾回收，那么就会由ReferenceHandler线程通过Cleaner的clean方法调用freeMemory来释放直接内存</li></ul><p>-XX:+DisableExplicitGC （禁用显示的垃圾回收）也就是代码中的System.gc()</p><h1 id="2、垃圾回收"><a href="#2、垃圾回收" class="headerlink" title="2、垃圾回收"></a>2、垃圾回收</h1><h2 id="2-1、如何判断对象可以回收？"><a href="#2-1、如何判断对象可以回收？" class="headerlink" title="2.1、如何判断对象可以回收？"></a>2.1、如何判断对象可以回收？</h2><h3 id="2-1-1、引用计数法"><a href="#2-1-1、引用计数法" class="headerlink" title="2.1.1、引用计数法"></a>2.1.1、引用计数法</h3><p><strong>概念：</strong>只要一个对象被其他变量所引用，那我就让这个对象的计数加一，如果它被引用了两次那就让它的计数变成二，如果某个变量不再引用它了那么就让它的计数减一，当这个对象的引用计数变为零的时候那就意味着没有人引用它了，那么它就会被垃圾回收。</p><p><strong>问题：</strong>循环引用</p><p><img src="/JVM/image-20221027085226369.png" alt="image-20221027085226369"></p><p>此时A、B的引用计数都为1，但没有对象使用他们了，又由于他们的引用计数都不唯一导致它们不能被垃圾回收。（早期python在垃圾回收时就采用了引用技术的算法。）</p><h3 id="2-1-2、可达性分析法"><a href="#2-1-2、可达性分析法" class="headerlink" title="2.1.2、可达性分析法"></a>2.1.2、可达性分析法</h3><p><strong>概念：</strong>首先会确定一系列根对象，根对象就是那些肯定不能当成垃圾被回收的对象。在垃圾回收之前首先会对堆中的所有对象进行一边扫描，看看哪些对象会被根对象直接或间接的引用，如果是这个对象就不能被回收，反之可以被回收。</p><ul><li>Java虚拟机中的垃圾回收器采用可达性分析算法来探索所有存活的对象</li><li>扫描堆中的对象，看是否能够沿着GC Root对象为起点的引用链找到该对象，找不到，表示可以回收</li><li>哪些对象可以作为GC Root？（System Class、Native Stack、Thread、Busy Monitor）</li></ul><p>使用过eclipse提供的Memory Analyzer(MAT)来帮助分析。</p><p>为了配合MAT的使用先运行起来再通过jmap快照抓取下来再用MAT进行分析。</p><h3 id="2-1-3、四种引用"><a href="#2-1-3、四种引用" class="headerlink" title="2.1.3、四种引用"></a>2.1.3、四种引用</h3><p><img src="/JVM/image-20221027092433116.png" alt="image-20221027092433116"></p><h4 id="2-1-3-1、强引用"><a href="#2-1-3-1、强引用" class="headerlink" title="2.1.3.1、强引用"></a>2.1.3.1、强引用</h4><ul><li><p>定义：沿着某个GC Root的引用链能够找到的对象就属于强引用。</p></li><li><p>回收条件：只有当所有强引用都断开时该对象才能被垃圾回收。</p></li></ul><h4 id="2-1-3-2、软引用-SoftReference"><a href="#2-1-3-2、软引用-SoftReference" class="headerlink" title="2.1.3.2、软引用(SoftReference)"></a>2.1.3.2、软引用(SoftReference)</h4><ul><li><p>仅有软引用引用过该对象时，在垃圾回收后，内存仍不足时会再次触发垃圾回收，回收引用对象</p></li><li><p>可以配合引用队列来释放软引用自身</p></li></ul><h4 id="2-1-3-3、弱引用-WeakReference"><a href="#2-1-3-3、弱引用-WeakReference" class="headerlink" title="2.1.3.3、弱引用(WeakReference)"></a>2.1.3.3、弱引用(WeakReference)</h4><ul><li>仅有弱引用引用该对象时，在垃圾回收时，无论内存是否充足，都会回收弱引用对象</li><li>可以配合引用队列来释放弱引用自身</li></ul><h4 id="2-1-3-4、虚引用-PhantomReference"><a href="#2-1-3-4、虚引用-PhantomReference" class="headerlink" title="2.1.3.4、虚引用(PhantomReference)"></a>2.1.3.4、虚引用(PhantomReference)</h4><ul><li>必须配合引用该队列使用，主要配合ByteBuffer使用，被引用对象回收时，会将虚引用入队，由Reference Handler线程调用虚拟引用相关方法释放直接内存</li></ul><h4 id="2-1-3-5、终结器引用-FinalReference"><a href="#2-1-3-5、终结器引用-FinalReference" class="headerlink" title="2.1.3.5、终结器引用(FinalReference)"></a>2.1.3.5、终结器引用(FinalReference)</h4><ul><li>必须配合引用该队列使用，无需手动编码，但其内部配合引用队列使用，在垃圾回收时，终结器引用入队(被引用对象暂时没看被回收)，再由Finalizer线程通过终结器引用找到被引用对象并调用它的finalize方法，第二次GC时才能回收被引用对象。</li></ul><p><strong>软引用实例：</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示软引用, 配合引用队列</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo2_4</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-built_in">int</span> _4MB = <span class="hljs-number">4</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        List&lt;SoftReference&lt;<span class="hljs-built_in">byte</span>[]&gt;&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br><br>        <span class="hljs-comment">// 引用队列</span><br>        ReferenceQueue&lt;<span class="hljs-built_in">byte</span>[]&gt; queue = <span class="hljs-keyword">new</span> ReferenceQueue&lt;&gt;();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>            <span class="hljs-comment">// 关联了引用队列， 当软引用所关联的 byte[]被回收时，软引用自己会加入到 queue 中去</span><br>            SoftReference&lt;<span class="hljs-built_in">byte</span>[]&gt; <span class="hljs-keyword">ref</span> = <span class="hljs-keyword">new</span> SoftReference&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[_4MB], queue);<br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-keyword">ref</span>.<span class="hljs-keyword">get</span>());<br>            list.<span class="hljs-keyword">add</span>(<span class="hljs-keyword">ref</span>);<br>            System.<span class="hljs-keyword">out</span>.println(list.size());<br>        &#125;<br><br>        <span class="hljs-comment">// 从队列中获取无用的 软引用对象，并移除</span><br>        Reference&lt;? extends <span class="hljs-built_in">byte</span>[]&gt; poll = queue.poll();<br>        <span class="hljs-keyword">while</span>( poll != <span class="hljs-literal">null</span>) &#123;<br>            list.<span class="hljs-keyword">remove</span>(poll);<br>            poll = queue.poll();<br>        &#125;<br><br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;===========================&quot;</span>);<br>        <span class="hljs-keyword">for</span> (SoftReference&lt;<span class="hljs-built_in">byte</span>[]&gt; reference : list) &#123;<br>            System.<span class="hljs-keyword">out</span>.println(reference.<span class="hljs-keyword">get</span>());<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>弱引用实例</strong>：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 演示弱引用</span><br><span class="hljs-comment"> * -Xmx20m -XX:+PrintGCDetails -verbose:gc</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo2_5</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-built_in">int</span> _4MB = <span class="hljs-number">4</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        <span class="hljs-comment">//  list --&gt; WeakReference --&gt; byte[]</span><br>        List&lt;WeakReference&lt;<span class="hljs-built_in">byte</span>[]&gt;&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>            WeakReference&lt;<span class="hljs-built_in">byte</span>[]&gt; <span class="hljs-keyword">ref</span> = <span class="hljs-keyword">new</span> WeakReference&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[_4MB]);<br>            list.<span class="hljs-keyword">add</span>(<span class="hljs-keyword">ref</span>);<br>            <span class="hljs-keyword">for</span> (WeakReference&lt;<span class="hljs-built_in">byte</span>[]&gt; w : list) &#123;<br>                System.<span class="hljs-keyword">out</span>.print(w.<span class="hljs-keyword">get</span>()+<span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>            System.<span class="hljs-keyword">out</span>.println();<br><br>        &#125;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;循环结束：&quot;</span> + list.size());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-2、垃圾回收算法"><a href="#2-2、垃圾回收算法" class="headerlink" title="2.2、垃圾回收算法"></a>2.2、垃圾回收算法</h2><h3 id="2-2-1、标记清除"><a href="#2-2-1、标记清除" class="headerlink" title="2.2.1、标记清除"></a>2.2.1、标记清除</h3><p>定义：Mark Sweep</p><p><img src="/JVM/image-20221027135600774.png" alt="image-20221027135600774"></p><p>优点：速度快</p><p>缺点：容易产生内存碎片</p><h3 id="2-2-2、标记整理"><a href="#2-2-2、标记整理" class="headerlink" title="2.2.2、标记整理"></a>2.2.2、标记整理</h3><p>定义：Mark Compact</p><p><img src="/JVM/image-20221027135813905.png" alt="image-20221027135813905"></p><p>优点：不会产生内存碎片</p><p>缺点：效率比较低</p><h3 id="2-2-3、复制"><a href="#2-2-3、复制" class="headerlink" title="2.2.3、复制"></a>2.2.3、复制</h3><p>定义：Copy</p><p><img src="/JVM/image-20221027135944213.png" alt="image-20221027135944213"></p><p><img src="/JVM/image-20221027135957779.png" alt="image-20221027135957779"></p><p><img src="/JVM/image-20221027140013820.png" alt="image-20221027140013820"> </p><p><img src="/JVM/image-20221027140030356.png" alt="image-20221027140030356"></p><p>优点：不会产生内存碎片</p><p>缺点：会占用双倍的内存空间</p><h2 id="2-3、分代垃圾回收"><a href="#2-3、分代垃圾回收" class="headerlink" title="2.3、分代垃圾回收"></a>2.3、分代垃圾回收</h2><p><strong>老年代：</strong>Java中长时间使用（长时间存活）的对象存储在老年代当中，老年代的垃圾回收很久才发生一次</p><p><strong>新生代</strong>：Java中用完了就可以丢弃的（朝生幕死）对象存储在新生代当中，新生代的垃圾回收(Minor GC)发生的比较频繁</p><p><img src="/JVM/image-20221027140540693.png" alt="image-20221027140540693"></p><p><strong>分代垃圾回收的执行顺序：</strong></p><p><img src="/JVM/image-20221027141430630.png" alt="image-20221027141430630"></p><ul><li><p>对象首先分配在伊甸园区域</p></li><li><p>当新生代空间不足时，触发minor GC，伊甸园和from存活的对象使用copy算法复制到to中，存活的对象年龄加一并且交换from和to</p></li><li><p>minor GC会引发stop the world，暂停其它用户的线程，等垃圾回收结束，用户线程才恢复运行</p></li><li><p>当对象寿命超过阈值时，会晋升至老年代，最大寿命是15（4bit）</p></li><li><p>当老年代空间不足，会尝试先出发minor GC，如果之后仍空间不足，那么会触发full GC(STW的时间更长)。</p></li><li><p>如果full GC之后空间仍不足，则会触发OOM(Out Of Memory)异常</p><p><strong>相关VM参数</strong></p><table><thead><tr><th>含义</th><th>参数</th></tr></thead><tbody><tr><td>堆初始大小</td><td>-Xms</td></tr><tr><td>堆最大大小</td><td>-Xmx或-XX:MaxHeapSize&#x3D;size</td></tr><tr><td>新生代大小</td><td>-Xmn或（-XX:NewSize&#x3D;size + -XX:MaxNewSize&#x3D;size）</td></tr><tr><td>幸存区比例（动态）</td><td>-XX:InitialSurvivorRatio&#x3D;ratio和-XX:+UseAdaptiveSizePolicy</td></tr><tr><td>幸存区比例</td><td>-XX:SurvivorRatio&#x3D;ratio</td></tr><tr><td>晋升阈值</td><td>-XX:MaxTenuringThreshold&#x3D;threshold</td></tr><tr><td>晋升详情</td><td>-XX:+PrintTenuringDistribution</td></tr><tr><td>GC详情</td><td>-XX:+PrintGCDetails -verbose:gc</td></tr><tr><td>Full GC 前 Minor GC</td><td>-XX:+ScavengeBeforeFullGC</td></tr></tbody></table></li><li><p>一个线程内部的OOM不会导致整个主线程终短</p></li></ul><h2 id="2-4、垃圾回收器"><a href="#2-4、垃圾回收器" class="headerlink" title="2.4、垃圾回收器"></a>2.4、垃圾回收器</h2><h3 id="2-4-1、串行"><a href="#2-4-1、串行" class="headerlink" title="2.4.1、串行"></a>2.4.1、串行</h3><ul><li><p>单线程</p></li><li><p>堆内存较小，适合个人电脑</p></li><li><p>开启串行回收器语句： -XX:UseSerialGC &#x3D; Serial + SerialOld</p><p>**ps:**此处的Serial处于新生代，采用的算法为复制(Copy)算法。Serialold处于老年代，采用的算法为标记整理算法。</p><p><img src="/JVM/image-20221027200556584.png" alt="image-20221027200556584"></p></li></ul><h3 id="2-4-2、吞吐量优先"><a href="#2-4-2、吞吐量优先" class="headerlink" title="2.4.2、吞吐量优先"></a>2.4.2、吞吐量优先</h3><ul><li><p>多线程</p></li><li><p>堆内存较大，多核CPU</p></li><li><p>让单位时间内，STW的时间最短0.2 0.2 &#x3D; 0.4，垃圾回收时间占比最低，这样就称吞吐量高</p></li><li><p>开启吞吐量优先回收器语句：-XX:+UseParallelGC ~ -XX:+UseParallelOldGC</p><ul><li>控制线程数：-XX:ParallelGCThreads&#x3D;n</li><li>采用调整自适应大小策略(调整的是新生代的大小)：-XX:+UseAdaptiveSizePolicy</li><li>用来调整堆的大小来达到期望的吞吐量目标-XX:GCTimeRatio&#x3D;ratio （公式：1&#x2F;(1+ratio)）(若ratio为99，则意为允许在100分钟内有1分钟的时间来STW用来GC)</li><li>用来调整每次垃圾回收的期望时间(默认的为200ms)-XX:MaxGCPauseMillis&#x3D;ms</li></ul><p><img src="/JVM/image-20221027201022728.png" alt="image-20221027201022728"></p></li></ul><h3 id="2-4-3、响应时间优先"><a href="#2-4-3、响应时间优先" class="headerlink" title="2.4.3、响应时间优先"></a>2.4.3、响应时间优先</h3><ul><li><p>多线程</p></li><li><p>堆内存较大，多核CPU</p></li><li><p>尽可能让单次STW的时间最短0.1 0.1 0.1 0.1 0.1&#x3D;0.5</p></li><li><p>开启响应时间优先的回收器语句：-XX:+UseConcMarkSweepGC ~ -XX:+UseParNewGC ~ SerialOld</p><ul><li><p>并行和并发的线程数设置：-XX:ParallelGCThreads&#x3D;n ~ -XX:ConcGCThreads&#x3D;threads</p></li><li><p>执行CMS垃圾回收的内存占比：-XX:CMSInitiatingOccupancyFraction&#x3D;percent</p></li><li><p>设置CMS垃圾回收重新标记前清除垃圾：-XX:+CMSScavengeBeforeRemark</p></li></ul></li></ul><p><strong>ps：</strong>此处的ConcMarkSweepGC是工作在老年代的基于标记清除法的垃圾回收器，与之配合的是UseParNewGC，它是工作在新生代的基于复制算法的垃圾回收器。有时CMSGC会发生并发失败的问题，这个时候会采用补救措施SerialOld。</p><p><img src="/JVM/image-20221027202342818.png" alt="image-20221027202342818"></p><h3 id="2-4-4、G1"><a href="#2-4-4、G1" class="headerlink" title="2.4.4、G1"></a>2.4.4、G1</h3><p>定义：Garbage First</p><ul><li>2004 论文发布 </li><li>2009 JDK 6u14 体验 </li><li>2012 JDK 7u4 官方支持 </li><li>2017 JDK 9 默认</li></ul><p>适用场景</p><ul><li>同时注重吞吐量（Throughput）和低延迟（Low latency），默认的暂停目标是 200 ms</li><li>超大堆内存，会将堆划分为多个大小相等的 Region</li><li>整体上是 标记+整理 算法，两个区域之间是 复制 算法</li></ul><p>相关JVM参数</p><ul><li><p>开启G1语句：-XX:+UseG1GC </p><ul><li><p>-XX:G1HeapRegionSize&#x3D;size </p></li><li><p>-XX:MaxGCPauseMillis&#x3D;time</p></li></ul></li></ul><h4 id="1）G1垃圾回收阶段"><a href="#1）G1垃圾回收阶段" class="headerlink" title="1）G1垃圾回收阶段"></a>1）G1垃圾回收阶段</h4><p><img src="/JVM/image-20221028090805853.png" alt="image-20221028090805853"></p><h4 id="2）Young-Collection"><a href="#2）Young-Collection" class="headerlink" title="2）Young Collection"></a>2）Young Collection</h4><ul><li>会STW</li></ul><p><img src="/JVM/image-20221028094245001.png" alt="image-20221028094245001"></p><p><img src="/JVM/image-20221028094253567.png" alt="image-20221028094253567"></p><p><img src="/JVM/image-20221028094305004.png" alt="image-20221028094305004"></p><h4 id="3）Young-Collection-CM-Concurrent-Mark"><a href="#3）Young-Collection-CM-Concurrent-Mark" class="headerlink" title="3）Young Collection + CM(Concurrent Mark)"></a>3）Young Collection + CM(Concurrent Mark)</h4><ul><li>在Young GC时会进行GC Root的初始标记</li><li>老年代占用堆空间比例达到阈值时，进行并发标记(不会STW)，有下面的JVM参数决定</li></ul><p>-XX:InitiatingHeapOccupancyPercent&#x3D;percent(默认45%)</p><p><img src="/JVM/image-20221028094850389.png" alt="image-20221028094850389"></p><h4 id="4）Mixed-Collection"><a href="#4）Mixed-Collection" class="headerlink" title="4）Mixed Collection"></a>4）Mixed Collection</h4><p>会对E、S、O进行全面垃圾回收</p><ul><li>最终标记(Remark)会STW</li><li>拷贝存活(Evacuation)会STW</li></ul><p>-XX:MaxGCPauseMillis&#x3D;ms</p><p><img src="/JVM/image-20221028095006258.png" alt="image-20221028095006258"></p><h4 id="5）Full-GC"><a href="#5）Full-GC" class="headerlink" title="5）Full GC"></a>5）Full GC</h4><ul><li>SerialGC<ul><li>新生代内存不足发生的垃圾收集器 - minor GC</li><li>老年代内存不足发生的垃圾收集器 - ful GC</li></ul></li><li>ParallelGC<ul><li>新生代内存不足发生的垃圾收集 - minor GC</li><li>老年代内存不足发生的垃圾收集 - full GC</li></ul></li><li>CMS<ul><li>新生代内存不足发生的垃圾收集 - minor GC</li><li>老年代内存不足</li></ul></li><li>G1<ul><li>新生代内存不足发生的垃圾收集 - minor GC</li><li>老年代内存不足</li></ul></li></ul><h4 id="6）Young-Collection跨代引用"><a href="#6）Young-Collection跨代引用" class="headerlink" title="6）Young Collection跨代引用"></a>6）Young Collection跨代引用</h4><ul><li>新生代回收的跨代引用(老年代引用新生代)问题</li></ul><p><img src="/JVM/image-20221028095213153.png" alt="image-20221028095213153"></p><ul><li>卡表与 Remembered Set</li><li>在引用变更时通过 post-write barrier + dirty card queue</li><li>concurrent refinement threads 更新 Remembered Set</li></ul><p><img src="/JVM/image-20221028095242383.png" alt="image-20221028095242383"></p><h4 id="7）Remark"><a href="#7）Remark" class="headerlink" title="7）Remark"></a>7）Remark</h4><ul><li>pre-write barrier + satb_mark_queue</li></ul><p><img src="/JVM/image-20221028095308744.png" alt="image-20221028095308744"></p><h4 id="8）JDK-8u20字符串去重"><a href="#8）JDK-8u20字符串去重" class="headerlink" title="8）JDK 8u20字符串去重"></a>8）JDK 8u20字符串去重</h4><ul><li>优点：节省大量内存</li><li>缺点：略微躲闪用了cpu时间，新生代回收时间略微增加</li></ul><p>-XX:+UseStringDeduplication</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">String</span> s1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">&quot;hello&quot;</span>); <span class="hljs-regexp">//</span> char[]&#123;<span class="hljs-string">&#x27;h&#x27;</span>,<span class="hljs-string">&#x27;e&#x27;</span>,<span class="hljs-string">&#x27;l&#x27;</span>,<span class="hljs-string">&#x27;l&#x27;</span>,<span class="hljs-string">&#x27;o&#x27;</span>&#125;<br><span class="hljs-built_in">String</span> s2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">&quot;hello&quot;</span>); <span class="hljs-regexp">//</span> char[]&#123;<span class="hljs-string">&#x27;h&#x27;</span>,<span class="hljs-string">&#x27;e&#x27;</span>,<span class="hljs-string">&#x27;l&#x27;</span>,<span class="hljs-string">&#x27;l&#x27;</span>,<span class="hljs-string">&#x27;o&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><ul><li>将所有新分配的字符串放入一个队列</li><li>当新生代回收时，G1并发检查是否有字符串重复</li><li>如果它们值一样，让它们引用同一个 char[]</li><li>注意，与 String.intern() 不一样<ul><li>String.intern() 关注的是字符串对象</li><li>而字符串去重关注的是 char[]</li><li>在 JVM 内部，使用了不同的字符串表</li></ul></li></ul><h4 id="9）JDK-8u40并发标记类卸载"><a href="#9）JDK-8u40并发标记类卸载" class="headerlink" title="9）JDK 8u40并发标记类卸载"></a>9）JDK 8u40并发标记类卸载</h4><p>所有对象都经过并发标记后，就能知道哪些类不再被使用，当一个类加载器的所有类都不再使用，则卸 载它所加载的所有类</p><p>-XX:+ClassUnloadingWithConcurrentMark 默认启用</p><h4 id="10）JDK-8u60回收巨型对象"><a href="#10）JDK-8u60回收巨型对象" class="headerlink" title="10）JDK 8u60回收巨型对象"></a>10）JDK 8u60回收巨型对象</h4><ul><li>一个对象大于 region 的一半时，称之为巨型对象</li><li>G1 不会对巨型对象进行拷贝</li><li>回收时被优先考虑</li><li>G1 会跟踪老年代所有 incoming 引用，这样老年代 incoming 引用为0 的巨型对象就可以在新生 代垃圾回收时处理掉</li></ul><h4 id="11）JDK-9-并发标记起始时间的调整"><a href="#11）JDK-9-并发标记起始时间的调整" class="headerlink" title="11）JDK 9 并发标记起始时间的调整"></a>11）JDK 9 并发标记起始时间的调整</h4><ul><li>并发标记必须在堆空间占满前完成，否则退化为 FullGC</li><li>JDK 9 之前需要使用 -XX:InitiatingHeapOccupancyPercent</li><li>JDK 9 可以动态调整<ul><li>-XX:InitiatingHeapOccupancyPercent 用来设置初始值</li><li>进行数据采样并动态调整</li><li>总会添加一个安全的空档空间</li></ul></li></ul><h4 id="12）JDK-9-更高效的回收"><a href="#12）JDK-9-更高效的回收" class="headerlink" title="12）JDK 9 更高效的回收"></a>12）JDK 9 更高效的回收</h4><ul><li>250+增强 </li><li>180+bug修复 </li><li><a href="https://docs.oracle.com/en/java/javase/12/gctuning">https://docs.oracle.com/en/java/javase/12/gctuning</a></li></ul><h2 id="2-5、垃圾回收调优"><a href="#2-5、垃圾回收调优" class="headerlink" title="2.5、垃圾回收调优"></a>2.5、垃圾回收调优</h2><p>预备知识</p><ul><li>掌握GC相关的VM参数，会基本的空间调整</li><li>掌握相关工具</li><li>明白一点：调优跟应用、环境有关，没有放之四海而皆准的法则</li></ul><p>查看当前虚拟机运行参数：</p><p>java -XX:+PrintFlagsFinal -version | findstr “GC”</p><ul><li>-XX:+PrintFlagsInitial 是打印所有的默认参数设置</li><li>-XX:+PrintFlagsFinal 是打印最终值，如果某个默认值被新值覆盖，显示新值</li><li>-XX:+PrintCommandLineFlags 是打印那些被新值覆盖的项</li></ul><h3 id="2-5-1、调优领域"><a href="#2-5-1、调优领域" class="headerlink" title="2.5.1、调优领域"></a>2.5.1、调优领域</h3><ul><li>内存</li><li>竞争锁</li><li>cpu占用</li><li>IO</li></ul><h3 id="2-5-2、确定目标"><a href="#2-5-2、确定目标" class="headerlink" title="2.5.2、确定目标"></a>2.5.2、确定目标</h3><ul><li>[低延迟]还是[高吞吐量]，选择合适的回收器，比如：如果开发的是进行科学研究一般要求高吞吐量而不是低延迟，而如果开发的是互联网项目一般要求低延迟。</li><li>低延迟的垃圾回收器有：CMS,G1,ZGC</li><li>高吞吐量的垃圾回收器有：ParallelGC</li><li>Zing虚拟机号称0停顿</li></ul><h3 id="2-5-3、最快的GC是不发生GC"><a href="#2-5-3、最快的GC是不发生GC" class="headerlink" title="2.5.3、最快的GC是不发生GC"></a>2.5.3、最快的GC是不发生GC</h3><ul><li>查看FullGC前后的内存占用，考虑下面几个问题<ul><li>数据是不是太多？</li><li>数据表示是否太臃肿？<ul><li>对象图</li><li>对象大小</li></ul></li><li>是否存在内存泄漏?</li></ul></li></ul><h3 id="2-5-4、新生代调优"><a href="#2-5-4、新生代调优" class="headerlink" title="2.5.4、新生代调优"></a>2.5.4、新生代调优</h3><ul><li>新生代的特点<ul><li>所有的new操作的内存分配非常廉价<ul><li>TLAB thread-local allocation buffer</li></ul></li><li>死亡对象的回收代价是零</li><li>大部分对象用过即死</li><li>Minor GC的时间远远低于Full GC</li></ul></li><li>新生代的内存越大越好吗？</li></ul><p>-Xmn Sets the initial and maximum size (in bytes) of the heap for the young generation (nursery). GC is performed in this region more often than in other regions. If the size for the young generation is too small, then a lot of minor garbage collections are performed. If the size is too large, then only full garbage collections are performed, which can take a long time to complete. Oracle recommends that you keep the size for the young generation greater than 25% and less than 50% of the overall heap size.</p><ul><li>调优后的理想状态（调优规则）：<ul><li>新生代能容纳所有【并发量 * (请求-响应)】的数据</li><li>幸存区大到能保留【当前活跃对象+需要晋升对象】</li><li>晋升阈值配置得当，让长时间存活对象尽快晋升</li></ul></li></ul><p>-XX:MaxTenuringThreshold&#x3D;threshold </p><p>-XX:+PrintTenuringDistribution</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs terminal">Desired survivor size 48286924 bytes, new threshold 10 (max 10)<br>- age 1: 28992024 bytes, 28992024 total<br>- age 2: 1366864 bytes, 30358888 total<br>- age 3: 1425912 bytes, 31784800 total<br>...<br></code></pre></td></tr></table></figure><h3 id="2-5-5、老年代调优"><a href="#2-5-5、老年代调优" class="headerlink" title="2.5.5、老年代调优"></a>2.5.5、老年代调优</h3><p>以CMS为例</p><ul><li><p>调优后的理想状态（调优规则）：</p><ul><li><p>以 CMS 为例 CMS 的老年代内存越大越好</p></li><li><p>先尝试不做调优，如果没有 Full GC 那么说明已经很不错了，否则先尝试调优新生代 </p></li><li><p>观察发生 Full GC 时老年代内存占用，将老年代内存预设调大 1&#x2F;4 ~ 1&#x2F;3</p><ul><li>-XX:CMSInitiatingOccupancyFraction&#x3D;percent</li></ul></li></ul></li></ul><h3 id="2-5-6、案例"><a href="#2-5-6、案例" class="headerlink" title="2.5.6、案例"></a>2.5.6、案例</h3><ul><li>案例1：Full GC 和 Minor GC频繁<ul><li>分析：GC特别频繁，说明我们的空间紧张，究竟是哪部分空间紧张呢？如果是新生代空间紧张，那么当我们业务高峰期来了大量对象被创建很快就把我们新生代的空间给塞满了，如果塞满了还会造成一个后果，它空间紧张了那么它对象晋升的阈值就会降低，导致很多本来生存周期很短的对象也会被晋升到老年代去，这样情况就进一步恶化了。老年代就会存在很多生存周期很短的对象，然后进一步触发Full GC的频繁发生。</li><li>解决方法：增大了新生代的内存，之后新生代的内存充裕了这样Minor GC就不在那么频繁了，同时增大了幸存区的空间同时也提高了晋升阈值。这样就会让很多生命周期较短的对象尽可能的留在新生代而不要晋升到老年代中，这样也就会使老年代的Full GC频率降低。</li></ul></li><li>案列2：请求高峰期发生Full GC，单次暂停时间特别长(CMS)<ul><li>分析：</li><li>解决方法：</li></ul></li><li>案例3：老年代充裕情况下，发生Full GC（1.7）<ul><li>分析：</li><li>解决方法：</li></ul></li></ul><h1 id="3、类加载与字节码技术"><a href="#3、类加载与字节码技术" class="headerlink" title="3、类加载与字节码技术"></a>3、类加载与字节码技术</h1><p><img src="/JVM/image-20221031110544226.png" alt="image-20221031110544226"></p><h2 id="3-1、类文件结构"><a href="#3-1、类文件结构" class="headerlink" title="3.1、类文件结构"></a>3.1、类文件结构</h2><p>一个简单的 HelloWorld.java</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package cn.<span class="hljs-property">itcast</span>.<span class="hljs-property">jvm</span>.<span class="hljs-property">t5</span>;<br><br><span class="hljs-comment">// HelloWorld 示例</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) &#123;<br><span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>执行 javac -parameters -d . HellowWorld.java </p><p>编译为 HelloWorld.class 后是这个样子的：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@localhost ~]<span class="hljs-comment"># od -t xC HelloWorld.class</span><br>0000000 ca fe ba be<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>34<span class="hljs-number"> 00 </span>23 0a<span class="hljs-number"> 00 </span>06<span class="hljs-number"> 00 </span>15 09<br>0000020<span class="hljs-number"> 00 </span>16<span class="hljs-number"> 00 </span>17<span class="hljs-number"> 08 </span>00<span class="hljs-number"> 18 </span>0a<span class="hljs-number"> 00 </span>19<span class="hljs-number"> 00 </span>1a<span class="hljs-number"> 07 </span>00 1b 07<br>0000040<span class="hljs-number"> 00 </span>1c<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 06 </span>3c<span class="hljs-number"> 69 </span>6e<span class="hljs-number"> 69 </span>74 3e<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 03 </span>28 29<br>0000060<span class="hljs-number"> 56 </span>01<span class="hljs-number"> 00 </span>04<span class="hljs-number"> 43 </span>6f<span class="hljs-number"> 64 </span>65<span class="hljs-number"> 01 </span>00 0f 4c<span class="hljs-number"> 69 </span>6e<span class="hljs-number"> 65 </span>4e<br>0000100<span class="hljs-number"> 75 </span>6d<span class="hljs-number"> 62 </span>65<span class="hljs-number"> 72 </span>54<span class="hljs-number"> 61 </span>62 6c<span class="hljs-number"> 65 </span>01<span class="hljs-number"> 00 </span>12 4c 6f 63<br>0000120<span class="hljs-number"> 61 </span>6c<span class="hljs-number"> 56 </span>61<span class="hljs-number"> 72 </span>69<span class="hljs-number"> 61 </span>62 6c<span class="hljs-number"> 65 </span>54<span class="hljs-number"> 61 </span>62 6c<span class="hljs-number"> 65 </span>01<br>0000140<span class="hljs-number"> 00 </span>04<span class="hljs-number"> 74 </span>68<span class="hljs-number"> 69 </span>73<span class="hljs-number"> 01 </span>00 1d 4c<span class="hljs-number"> 63 </span>6e 2f<span class="hljs-number"> 69 </span>74 63<br>0000160<span class="hljs-number"> 61 </span>73<span class="hljs-number"> 74 </span>2f 6a<span class="hljs-number"> 76 </span>6d 2f<span class="hljs-number"> 74 </span>35 2f<span class="hljs-number"> 48 </span>65 6c 6c 6f<br>0000200<span class="hljs-number"> 57 </span>6f<span class="hljs-number"> 72 </span>6c<span class="hljs-number"> 64 </span>3b<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 04 </span>6d<span class="hljs-number"> 61 </span>69 6e<span class="hljs-number"> 01 </span>00 16<br>0000220<span class="hljs-number"> 28 </span>5b 4c 6a<span class="hljs-number"> 61 </span>76<span class="hljs-number"> 61 </span>2f 6c<span class="hljs-number"> 61 </span>6e<span class="hljs-number"> 67 </span>2f<span class="hljs-number"> 53 </span>74 72<br>0000240<span class="hljs-number"> 69 </span>6e<span class="hljs-number"> 67 </span>3b<span class="hljs-number"> 29 </span>56<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 04 </span>61<span class="hljs-number"> 72 </span>67<span class="hljs-number"> 73 </span>01<span class="hljs-number"> 00 </span>13<br>0000260 5b 4c 6a<span class="hljs-number"> 61 </span>76<span class="hljs-number"> 61 </span>2f 6c<span class="hljs-number"> 61 </span>6e<span class="hljs-number"> 67 </span>2f<span class="hljs-number"> 53 </span>74<span class="hljs-number"> 72 </span>69<br>0000300 6e<span class="hljs-number"> 67 </span>3b<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 10 </span>4d<span class="hljs-number"> 65 </span>74<span class="hljs-number"> 68 </span>6f<span class="hljs-number"> 64 </span>50<span class="hljs-number"> 61 </span>72 61<br>0000320 6d<span class="hljs-number"> 65 </span>74<span class="hljs-number"> 65 </span>72<span class="hljs-number"> 73 </span>01<span class="hljs-number"> 00 </span>0a<span class="hljs-number"> 53 </span>6f<span class="hljs-number"> 75 </span>72<span class="hljs-number"> 63 </span>65 46<br>0000340<span class="hljs-number"> 69 </span>6c<span class="hljs-number"> 65 </span>01<span class="hljs-number"> 00 </span>0f<span class="hljs-number"> 48 </span>65 6c 6c 6f<span class="hljs-number"> 57 </span>6f<span class="hljs-number"> 72 </span>6c 64<br>0000360 2e 6a<span class="hljs-number"> 61 </span>76<span class="hljs-number"> 61 </span>0c<span class="hljs-number"> 00 </span>07<span class="hljs-number"> 00 </span>08<span class="hljs-number"> 07 </span>00 1d 0c<span class="hljs-number"> 00 </span>1e<br>0000400<span class="hljs-number"> 00 </span>1f<span class="hljs-number"> 01 </span>00 0b<span class="hljs-number"> 68 </span>65 6c 6c 6f<span class="hljs-number"> 20 </span>77 6f<span class="hljs-number"> 72 </span>6c 64<br>0000420<span class="hljs-number"> 07 </span>00<span class="hljs-number"> 20 </span>0c<span class="hljs-number"> 00 </span>21<span class="hljs-number"> 00 </span>22<span class="hljs-number"> 01 </span>00 1b<span class="hljs-number"> 63 </span>6e 2f<span class="hljs-number"> 69 </span>74<br>0000440<span class="hljs-number"> 63 </span>61<span class="hljs-number"> 73 </span>74 2f 6a<span class="hljs-number"> 76 </span>6d 2f<span class="hljs-number"> 74 </span>35 2f<span class="hljs-number"> 48 </span>65 6c 6c<br>0000460 6f<span class="hljs-number"> 57 </span>6f<span class="hljs-number"> 72 </span>6c<span class="hljs-number"> 64 </span>01<span class="hljs-number"> 00 </span>10 6a<span class="hljs-number"> 61 </span>76<span class="hljs-number"> 61 </span>2f 6c 61<br>0000500 6e<span class="hljs-number"> 67 </span>2f 4f<span class="hljs-number"> 62 </span>6a<span class="hljs-number"> 65 </span>63<span class="hljs-number"> 74 </span>01<span class="hljs-number"> 00 </span>10 6a<span class="hljs-number"> 61 </span>76 61<br>0000520 2f 6c<span class="hljs-number"> 61 </span>6e<span class="hljs-number"> 67 </span>2f<span class="hljs-number"> 53 </span>79<span class="hljs-number"> 73 </span>74<span class="hljs-number"> 65 </span>6d<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 03 </span>6f<br>0000540<span class="hljs-number"> 75 </span>74<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 15 </span>4c 6a<span class="hljs-number"> 61 </span>76<span class="hljs-number"> 61 </span>2f<span class="hljs-number"> 69 </span>6f 2f<span class="hljs-number"> 50 </span>72<br>0000560<span class="hljs-number"> 69 </span>6e<span class="hljs-number"> 74 </span>53<span class="hljs-number"> 74 </span>72<span class="hljs-number"> 65 </span>61 6d 3b<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 13 </span>6a<span class="hljs-number"> 61 </span>76<br>0000600<span class="hljs-number"> 61 </span>2f<span class="hljs-number"> 69 </span>6f 2f<span class="hljs-number"> 50 </span>72<span class="hljs-number"> 69 </span>6e<span class="hljs-number"> 74 </span>53<span class="hljs-number"> 74 </span>72<span class="hljs-number"> 65 </span>61 6d<br>0000620<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 07 </span>70<span class="hljs-number"> 72 </span>69 6e<span class="hljs-number"> 74 </span>6c 6e<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 15 </span>28 4c 6a<br>0000640<span class="hljs-number"> 61 </span>76<span class="hljs-number"> 61 </span>2f 6c<span class="hljs-number"> 61 </span>6e<span class="hljs-number"> 67 </span>2f<span class="hljs-number"> 53 </span>74<span class="hljs-number"> 72 </span>69 6e<span class="hljs-number"> 67 </span>3b<br>0000660<span class="hljs-number"> 29 </span>56<span class="hljs-number"> 00 </span>21<span class="hljs-number"> 00 </span>05<span class="hljs-number"> 00 </span>06<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>02<span class="hljs-number"> 00 </span>01<br>0000700<span class="hljs-number"> 00 </span>07<span class="hljs-number"> 00 </span>08<span class="hljs-number"> 00 </span>01<span class="hljs-number"> 00 </span>09<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>2f<span class="hljs-number"> 00 </span>01<span class="hljs-number"> 00 </span>01<br>0000720<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>05 2a b7<span class="hljs-number"> 00 </span>01 b1<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>02<span class="hljs-number"> 00 </span>0a 00<br>0000740<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 06 </span>00<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 04 </span>00 0b<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>0c 00<br>0000760<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 05 </span>00 0c<span class="hljs-number"> 00 </span>0d<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>09<span class="hljs-number"> 00 </span>0e 00<br>0001000 0f<span class="hljs-number"> 00 </span>02<span class="hljs-number"> 00 </span>09<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>37<span class="hljs-number"> 00 </span>02<span class="hljs-number"> 00 </span>01<span class="hljs-number"> 00 </span>00 00<br>0001020<span class="hljs-number"> 09 </span>b2<span class="hljs-number"> 00 </span>02<span class="hljs-number"> 12 </span>03 b6<span class="hljs-number"> 00 </span>04 b1<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>02<span class="hljs-number"> 00 </span>0a<br>0001040<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>0a<span class="hljs-number"> 00 </span>02<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>06<span class="hljs-number"> 00 </span>08<span class="hljs-number"> 00 </span>07<span class="hljs-number"> 00 </span>0b<br>0001060<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>0c<span class="hljs-number"> 00 </span>01<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>09<span class="hljs-number"> 00 </span>10<span class="hljs-number"> 00 </span>11<span class="hljs-number"> 00 </span>00<br>0001100<span class="hljs-number"> 00 </span>12<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 00 </span>05<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 10 </span>00<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 01 </span>00<span class="hljs-number"> 13 </span>00<br>0001120<span class="hljs-number"> 00 </span>00<span class="hljs-number"> 02 </span>00 14<br></code></pre></td></tr></table></figure><p>根据JVM规范，类文件结构如下:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs abnf">ClassFile &#123;<br>u4 magic<span class="hljs-comment">;</span><br>u2 minor_version<span class="hljs-comment">;</span><br>u2 major_version<span class="hljs-comment">;</span><br>u2 constant_pool_count<span class="hljs-comment">;</span><br>cp_info constant_pool[constant_pool_count-<span class="hljs-number">1</span>]<span class="hljs-comment">;</span><br>u2 access_flags<span class="hljs-comment">;</span><br>u2 this_class<span class="hljs-comment">;</span><br>u2 super_class<span class="hljs-comment">;</span><br>u2 interfaces_count<span class="hljs-comment">;</span><br>u2 interfaces[interfaces_count]<span class="hljs-comment">;</span><br>u2 fields_count<span class="hljs-comment">;</span><br>field_info fields[fields_count]<span class="hljs-comment">;</span><br>u2 methods_count<span class="hljs-comment">;</span><br>method_info methods[methods_count]<span class="hljs-comment">;</span><br>u2 attributes_count<span class="hljs-comment">;</span><br>attribute_info attributes[attributes_count]<span class="hljs-comment">;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-1-1、魔术-magic"><a href="#3-1-1、魔术-magic" class="headerlink" title="3.1.1、魔术(magic)"></a>3.1.1、魔术(magic)</h3><p>0~3 字节，表示它是否是【class】类型的文件 </p><p>0000000 <em><strong>ca fe ba be</strong></em> 00 00 00 34 00 23 0a 00 06 00 15 09</p><h3 id="3-1-2、版本"><a href="#3-1-2、版本" class="headerlink" title="3.1.2、版本"></a>3.1.2、版本</h3><p>4~7 字节，表示类的版本 00 34（52） 表示是 Java 8</p><p>0000000 ca fe ba be <em><strong>00 00 00 34</strong></em> 00 23 0a 00 06 00 15 09</p><h3 id="3-1-3、常量池"><a href="#3-1-3、常量池" class="headerlink" title="3.1.3、常量池"></a>3.1.3、常量池</h3><table><thead><tr><th>ConstantType</th><th>Value</th></tr></thead><tbody><tr><td>CONSTANT_Class</td><td>7</td></tr><tr><td>CONSTANT_Fieldref</td><td>9</td></tr><tr><td>CONSTANT_Methodref</td><td>10</td></tr><tr><td>CONSTANT_InterfaceMethodref</td><td>11</td></tr><tr><td>CONSTANT_String</td><td>8</td></tr><tr><td>CONSTANT_Integer</td><td>3</td></tr><tr><td>CONSTANT_Float</td><td>4</td></tr><tr><td>CONSTANT_Long</td><td>5</td></tr><tr><td>CONSTANT_Double</td><td>6</td></tr><tr><td>CONSTANT_NameAndType</td><td>12</td></tr><tr><td>CONSTANT_Uft8</td><td>1</td></tr><tr><td>CONSTANT_MethodHandle</td><td>15</td></tr><tr><td>CONSTANT_MethodType</td><td>16</td></tr><tr><td>CONSTANT_InvokeDynamic</td><td>18</td></tr></tbody></table><p>8<del>9 字节，表示常量池长度，00 23 （35） 表示常量池有 #1</del>#34项，注意 #0 项不计入，也没有值 </p><p>0000000 ca fe ba be 00 00 00 34 00 <em><strong>23 0a</strong></em> 00 06 00 15 09</p><p>第#1项 0a 表示一个 Method 信息，00 06 和 00 15（21） 表示它引用了常量池中 #6 和 #21 项来获得 这个方法的【所属类】和【方法名】 </p><p>0000000 ca fe ba be 00 00 00 34 00 23 <em><strong>0a 00 06 00 15</strong></em> 09</p><p>第#2项 09 表示一个 Field 信息，00 16（22）和 00 17（23） 表示它引用了常量池中 #22 和 # 23 项 来获得这个成员变量的【所属类】和【成员变量名】 </p><p>0000000 ca fe ba be 00 00 00 34 00 23 0a 00 06 00 15 <em><strong>09</strong></em> </p><p>0000020 <em><strong>00 16 00 17</strong></em> 08 00 18 0a 00 19 00 1a 07 00 1b 07</p><p>第#3项 08 表示一个字符串常量名称，00 18（24）表示它引用了常量池中 #24 项 </p><p>0000020 00 16 00 17 <em><strong>08 00 18</strong></em> 0a 00 19 00 1a 07 00 1b 07</p><p>第#4项 0a 表示一个 Method 信息，00 19（25） 和 00 1a（26） 表示它引用了常量池中 #25 和 #26 项来获得这个方法的【所属类】和【方法名】 </p><p>0000020 00 16 00 17 08 00 18 <em><strong>0a 00 19 00 1a</strong></em> 07 00 1b 07</p><p>第#5项 07 表示一个 Class 信息，00 1b（27） 表示它引用了常量池中 #27 项</p><p>0000020 00 16 00 17 08 00 18 0a 00 19 00 1a <em><strong>07 00 1b</strong></em> 07</p><p>第#6项 07 表示一个 Class 信息，00 1c（28） 表示它引用了常量池中 #28 项 </p><p>0000020 00 16 00 17 08 00 18 0a 00 19 00 1a 07 00 1b <em><strong>07</strong></em> </p><p>0000040 <em><strong>00 1c</strong></em> 01 00 06 3c 69 6e 69 74 3e 01 00 03 28 29</p><p>第#7项 01 表示一个 utf8 串，00 06 表示长度，3c 69 6e 69 74 3e 是【<init>】 </p><p>0000040 00 1c <em><strong>01 00 06 3c 69 6e 69 74 3e</strong></em> 01 00 03 28 29</p><p>第#8项 01 表示一个 utf8 串，00 03 表示长度，28 29 56 是【()V】其实就是表示无参、无返回值 </p><p>0000040 00 1c 01 00 06 3c 69 6e 69 74 3e <em><strong>01 00 03 28 29</strong></em> </p><p>0000060 <em><strong>56</strong></em> 01 00 04 43 6f 64 65 01 00 0f 4c 69 6e 65 4e</p><p>第#9项 01 表示一个 utf8 串，00 04 表示长度，43 6f 64 65 是【Code】 </p><p>0000060 56 <em><strong>01 00 04 43 6f 64 65</strong></em> 01 00 0f 4c 69 6e 65 4e</p><p>第#10项 01 表示一个 utf8 串，00 0f（15） 表示长度，4c 69 6e 65 4e 75 6d 62 65 72 54 61 62 6c 65 是【LineNumberTable】 </p><p>0000060 56 01 00 04 43 6f 64 65 <em><strong>01 00 0f 4c 69 6e 65 4e</strong></em></p><p>0000100 <em><strong>75 6d 62 65 72 54 61 62 6c 65</strong></em> 01 00 12 4c 6f 63</p><p>第#11项 01 表示一个 utf8 串，00 12（18） 表示长度，4c 6f 63 61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65是【LocalVariableTable】 </p><p>0000100 75 6d 62 65 72 54 61 62 6c 65 <em><strong>01 00 12 4c 6f 63</strong></em></p><p>0000120 <em><strong>61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65</strong></em> 01</p><p>第#12项 01 表示一个 utf8 串，00 04 表示长度，74 68 69 73 是【this】 </p><p>0000120 61 6c 56 61 72 69 61 62 6c 65 54 61 62 6c 65 <em><strong>01</strong></em> </p><p>0000140 <em><strong>00 04 74 68 69 73</strong></em> 01 00 1d 4c 63 6e 2f 69 74 63</p><p>第#13项 01 表示一个 utf8 串，00 1d（29） 表示长度，是【Lcn&#x2F;itcast&#x2F;t5&#x2F;HelloWorld;】 </p><p>0000140 00 04 74 68 69 73 <em><strong>01 00 1d 4c 63 6e 2f 69 74 63</strong></em> </p><p>0000160 <em><strong>61 73 74 2f 6a 76 6d 2f 74 35 2f 48 65 6c 6c 6f</strong></em> </p><p>0000200 <em><strong>57 6f 72 6c 64 3b</strong></em> 01 00 04 6d 61 69 6e 01 00 16</p><p>第#14项 01 表示一个 utf8 串，00 04 表示长度，74 68 69 73 是【main】 </p><p>0000200 57 6f 72 6c 64 3b <em><strong>01 00 04 6d 61 69 6e</strong></em> 01 00 16</p><p>第#15项 01 表示一个 utf8 串，00 16（22） 表示长度，是【([Ljava&#x2F;lang&#x2F;String;)V】其实就是参数为 字符串数组，无返回值 </p><p>0000200 57 6f 72 6c 64 3b 01 00 04 6d 61 69 6e <em><strong>01 00 16</strong></em> </p><p>0000220 <em><strong>28 5b 4c 6a 61 76 61 2f 6c 61 6e 67 2f 53 74 72</strong></em> </p><p>0000240 <em><strong>69 6e 67 3b 29 56</strong></em> 01 00 04 61 72 67 73 01 00 13</p><p>第#16项 01 表示一个 utf8 串，00 04 表示长度，是【args】 </p><p>0000240 69 6e 67 3b 29 56 <em><strong>01 00 04 61 72 67 73</strong></em> 01 00 13</p><p>第#17项 01 表示一个 utf8 串，00 13（19） 表示长度，是【[Ljava&#x2F;lang&#x2F;String;】 </p><p>0000240 69 6e 67 3b 29 56 01 00 04 61 72 67 73 <em><strong>01 00 13</strong></em> </p><p>0000260 <em><strong>5b 4c 6a 61 76 61 2f 6c 61 6e 67 2f 53 74 72 69</strong></em> </p><p>0000300 <em><strong>6e 67 3b</strong></em> 01 00 10 4d 65 74 68 6f 64 50 61 72 61</p><p>第#18项 01 表示一个 utf8 串，00 10（16） 表示长度，是【MethodParameters】 </p><p>0000300 6e 67 3b <em><strong>01 00 10 4d 65 74 68 6f 64 50 61 72 61</strong></em> </p><p>0000320 <em><strong>6d 65 74 65</strong></em> 72 73 01 00 0a 53 6f 75 72 63 65 46</p><p>第#19项 01 表示一个 utf8 串，00 0a（10） 表示长度，是【SourceFile】 </p><p>0000320 6d 65 74 65 72 73 <em><strong>01 00 0a 53 6f 75 72 63 65 46</strong></em> </p><p>0000340 <em><strong>69 6c 65</strong></em> 01 00 0f 48 65 6c 6c 6f 57 6f 72 6c 64</p><p>第#20项 01 表示一个 utf8 串，00 0f（15） 表示长度，是【HelloWorld.java】 </p><p>0000340 69 6c 65 <em><strong>01 00 0f 48 65 6c 6c 6f 57 6f 72 6c 64</strong></em> </p><p>0000360 <em><strong>2e 6a 61 76 61</strong></em> 0c 00 07 00 08 07 00 1d 0c 00 1e</p><p>第#21项 0c 表示一个 【名+类型】，00 07 00 08 引用了常量池中 #7 #8 两项 </p><p>0000360 2e 6a 61 76 61 <em><strong>0c 00 07 00 08</strong></em> 07 00 1d 0c 00 1e</p><p>第#22项 07 表示一个 Class 信息，00 1d（29） 引用了常量池中 #29 项 </p><p>0000360 2e 6a 61 76 61 0c 00 07 00 08 <em><strong>07 00 1d</strong></em> 0c 00 1e</p><p>第#23项 0c 表示一个 【名+类型】，00 1e（30） 00 1f （31）引用了常量池中 #30 #31 两项 </p><p>0000360 2e 6a 61 76 61 0c 00 07 00 08 07 00 1d <em><strong>0c 00 1e</strong></em> </p><p>0000400 <em><strong>00 1f</strong></em> 01 00 0b 68 65 6c 6c 6f 20 77 6f 72 6c 64</p><p>第#24项 01 表示一个 utf8 串，00 0f（15） 表示长度，是【hello world】 </p><p>0000400 00 1f <em><strong>01 00 0b 68 65 6c 6c 6f 20 77 6f 72 6c 64</strong></em></p><p>第#25项 07 表示一个 Class 信息，00 20（32） 引用了常量池中 #32 项 </p><p>0000420 <em><strong>07 00 20</strong></em> 0c 00 21 00 22 01 00 1b 63 6e 2f 69 74</p><p>第#26项 0c 表示一个 【名+类型】，00 21（33） 00 22（34）引用了常量池中 #33 #34 两项 </p><p>0000420 07 00 20 <em><strong>0c 00 21 00 22</strong></em> 01 00 1b 63 6e 2f 69 74</p><p>第#27项 01 表示一个 utf8 串，00 1b（27） 表示长度，是【cn&#x2F;itcast&#x2F;t5&#x2F;HelloWorld】 </p><p>0000420 07 00 20 0c 00 21 00 22 <em><strong>01 00 1b 63 6e 2f 69 74</strong></em> </p><p>0000440 <em><strong>63 61 73 74 2f 6a 76 6d 2f 74 35 2f 48 65 6c 6c</strong></em> </p><p>0000460 <em><strong>6f 57 6f 72 6c 64</strong></em> 01 00 10 6a 61 76 61 2f 6c 61</p><p>第#28项 01 表示一个 utf8 串，00 10（16） 表示长度，是【java&#x2F;lang&#x2F;Object】 </p><p>0000460 6f 57 6f 72 6c 64 <em><strong>01 00 10 6a 61 76 61 2f 6c 61</strong></em> </p><p>0000500 <em><strong>6e 67 2f 4f 62 6a 65 63 74</strong></em> 01 00 10 6a 61 76 61</p><p>第#29项 01 表示一个 utf8 串，00 10（16） 表示长度，是【java&#x2F;lang&#x2F;System】 </p><p>0000500 6e 67 2f 4f 62 6a 65 63 74 <em><strong>01 00 10 6a 61 76 61</strong></em> </p><p>0000520 <em><strong>2f 6c 61 6e 67 2f 53 79 73 74 65 6d</strong></em> 01 00 03 6f</p><p>第#30项 01 表示一个 utf8 串，00 03 表示长度，是【out】 </p><p>0000520 2f 6c 61 6e 67 2f 53 79 73 74 65 6d <em><strong>01 00 03 6f</strong></em> </p><p>0000540 <em><strong>75 74</strong></em> 01 00 15 4c 6a 61 76 61 2f 69 6f 2f 50 72</p><p>第#31项 01 表示一个 utf8 串，00 15（21） 表示长度，是【Ljava&#x2F;io&#x2F;PrintStream;】 </p><p>0000540 75 74 <em><strong>01 00 15 4c 6a 61 76 61 2f 69 6f 2f 50 72</strong></em> </p><p>0000560 <em><strong>69 6e 74 53 74 72 65 61 6d 3b</strong></em> 01 00 13 6a 61 76</p><p>第#32项 01 表示一个 utf8 串，00 13（19） 表示长度，是【java&#x2F;io&#x2F;PrintStream】 </p><p>0000560 69 6e 74 53 74 72 65 61 6d 3b <em><strong>01 00 13 6a 61 76</strong></em></p><p>0000600 <em><strong>61 2f 69 6f 2f 50 72 69 6e 74 53 74 72 65 61 6d</strong></em></p><p>第#33项 01 表示一个 utf8 串，00 07 表示长度，是【println】 </p><p>0000620 <em><strong>01 00 07 70 72 69 6e 74 6c 6e</strong></em> 01 00 15 28 4c 6a</p><p>第#34项 01 表示一个 utf8 串，00 15（21） 表示长度，是【(Ljava&#x2F;lang&#x2F;String;)V】 </p><p>0000620 01 00 07 70 72 69 6e 74 6c 6e <em><strong>01 00 15 28 4c 6a</strong></em> </p><p>0000640 <em><strong>61 76 61 2f 6c 61 6e 67 2f 53 74 72 69 6e 67 3b</strong></em> </p><p>0000660 <em><strong>29 56</strong></em> 00 21 00 05 00 06 00 00 00 00 00 02 00 01</p><h3 id="3-1-4、访问标识与继承信息"><a href="#3-1-4、访问标识与继承信息" class="headerlink" title="3.1.4、访问标识与继承信息"></a>3.1.4、访问标识与继承信息</h3><p>21 表示该 class 是一个类，公共的 </p><p>0000660 29 56 <em><strong>00 21</strong></em> 00 05 00 06 00 00 00 00 00 02 00 01 </p><p>05 表示根据常量池中 #5 找到本类全限定名 </p><p>0000660 29 56 00 21 <em><strong>00 05</strong></em> 00 06 00 00 00 00 00 02 00 01 </p><p>06 表示根据常量池中 #6 找到父类全限定名 </p><p>0000660 29 56 00 21 00 05 <em><strong>00 06</strong></em> 00 00 00 00 00 02 00 01 </p><p>表示接口的数量，本类为 0 </p><p>0000660 29 56 00 21 00 05 00 06 <em><strong>00 00</strong></em> 00 00 00 02 00 0</p><table><thead><tr><th>Flag Name</th><th>Value</th><th>Interpretation</th></tr></thead><tbody><tr><td>ACC_PUBLIC</td><td>0x0001</td><td>Declared public ; may be accessed from outside its  package.</td></tr><tr><td>ACC_FINAL</td><td>0x0010</td><td>Declared final ; no subclasses allowed.</td></tr><tr><td>ACC_SUPER</td><td>0x0020</td><td>Treat superclass methods specially when invoked by the invokespecial instruction.</td></tr><tr><td>ACC_INTERFACE</td><td>0x0200</td><td>Is an interface, not a class.</td></tr><tr><td>ACC_ABSTRACT</td><td>0x0400</td><td>Declared abstract ; must not be instantiated.</td></tr><tr><td>ACC_SYNTHETIC</td><td>0x1000</td><td>Declared synthetic; not present in the source code.</td></tr><tr><td>ACC_ANNOTATION</td><td>0x2000</td><td>Declared as an annotation type.</td></tr><tr><td>ACC_ENUM</td><td>0x4000</td><td>Declared as an enum type.</td></tr></tbody></table><h3 id="3-1-5、Field信息"><a href="#3-1-5、Field信息" class="headerlink" title="3.1.5、Field信息"></a>3.1.5、Field信息</h3><p>表示成员变量数量，本类为 0 </p><p>0000660 29 56 00 21 00 05 00 06 00 00 <em><strong>00 00</strong></em> 00 02 00 01</p><table><thead><tr><th>FieldType</th><th>Type</th><th>Interpretation</th></tr></thead><tbody><tr><td>B</td><td>byte</td><td>signed byte</td></tr><tr><td>C</td><td>char</td><td>Unicode character code point in the Basic Multilingual Plane, encoded with UTF-16</td></tr><tr><td>D</td><td>double</td><td>double-precision floating-point value</td></tr><tr><td>F</td><td>float</td><td>single-precision floating-point value</td></tr><tr><td>I</td><td>int</td><td>integer</td></tr><tr><td>J</td><td>long</td><td>long integer</td></tr><tr><td>L <br />ClassName <br />;</td><td>reference</td><td>an instance of class ClassName</td></tr><tr><td>S</td><td>short</td><td>signed short</td></tr><tr><td>Z</td><td>boolean</td><td>true or false</td></tr><tr><td>[</td><td>reference</td><td>one array dimension</td></tr></tbody></table><h3 id="3-1-6、Method信息"><a href="#3-1-6、Method信息" class="headerlink" title="3.1.6、Method信息"></a>3.1.6、Method信息</h3><p><img src="/JVM/image-20221031140109206.png" alt="image-20221031140109206"></p><p><img src="/JVM/image-20221031140141999.png" alt="image-20221031140141999"></p><p><img src="/JVM/image-20221031140206312.png" alt="image-20221031140206312"><img src="/JVM/image-20221031140257982.png" alt="image-20221031140257982"></p><p><img src="/JVM/image-20221031140316845.png" alt="image-20221031140316845"></p><h3 id="3-1-7、附加属性"><a href="#3-1-7、附加属性" class="headerlink" title="3.1.7、附加属性"></a>3.1.7、附加属性</h3><ul><li>00 01 表示附加属性数量</li><li>00 13 表示引用了常量池 #19 项，即【SourceFile】</li><li>00 00 00 02 表示此属性的长度</li><li>00 14 表示引用了常量池 #20 项，即【HelloWorld.java】</li></ul><p>0001100 00 12 00 00 00 05 01 00 10 00 00 00 01 00 13 00</p><p>0001120 00 00 02 00 14</p><p>参考：<a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html</a></p><h2 id="3-2、字节码指令"><a href="#3-2、字节码指令" class="headerlink" title="3.2、字节码指令"></a>3.2、字节码指令</h2><h3 id="3-2-1、入门"><a href="#3-2-1、入门" class="headerlink" title="3.2.1、入门"></a>3.2.1、入门</h3><p>接着上一节，研究一下两组字节码指令，一个是</p><p><code>public cn.itcast.jvm.t5.HelloWorld();</code>  构造方法的字节码指令</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">2a</span> b7 <span class="hljs-number">00</span> <span class="hljs-number">01</span> b1<br></code></pre></td></tr></table></figure><ol><li>2a &#x3D;&gt; aload_0 加载 slot 0 的局部变量，即 this，做为下面的 invokespecial 构造方法调用的参数 </li><li>b7 &#x3D;&gt; invokespecial 预备调用构造方法，哪个方法呢？ </li><li>00 01 引用常量池中 #1 项，即【 Method java&#x2F;lang&#x2F;Object.””:()V 】</li><li>b1 表示返回</li></ol><p>另一个是 public static void main(java.lang.String[]); 主方法的字节码指令</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">b2</span> <span class="hljs-number">00</span> <span class="hljs-number">02</span> <span class="hljs-number">12</span> <span class="hljs-number">03</span> b6 <span class="hljs-number">00</span> <span class="hljs-number">04</span> b1<br></code></pre></td></tr></table></figure><ol><li>b2 &#x3D;&gt; getstatic 用来加载静态变量，哪个静态变量呢？ </li><li>00 02 引用常量池中 #2 项，即【Field java&#x2F;lang&#x2F;System.out:Ljava&#x2F;io&#x2F;PrintStream;】</li><li>12 &#x3D;&gt; ldc 加载参数，哪个参数呢？ </li><li>03 引用常量池中 #3 项，即 【String hello world】 </li><li>b6 &#x3D;&gt; invokevirtual 预备调用成员方法，哪个方法呢？ </li><li>00 04 引用常量池中 #4 项，即【Method java&#x2F;io&#x2F;PrintStream.println:(Ljava&#x2F;lang&#x2F;String;)V】 </li><li>b1 表示返回</li></ol><p>请参考：<a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5</a></p><h3 id="3-2-2、javap工具"><a href="#3-2-2、javap工具" class="headerlink" title="3.2.2、javap工具"></a>3.2.2、javap工具</h3><p>自己分析类文件结构太麻烦了，Oracle 提供了 javap 工具来反编译 class 文件</p><p><img src="/JVM/image-20221102103445192.png" alt="image-20221102103445192"></p><p><img src="/JVM/image-20221102103427032.png" alt="image-20221102103427032"></p><p><img src="/JVM/image-20221102103518271.png" alt="image-20221102103518271"></p><h3 id="3-2-3、图解方法执行流程"><a href="#3-2-3、图解方法执行流程" class="headerlink" title="3.2.3、图解方法执行流程"></a>3.2.3、图解方法执行流程</h3><p>1）原始 java 代码</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">package</span> cn.itcast.jvm.t3.bytecode;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 演示 字节码指令 和 操作数栈、常量池的关系</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Demo3_1 &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(String[] args) &#123;<br><span class="hljs-keyword">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">int</span> b = <span class="hljs-keyword">Short</span>.MAX_VALUE + <span class="hljs-number">1</span>;<br><span class="hljs-keyword">int</span> c = a + b;<br>System.out.<span class="hljs-keyword">println</span>(c);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2）编译后的字节码文件</p><p><img src="/JVM/image-20221102103601651.png" alt="image-20221102103601651"></p><p><img src="/JVM/image-20221102103614954.png" alt="image-20221102103614954"></p><p><img src="/JVM/image-20221102103632461.png" alt="image-20221102103632461"></p><p><img src="/JVM/image-20221102103643166.png" alt="image-20221102103643166"></p><p>3）常量池载入运行时常量池</p><p><img src="/JVM/image-20221102103656297.png" alt="image-20221102103656297"></p><p>4）方法字节码载入方法区</p><p><img src="/JVM/image-20221102103705315.png" alt="image-20221102103705315"></p><p>5）main 线程开始运行，分配栈帧内存</p><p>（stack&#x3D;2，locals&#x3D;4）</p><p><img src="/JVM/image-20221102103722807.png" alt="image-20221102103722807"></p><p>6）执行引擎开始执行字节码</p><p>bipush 10</p><ul><li>将一个 byte 压入操作数栈（其长度会补齐 4 个字节），类似的指令还有</li><li>sipush 将一个 short 压入操作数栈（其长度会补齐 4 个字节） </li><li>ldc 将一个 int 压入操作数栈 </li><li>ldc2_w 将一个 long 压入操作数栈（分两次压入，因为 long 是 8 个字节） </li><li>这里小的数字都是和字节码指令存在一起，超过 short 范围的数字存入了常量池</li></ul><p><img src="/JVM/image-20221102103815252.png" alt="image-20221102103815252"></p><p>istore_1</p><ul><li>将操作数栈顶数据弹出，存入局部变量表的 slot 1</li></ul><p><img src="/JVM/image-20221102103929219.png" alt="image-20221102103929219"></p><p><img src="/JVM/image-20221102103934229.png" alt="image-20221102103934229"></p><p>ldc #3</p><ul><li>从常量池加载 #3 数据到操作数栈 </li><li>注意 Short.MAX_VALUE 是 32767，所以 32768 &#x3D; Short.MAX_VALUE + 1 实际是在编译期间计算好的</li></ul><p><img src="/JVM/image-20221102104009697.png" alt="image-20221102104009697"></p><p>istore_2</p><p><img src="/JVM/image-20221102104021847.png" alt="image-20221102104021847"></p><p><img src="/JVM/image-20221102104029382.png" alt="image-20221102104029382"></p><p>iload_1</p><p><img src="/JVM/image-20221102104045057.png" alt="image-20221102104045057"></p><p>iload_2</p><p><img src="/JVM/image-20221102104057398.png" alt="image-20221102104057398"></p><p>iadd</p><p><img src="/JVM/image-20221102104108668.png" alt="image-20221102104108668"></p><p><img src="/JVM/image-20221102104115884.png" alt="image-20221102104115884"></p><p>istore_3</p><p><img src="/JVM/image-20221102104129152.png" alt="image-20221102104129152"></p><p><img src="/JVM/image-20221102104135622.png" alt="image-20221102104135622"></p><p>getstatic #4</p><p><img src="/JVM/image-20221102104145763.png" alt="image-20221102104145763"></p><p><img src="/JVM/image-20221102104153687.png" alt="image-20221102104153687"></p><p>iload_3</p><p><img src="/JVM/image-20221102104205754.png" alt="image-20221102104205754"></p><p><img src="/JVM/image-20221102104212672.png" alt="image-20221102104212672"></p><p>invokevirtual #5</p><ul><li>找到常量池 #5 项 </li><li>定位到方法区 java&#x2F;io&#x2F;PrintStream.println:(I)V 方法 </li><li>生成新的栈帧（分配 locals、stack等） </li><li>传递参数，执行新栈帧中的字节码</li></ul><p><img src="/JVM/image-20221102104241504.png" alt="image-20221102104241504"></p><ul><li>执行完毕，弹出栈帧 </li><li>清除 main 操作数栈内容</li></ul><p><img src="/JVM/image-20221102104325220.png" alt="image-20221102104325220"></p><p>return</p><ul><li>完成 main 方法调用，弹出 main 栈帧 </li><li>程序结束</li></ul><h3 id="3-2-4、练习-分析i"><a href="#3-2-4、练习-分析i" class="headerlink" title="3.2.4、练习 - 分析i++"></a>3.2.4、练习 - 分析i++</h3><p>目的：从字节码角度分析 a++ 相关题目</p><p>源码：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">package cn.itcast.jvm.t3.bytecode;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 从字节码角度分析 a++ 相关题目</span><br><span class="hljs-comment">*/</span><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> Demo3_2 &#123;<br><span class="hljs-built_in">public</span> static <span class="hljs-type">void</span> main(String[] args) &#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> b = a++ + ++a + a<span class="hljs-comment">--;</span><br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(a);<br><span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(b);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>字节码：</p><p><img src="/JVM/image-20221102104450398.png" alt="image-20221102104450398"></p><p><img src="/JVM/image-20221102104455844.png" alt="image-20221102104455844"></p><p>分析：</p><ul><li>注意 iinc 指令是直接在局部变量 slot 上进行运算 </li><li>a++ 和 ++a 的区别是先执行 iload 还是 先执行 iinc</li></ul><p><img src="/JVM/image-20221102104520641.png" alt="image-20221102104520641"></p><p><img src="/JVM/image-20221102104530903.png" alt="image-20221102104530903"></p><p><img src="/JVM/image-20221102104537395.png" alt="image-20221102104537395"></p><p><img src="/JVM/image-20221102104544336.png" alt="image-20221102104544336"></p><p><img src="/JVM/image-20221102104556881.png" alt="image-20221102104556881"></p><p><img src="/JVM/image-20221102104603865.png" alt="image-20221102104603865"></p><p><img src="/JVM/image-20221102104617984.png" alt="image-20221102104617984"></p><p><img src="/JVM/image-20221102104624772.png" alt="image-20221102104624772"></p><p><img src="/JVM/image-20221102104630356.png" alt="image-20221102104630356"></p><p><img src="/JVM/image-20221102104636559.png" alt="image-20221102104636559"></p><p><img src="/JVM/image-20221102104641852.png" alt="image-20221102104641852"></p><h3 id="3-2-5、条件判断指令"><a href="#3-2-5、条件判断指令" class="headerlink" title="3.2.5、条件判断指令"></a>3.2.5、条件判断指令</h3><table><thead><tr><th>指令</th><th>助记符</th><th>含义</th></tr></thead><tbody><tr><td>0x99</td><td>ifeq</td><td>判断是否 &#x3D;&#x3D; 0</td></tr><tr><td>0x9a</td><td>ifne</td><td>判断是否 !&#x3D; 0</td></tr><tr><td>0x9b</td><td>iflt</td><td>判断是否 &lt; 0</td></tr><tr><td>0x9c</td><td>ifge</td><td>判断是否 &gt;&#x3D; 0</td></tr><tr><td>0x9d</td><td>ifgt</td><td>判断是否 &gt; 0</td></tr><tr><td>0x9e</td><td>ifle</td><td>判断是否 &lt;&#x3D; 0</td></tr><tr><td>0x9f</td><td>if_icmpeq</td><td>两个int是否 &#x3D;&#x3D;</td></tr><tr><td>0xa0</td><td>if_icmpne</td><td>两个int是否 !&#x3D;</td></tr><tr><td>0xa1</td><td>if_icmplt</td><td>两个int是否 &lt;</td></tr><tr><td>0xa2</td><td>if_icmpge</td><td>两个int是否 &gt;&#x3D;</td></tr><tr><td>0xa3</td><td>if_icmpgt</td><td>两个int是否 &gt;</td></tr><tr><td>0xa4</td><td>if_icmple</td><td>两个int是否 &lt;&#x3D;</td></tr><tr><td>0xa5</td><td>if_acmpeq</td><td>两个引用是否 &#x3D;&#x3D;</td></tr><tr><td>0xa6</td><td>if_acmpne</td><td>两个引用是否 !&#x3D;</td></tr><tr><td>0xc6</td><td>ifnull</td><td>判断是否 &#x3D;&#x3D; null</td></tr><tr><td>0xc7</td><td>ifnonnull</td><td>判断是否 !&#x3D; null</td></tr></tbody></table><p>几点说明：</p><ul><li>byte，short，char 都会按 int 比较，因为操作数栈都是 4 字节 </li><li>goto 用来进行跳转到指定行号的字节码</li></ul><p>源码：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo3_3</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">if</span>(a == <span class="hljs-number">0</span>) &#123;<br>a = <span class="hljs-number">10</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>a = <span class="hljs-number">20</span>;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>字节码：</p><p><img src="/JVM/image-20221102105020761.png" alt="image-20221102105020761"></p><p>思考：以上比较指令中没有 long，float，double 的比较，那么它们要比较怎么办？</p><p>参考：<a href="https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.lcmp">https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.lcmp</a></p><h3 id="3-2-6、循环控制指令"><a href="#3-2-6、循环控制指令" class="headerlink" title="3.2.6、循环控制指令"></a>3.2.6、循环控制指令</h3><p>其实循环控制还是前面介绍的那些指令，例如 while 循环：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo3_4</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (a &lt; <span class="hljs-number">10</span>) &#123;<br>a++;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>字节码是：</p><p><img src="/JVM/image-20221102105228962.png" alt="image-20221102105228962"></p><p>再比如 do while 循环：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo3_5</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br><span class="hljs-type">int</span> a = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">do</span> &#123;<br>a++;<br>&#125; <span class="hljs-keyword">while</span> (a &lt; <span class="hljs-number">10</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>字节码是：</p><p>0: iconst_0 </p><p>1: istore_1 </p><p>2: iinc 1, 1 </p><p>5: iload_1 </p><p>6: bipush 10 </p><p>8: if_icmplt 2 </p><p>11: return</p><p>最后再看看 for 循环：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo3_6</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br><br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>字节码是：</p><p><img src="/JVM/image-20221102105408966.png" alt="image-20221102105408966"></p><p>注意：比较 while 和 for 的字节码，你发现它们是一模一样的，殊途也能同归</p><h3 id="3-2-7、练习-判断结果"><a href="#3-2-7、练习-判断结果" class="headerlink" title="3.2.7、练习 - 判断结果"></a>3.2.7、练习 - 判断结果</h3><p>请从字节码角度分析，下列代码运行的结果：</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo3_6_1</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> x = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">10</span>) &#123;<br>x = x++;<br>i++;<br>&#125;<br>System.out.<span class="hljs-built_in">println</span>(x); <span class="hljs-comment">// 结果是 0</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-2-8、构造方法"><a href="#3-2-8、构造方法" class="headerlink" title="3.2.8、构造方法"></a>3.2.8、构造方法</h3><p>1）<code>&lt;cinit&gt;()V</code></p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo3_8_1</span> &#123;<br><span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> i = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">static</span> &#123;<br>i = <span class="hljs-number">20</span>;<br>&#125;<br><span class="hljs-keyword">static</span> &#123;<br>i = <span class="hljs-number">30</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译器会按从上至下的顺序，收集所有 static 静态代码块和静态成员赋值的代码，合并为一个特殊的方法 <code>&lt;cinit&gt;()V</code> ：</p><p><img src="/JVM/image-20221102105618094.png" alt="image-20221102105618094"></p><p>练习：自己调整一下 static 变量和静态代码块的位置，观察字节码的改动</p><p>2）<code>&lt;init&gt;()V</code></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo3_8_2</span> &#123;<br><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> a = <span class="hljs-string">&quot;s1&quot;</span>;<br>&#123;<br>b = <span class="hljs-number">20</span>;<br>&#125;<br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> b = <span class="hljs-number">10</span>;<br>&#123;<br>a = <span class="hljs-string">&quot;s2&quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Demo3_8_2</span><span class="hljs-params">(<span class="hljs-type">String</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br><span class="hljs-keyword">this</span>.a = a;<br><span class="hljs-keyword">this</span>.b = b;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br>Demo3_8_2 d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Demo3_8_2</span>(<span class="hljs-string">&quot;s3&quot;</span>, <span class="hljs-number">30</span>);<br>System.out.<span class="hljs-built_in">println</span>(d.a);<br>System.out.<span class="hljs-built_in">println</span>(d.b);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译器会按从上至下的顺序，收集所有 {} 代码块和成员变量赋值的代码，形成新的构造方法，但原始构 造方法内的代码总是在最后</p><p><img src="/JVM/image-20221102105803812.png" alt="image-20221102105803812"></p><h3 id="3-2-9、方法调用"><a href="#3-2-9、方法调用" class="headerlink" title="3.2.9、方法调用"></a>3.2.9、方法调用</h3><p>看一下几种不同的方法调用对应的字节码指令</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo3_9</span> &#123;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Demo3_9</span>()</span> &#123; &#125;<br><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span>()</span> &#123; &#125;<br><span class="hljs-function"><span class="hljs-keyword">private</span> final <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span>()</span> &#123; &#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test3</span>()</span> &#123; &#125;<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test4</span>()</span> &#123; &#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>Demo3_9 d = <span class="hljs-keyword">new</span> Demo3_9();<br>d.test1();<br>d.test2();<br>d.test3();<br>d.test4();<br>Demo3_9.test4();<br>&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>字节码：</p><p><img src="/JVM/image-20221102105843791.png" alt="image-20221102105843791"></p><ul><li>new 是创建【对象】，给对象分配堆内存，执行成功会将【对象引用】压入操作数栈 </li><li>dup 是赋值操作数栈栈顶的内容，本例即为【对象引用】，为什么需要两份引用呢，一个是要配合 invokespecial 调用该对象的构造方法 “”:()V （会消耗掉栈顶一个引用），另一个要 配合 astore_1 赋值给局部变量 </li><li>最终方法（final），私有方法（private），构造方法都是由 invokespecial 指令来调用，属于静态绑定 </li><li>普通成员方法是由 invokevirtual 调用，属于动态绑定，即支持多态 </li><li>成员方法与静态方法调用的另一个区别是，执行方法前是否需要【对象引用】 </li><li>比较有意思的是 d.test4(); 是通过【对象引用】调用一个静态方法，可以看到在调用 invokestatic 之前执行了 pop 指令，把【对象引用】从操作数栈弹掉了😂 </li><li>还有一个执行 invokespecial 的情况是通过 super 调用父类方法</li></ul><h3 id="3-2-10、多态的原理"><a href="#3-2-10、多态的原理" class="headerlink" title="3.2.10、多态的原理"></a>3.2.10、多态的原理</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.itcast.jvm.t3.bytecode;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 演示多态原理，注意加上下面的 JVM 参数，禁用指针压缩</span><br><span class="hljs-comment">* -XX:-UseCompressedOops -XX:-UseCompressedClassPointers</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demo3_10</span> &#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(Animal animal)</span> &#123;<br>animal.eat();<br>System.out.println(animal.toString());<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>test(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>());<br>test(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>());<br>System.in.read();<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是&quot;</span> + <span class="hljs-built_in">this</span>.getClass().getSimpleName();<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;啃骨头&quot;</span>);<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;<br>System.out.println(<span class="hljs-string">&quot;吃鱼&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>1）运行代码</p><p>停在 System.in.read() 方法上，这时运行 jps 获取进程 id</p><p>2）运行 HSDB 工具</p><p>进入 JDK 安装目录，执行<code>java -cp ./lib/sa-jdi.jar sun.jvm.hotspot.HSDB</code></p><p>3）查找某个对象</p><p>打开 Tools -&gt; Find Object By Query </p><p>输入 <code>select d from cn.itcast.jvm.t3.bytecode.Dog d</code> 点击 Execute 执行</p><p><img src="/JVM/image-20221102110127313.png" alt="image-20221102110127313"></p><p>4）查看对象内存结构</p><p>点击超链接可以看到对象的内存结构，此对象没有任何属性，因此只有对象头的 16 字节，前 8 字节是 MarkWord，后 8 字节就是对象的 Class 指针</p><p>但目前看不到它的实际地址</p><p><img src="/JVM/image-20221102110145382.png" alt="image-20221102110145382"></p><p>5）查看对象 Class 的内存地址</p><p>可以通过 Windows -&gt; Console 进入命令行模式，执行<code>mem 0x00000001299b4978 2</code></p><p>mem 有两个参数，参数 1 是对象地址，参数 2 是查看 2 行（即 16 字节）</p><p>结果中第二行 0x000000001b7d4028 即为 Class 的内存地址</p><p><img src="/JVM/image-20221102110235601.png" alt="image-20221102110235601"></p><p>6）查看类的 vtable</p><ul><li>方法1：Alt+R 进入 Inspector 工具，输入刚才的 Class 内存地址，看到如下界面</li></ul><p><img src="/JVM/image-20221102110306376.png" alt="image-20221102110306376"></p><ul><li>方法2：或者 Tools -&gt; Class Browser 输入 Dog 查找，可以得到相同的结果</li></ul><p><img src="/JVM/image-20221102110319143.png" alt="image-20221102110319143"></p><p>无论通过哪种方法，都可以找到 Dog Class 的 vtable 长度为 6，意思就是 Dog 类有 6 个虚方法（多态相关的，final，static 不会列入）</p><p>那么这 6 个方法都是谁呢？从 Class 的起始地址开始算，偏移 0x1b8 就是 vtable 的起始地址，进行计算得到：</p><p><img src="/JVM/image-20221102110340837.png" alt="image-20221102110340837"></p><p>通过 Windows -&gt; Console 进入命令行模式，执行</p><p><img src="/JVM/image-20221102110353791.png" alt="image-20221102110353791"></p><p>就得到了 6 个虚方法的入口地址</p><p>7）验证方法地址</p><p>通过 Tools -&gt; Class Browser 查看每个类的方法定义，比较可知</p><p><img src="/JVM/image-20221102110413384.png" alt="image-20221102110413384"></p><p>对号入座，发现</p><ul><li>eat() 方法是 Dog 类自己的 </li><li>toString() 方法是继承 String 类的 </li><li>finalize() ，equals()，hashCode()，clone() 都是继承 Object 类的</li></ul><p>8）小结</p><p>当执行 invokevirtual 指令时， </p><ol><li>先通过栈帧中的对象引用找到对象 </li><li>分析对象头，找到对象的实际 Class </li><li>Class 结构中有 vtable，它在类加载的链接阶段就已经根据方法的重写规则生成好了 </li><li>查表得到方法的具体地址 </li><li>执行方法的字节码</li></ol><h3 id="3-2-11、异常处理"><a href="#3-2-11、异常处理" class="headerlink" title="3.2.11、异常处理"></a>3.2.11、异常处理</h3><h3 id="3-2-12、练习-finally"><a href="#3-2-12、练习-finally" class="headerlink" title="3.2.12、练习 - finally"></a>3.2.12、练习 - finally</h3><h3 id="3-2-13、synchronized"><a href="#3-2-13、synchronized" class="headerlink" title="3.2.13、synchronized"></a>3.2.13、synchronized</h3><h2 id="3-3、编译器处理"><a href="#3-3、编译器处理" class="headerlink" title="3.3、编译器处理"></a>3.3、编译器处理</h2><h3 id="3-3-1、默认构造器"><a href="#3-3-1、默认构造器" class="headerlink" title="3.3.1、默认构造器"></a>3.3.1、默认构造器</h3><h3 id="3-3-2、自动拆装箱"><a href="#3-3-2、自动拆装箱" class="headerlink" title="3.3.2、自动拆装箱"></a>3.3.2、自动拆装箱</h3><h3 id="3-3-3、泛型集合取值"><a href="#3-3-3、泛型集合取值" class="headerlink" title="3.3.3、泛型集合取值"></a>3.3.3、泛型集合取值</h3><h3 id="3-3-4、可变参数"><a href="#3-3-4、可变参数" class="headerlink" title="3.3.4、可变参数"></a>3.3.4、可变参数</h3><h3 id="3-3-5、foreach循环"><a href="#3-3-5、foreach循环" class="headerlink" title="3.3.5、foreach循环"></a>3.3.5、foreach循环</h3><h3 id="3-3-6、switch字符串"><a href="#3-3-6、switch字符串" class="headerlink" title="3.3.6、switch字符串"></a>3.3.6、switch字符串</h3><h3 id="3-3-7、switch枚举"><a href="#3-3-7、switch枚举" class="headerlink" title="3.3.7、switch枚举"></a>3.3.7、switch枚举</h3><h3 id="3-3-8、枚举类"><a href="#3-3-8、枚举类" class="headerlink" title="3.3.8、枚举类"></a>3.3.8、枚举类</h3><h3 id="3-3-9、try-with-resources"><a href="#3-3-9、try-with-resources" class="headerlink" title="3.3.9、try-with-resources"></a>3.3.9、try-with-resources</h3><h3 id="3-3-10、方法重写时的桥接方法"><a href="#3-3-10、方法重写时的桥接方法" class="headerlink" title="3.3.10、方法重写时的桥接方法"></a>3.3.10、方法重写时的桥接方法</h3><h3 id="3-3-11、匿名内部类"><a href="#3-3-11、匿名内部类" class="headerlink" title="3.3.11、匿名内部类"></a>3.3.11、匿名内部类</h3><h2 id="3-4、类加载阶段"><a href="#3-4、类加载阶段" class="headerlink" title="3.4、类加载阶段"></a>3.4、类加载阶段</h2><h3 id="3-4-1、加载"><a href="#3-4-1、加载" class="headerlink" title="3.4.1、加载"></a>3.4.1、加载</h3><h3 id="3-4-2、链接"><a href="#3-4-2、链接" class="headerlink" title="3.4.2、链接"></a>3.4.2、链接</h3><h3 id="3-4-3、初始化"><a href="#3-4-3、初始化" class="headerlink" title="3.4.3、初始化"></a>3.4.3、初始化</h3><h3 id="3-4-4、练习"><a href="#3-4-4、练习" class="headerlink" title="3.4.4、练习"></a>3.4.4、练习</h3><h2 id="3-5、类加载器"><a href="#3-5、类加载器" class="headerlink" title="3.5、类加载器"></a>3.5、类加载器</h2><h3 id="3-5-1、启动类加载器"><a href="#3-5-1、启动类加载器" class="headerlink" title="3.5.1、启动类加载器"></a>3.5.1、启动类加载器</h3><h3 id="3-5-2、扩展类加载器"><a href="#3-5-2、扩展类加载器" class="headerlink" title="3.5.2、扩展类加载器"></a>3.5.2、扩展类加载器</h3><h3 id="3-5-3、双亲委派模式"><a href="#3-5-3、双亲委派模式" class="headerlink" title="3.5.3、双亲委派模式"></a>3.5.3、双亲委派模式</h3><h3 id="3-5-4、线程上下文类加载器"><a href="#3-5-4、线程上下文类加载器" class="headerlink" title="3.5.4、线程上下文类加载器"></a>3.5.4、线程上下文类加载器</h3><h3 id="3-5-5、自定义类加载器"><a href="#3-5-5、自定义类加载器" class="headerlink" title="3.5.5、自定义类加载器"></a>3.5.5、自定义类加载器</h3><h2 id="3-6、运行期优化"><a href="#3-6、运行期优化" class="headerlink" title="3.6、运行期优化"></a>3.6、运行期优化</h2><h3 id="3-6-1、即时编译"><a href="#3-6-1、即时编译" class="headerlink" title="3.6.1、即时编译"></a>3.6.1、即时编译</h3><h3 id="3-6-2、反射优化"><a href="#3-6-2、反射优化" class="headerlink" title="3.6.2、反射优化"></a>3.6.2、反射优化</h3><h1 id="4、内存模型"><a href="#4、内存模型" class="headerlink" title="4、内存模型"></a>4、内存模型</h1><h2 id="4-1、java内存模型"><a href="#4-1、java内存模型" class="headerlink" title="4.1、java内存模型"></a>4.1、java内存模型</h2><p>4.1.1、原子性</p><p>4.1.2、问题分析</p><p>4.1.3、解决方法</p><h2 id="4-2、可见性"><a href="#4-2、可见性" class="headerlink" title="4.2、可见性"></a>4.2、可见性</h2><p>4.2.1、退不出的循环</p><p>4.2.2、解决方法</p><p>4.2.3、可见性</p><h2 id="4-3、有序性"><a href="#4-3、有序性" class="headerlink" title="4.3、有序性"></a>4.3、有序性</h2><p>4.3.1、诡异的结果</p><p>4.3.2、解决方法</p><p>4.3.3、有序性理解</p><p>4.3.4、happens-before</p><h2 id="4-4、CAS与原子类"><a href="#4-4、CAS与原子类" class="headerlink" title="4.4、CAS与原子类"></a>4.4、CAS与原子类</h2><p>4.4.1、CAS</p><p>4.4.2、乐观锁与悲观锁</p><p>4.4.3、原子操作类</p><h2 id="4-5、synchronized优化"><a href="#4-5、synchronized优化" class="headerlink" title="4.5、synchronized优化"></a>4.5、synchronized优化</h2><p>4.5.1、轻量级锁</p><p>4.5.2、锁膨胀</p><p>4.5.3、重量锁</p><p>4.5.4、偏向锁</p><p>4.5.5、其它优化</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>JVM</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JVM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git提交项目笔记</title>
    <link href="/2022/10/22/Git%E6%8F%90%E4%BA%A4%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/10/22/Git%E6%8F%90%E4%BA%A4%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>1、打开想要提交或者克隆的项目文件夹</p><p>2、进入该文件夹打开Git Bash Here</p><p>3、初始化用户，告诉git你是谁</p><ul><li><p>git config –global user.name “你的名字或昵称”</p></li><li><p>git config –global user.email “你的邮箱”</p></li></ul><p>4、在该文件夹中执行下面命令，完成初始化</p><ul><li><p>git init</p></li><li><p>git remote add origin &lt;项目地址&gt; &#x2F;&#x2F;注:项目地址形式为:<a href="https://gitee.com/xxx/xxx.git%E6%88%96%E8%80%85">https://gitee.com/xxx/xxx.git或者</a> <a href="mailto:&#x67;&#105;&#116;&#64;&#103;&#x69;&#116;&#x65;&#x65;&#46;&#x63;&#x6f;&#x6d;">&#x67;&#105;&#116;&#64;&#103;&#x69;&#116;&#x65;&#x65;&#46;&#x63;&#x6f;&#x6d;</a>:xxx&#x2F;xxx.git</p></li><li><p>如果提交到github上则为： https:&#x2F;&#x2F;&lt;Personal access tokens(自己github上的tokens)&gt;@github.com&#x2F;Kblayt&#x2F;Kblayt.github.io.git</p></li></ul><p>5、若想克隆，只需要执行命令</p><ul><li>git clone &lt;项目地址&gt; &#x2F;&#x2F;注:项目地址形式为:<a href="https://gitee.com/xxx/xxx.git%E6%88%96%E8%80%85">https://gitee.com/xxx/xxx.git或者</a> <a href="mailto:&#103;&#x69;&#x74;&#64;&#103;&#105;&#x74;&#101;&#x65;&#46;&#x63;&#111;&#109;">&#103;&#x69;&#x74;&#64;&#103;&#105;&#x74;&#101;&#x65;&#46;&#x63;&#111;&#109;</a>:xxx&#x2F;xxx.git</li></ul><p>6、进入已经初始化好的或者克隆项目的目录然后执行：</p><p>从服务器下更新项目，因为已经clone过，所以不需要再更新</p><ul><li>git pull origin master</li></ul><p>7、做一些修改后执行如下命令完成一次完整的提交</p><ul><li><p>git add .</p></li><li><p>git commit -m “安装教程测试”</p></li><li><p>git push origin master</p></li></ul><p>注意：提交命令有两个，git push origin master（正常提交）和git push origin master -f（强制提交，强制提交可能会把之前的commit注释信息，不会改变修改的代码，慎用），都是提交到master分支 其他常见git命令</p><ul><li><p>查看所有分支 ：git branch -a</p></li><li><p>切换到某一分支：git checkout 分支名称</p></li><li><p>合并分支：git merge 原分支 目标分支</p></li></ul><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>项目管理工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>gitee</tag>
      
      <tag>github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大数据</title>
    <link href="/2022/10/21/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    <url>/2022/10/21/%E5%A4%A7%E6%95%B0%E6%8D%AE/</url>
    
    <content type="html"><![CDATA[<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>大数据</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>增强学习</title>
    <link href="/2022/10/21/%E5%A2%9E%E5%BC%BA%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/10/21/%E5%A2%9E%E5%BC%BA%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>增强学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>深度学习</title>
    <link href="/2022/10/21/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/10/21/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>深度学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>机器学习</title>
    <link href="/2022/10/21/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/10/21/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>机器学习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python基础</title>
    <link href="/2022/10/21/python%E5%9F%BA%E7%A1%80/"/>
    <url>/2022/10/21/python%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Python基础</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SSM</title>
    <link href="/2022/10/21/SSM/"/>
    <url>/2022/10/21/SSM/</url>
    
    <content type="html"><![CDATA[<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h2 id="1、Spring是什么"><a href="#1、Spring是什么" class="headerlink" title="1、Spring是什么"></a>1、Spring是什么</h2><p>Spring是分层的Java  SE&#x2F;EE应用full-stack轻量级开源框架，以IoC(Inverse  Of  Control)和 AOP(Aspect  Oriented  Programming面向切面编程)为内核。</p><p>提供了展现层SpringMVC和持久层Spring  JDBCTemplate以及业务层事务管理等众多的企业级应用技术，还能整合开源世界众多著名的第三方框架和类库，逐渐成为使用最多的Java EE企业应用开源框架。</p><h2 id="2、Spring的发展历程"><a href="#2、Spring的发展历程" class="headerlink" title="2、Spring的发展历程"></a>2、Spring的发展历程</h2><p>略</p><h2 id="3、Spring的优势"><a href="#3、Spring的优势" class="headerlink" title="3、Spring的优势"></a>3、Spring的优势</h2><p>①方便接偶，简化开发</p><p>通过Spring提供的IoC容器，可以将对象的依赖关系交由Spring进行控制，避免硬编码所造成的过度耦合。用户也不必再为了单列模式、属性文件解析等这些很低层的需求写代码，可以更专注于上层的应用。</p><p>②AOP编程的支持</p><p>通过Spring的AOP功能，方便进行面向切面编程，许多不容易用传统OOP实现的功能可以通过AOP轻松实现。</p><p>③声明式事物的支持</p><p>可以将我们从单调烦闷的事务管理代码中解脱出来，通过声明方式灵活的进行事务管理，提高开发效率。</p><p>④方便程序的测试</p><p>可以用非容器依赖的编程方式进行几乎所有的测试工作，测试不再是昂贵的操作，而是随手可做的事情。</p><p>⑤方便集成各种优秀的框架</p><p>Spring对各种优秀框架（Struts、Hibernate、Hessian、Quartz等）的支持。</p><p>⑥降低JavaEE  API的使用难度</p><p>Spring对JavaEE  API（如JDBC、JavaMail、远程调用等）进行了薄薄的封装，使这些API的使用难度大为降低。</p><p>⑦Java源码是经典学习范例</p><p>Spring的源代码设计精妙、结构清晰、匠心独用，处处体现着大师对Java设计模式灵活运用以及对Java技术的高深造诣。它的源代码无疑是Java技术的最佳实践的范例。</p><h2 id="4、Spring的体系结构"><a href="#4、Spring的体系结构" class="headerlink" title="4、Spring的体系结构"></a>4、Spring的体系结构</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE3d63121abd7d1f5de2a13d0783ec8f5f.png"></p><p>Instrumentation（仪表）</p><h2 id="5、Spring快速入门"><a href="#5、Spring快速入门" class="headerlink" title="5、Spring快速入门"></a>5、Spring快速入门</h2><h3 id="5-1、Spring程序开发步骤"><a href="#5-1、Spring程序开发步骤" class="headerlink" title="5.1、Spring程序开发步骤"></a>5.1、Spring程序开发步骤</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE8d942c7c5823ee45b5ffa5a18f3d5f2a.png"></p><p>①使用Maven导入Spring开发的基本jar包</p><p>②编写Dao接口和实现类</p><p>③创建Spring核心配置文件</p><p>④在Spring配置文件中配置UserDaoImpl</p><p>⑤使用Spring的API获得Bean实例</p><h3 id="5-2、Spring快速入门代码实现"><a href="#5-2、Spring快速入门代码实现" class="headerlink" title="5.2、Spring快速入门代码实现"></a>5.2、Spring快速入门代码实现</h3><p>Spring的开发步骤</p><p>①导入jar包</p><p>②创建Bean</p><p>③创建applicationContext.xml</p><p>④在配置文件中进行配置</p><p>⑤创建ApplicationContext对象getBean</p><h2 id="6、Spring配置文件"><a href="#6、Spring配置文件" class="headerlink" title="6、Spring配置文件"></a>6、Spring配置文件</h2><h3 id="6-1、Bean标签的基本配置"><a href="#6-1、Bean标签的基本配置" class="headerlink" title="6.1、Bean标签的基本配置"></a>6.1、Bean标签的基本配置</h3><p>用于配置对象交由Spring来创建</p><p>默认情况下它调用的是类中的无参构造函数，如果没有无参构造函数则不能创建成功</p><p>基本属性：</p><ul><li><p>id：Bean实例在Spring容器中的唯一表示</p></li><li><p>class：Bean的全限定名称</p></li></ul><h3 id="6-2、Bean标签范围配置"><a href="#6-2、Bean标签范围配置" class="headerlink" title="6.2、Bean标签范围配置"></a>6.2、Bean标签范围配置</h3><p>scope：指对象的作用范围，取值如下：</p><p><img src="/2022/10/21/SSM/WEBRESOURCE813ac7758ad458ec25b49d81b1bff4ea.png"></p><p>①当scope的取值为singleton时</p><p>Bean的实例化个数：1个</p><p>Bean的实例化时机：当Spring核心文件被加载时，实例化配置的Bean实例</p><p>Bean的生命周期：</p><ul><li><p>对象创建：当应用加载，创建容器时，对象就被创建了</p></li><li><p>对象运行：只要容器在，对象一直活着</p></li><li><p>对象销毁：当应用卸载，销毁容器时，对象就被销毁了</p></li></ul><p>②当scope的取值为prototype时</p><p>Bean的实例化个数：多个</p><p>Bean的实例化时机：当调用getBean()方法时实例化Bean</p><p>Bean的生命周期：</p><ul><li><p>对象创建：当使用对象时，创建新的对象实例</p></li><li><p>对象运行：只要对象在使用中，就一直或者</p></li><li><p>对象销毁：当对象长时间不用时，被Java的垃圾回收器(GC)回收了</p></li></ul><h3 id="6-3、Bean生命周期配置"><a href="#6-3、Bean生命周期配置" class="headerlink" title="6.3、Bean生命周期配置"></a>6.3、Bean生命周期配置</h3><ul><li><p>init-method：指定类中的初始化方法名称</p></li><li><p>destroy-mothod：指定类中销毁方法名称</p></li></ul><h3 id="6-4、Bean实例化三种方式"><a href="#6-4、Bean实例化三种方式" class="headerlink" title="6.4、Bean实例化三种方式"></a>6.4、Bean实例化三种方式</h3><ul><li><p>无参构造方法实例化（最常用）</p></li><li><p>工厂静态方法实例化</p></li><li><p>工厂实例方法实例化</p></li></ul><h3 id="6-5、Bean的依赖注入分析"><a href="#6-5、Bean的依赖注入分析" class="headerlink" title="6.5、Bean的依赖注入分析"></a>6.5、Bean的依赖注入分析</h3><p>目前UserService实例和UserDao实例都存在与Spring容器中，当前的做法时在容器外部获得UserService实例和UserDao实例，然后在程序中进行结合。</p><p><img src="/2022/10/21/SSM/WEBRESOURCEf9fe0e28d90d88a4229bd9c6ffc30eb8.png"></p><p>因为UserService和UserDao都在Spring容器中，而最终程序直接使用的时UserService，所以可以在Spring容器中，将UserDao设置到UserService内部。</p><p><img src="/2022/10/21/SSM/WEBRESOURCE32c2321410fb1800364b5f6200cd8bb4.png"></p><h3 id="6-6、Bean的依赖注入概念"><a href="#6-6、Bean的依赖注入概念" class="headerlink" title="6.6、Bean的依赖注入概念"></a>6.6、Bean的依赖注入概念</h3><p>依赖注入（Dependency Injection）：它是Spring框架核心IOC的具体实现。</p><p>在编写程序时，通过控制反转，把对象的创建交给了Spring，但是代码中不可能出现没有依赖的情况。IOC解耦只是降低他们的依赖关系，但不会消除。例如：业务层仍会调用持久层的方法。</p><p>那这种业务层和持久层的依赖关系，在使用Spring之后，就让Spring来维护了。</p><p>简单的说，就是坐等框架把持久层对象传入业务层，而不用我们自己去获取。</p><p>如何将UserDao注入到UserService内部呢？</p><ul><li><p>set方法</p></li><li><p>构造方法</p></li></ul><p>具体实现为：</p><ul><li>set方法</li></ul><p>1）set方法①</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;bean <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-built_in">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;<br>        &lt;<span class="hljs-keyword">property</span> <span class="hljs-built_in">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;&lt;/<span class="hljs-keyword">property</span>&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 15:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserDao</span> userDao;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUserDao</span>(<span class="hljs-params">UserDao userDao</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">userDao</span> = userDao;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        userDao.<span class="hljs-title function_">save</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2）set方法②</p><p>P命名空间注入本质也是set方法注入，但比起上述的set方法注入更加方便，主要体现在配置文件中，如下：</p><p>首先，需要引入P命名空间：</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">xmlns:</span>p=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span><br></code></pre></td></tr></table></figure><p>其次，需要修改注入方式</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;bean <span class="hljs-attribute">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span> p:<span class="hljs-attribute">userDao-ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><ul><li>构造方法</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;bean id<span class="hljs-operator">=</span><span class="hljs-string">&quot;userService&quot;</span> class<span class="hljs-operator">=</span><span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;<br>        &lt;constructor-arg name<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span> ref<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span>&gt;&lt;/constructor-arg&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs aspectj"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 15:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> UserDao userDao;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">(UserDao userDao)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.userDao = userDao;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">()</span> </span>&#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">save</span><span class="hljs-params">()</span> </span>&#123;<br>        userDao.save();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="6-7、Bean的依赖注入的数据类型"><a href="#6-7、Bean的依赖注入的数据类型" class="headerlink" title="6.7、Bean的依赖注入的数据类型"></a>6.7、Bean的依赖注入的数据类型</h3><p>上面的操作，都是注入的引用Bean，除了对象的引用可以注入，普通数据类型或集合都可以在容器中进行注入</p><p>注入数据的三种数据类型</p><ul><li><p>普通数据类型</p></li><li><p>引用数据类型(UserDao引用注入到UserService，就是对象引用数据类型注入，6.6已讲)</p></li><li><p>集合数据类型</p></li></ul><p>具体实现为：</p><ul><li>普通数据类型</li></ul><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">&lt;bean id<span class="hljs-operator">=</span><span class="hljs-string">&quot;userDao&quot;</span> class<span class="hljs-operator">=</span><span class="hljs-string">&quot;com.company.SpringIoC.dao.impl.UserDaoImpl&quot;</span>&gt;<br>        &lt;property name<span class="hljs-operator">=</span><span class="hljs-string">&quot;age&quot;</span> value<span class="hljs-operator">=</span><span class="hljs-string">&quot;18&quot;</span>&gt;&lt;/property&gt;<br>        &lt;property name<span class="hljs-operator">=</span><span class="hljs-string">&quot;name&quot;</span> value<span class="hljs-operator">=</span><span class="hljs-string">&quot;lhg&quot;</span>&gt;&lt;/property&gt;<br>&lt;/bean&gt;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 14:22</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;<br>    <span class="hljs-keyword">private</span> int age;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAge</span>(<span class="hljs-params">int age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(name+<span class="hljs-string">&quot;===&quot;</span>+age);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>集合数据类型</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/26 14:22</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; strList;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>,<span class="hljs-title class_">User</span>&gt; userMap;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Properties</span> properties;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setStrList</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">String</span>&gt; strList</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">strList</span> = strList;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setUserMap</span>(<span class="hljs-params"><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, User&gt; userMap</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">userMap</span> = userMap;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setProperties</span>(<span class="hljs-params">Properties properties</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">properties</span> = properties;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">save</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(strList);<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(userMap);<br>        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(properties);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userService&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.service.impl.UserServiceImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;userDao&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userDao&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.dao.impl.UserDaoImpl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;strList&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>aaa<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>bbb<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ccc<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userMap&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;u1&quot;</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">&quot;user1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;u2&quot;</span> <span class="hljs-attr">value-ref</span>=<span class="hljs-string">&quot;user2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;properties&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p1&quot;</span>&gt;</span>111<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p2&quot;</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;p3&quot;</span>&gt;</span>333<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.pojo.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;tom&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addr&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;hunan&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;user2&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.SpringIoC.pojo.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;lucy&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;addr&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;beijing&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="/2022/10/21/SSM/WEBRESOURCE73f60dd7a65c6fabf702d4fd708eb887.png"></p><h3 id="6-8、引入其他配置文件-分模块开发"><a href="#6-8、引入其他配置文件-分模块开发" class="headerlink" title="6.8、引入其他配置文件(分模块开发)"></a>6.8、引入其他配置文件(分模块开发)</h3><p>实际开发中，Spring的配置内容非常多，这就导致Spring配置很繁杂且体积很大，所以，可以将部分配置拆解到其他配置文件中，而在Spring主配置文件通过import标签进行加载。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;import <span class="hljs-attribute">resource</span>=<span class="hljs-string">&quot;applicationContext-xxx.xml&quot;</span>&gt;<br></code></pre></td></tr></table></figure><p><img src="/2022/10/21/SSM/WEBRESOURCE2299298cb398a2e87776ae85270644fb.png"></p><p>applicationContext.xml引用applicationContext-product.xml和applicationContext-user.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-product.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">import</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;applicationContext-user.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">import</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="6-9、Spring的重点配置知识要点"><a href="#6-9、Spring的重点配置知识要点" class="headerlink" title="6.9、Spring的重点配置知识要点"></a>6.9、Spring的重点配置知识要点</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE3603690e2304b8b167a9a91cd09f8848.png"></p><h2 id="7、Spring相关API"><a href="#7、Spring相关API" class="headerlink" title="7、Spring相关API"></a>7、Spring相关API</h2><h3 id="7-1、ApplicationContext的继承体系"><a href="#7-1、ApplicationContext的继承体系" class="headerlink" title="7.1、ApplicationContext的继承体系"></a>7.1、ApplicationContext的继承体系</h3><p>Diagram</p><p><img src="/2022/10/21/SSM/WEBRESOURCE91ca0f067d4d218d2539e29d4ee2b39d.png"></p><h3 id="7-2、ApplicationContext的实现类"><a href="#7-2、ApplicationContext的实现类" class="headerlink" title="7.2、ApplicationContext的实现类"></a>7.2、ApplicationContext的实现类</h3><p>①ClassPathXmlApplicationContext</p><p>它是从类的根路径下加载配置文件推荐使用这种</p><p>②FileSystemXmlApplicationContext</p><p>它是从磁盘路径上加载配置文件，配置文件可以在磁盘的任意位置</p><p>③AnnotationConfigApplicationContext</p><p>当使用注解配置容器对象时，需要使用此类来创建spring容器。它用来读取注解。</p><h3 id="7-3、getBean-方法的使用"><a href="#7-3、getBean-方法的使用" class="headerlink" title="7.3、getBean()方法的使用"></a>7.3、getBean()方法的使用</h3><p>主要学习使根据d获取和根据类型获取</p><p><img src="/2022/10/21/SSM/WEBRESOURCE94d8d9867d280c63554446ba106bb360.png"></p><h2 id="8、Spring配置数据源"><a href="#8、Spring配置数据源" class="headerlink" title="8、Spring配置数据源"></a>8、Spring配置数据源</h2><h3 id="8-1、数据源（连接池）的作用"><a href="#8-1、数据源（连接池）的作用" class="headerlink" title="8.1、数据源（连接池）的作用"></a>8.1、数据源（连接池）的作用</h3><ul><li><p>数据源(连接池)是提高程序性能而出现的</p></li><li><p>事先实例化数据源，初始化部分连接资源</p></li><li><p>使用连接资源时从数据源中获取</p></li><li><p>使用完毕后将连接资源归还给数据源</p></li></ul><p>常见的数据源(连接池)：DBCP、C3P0、BoneCP、Druid等</p><h3 id="8-2、数据源的开发步骤"><a href="#8-2、数据源的开发步骤" class="headerlink" title="8.2、数据源的开发步骤"></a>8.2、数据源的开发步骤</h3><p>①导入数据源的坐标和数据库驱动坐标</p><p>②创建数据源对象</p><p>③设置数据源的基本连接数据</p><p>④使用数据源获取连接资源和归还连接资源</p><h3 id="8-3、数据源的手动创建"><a href="#8-3、数据源的手动创建" class="headerlink" title="8.3、数据源的手动创建"></a>8.3、数据源的手动创建</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.SpringIoC_anno;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<br><span class="hljs-keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.beans.PropertyVetoException;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.ResourceBundle;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/27 14:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceTest</span> &#123;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建c3p0数据源</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br>        dataSource.setDriverClass(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        dataSource.setJdbcUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>);<br>        dataSource.setUser(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建druid数据源</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br>        dataSource.setDriverClassName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);<br>        dataSource.setUrl(<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>);<br>        dataSource.setUsername(<span class="hljs-string">&quot;root&quot;</span>);<br>        dataSource.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试手动创建c3p0数据源(加载properties配置文件)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//读取配置文件</span><br>        <span class="hljs-type">ResourceBundle</span> <span class="hljs-variable">resourceBundle</span> <span class="hljs-operator">=</span> ResourceBundle.getBundle(<span class="hljs-string">&quot;jdbc&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.driver&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.url&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> resourceBundle.getString(<span class="hljs-string">&quot;jdbc.password&quot;</span>);<br>        <span class="hljs-comment">//创建数据源对象 设置连接参数</span><br>        <span class="hljs-type">ComboPooledDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br>        dataSource.setDriverClass(driver);<br>        dataSource.setJdbcUrl(url);<br>        dataSource.setUser(username);<br>        dataSource.setPassword(password);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>jdbc.properties</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">jdbc.driver</span>=com.mysql.cj.jdbc.Driver<br><span class="hljs-attr">jdbc.url</span>=jdbc:mysql://localhost:<span class="hljs-number">3306</span>/javaweb<br><span class="hljs-attr">jdbc.username</span>=root<br><span class="hljs-attr">jdbc.password</span>=<span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure><h3 id="8-4、Spring配置数据源"><a href="#8-4、Spring配置数据源" class="headerlink" title="8.4、Spring配置数据源"></a>8.4、Spring配置数据源</h3><p>可以将DataSource的创建权交由Spring容器去完成</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.SpringIoC_anno;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<br><span class="hljs-keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;<br><span class="hljs-keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;<br><br><span class="hljs-keyword">import</span> javax.sql.DataSource;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.util.ResourceBundle;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/27 14:12</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//测试Spring容器产生数据源对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">applicationContext</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;applicationContext.xml&quot;</span>);<br>        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> applicationContext.getBean(DataSource.class);<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection();<br>        System.out.println(connection);<br>        connection.close();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-5、抽取jdbc配置文件"><a href="#8-5、抽取jdbc配置文件" class="headerlink" title="8.5、抽取jdbc配置文件"></a>8.5、抽取jdbc配置文件</h3><p>applicationContext.xml加载jdbc.properties配置文件获得连接信息（Spring容器加载properties文件）</p><p>首先，需要引入context命名控件和约束路径：</p><ul><li><p>命名空间：xmlns:context&#x3D;”<a href="http://www.springframework.org/schema/context&quot;">http://www.springframework.org/schema/context&quot;</a></p></li><li><p>约束路径：<a href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a></p><p><a href="http://www.springframework.org/schema/context/spring-context.xsd">http://www.springframework.org/schema/context/spring-context.xsd</a></p></li></ul><p>再将外部properties文件使用context:property-placeholder标签加载到applicationContext.xml中来。</p><p>最后使用EL表达式调用对应值</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="hljs-string"><span class="hljs-tag"><span class="language-xml">                            http://www.springframework.org/schema/contxt http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="language-xml">    </span><br><span class="language-xml"><span class="hljs-comment">&lt;!--加载外部的properties文件--&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:property-placeholder</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClass&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.driver&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;jdbcUrl&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.url&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.username&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;jdbc.password&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="9、Spring注解开发"><a href="#9、Spring注解开发" class="headerlink" title="9、Spring注解开发"></a>9、Spring注解开发</h2><h3 id="9-1、Spring原始注解"><a href="#9-1、Spring原始注解" class="headerlink" title="9.1、Spring原始注解"></a>9.1、Spring原始注解</h3><p>Spring是轻代码而重配置的框架，配置比较繁重，影响开发效率，所以注解开发是一种趋势，注解代替xml配置文件可以简化配置，提高开发效率。</p><p>Spring原始注解主要是替代<Bean>的配置</p><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td>@Component</td><td>使用在类上用于实例化Bean</td></tr><tr><td>@Controller</td><td>使用在web层类上用于实例化Bean</td></tr><tr><td>@Service</td><td>使用在service层类上用于实例化Bean</td></tr><tr><td>@Repository</td><td>使用在dao层类上用于实例化Bean</td></tr><tr><td>@Autowired</td><td>使用在字段上用于根据类型依赖注入</td></tr><tr><td>@Qualifier</td><td>结合@Autowired一起使用用于根据名称进行依赖注入</td></tr><tr><td>@Resource</td><td>相当于@Autowired+@Qualifier，按照名称进行注入</td></tr><tr><td>@Value</td><td>注入普通属性</td></tr><tr><td>@Scope</td><td>标注Bean的作用范围</td></tr><tr><td>@PostConstruct</td><td>使用在方法上标注该方法是Bean的初始化方法</td></tr><tr><td>@PreDestroy</td><td>使用在方法上标注该方法时Bean的销毁方法</td></tr></tbody></table><p>在使用注解开发时，需要使用在applicationContext.xml中配置组件扫描。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!--配置组件扫描--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.company.SpringIoC_anno&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="9-2、Spring新注解"><a href="#9-2、Spring新注解" class="headerlink" title="9.2、Spring新注解"></a>9.2、Spring新注解</h3><p>使用上面的注解还不能全部代替xml配置文件，还需要使用注解替代的配置如下：</p><ul><li><p>非自定义的Bean的配置：<bean></p></li><li><p>加载properties文件的配置：<a href="context:property-placeholder">context:property-placeholder</a></p></li><li><p>组件扫描的配置：<a href="context:component-scan">context:component-scan</a></p></li><li><p>引入其他文件：<import></p></li></ul><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td>@Configuration</td><td>用于指定当前类是一个Spring配置类，当前创建容器时会从该类上加载注解</td></tr><tr><td>@ComponentScan</td><td>用于指定Spring在初始化容器时要扫描的包。<br>作用和在Spring的xml配置文件中的&lt;context:component-scan base-package&#x3D;”com.company.SpringIoC_anno”&#x2F;&gt;一样</td></tr><tr><td>@Bean</td><td>使用在方法上，标注将该方法的返回值存储Spring容器中</td></tr><tr><td>@PropertySource</td><td>用于加载properties文件中的配置</td></tr><tr><td>@Import</td><td>用于导入其他配置类</td></tr></tbody></table><h2 id="10、Srping集成Junit"><a href="#10、Srping集成Junit" class="headerlink" title="10、Srping集成Junit"></a>10、Srping集成Junit</h2><p>①导入spring继承Junit的坐标</p><p>②使用@Runwith直接替换原来的运行周期</p><p>③使用@ContextConfiguration指定配置文件或配置类</p><p>④使用@Autowired注入需要测试的对象</p><p>⑤创建测试方法进行测试</p><h2 id="11、Spring集成web环境"><a href="#11、Spring集成web环境" class="headerlink" title="11、Spring集成web环境"></a>11、Spring集成web环境</h2><h3 id="11-1、ApplicationContext应用上下文获取方式"><a href="#11-1、ApplicationContext应用上下文获取方式" class="headerlink" title="11.1、ApplicationContext应用上下文获取方式"></a>11.1、ApplicationContext应用上下文获取方式</h3><p>应用上下文对象是通过new ClasspathXmlApplicationContext(spring配置文件)方式获取的，但是每次从容其中获得Bean时都要编写new ClasspathXmlApplicationContext(spring配置文件)，这样的弊端是配置文件加载多次，应用上下文对象创建多次。</p><p>在Web项目中，可以使用ServletContextListener监听Web应用的启动，我们可以在Web应用启动时，就加载Spring的配置文件，创建应用上下文对象ApplicationContext，再将其存储到最大的域servletContext域中，这样就可以在任意位置从余种获得应用上下文ApplicationContext对象了。</p><h3 id="11-2、Spring提供给获取应用上下文的工具"><a href="#11-2、Spring提供给获取应用上下文的工具" class="headerlink" title="11.2、Spring提供给获取应用上下文的工具"></a>11.2、Spring提供给获取应用上下文的工具</h3><p>上面的分析不用手动实现，Spring提供了一个监听器ContextLoaderListener就是对上述功能的封装，该监听器内部加载Spring配置文件，创建应用上下文对象，并存储到ServletContext域中，提供了一个客户端工具WebApplicationContextUtils供使用者获得应用上下文对象。</p><p>所以我们需要做的只有两件事：</p><p>①在web.xml中配置ContextLoaderListener监听器(导入spring-web坐标)</p><p>②使用WebApplicationContextUtils获得应用上下文对象ApplicationContext</p><h1 id="Spring的AOP简介"><a href="#Spring的AOP简介" class="headerlink" title="Spring的AOP简介"></a>Spring的AOP简介</h1><h2 id="1-1、什么是AOP"><a href="#1-1、什么是AOP" class="headerlink" title="1.1、什么是AOP"></a>1.1、什么是AOP</h2><p>AOP为Aspect Oriented Programming的缩写，意思为面向切面编程，是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。</p><p>AOP时OOP的延续，是软件开发中的一个热点，也是Spring框架中的一个重要内容，是函数时变成的一种衍生泛型。利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p><h2 id="1-2、AOP的作用及其优势"><a href="#1-2、AOP的作用及其优势" class="headerlink" title="1.2、AOP的作用及其优势"></a>1.2、AOP的作用及其优势</h2><ul><li><p>作用：在程序运行期间，在不修改源码的情况下对方法进习性功能增强</p></li><li><p>优势：减少重复代码，提高开发效率，并且便于维护</p></li></ul><h2 id="1-3、AOP的底层实现"><a href="#1-3、AOP的底层实现" class="headerlink" title="1.3、AOP的底层实现"></a>1.3、AOP的底层实现</h2><p>实际上，AOP的底层是通过Spring提供的动态代理技术实现的。在运行期间，Spring通过动态代理技术动态的生成代理对象，代理对象方法执行时进行增强功能的接入，在去调用目标对象的方法，从而完成功能的增强。</p><h2 id="1-4、AOP的动态代理技术"><a href="#1-4、AOP的动态代理技术" class="headerlink" title="1.4、AOP的动态代理技术"></a>1.4、AOP的动态代理技术</h2><p>常用的动态代理技术：</p><ul><li><p>JDK代理：基于接口的动态代理技术</p></li><li><p>cglib代理：基于父类的动态代理技术</p></li></ul><p><img src="/2022/10/21/SSM/WEBRESOURCE3f15acacc6173069d50651dd296117f8.png"></p><h2 id="1-5、基于JDK的动态代理"><a href="#1-5、基于JDK的动态代理" class="headerlink" title="1.5、基于JDK的动态代理"></a>1.5、基于JDK的动态代理</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.Spring_aop;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//目标对象</span><br>        <span class="hljs-type">Target</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Target</span>();<br><br>        <span class="hljs-comment">//增强对象</span><br>        <span class="hljs-type">Advice</span> <span class="hljs-variable">advice</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Advice</span>();<br>        <span class="hljs-comment">//返回值就是动态生成的代理对象</span><br>        <span class="hljs-type">TargetInterface</span> <span class="hljs-variable">targetInterface</span> <span class="hljs-operator">=</span> (TargetInterface) Proxy.newProxyInstance(<br>                target.getClass().getClassLoader(), <span class="hljs-comment">//目标对象类加载器</span><br>                target.getClass().getInterfaces(),<span class="hljs-comment">//目标对象相同的接口字节码对象数组</span><br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() &#123;<br>                    <span class="hljs-comment">//调用代理对象的任何方法 实质执行的都是invoke方法</span><br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>                        advice.before();<br>                        <span class="hljs-type">Object</span> <span class="hljs-variable">invoke</span> <span class="hljs-operator">=</span> method.invoke(target, args);<span class="hljs-comment">//执行目标方法</span><br>                        advice.afterReturning();<br>                        <span class="hljs-keyword">return</span> invoke;<br>                    &#125;<br>                &#125;<br>        );<br>        <span class="hljs-comment">//调用代理对象的方法</span><br>        targetInterface.save();<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="1-6、基于cglib的动态代理"><a href="#1-6、基于cglib的动态代理" class="headerlink" title="1.6、基于cglib的动态代理"></a>1.6、基于cglib的动态代理</h2><p>难度过高、暂略。</p><p><a href="https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=125&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a">https://www.bilibili.com/video/BV1WZ4y1P7Bp?p=125&amp;spm_id_from=pageDriver&amp;vd_source=e3b8237315186129c5794d1094b57c6a</a></p><h2 id="1-7、AOP相关概念"><a href="#1-7、AOP相关概念" class="headerlink" title="1.7、AOP相关概念"></a>1.7、AOP相关概念</h2><p>Spring的AOP是新鲜底层就是对上面的动态代理的代码进行了封装，封装后我们只需要对需要关注的部分进行代码编写，并通过配置的方式完成指定目标的方法增强。</p><p>在正式讲解AOP的操作之前，我们必须理解AOP的相关术语，常用的术语如下：</p><ul><li><p>Target(目标对象)：代理的目标对象</p></li><li><p>Proxy(代理)：一个类被AOP织入增强后，就产生一个结果代理类</p></li><li><p>JoinPoint(连接点)：所谓连接点是指那些被拦截到的点。在Spring中这些点指的是方法，因为Spring支支持方法类型的连接点</p></li><li><p>Pointcut(切入点)：所谓切入点是指我们要对哪些Joinpoint进行拦截的定义</p></li><li><p>Advice(通知&#x2F;增强)：所谓通知是指拦截到Joinpoint之后所要做的事情就是通知</p></li><li><p>Aspect(切面)：是切入点和通知(引介)的结合</p></li><li><p>Weaving(织入)：是指把增强应用到目标对象来创建新的代理对象的过程。Spring采用动态代理织入，而AspectJ采用编译期织入和类装载器织入。</p></li></ul><h2 id="1-8、AOP开发的明确的事项"><a href="#1-8、AOP开发的明确的事项" class="headerlink" title="1.8、AOP开发的明确的事项"></a>1.8、AOP开发的明确的事项</h2><p>需要编写的内容</p><ul><li><p>编写核心业务代码（目标类的目标方法）</p></li><li><p>编写切面类，切面类中有通知（增强功能方法）</p></li><li><p>在配置文件中，配置织入关系，即将哪些通知与哪些连接点进行结合</p></li></ul><p>AOP底层使用哪种代理方式</p><p>在spring中，框架会根据目标是否实现了接口来决定采用哪种动态代理的方式。</p><p>目标对象有接口就会使用JDK的那种。</p><p>否则使用cglib那种。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--目标对象    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;targetImpl&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.Test3.Service.TargetImpl&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--切面对象    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;targetAspect&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.company.Test3.Service.TargetAspect&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--配置织入： 告诉spring框架 哪些方法(切点)需要进行哪些增强(前置、后置)....    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 切点表达式的抽取--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">&quot;execution(public void com.company.Test3.Service.TargetImpl.save())&quot;</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!--声明切面    --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;targetAspect&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!--切面：切点+通知    --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;before&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:before</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:after-returning</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;afterReturning&quot;</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">&quot;pointcut&quot;</span> <span class="hljs-attr">returning</span>=<span class="hljs-string">&quot;result&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:after-returning</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-1、XML配置AOP详解"><a href="#2-1、XML配置AOP详解" class="headerlink" title="2.1、XML配置AOP详解"></a>2.1、XML配置AOP详解</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE3cef0f6841539dee533856a3b79d5e83.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE48f073c93a1e6d842e1ab1836f35f91c.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEee1ada72ad976ebccbf4a5de7683208a.png"></p><h2 id="3-1、基于注解的AOP开发"><a href="#3-1、基于注解的AOP开发" class="headerlink" title="3.1、基于注解的AOP开发"></a>3.1、基于注解的AOP开发</h2><h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><h2 id="1、SpringMVC简介"><a href="#1、SpringMVC简介" class="headerlink" title="1、SpringMVC简介"></a>1、SpringMVC简介</h2><h3 id="1-1、SpringMVC概述"><a href="#1-1、SpringMVC概述" class="headerlink" title="1.1、SpringMVC概述"></a>1.1、SpringMVC概述</h3><p>SpringMVC是一种基于Java的实现MVC设计模型的请求驱动类型的轻量级Web框架，属于SpringFrameWork的后续产品，已经融合在Spring Web Flow中</p><p>SpringMVC已经称为目前最主流的MVC框架之一，并且随着Spring3.0的发布，全面超越Struts2，称为最优秀的MVC框架。它通过一套注解，让一个简单的Java类成为处理请求的控制器，而无需实现任何接口。同时它还支持RESTful编程风格的请求。</p><h3 id="1-2、SpringMVC快速入门"><a href="#1-2、SpringMVC快速入门" class="headerlink" title="1.2、SpringMVC快速入门"></a>1.2、SpringMVC快速入门</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE2a48a9d4bb83e804bac3fd07d7bd6073.png"></p><p>需求：客户端发起请求，服务器端接受请求，执行逻辑并进行试图跳转。</p><p>开发步骤：</p><p>①导入SpringMVC相关坐标</p><p>②配置SpringMVC核心控制器DispathcerServlet</p><p>③创建Controller类和视图页面</p><p>④使用注解配置Controller类中业务方法的映射地址</p><p>⑤配置SpringMVC核心文件spring-mvc.xml</p><p>⑥客户端发起请求测试</p><h3 id="1-3、SpringMVC流程图"><a href="#1-3、SpringMVC流程图" class="headerlink" title="1.3、SpringMVC流程图"></a>1.3、SpringMVC流程图</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE60ee809af5b78762fdae7725f18e02f5.png"></p><h2 id="2、SpringMVC组件解析"><a href="#2、SpringMVC组件解析" class="headerlink" title="2、SpringMVC组件解析"></a>2、SpringMVC组件解析</h2><h3 id="2-1、SpringMVC的执行流程"><a href="#2-1、SpringMVC的执行流程" class="headerlink" title="2.1、SpringMVC的执行流程"></a>2.1、SpringMVC的执行流程</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE25f679777ede905bb9cd702e917de75f.png"></p><p>①用户发送请求至前端控制器DispatcherServlet。</p><p>②DispatcherServlet收到请求调用HandlerMapping处理器映射器。</p><p>③处理器映射器找到具体的处理器(可以根据xml配置、注解进行查找)，生成处理器对象处理器拦截器(如果有则生成)一并返回给DispatcherServlet</p><p>④DispatcherServlet调用HandlerAdapter处理器适配器</p><p>⑤HandlerAdapter经过适配调用具体的处理器(Controller,也叫后端控制器)。</p><p>⑥Controller执行完成返回ModelAndView。</p><p>⑦HandlerAdapter将controller执行结果ModelAndView返回给DispatcherServlet。</p><p>⑧DispatcherServlet将ModelAndView传给ViewReslover视图解析器。</p><p>⑨ViewReslover解析后返回具体View。</p><p>⑩DispatcherServlet根据View进行渲染视图(即将模型数据填充至视图中)DispatcherServlet响应用户。</p><h3 id="2-2、SpringMVC注解解析"><a href="#2-2、SpringMVC注解解析" class="headerlink" title="2.2、SpringMVC注解解析"></a>2.2、SpringMVC注解解析</h3><p>@RequestMapping</p><p>作用：请求映射，主要是用于建立请求URL和处理请求方法之间的对应关系。</p><p>位置：</p><ul><li><p>类上：请求URL的第一级访问目录。此处不写的话，就相当于应用的根目录</p></li><li><p>方法上：请求URL的第二级访问目录，与类上的使用@ReqquestMapping标注的一级目录一起组成访问虚拟路径。</p></li></ul><p>属性：</p><ul><li><p>value：用于指定请求的URL。它和paht属性的作用是一样的</p></li><li><p>method：用于指定请求的方式</p></li><li><p>params：用于指定限制请求参数的条件。它支持简单的表达式。要求请求参数的key和value必须和配置的一摸一样。</p></li></ul><h3 id="2-3、知识要点"><a href="#2-3、知识要点" class="headerlink" title="2.3、知识要点"></a>2.3、知识要点</h3><p><img src="/2022/10/21/SSM/WEBRESOURCE83f302b30935f8c9804b21aa072cbb88.png"></p><h2 id="3、SpringMVC的数据响应"><a href="#3、SpringMVC的数据响应" class="headerlink" title="3、SpringMVC的数据响应"></a>3、SpringMVC的数据响应</h2><h3 id="3-1、SpringMVC的数据相应方式"><a href="#3-1、SpringMVC的数据相应方式" class="headerlink" title="3.1、SpringMVC的数据相应方式"></a>3.1、SpringMVC的数据相应方式</h3><p><img src="/2022/10/21/SSM/WEBRESOURCEb84a6abf71eaf072ccccba135acd7514.png"></p><ul><li><p>使用map</p></li><li><p>使用ModelAndView</p></li><li><p>使用req.setAttribute</p></li></ul><h2 id="4、SpringMVC的请求"><a href="#4、SpringMVC的请求" class="headerlink" title="4、SpringMVC的请求"></a>4、SpringMVC的请求</h2><h3 id="4-1、获得请求参数"><a href="#4-1、获得请求参数" class="headerlink" title="4.1、获得请求参数"></a>4.1、获得请求参数</h3><p>格式：?name&#x3D;value&amp;name&#x3D;value</p><p>服务器端要获得请求的参数，有时还需要进行数据的封装，SpringMVC可以接受如下类型的参数：</p><ul><li><p>基本类型参数</p></li><li><p>POJO类型参数</p></li><li><p>数组类型参数</p></li><li><p>集合类型参数</p></li></ul><p>Controller中的业务方法的参数名称要与请求参数的name一致，参数值会自动映射匹配。</p><h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h2 id="1、Mybatis简介"><a href="#1、Mybatis简介" class="headerlink" title="1、Mybatis简介"></a>1、Mybatis简介</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE09193dd79b01d0115816d5418822641e.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE15a49bbb138e9222fef82bcbd77d1b4d.png"></p><h3 id="1-2、原始jdbc操作的分析"><a href="#1-2、原始jdbc操作的分析" class="headerlink" title="1.2、原始jdbc操作的分析"></a>1.2、原始jdbc操作的分析</h3><p>原始jdbc开发存在的问题如下：</p><p>①数据库连接创建、释放频繁造成系统资源浪费从而影响系统性能。</p><p>②sql语句在代码中硬编码，造成代码不宜维护，实际应用sql变化的可能比较大，sql变动需要改变java代码。</p><p>③查询操作时，需要手动将结果集中的数据手动封装到实体中。插入操作时，需要手动将实体的数据设置到sql语句的占位符位置</p><p>应对上述问题给出的解决方案：</p><p>①使用数据库连接池初始化连接资源</p><p>②将sql语句抽取到xml配置文件中</p><p>③使用反射、内省等底层技术，自动将实体与表进行属性与字段的自动映射</p><h3 id="1-3、什么是Mybatis"><a href="#1-3、什么是Mybatis" class="headerlink" title="1.3、什么是Mybatis"></a>1.3、什么是Mybatis</h3><ul><li><p>mybatis是一个优秀的基于java的持久层框架，它内部封装了jdbc，使开发者只需要关注sql语句本身，而不需要花费精力去处理加载驱动、创建链接、创建statement等繁杂的过程</p></li><li><p>mybatis通过xml或注解的方式将要执行的各种statement配置起来，并通过java对象和statement中sql的动态参数进行映射生成最终执行的sql语句</p></li><li><p>最后mybatis框架执行sql并将结果映射为java对象并返回，采用ORM思想解决了实体和数据库映射的我呢提，对jdbc进行了封装，屏蔽了jdbc api底层访问细节，是我们不用与jdbc api打交道，就可以完成对数据库的持久化操作。</p></li></ul><h2 id="2、Mybatis的快速入门"><a href="#2、Mybatis的快速入门" class="headerlink" title="2、Mybatis的快速入门"></a>2、Mybatis的快速入门</h2><p>MyBatis官网地址：<a href="https://mybatis.org/mybatis-3/">https://mybatis.org/mybatis-3/</a></p><h3 id="2-1、MyBatis开发步骤"><a href="#2-1、MyBatis开发步骤" class="headerlink" title="2.1、MyBatis开发步骤"></a>2.1、MyBatis开发步骤</h3><p>①添加MyBatis的坐标</p><p>②创建user数据表</p><p>③编写User实体类</p><p>④编写映射文件UserMapper.xml</p><p>⑤编写核心文件SqlMapConfig.xml</p><p>⑥编写测试类</p><p>ps:④UserMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;userMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span><br>        select * from user<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ps:⑤SqlMapConfig.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--数据源环境    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=false<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--加载映射文件    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;com/company/mapper/UserMapper.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ps:⑥测试类</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//获取核心配置文件</span><br>InputStream resourceAsStream = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Resources</span>.</span></span>get<span class="hljs-constructor">ResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>)</span>;<br><span class="hljs-comment">//获取session工厂对象</span><br>SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SqlSessionFactoryBuilder()</span>.build(resourceAsStream);<br><span class="hljs-comment">//获得session会话对象</span><br>SqlSession sqlSession = sqlSessionFactory.<span class="hljs-keyword">open</span><span class="hljs-constructor">Session()</span>;<br><span class="hljs-comment">//执行操作 参数：namespace+id</span><br>List&lt;User&gt; userList = sqlSession.select<span class="hljs-constructor">List(<span class="hljs-string">&quot;userMapper.findAll&quot;</span>)</span>;<br><span class="hljs-comment">//打印数据</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(userList);<br><span class="hljs-comment">//释放资源</span><br>sqlSession.close<span class="hljs-literal">()</span>;<br></code></pre></td></tr></table></figure><h2 id="3、Mybatis映射文件概述"><a href="#3、Mybatis映射文件概述" class="headerlink" title="3、Mybatis映射文件概述"></a>3、Mybatis映射文件概述</h2><p><img src="/2022/10/21/SSM/WEBRESOURCE1c4f8ffcac86042e493f22ffc2deae08.png"></p><h2 id="4、Mybatis的增删改查"><a href="#4、Mybatis的增删改查" class="headerlink" title="4、Mybatis的增删改查"></a>4、Mybatis的增删改查</h2><h3 id="4-1、MyBatis的插入数据操作"><a href="#4-1、MyBatis的插入数据操作" class="headerlink" title="4.1、MyBatis的插入数据操作"></a>4.1、MyBatis的插入数据操作</h3><h4 id="4-1-1、插入操作需要注意的问题："><a href="#4-1-1、插入操作需要注意的问题：" class="headerlink" title="4.1.1、插入操作需要注意的问题："></a>4.1.1、插入操作需要注意的问题：</h4><ul><li><p>插入语句使用insert标签</p></li><li><p>在映射文件中使用parameterType属性指定要插入的数据类型</p></li><li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p></li><li><p>插入操作使用的API是sqlSession.insert(“命名空间.id”，实体对象);</p></li><li><p>插入操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--插入操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;save&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span></span><br><span class="language-xml">    insert into user (id, username, password)values(#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">,#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml">,#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml">)</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setUsername(<span class="hljs-string">&quot;小羊&quot;</span>);<br>    user.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.insert(<span class="hljs-string">&quot;userMapper.save&quot;</span>,user);<br>    <span class="hljs-comment">//mybatis执行更新操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-1-2、修改操作需要注意的问题："><a href="#4-1-2、修改操作需要注意的问题：" class="headerlink" title="4.1.2、修改操作需要注意的问题："></a>4.1.2、修改操作需要注意的问题：</h4><ul><li><p>修改语句使用insert标签</p></li><li><p>在映射文件中使用parameterType属性指定要修改的数据类型</p></li><li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p></li><li><p>修改操作使用的API是sqlSession.update(“命名空间.id”，实体对象);</p></li><li><p>修改操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--修改操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.company.MyBatis_quick.Pojo.User&quot;</span>&gt;</span></span><br><span class="language-xml">    update user set username = #</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml">,password = #</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"> where id = #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setUsername(<span class="hljs-string">&quot;小绵羊&quot;</span>);<br>    user.setPassword(<span class="hljs-string">&quot;123456&quot;</span>);<br>    user.setId(<span class="hljs-number">4</span>);<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.update(<span class="hljs-string">&quot;userMapper.update&quot;</span>,user);<br>    <span class="hljs-comment">//mybatis执行更新操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-1-3、删除操作需要注意的问题："><a href="#4-1-3、删除操作需要注意的问题：" class="headerlink" title="4.1.3、删除操作需要注意的问题："></a>4.1.3、删除操作需要注意的问题：</h4><ul><li><p>删除语句使用insert标签</p></li><li><p>在映射文件中使用parameterType属性指定要删除的数据类型</p></li><li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p></li><li><p>删除操作使用的API是sqlSession.delete(“命名空间.id”，实体对象);</p></li><li><p>删除操作设计数据库数据变化，需要使用sqlSession对象进行事务提交，即sqlSession.commit();</p></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-comment">&lt;!--删除操作    --&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delete&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span></span><br><span class="language-xml">    delete from user where id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml">;</span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br>    <span class="hljs-comment">//获取核心配置文件</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;SqlMapConfig.xml&quot;</span>);<br>    <span class="hljs-comment">//获取session工厂对象</span><br>    <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);<br>    <span class="hljs-comment">//获得session会话对象</span><br>    <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>    <span class="hljs-comment">//执行操作</span><br>    sqlSession.delete(<span class="hljs-string">&quot;userMapper.delete&quot;</span>,id);<br>    <span class="hljs-comment">//mybatis执行删除操作需要提交事务</span><br>    sqlSession.commit();<br>    <span class="hljs-comment">//释放资源</span><br>    sqlSession.close();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5、Mybatis核心配置文件"><a href="#5、Mybatis核心配置文件" class="headerlink" title="5、Mybatis核心配置文件"></a>5、Mybatis核心配置文件</h2><h3 id="5-1、MyBatis核心配置文件层级关系"><a href="#5-1、MyBatis核心配置文件层级关系" class="headerlink" title="5.1、MyBatis核心配置文件层级关系"></a>5.1、MyBatis核心配置文件层级关系</h3><ul><li><p>configuration配置</p></li><li><p>properties 属性</p></li><li><p>settings 设置</p></li><li><p>typeAliases 类型别名</p></li><li><p>typeHandlers 类型处理器</p></li><li><p>objectFactory 对象工厂</p></li><li><p>plugins 插件</p></li><li><p>environments 环境</p></li><li><p>environment 环境变量</p></li><li><p>transactionManager 事务管理器</p></li><li><p>dataSource 数据源</p></li><li><p>databaseIdProvider 数据库厂商便是</p></li><li><p>mappers 映射器</p></li></ul><h3 id="5-2、MyBatis常用配置解析"><a href="#5-2、MyBatis常用配置解析" class="headerlink" title="5.2、MyBatis常用配置解析"></a>5.2、MyBatis常用配置解析</h3><p>官方文档：<a href="https://mybatis.net.cn/configuration.html">https://mybatis.net.cn/configuration.html</a></p><p>1、environments标签</p><p>数据库环境的配置，支持多环境配置</p><p><img src="/2022/10/21/SSM/WEBRESOURCE83eaa2a0e2824e1060ad943aa222b732.png"></p><p>其中，事务管理器(transactionManager)类型有两种：</p><ul><li><p>JDBC：这个配置就是直接使用了JDBC的提交和回滚设置，它依赖于从数据源得到的链接来管理事务作用域</p></li><li><p>MANAGED：这个配置几乎没做什么。他从来不提交或回滚一个连接，而是让容器来管理事务的整个生命周期(比如JEE应用服务器的上下文)。默认情况下它会关闭连接，然而一些容器并不希望这样，因此需要将closeConnection属性设置为false来阻止它默认的关闭行为。</p></li></ul><p>其中，数据源(dataSource)类型有三种：</p><ul><li><p>UNPOOLED：这个数据源的实现只是每次请求打开和关闭链接</p></li><li><p>POOLED：这种数据源的实现利用”池“的概念将JDBC连接对象组织起来。</p></li><li><p>JNDI：这个数据源的实现是为了能在比如EJB或应用服务器这类容器中使用，容器可以其中或在外部配置数据源，然后放置一个JNDI上下文的引用。</p></li></ul><p>2、mapper标签</p><p>该标签的作用是加载映射的，加载方式有如下几种：</p><ul><li><p>使用相对于类路径的资源引用，例如：<mapper resource="org/mybatis/builder/builder/AuthorMapper.xml"/></p></li><li><p>使用完全限定资源定位符(URL)，例如：<mapper url="file:///var/mappers/AuthorMapper.xml"/></p></li><li><p>使用映射器接口实现类的完全限定类名，例如：<mapper class="org.mybatis.builder.AuthorMapper"/></p></li><li><p>将包内的映射器接口实现全部注册为映射器，例如：<package name="org.mybatis.builder"/></p></li></ul><p><img src="/2022/10/21/SSM/WEBRESOURCEdb3fe4d75af0a5ab2d11fe77f8b96b58.png"></p><p>3、Properties标签</p><p>实际开发中，习惯将数据源的配置信息单独抽取成一个properties文件，该标签可以加载额外配置的properties文件。</p><p><img src="/2022/10/21/SSM/WEBRESOURCE03324357bf4da77fab672943c6d4fe46.png"></p><p>4、typeAliases标签</p><p><img src="/2022/10/21/SSM/WEBRESOURCE718aa05b9a65243c539535055113dfc7.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE00352f0140ee769dd03be6056f636555.png"></p><h2 id="6、Mybatis相应API"><a href="#6、Mybatis相应API" class="headerlink" title="6、Mybatis相应API"></a>6、Mybatis相应API</h2><h3 id="6-1、SqlSession工厂构建器SqlSessionFactoryBuilder"><a href="#6-1、SqlSession工厂构建器SqlSessionFactoryBuilder" class="headerlink" title="6.1、SqlSession工厂构建器SqlSessionFactoryBuilder"></a>6.1、SqlSession工厂构建器SqlSessionFactoryBuilder</h3><p>常用API：SqlSessionFactory build(InputStream inputStream)</p><p>通过加载mybatis的核心文件的输入流的形式构建一个SqlSessionFactory对象</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">String resource <span class="hljs-operator">=</span> <span class="hljs-string">&quot;org/mybatis/builder/mybatis-config.xml&quot;</span><span class="hljs-comment">;</span><br>InputStream inputStream <span class="hljs-operator">=</span> Resources.getResourceAsStream(resource)<span class="hljs-comment">;</span><br>SqlSessionFactoryBuilder builder <span class="hljs-operator">=</span> new SqlSessionFactoryBuilder()<span class="hljs-comment">;</span><br>SqlSessionFactory factory <span class="hljs-operator">=</span> builder.build(inputStream)<br></code></pre></td></tr></table></figure><p>其中Resources工具类，这个类在org.apache.ibatis.io包中。Resources类帮助你从类路径下、系统文件或一个web URL中加载资源文件。</p><h3 id="6-2、SqlSession工厂对象SqlSessionFactory"><a href="#6-2、SqlSession工厂对象SqlSessionFactory" class="headerlink" title="6.2、SqlSession工厂对象SqlSessionFactory"></a>6.2、SqlSession工厂对象SqlSessionFactory</h3><p>SqlSessionFactory有多个方法创建SqlSession实力，常用的有如下两个：</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">open</span><span class="hljs-constructor">Session()</span> 会默认开启一个事务，但事务不会自动提交。<br><span class="hljs-keyword">open</span><span class="hljs-constructor">Session(<span class="hljs-params">boolean</span> <span class="hljs-params">autoCommit</span>)</span>  参数为是否自动提交。<br></code></pre></td></tr></table></figure><h3 id="6-3、SqlSession会话对象"><a href="#6-3、SqlSession会话对象" class="headerlink" title="6.3、SqlSession会话对象"></a>6.3、SqlSession会话对象</h3><p>SqlSession实例在MyBatis中是非常强大的一个类。在这里你会看到所有执行语句、提交或回滚事务和获取映射器实例的方法。执行语句的方法主要有：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;T&gt; T selectOne(String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br>&lt;E&gt; List&lt;E&gt; selectList (Stringg <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">insert</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">update</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br><span class="hljs-type">int</span> <span class="hljs-keyword">delete</span> (String <span class="hljs-keyword">statement</span>,<span class="hljs-keyword">Object</span> parameter)<br></code></pre></td></tr></table></figure><p>操作事务的主要方法有：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">commit</span>()</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">rollback</span>()</span><br></code></pre></td></tr></table></figure><h2 id="7、Mybatis的dao层实现"><a href="#7、Mybatis的dao层实现" class="headerlink" title="7、Mybatis的dao层实现"></a>7、Mybatis的dao层实现</h2><h3 id="7-1、传统开发方式"><a href="#7-1、传统开发方式" class="headerlink" title="7.1、传统开发方式"></a>7.1、传统开发方式</h3><p>与javaweb结构相似</p><h3 id="7-2、代理开发方式"><a href="#7-2、代理开发方式" class="headerlink" title="7.2、代理开发方式"></a>7.2、代理开发方式</h3><h4 id="7-2-1、代理开发方式介绍"><a href="#7-2-1、代理开发方式介绍" class="headerlink" title="7.2.1、代理开发方式介绍"></a>7.2.1、代理开发方式介绍</h4><p>采用Mybatis的代理开发方式实现DAO层的开发，这种方式是我们后面进入企业的主流。</p><p>Mapper接口开发方法只需要程序员编写Mapper接口(相当于Dao接口)，有Mybatis框架根据接口定义创建接口的动态代理对象，代理对象的方法体同上边Dao接口实现类方法。</p><p>Mapper接口开发需要遵循一下规范：</p><p>①Mapper.xml文件中的namespace与mapper接口的全限定名相同</p><p>②Mapper接口方法名和Mapper.xml中定义的每个statement的id相同</p><p>③Mapper接口方法的输入参数类型和mapper.xml中定义的每个sql的parameterType的类型相同</p><p>④Mapper接口方法的输出参数类型和mapper.xml中定义的每个sql的resultType的类型相同</p><h4 id="7-2-2、编写UserMapper接口"><a href="#7-2-2、编写UserMapper接口" class="headerlink" title="7.2.2、编写UserMapper接口"></a>7.2.2、编写UserMapper接口</h4><p><img src="/2022/10/21/SSM/WEBRESOURCE75ba046470c50cde99e457b967986d74.png"></p><h2 id="8、Mybatis映射文件深入"><a href="#8、Mybatis映射文件深入" class="headerlink" title="8、Mybatis映射文件深入"></a>8、Mybatis映射文件深入</h2><h3 id="8-1、动态sql语句-https-mybatis-net-cn-dynamic-sql-html"><a href="#8-1、动态sql语句-https-mybatis-net-cn-dynamic-sql-html" class="headerlink" title="8.1、动态sql语句(https://mybatis.net.cn/dynamic-sql.html)"></a>8.1、动态sql语句(<a href="https://mybatis.net.cn/dynamic-sql.html">https://mybatis.net.cn/dynamic-sql.html</a>)</h3><h4 id="8-1-1、动态sql语句"><a href="#8-1-1、动态sql语句" class="headerlink" title="8.1.1、动态sql语句"></a>8.1.1、动态sql语句</h4><ul><li><if></li></ul><p>我们根据实体类的不同取值，使用不同的SQL语句来进行查新，比如在id如果不为空时可以根据id查询，如果username不为空时还要加入用户名作为条件。这种情况在我们的多条件组合查询中经常碰到。</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--根据Condition查询操作    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByCondition&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        select * from user</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="language-xml">                and id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and username=#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;password!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and password=#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><ul><li><foreach></li></ul><p>循环执行sql的拼接操作，例如：select * from user where id in（1，2，5）</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByIds&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        select * from user</span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;id in(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span></span><br><span class="language-xml">                #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h3 id="8-2、sql片段的抽取"><a href="#8-2、sql片段的抽取" class="headerlink" title="8.2、sql片段的抽取"></a>8.2、sql片段的抽取</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="language-xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="hljs-meta"><span class="language-xml">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--sql语句抽取    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span>select * from user<span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-comment">&lt;!--根据Condition查询操作    --&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByCondition&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;User&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;id!=0&quot;</span>&gt;</span></span><br><span class="language-xml">                and id=#</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and username=#</span><span class="hljs-template-variable">&#123;username&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;password!=null&quot;</span>&gt;</span></span><br><span class="language-xml">                and password=#</span><span class="hljs-template-variable">&#123;password&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findByIds&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;selectUser&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">open</span>=<span class="hljs-string">&quot;id in(&quot;</span> <span class="hljs-attr">close</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">item</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span></span><br><span class="language-xml">                #</span><span class="hljs-template-variable">&#123;id&#125;</span><span class="language-xml"></span><br><span class="language-xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="9、Mybatis核心配置文件深入"><a href="#9、Mybatis核心配置文件深入" class="headerlink" title="9、Mybatis核心配置文件深入"></a>9、Mybatis核心配置文件深入</h2><h3 id="9-1、typeHandlers标签"><a href="#9-1、typeHandlers标签" class="headerlink" title="9.1、typeHandlers标签"></a>9.1、typeHandlers标签</h3><p>无论是MyBatis在处理语句(PreparedStatement)中设置一个参数时，还是从结果集中取出一个值时，都会用类型处理器将获取的值以合适的方式转换成Java类型。下标描述了一些默认的类型处理器(部分)</p><table><thead><tr><th>类处理器</th><th>Java类型</th><th>JDBC类型</th></tr></thead><tbody><tr><td>BooleanTypeHandler</td><td>java.lang.Boolean,boolean</td><td>数据库兼容的BOOLEAN</td></tr><tr><td>ByteTypeHandler</td><td>java.lang.Byte,byte</td><td>数据库兼容的NUMERIC或BYTE</td></tr><tr><td>ShortTypeHandler</td><td>java.lang.Short,short</td><td>数据库兼容的NUMERIC或SHORT INTEGER</td></tr><tr><td>IntegerTypeHandler</td><td>java.lang.Integer,int</td><td>数据库兼容的NUMERIC或INTEGER</td></tr><tr><td>LongTypeHnadler</td><td>java.lang.long,long</td><td>数据库兼容的NUMERIC或LONG INTEGER</td></tr></tbody></table><p>你可以重写类型处理器或创建自己的类型处理器来处理不持支的或非标准的类型。具体做法为：实现org.apache.ibatis.type.TybeHandler接口，或继承一个很便利的类org.apache.ibatis.type.BaseTypeHandler,然后可以选择性地将它映射到一个JDBC类型。例如需求：一个Java中的Date数据类型，我想将之存入到数据库的时候存成一个1790至今的毫秒数，取出来时转换成java的Date，即java的Date与数据库的varchar毫秒之间转换。</p><p>开发步骤：</p><p>①定义转换继承类BaseTypeHandler<T></p><p>②覆盖4个为实现的方法，其中setNonNullParameter为java程序设置数据到数据库的回调方法，getNullableResult为查询时mysql的字符串类型转换成java的Type类型的方法</p><p>③在MyBatis核心配置文件中进行注册</p><p>④测试转换是否正确</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_Dao.Handler;<br><br><span class="hljs-keyword">import</span> org.apache.ibatis.type.BaseTypeHandler;<br><span class="hljs-keyword">import</span> org.apache.ibatis.type.JdbcType;<br><br><span class="hljs-keyword">import</span> java.sql.CallableStatement;<br><span class="hljs-keyword">import</span> java.sql.PreparedStatement;<br><span class="hljs-keyword">import</span> java.sql.ResultSet;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DateTypeHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;Date&gt; &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(PreparedStatement preparedStatement, <span class="hljs-type">int</span> i, Date date, JdbcType jdbcType)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> date.getTime();<br>        preparedStatement.setLong(i,time);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(ResultSet resultSet, String s)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> resultSet.getLong(s);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(ResultSet resultSet, <span class="hljs-type">int</span> i)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> resultSet.getLong(i);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(CallableStatement callableStatement, <span class="hljs-type">int</span> i)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> callableStatement.getLong(i);<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(aLong);<br>        <span class="hljs-keyword">return</span> date;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--注册类型处理器    --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">typeHandlers</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeHandler</span> <span class="hljs-attr">handler</span>=<span class="hljs-string">&quot;com.company.MyBatis_Dao.Handler.DateTypeHandler&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">typeHandler</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">typeHandlers</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="9-2、plugins标签"><a href="#9-2、plugins标签" class="headerlink" title="9.2、plugins标签"></a>9.2、plugins标签</h3><p>MyBatis可以使用第三方的插件来对功能进行扩展，分页助手PageHelper是将分页的复杂操作进行封装，使用简单的方式即可获得分页的相关数据</p><p>开发步骤：</p><p>①导入通用PageHelper的坐标</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.jsqlparser<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsqlparser<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>②在mybatis核心配置文件中配置PageHelper插件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置分页助手插件    --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">&quot;com.github.pagehelper.PageHelper&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dialect&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;mysql&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br></code></pre></td></tr></table></figure><p>③测试分页数据获取</p><h2 id="10、Mybatis的多表操作"><a href="#10、Mybatis的多表操作" class="headerlink" title="10、Mybatis的多表操作"></a>10、Mybatis的多表操作</h2><h3 id="10-1、一对一的封装查询"><a href="#10-1、一对一的封装查询" class="headerlink" title="10.1、一对一的封装查询()"></a>10.1、一对一的封装查询<resultMap>(<association>)</h3><ul><li>Order</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.sql.Timestamp;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> &#123;<br><br>  <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> id;<br>  <span class="hljs-keyword">private</span> java.sql.Timestamp ordertime;<br>  <span class="hljs-keyword">private</span> Double total;<br><br>  <span class="hljs-comment">//表示当前订单属于哪一个用户</span><br>  <span class="hljs-keyword">private</span> User user;<br>&#125;<br><br></code></pre></td></tr></table></figure><ul><li>User</li></ul><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> int id;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> username;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> password;<br>    <span class="hljs-keyword">private</span> Date Birthday;<br>&#125;<br><br></code></pre></td></tr></table></figure><ul><li>OrderMapper.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.OrderMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;orderMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--手动指定字段与实体属性的映射关系(column：数据库的字段名称 property：实体的属性名称)--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user.birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectOrders&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;orderMap&quot;</span>&gt;</span><br>        select *,o.id oid from `order` o,`user` u where o.uid=u.id<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><association>标签</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.OrderMapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;orderMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--手动指定字段与实体属性的映射关系(column：数据库的字段名称 property：实体的属性名称)--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;user&quot;</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;Birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;Birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">association</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectOrders&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;orderMap&quot;</span>&gt;</span><br>        select *,o.id oid from `order` o,`user` u where o.uid=u.id<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="10-2、一对多或多对一的封装查询"><a href="#10-2、一对多或多对一的封装查询" class="headerlink" title="10.2、一对多或多对一的封装查询+"></a>10.2、一对多或多对一的封装查询<resultMap>+<collection></h3><ul><li><collection>标签</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.company.MyBatis_multi.Dao.UserMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;user&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;uid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;birthday&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;birthday&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--property:集合名称--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;orderList&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;Order&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;oid&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;ordertime&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;ordertime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;total&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userMap&quot;</span>&gt;</span><br>        select *,o.id oid from `user` u,`order` o where u.id=o.uid<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>User</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.MyBatis_multi.Pojo;<br><br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> Date Birthday;<br><br>    <span class="hljs-keyword">private</span> List&lt;Order&gt; orderList;<br>    <br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="10-3、多对多的封装查询"><a href="#10-3、多对多的封装查询" class="headerlink" title="10.3、多对多的封装查询+"></a>10.3、多对多的封装查询<resultMap>+<collection></h3><p><img src="/2022/10/21/SSM/WEBRESOURCE3318f9cbd6ce3ab910188e2530281530.png"></p><p>和一对多相似</p><h2 id="11、Mybatis的注解开发"><a href="#11、Mybatis的注解开发" class="headerlink" title="11、Mybatis的注解开发"></a>11、Mybatis的注解开发</h2><h3 id="11-1、MyBatis的常用注解"><a href="#11-1、MyBatis的常用注解" class="headerlink" title="11.1、MyBatis的常用注解"></a>11.1、MyBatis的常用注解</h3><p>这几年来注解开发越来越流行，Mybatis也可以使用注解开发方式，这样我们就可以减少编写Mapper映射文件了。我们先围绕一些基本的CRUD来学习，再学习复杂映射多表操作。</p><p>@Insert：实现新增</p><p>@Update：实现更新</p><p>@Delete：实现删除</p><p>@Select：实现查询</p><p>@Result：实现结果集封装</p><p>@Results：可以与@Result一起使用，封装多个结果集</p><p>@One：实现一对一结果集封装</p><p>@Many：实现一对多结果集封装</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-variable">@Results</span>(id=<span class="hljs-string">&quot;groupWithUsers&quot;</span>,<br>         value = &#123; <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;groupId&quot;</span>, column = <span class="hljs-string">&quot;group_id&quot;</span>, id = true),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;name&quot;</span>, column = <span class="hljs-string">&quot;name&quot;</span>), <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;accountId&quot;</span>, column = <span class="hljs-string">&quot;account_id&quot;</span>),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;deleteFlag&quot;</span>, column = <span class="hljs-string">&quot;delete_Flag&quot;</span>),<br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;parentId&quot;</span>, column = <span class="hljs-string">&quot;parent_Id&quot;</span>), <br>            <span class="hljs-variable">@Result</span>(property = <span class="hljs-string">&quot;userList&quot;</span>, javaType=List.class, many =<span class="hljs-variable">@Many</span>(select=<span class="hljs-string">&quot;selectUsersByGroupId&quot;</span>), column = <span class="hljs-string">&quot;group_id&quot;</span>)&#125;)<br><span class="hljs-comment">//查询</span><br><span class="hljs-variable">@Select</span>(&#123;<span class="hljs-string">&quot;select * from group where account_id=#&#123;accountId&#125; and delete_flag=0&quot;</span>&#125;)<br>List&lt;Group&gt; <span class="hljs-built_in">selectGroupWithUsers</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">&quot;accountId&quot;</span>) String accountId);<br> <br> <br><span class="hljs-variable">@Select</span>(&#123;<span class="hljs-string">&quot;select u.* from user u&quot;</span>,<br><span class="hljs-string">&quot;inner join user_group ug on u.user_id = ug.user_id&quot;</span>,<br><span class="hljs-string">&quot;where ug.group_id=#&#123;groupId&#125; and u.delete_flag=0&quot;</span><br>&#125;)<br>List&lt;User&gt; <span class="hljs-built_in">selectUsersByGroupId</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">&quot;groupId&quot;</span>) String groupId);<br><br></code></pre></td></tr></table></figure><h1 id="Spring与Mybatis的整合"><a href="#Spring与Mybatis的整合" class="headerlink" title="Spring与Mybatis的整合"></a>Spring与Mybatis的整合</h1><p><img src="/2022/10/21/SSM/WEBRESOURCEb85f881a311fe197b40fdb3c4fc3abb6.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEcf8846dd2f2ef47bcf68c2953b23cecd.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEe3ab70c2f586a09f8fe0b72d88f8b824.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE4231fd93fe416597d86830f309ab8fa7.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE699b422bba9bdd40a84faa2c9f4e5384.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE8353a293c162c1c7728f3312367fad88.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE66cc208e423d6e8b8f8d668663a8361a.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE8c6e280f2ddbec8ec55dacce5b06e0ce.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEe629d56ba9f288205e6ae57dfd3f1165.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCEb15736c567cc6153e7dfbb2059579fd5.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE9d452d403992cc0392c08a6b5f23a0cd.png"></p><p><img src="/2022/10/21/SSM/WEBRESOURCE991f998e3da65b66ab134ec7ac50bc7f.png"></p><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/aop/spring-aop.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">       http://www.springframework.org/schema/tx</span></span><br><span class="hljs-string"><span class="hljs-tag">      http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span><br><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">&quot;com.company.MS1&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspectj-autoproxy</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tx:annotation-driven</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">&quot;txManager&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.apache.commons.dbcp.BasicDataSource&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driverClassName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;jdbc:mysql://localhost:3306/test?useSSL=false<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf-8<span class="hljs-symbol">&amp;amp;</span>serverTimezone=Asia/Shanghai&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;123456&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;configLocation&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Mybatis_config.xml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;mapperLocations&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>com.company.mapper/ProviderMapper.xml<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-comment">&lt;!-- SqlSessionTemplate--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;sqlSessionTemplate&quot; class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;constructor-arg name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerMapper&quot; class=&quot;com.company.MS1.Mapper.Impl.ProviderMapperImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;sqlSessionTemplate&quot; ref=&quot;sqlSessionTemplate&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;    --&gt;</span><br><br><span class="hljs-comment">&lt;!-- MapperFactoryBean--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerMapper&quot; class=&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;mapperInterface&quot; value=&quot;com.company.MS1.Mapper.ProviderMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;sqlSessionFactory&quot; ref=&quot;sqlSessionFactory&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerService&quot; class=&quot;com.company.MS1.Service.Impl.ProviderServiceImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;providerMapper&quot; ref=&quot;providerMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;    --&gt;</span><br><br><span class="hljs-comment">&lt;!--    &lt;bean id=&quot;providerService&quot; class=&quot;com.company.MS1.Service.Impl.ProviderServiceImpl&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;property name=&quot;providerMapper&quot; ref=&quot;providerMapper&quot;&gt;&lt;/property&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/bean&gt;--&gt;</span><br><br><span class="hljs-comment">&lt;!-- MapperScannerConfigurer--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;basePackage&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;com.company.MS1.Mapper&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;sqlSessionFactory&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;txManager&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;dataSource&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dataSource&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--事务处理的配置--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;tx:advice id=&quot;transactionInterceptor&quot; transaction-manager=&quot;txManager&quot;&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;tx:attributes&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--            &lt;tx:method name=&quot;select*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--            &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;/tx:attributes&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/tx:advice&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    --&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;aop:config&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* com.company.MS1..*.*(..))&quot;/&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--        &lt;aop:advisor advice-ref=&quot;transactionInterceptor&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:advisor&gt;--&gt;</span><br><span class="hljs-comment">&lt;!--    &lt;/aop:config&gt;--&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SSM</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>SpringMVC</tag>
      
      <tag>MyBatis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaWeb</title>
    <link href="/2022/10/21/JavaWeb/"/>
    <url>/2022/10/21/JavaWeb/</url>
    
    <content type="html"><![CDATA[<h1 id="1、JavaWeb基础"><a href="#1、JavaWeb基础" class="headerlink" title="1、JavaWeb基础"></a>1、JavaWeb基础</h1><h2 id="1-1、程序架构和Tomcat的操作"><a href="#1-1、程序架构和Tomcat的操作" class="headerlink" title="1.1、程序架构和Tomcat的操作"></a>1.1、程序架构和Tomcat的操作</h2><p>略</p><h2 id="1-2、部署Web项目、JSP入门"><a href="#1-2、部署Web项目、JSP入门" class="headerlink" title="1.2、部署Web项目、JSP入门"></a>1.2、部署Web项目、JSP入门</h2><p>略</p><h1 id="2、JSP实现数据传递和保存"><a href="#2、JSP实现数据传递和保存" class="headerlink" title="2、JSP实现数据传递和保存"></a>2、JSP实现数据传递和保存</h1><h2 id="2-1、JSP九大内置对象"><a href="#2-1、JSP九大内置对象" class="headerlink" title="2.1、JSP九大内置对象"></a>2.1、JSP九大内置对象</h2><p>JSP 中定义了 9 个内置对象，它们分别是：request、response、session、application、out、pagecontext、config、page 和 exception，这些对象在客户端和服务器端交互的过程中分别完成不同的功能。</p><table><thead><tr><th>对  象</th><th>类型</th><th>说  明</th></tr></thead><tbody><tr><td>request</td><td>javax.servlet.http.HttpServletRequest</td><td>获取用户请求信息</td></tr><tr><td>response</td><td>javax.servlet.http.HttpServletResponse</td><td>响应客户端请求，并将处理信息返回到客户端</td></tr><tr><td>out</td><td>javax.servlet.jsp.JspWriter</td><td>输出内容到 HTML 中</td></tr><tr><td>session</td><td>javax.servlet.http.HttpSession</td><td>用来保存用户信息</td></tr><tr><td>application</td><td>javax.servlet.ServletContext</td><td>所有用户共享信息</td></tr><tr><td>config</td><td>javax.servlet.ServletConfig</td><td>这是一个 Servlet 配置对象，用于 Servlet 和页面的初始化参数</td></tr><tr><td>pageContext</td><td>javax.servlet.jsp.PageContext</td><td>JSP 的页面容器，用于访问 page、request、application 和 session 的属性</td></tr><tr><td>page</td><td>javax.servlet.jsp.HttpJspPage</td><td>类似于 Java 类的 this 关键字，表示当前 JSP 页面</td></tr><tr><td>exception</td><td>java.lang.Throwable</td><td>该对象用于处理 JSP 文件执行时发生的错误和异常；只有在 JSP 页面的 page 指令中指定 isErrorPage 的取值 true 时，才可以在本页面使用 exception 对象。</td></tr></tbody></table><p>JSP 的内置对象主要有以下特点：</p><ul><li><p>由 JSP 规范提供，不用编写者实例化；</p></li><li><p>通过 Web 容器实现和管理；</p></li><li><p>所有 JSP 页面均可使用；</p></li><li><p>只有在脚本元素的表达式或代码段中才能使用。</p></li></ul><h2 id="2-2、四大域对象"><a href="#2-2、四大域对象" class="headerlink" title="2.2、四大域对象"></a>2.2、四大域对象</h2><p>在 JSP 九大内置对象中，包含四个域对象，它们分别是：pageContext（page 域对象）、request（request 域对象）、session（session 域对象）、以及 application（application 域对象）。</p><p>JSP 中的 4 个域对象都能通过以下 3 个方法，对属性进行保存、获取和移除操作。</p><table><thead><tr><th>返回值类型</th><th>方法</th><th>作用</th></tr></thead><tbody><tr><td>void</td><td>setAttribute(String name, Object o)</td><td>将属性保存到域对象中</td></tr><tr><td>Object</td><td>getAttribute(String name)</td><td>获取域对象中的属性值</td></tr><tr><td>void</td><td>removeAttribute(String name)</td><td>将属性从域对象中移除</td></tr></tbody></table><p>JSP 中的 4 个域对象的作用域各不相同，如下表。</p><table><thead><tr><th>作用域</th><th>描述</th><th>作用范围</th></tr></thead><tbody><tr><td>page</td><td>如果把属性保存到 pageContext 中，则它的作用域是 page。</td><td>该作用域中的属性只在当前 JSP 页面有效，跳转页面后失效。</td></tr><tr><td>request</td><td>如果把属性保存到 request 中，则它的作用域是 request。</td><td>该作用域中的属性只在当前请求范围内有效。request作用域是在一次请求当中<br>服务器跳转页面后有效，例如&lt;jsp:forward&gt;；<br>客户端跳转页面后无效，例如超链接。</td></tr><tr><td>session</td><td>如果把属性保存到 session 中，则它的作用域是 session。</td><td>该作用域中的属性只在当前会话范围内有效，网页关闭后失效。</td></tr><tr><td>application</td><td>如果把属性保存到 application 中，则它的作用域是 application。</td><td>该作用域中的属性在整个应用范围内有效，服务器重启后失效。</td></tr></tbody></table><h2 id="2-3、获取input输入框中的值"><a href="#2-3、获取input输入框中的值" class="headerlink" title="2.3、获取input输入框中的值"></a>2.3、获取input输入框中的值</h2><p>单值：</p><p>getParameter(inputname)</p><p>数组：</p><p>getParameterValues(inputname)</p><h2 id="2-4、post方式出现乱码情况的解决方法"><a href="#2-4、post方式出现乱码情况的解决方法" class="headerlink" title="2.4、post方式出现乱码情况的解决方法"></a>2.4、post方式出现乱码情况的解决方法</h2><p>在最开头设置request.setcharacterEncoding(“utf-8”)和response.setcharacterEncoding(“utf-8”)</p><p>get方式出现乱码情况</p><p>方式一：修改server.xml配置文件（不建议使用）</p><p>方式二：利用代码方式解决</p><p>userName  &#x3D;  new  string(userName.getParameter(“”)………);</p><h2 id="2-5、post与get的区别"><a href="#2-5、post与get的区别" class="headerlink" title="2.5、post与get的区别"></a>2.5、post与get的区别</h2><ol><li><p>GET提交的数据放在URL中，POST则不会。这是最显而易见的差别。这点意味着GET更不安全（POST也不安全，因为HTTP是明文传输抓包就能获取数据内容，要想安全还得加密）</p></li><li><p>GET回退浏览器无害，POST会再次提交请求（GET方法回退后浏览器再缓存中拿结果，POST每次都会创建新资源）</p></li><li><p>GET提交的数据大小有限制（是因为浏览器对URL的长度有限制，GET本身没有限制），POST也有但是大小很大有几个G。</p></li><li><p>GET可以被保存为书签，POST不可以。这一点也能感受到。</p></li><li><p>GET能被缓存，POST不能</p></li><li><p>GET只允许ASCII字符，POST没有限制</p></li><li><p>GET会保存再浏览器历史记录中，POST不会。这点也能感受到。</p></li><li><p>URL可传播</p></li></ol><p>一般情况下使用post方式</p><h2 id="2-6、转发和重定向"><a href="#2-6、转发和重定向" class="headerlink" title="2.6、转发和重定向"></a>2.6、转发和重定向</h2><p>转发a—&gt;b—&gt;转发—&gt;c(一次请求)</p><p>request.setAttribute(“msg”,“注册失败”)</p><p>request.getRequestDispatcher(filename).forward(request,response)</p><p>request.getAttribute(“msg”,“注册失败”)</p><p>重定向a—&gt;b重定向b—&gt;c(两次请求)</p><p>response.sendRedirect()</p><h1 id="3、使用JDBC-Java-DataBase-Connectivity-操作数据库"><a href="#3、使用JDBC-Java-DataBase-Connectivity-操作数据库" class="headerlink" title="3、使用JDBC(Java DataBase Connectivity)操作数据库"></a>3、使用JDBC(Java DataBase Connectivity)操作数据库</h1><p>Connection数据库连接</p><p>PreparedStatementsql语句</p><p>ResultSet执行查询时，返回的结果集</p><p>DriverManager管理驱动包中的连接</p><h2 id="3-1、JDBC访问数据库的步骤"><a href="#3-1、JDBC访问数据库的步骤" class="headerlink" title="3.1、JDBC访问数据库的步骤"></a>3.1、JDBC访问数据库的步骤</h2><ol><li><p>Class.forName()加载驱动</p></li><li><p>DriverManager获取Connection丽娜姐</p></li><li><p>创建Statement执行SQL语句</p></li><li><p>返回ResultSet</p></li><li><p>释放资源</p></li></ol><h2 id="3-2、JDCB公共部分的解耦"><a href="#3-2、JDCB公共部分的解耦" class="headerlink" title="3.2、JDCB公共部分的解耦"></a>3.2、JDCB公共部分的解耦</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.JDBC;<br><br><span class="hljs-keyword">import</span> java.sql.*;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/13 19:20</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">preparedStatement</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">resultSet</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/javaweb?characterEncoding=utf8&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123456&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        获取连接</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: java.sql.Connection</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:22</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">private</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span> (connection==<span class="hljs-literal">null</span>||connection.isClosed())&#123;<br>                <span class="hljs-comment">//1、建立连接</span><br>                Class.forName(<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span>);<br>                <span class="hljs-comment">//2、获取链接</span><br>                connection = DriverManager.getConnection(url,user,password);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> connection;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        关闭连接</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: void</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:24</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeConnection</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span> (resultSet!=<span class="hljs-literal">null</span>)&#123;<br>                resultSet.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span> (preparedStatement!=<span class="hljs-literal">null</span>)&#123;<br>                preparedStatement.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span> (connection!=<span class="hljs-literal">null</span>)&#123;<br>                connection.close();<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        添加</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: int</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:36</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addNews</span><span class="hljs-params">(<span class="hljs-type">int</span> categoryId,String title)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">addNewsDetail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = <span class="hljs-built_in">this</span>.getConnection();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;insert into news_detail(categoryId, title) values (?,?)&quot;</span>;<br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setInt(<span class="hljs-number">1</span>,categoryId);<br>            preparedStatement.setString(<span class="hljs-number">2</span>,title);<br>            System.out.println(<span class="hljs-string">&quot;addNews param categoryId:&quot;</span>+categoryId+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>            addNewsDetail = preparedStatement.executeUpdate();<br>            System.out.println(<span class="hljs-string">&quot;addNews param categoryId:&quot;</span>+categoryId+<span class="hljs-string">&quot;,title:&quot;</span>+title+<span class="hljs-string">&quot;,result:&quot;</span>+addNewsDetail);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;queryNewsByTitle is error,param categoryId：&quot;</span>+categoryId+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>        &#125;<br>        <span class="hljs-keyword">return</span> addNewsDetail;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        删除</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span>: int</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@time</span>: 2022/5/14 14:36</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">delNews</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">delNewsDetail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = <span class="hljs-built_in">this</span>.getConnection();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;delete from news_detail where id=?&quot;</span>;<br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setInt(<span class="hljs-number">1</span>,id);<br>            System.out.println(<span class="hljs-string">&quot;addNews param id:&quot;</span>+id);<br>            delNewsDetail = preparedStatement.executeUpdate();<br>            System.out.println(<span class="hljs-string">&quot;addNews param id:&quot;</span>+id+<span class="hljs-string">&quot;,result:&quot;</span>+delNewsDetail);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;delNews is error,param id:&quot;</span>+id);<br>        &#125;<br>        <span class="hljs-keyword">return</span> delNewsDetail;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        修改</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: int</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:59</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">updateNews</span><span class="hljs-params">(<span class="hljs-type">int</span> id,String title)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">updateNewsDetail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = <span class="hljs-built_in">this</span>.getConnection();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;update news_detail set title=? where id=?;&quot;</span>;<br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setString(<span class="hljs-number">1</span>,title);<br>            preparedStatement.setInt(<span class="hljs-number">2</span>,id);<br>            System.out.println(<span class="hljs-string">&quot;addNews param id:&quot;</span>+id+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>            updateNewsDetail = preparedStatement.executeUpdate();<br>            System.out.println(<span class="hljs-string">&quot;addNews param id:&quot;</span>+id+<span class="hljs-string">&quot;,title:&quot;</span>+title+<span class="hljs-string">&quot;,result:&quot;</span>+updateNewsDetail);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;updateNewsDetail is error,param id:&quot;</span>+id+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>        &#125;<br>        <span class="hljs-keyword">return</span> updateNewsDetail;<br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        查询</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: void</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:25</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryNewsByTitle</span><span class="hljs-params">(String queryTitle)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            connection = <span class="hljs-built_in">this</span>.getConnection();<br>            <span class="hljs-comment">//3、发送指令(sql)</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;select id,title from news_detail where title like ?&quot;</span>;<br>            System.out.println(<span class="hljs-string">&quot;NewsDao sql:&quot;</span>+sql);<br>            <span class="hljs-comment">//4、数据库执行指令</span><br>            preparedStatement = connection.prepareStatement(sql);<br>            preparedStatement.setString(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;%&quot;</span>+queryTitle+<span class="hljs-string">&quot;%&quot;</span>);<br>            resultSet = preparedStatement.executeQuery();<br>            <span class="hljs-keyword">while</span> (resultSet.next())&#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> resultSet.getInt(<span class="hljs-string">&quot;id&quot;</span>);<span class="hljs-comment">//使用columnLabel来获取列</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">title</span> <span class="hljs-operator">=</span> resultSet.getString(<span class="hljs-string">&quot;title&quot;</span>);<span class="hljs-comment">//使用columnIndex来获取列</span><br>                System.out.println(<span class="hljs-string">&quot;id:&quot;</span>+id+<span class="hljs-string">&quot;,title:&quot;</span>+title);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;queryNewsByTitle is error,param:&quot;</span>+queryTitle);<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            closeConnection();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">        入口</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@return</span>: void</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">      * <span class="hljs-doctag">@time</span>: 2022/5/14 14:52</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">NewsDao</span> <span class="hljs-variable">newsDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NewsDao</span>();<br><br><span class="hljs-comment">//        //添加</span><br><span class="hljs-comment">//        int addNewCount = newsDao.addNews(3,&quot;爱上服务器二7345375&quot;);</span><br><span class="hljs-comment">//        System.out.println(&quot;main method para categoryId:3,title=爱上服务器二7345375,&quot;+&quot;result:&quot;+addNewCount);</span><br><span class="hljs-comment">//        if (addNewCount&lt;0)&#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加失败&quot;);</span><br><span class="hljs-comment">//        &#125;else &#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加成功&quot;);</span><br><span class="hljs-comment">//        &#125;</span><br><br><span class="hljs-comment">//        //删除</span><br><span class="hljs-comment">//        int delNewCount = newsDao.delNews(2);</span><br><span class="hljs-comment">//        System.out.println(&quot;main method para id:2&quot;+&quot;result:&quot;+delNewCount);</span><br><span class="hljs-comment">//        if (delNewCount&lt;0)&#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加失败&quot;);</span><br><span class="hljs-comment">//        &#125;else &#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加成功&quot;);</span><br><span class="hljs-comment">//        &#125;</span><br><br><span class="hljs-comment">//        //修改</span><br><span class="hljs-comment">//        int updateNewCount = newsDao.updateNews(4,&quot;哈哈哈哈哈哈哈哈哈哈哈&quot;);</span><br><span class="hljs-comment">//        System.out.println(&quot;main method para id:4&quot;+&quot;result:&quot;+updateNewCount);</span><br><span class="hljs-comment">//        if (updateNewCount&lt;0)&#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加失败&quot;);</span><br><span class="hljs-comment">//        &#125;else &#123;</span><br><span class="hljs-comment">//            System.out.println(&quot;添加成功&quot;);</span><br><span class="hljs-comment">//        &#125;</span><br>        <span class="hljs-comment">//查询</span><br>        newsDao.queryNewsByTitle(<span class="hljs-string">&quot;哈哈哈哈哈哈哈哈哈&quot;</span>);<br><br><br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="3-3、Statement与PreparedStatement区别"><a href="#3-3、Statement与PreparedStatement区别" class="headerlink" title="3.3、Statement与PreparedStatement区别"></a>3.3、Statement与PreparedStatement区别</h2><p>Statement：Statement对象不使用SQL参数，不会解析并编译SQL语句，每次调用执行SQL语句时都要进行SQL语句的解析和编译操作，效率低。</p><p>PreparedStatement：创建PreparedStatement对象时使用SQL语句做参数，会解析并编译SQL语句（预编译）。也可以使用带占位符“?”的SQL语句做参数，在通过setXxx()方法给占位符赋值后执行SQL语句时无需再解析和编译SQL语句，直接执行的。当进行批处理（多次执行相同操作）时，效率高。</p><p>安全性相对来说PreparedStatement比Statement高一些。</p><h2 id="3-4、JDBC工作原理"><a href="#3-4、JDBC工作原理" class="headerlink" title="3.4、JDBC工作原理"></a>3.4、JDBC工作原理</h2><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE75396f683d74401cb2c2ff4c39f793b9.png"></p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE57a9f12c9fc1a7848b54ca07a475cf9f.png"></p><h1 id="4、DAO模式及单例模式"><a href="#4、DAO模式及单例模式" class="headerlink" title="4、DAO模式及单例模式"></a>4、DAO模式及单例模式</h1><h2 id="设计模式：https-www-runoob-com-design-pattern-singleton-pattern-html"><a href="#设计模式：https-www-runoob-com-design-pattern-singleton-pattern-html" class="headerlink" title="设计模式：https://www.runoob.com/design-pattern/singleton-pattern.html"></a>设计模式：<a href="https://www.runoob.com/design-pattern/singleton-pattern.html">https://www.runoob.com/design-pattern/singleton-pattern.html</a></h2><h2 id="4-1、DAO模式"><a href="#4-1、DAO模式" class="headerlink" title="4.1、DAO模式"></a>4.1、DAO模式</h2><p>DAO 模式</p><p>DAO (DataAccessobjects 数据存取对象)是指位于业务逻辑和持久化数据之间实现对持久化数据的访问。通俗来讲，就是将数据库操作都封装起来。</p><p>对外提供相应的接口在面向对象设计过程中，有一些”套路”用于解决特定问题称为模式。</p><p>DAO 模式提供了访问关系型数据库系统所需操作的接口，将数据访问和业务逻辑分离对上层提供面向对象的数据访问接口。</p><p>从以上 DAO 模式使用可以看出，DAO 模式的优势就在于它实现了两次隔离。</p><ul><li><p>1、隔离了数据访问代码和业务逻辑代码。业务逻辑代码直接调用DAO方法即可，完全感觉不到数据库表的存在。分工明确，数据访问层代码变化不影响业务逻辑代码,这符合单一职能原则，降低了藕合性，提高了可复用性。</p></li><li><p>2、隔离了不同数据库实现。采用面向接口编程，如果底层数据库变化，如由 MySQL 变成 Oracle 只要增加 DAO 接口的新实现类即可，原有 MySQ 实现不用修改。这符合 “开-闭” 原则。该原则降低了代码的藕合性，提高了代码扩展性和系统的可移植性。</p></li></ul><p>一个典型的DAO 模式主要由以下几部分组成。</p><ul><li><p>1、DAO接口： 把对数据库的所有操作定义成抽象方法，可以提供多种实现。</p></li><li><p>2、DAO 实现类： 针对不同数据库给出DAO接口定义方法的具体实现。</p></li><li><p>3、实体类：用于存放与传输对象数据。</p></li><li><p>4、数据库连接和关闭工具类： 避免了数据库连接和关闭代码的重复使用，方便修改。</p></li></ul><h2 id="4-2、DAO模式封装JDBC再解耦"><a href="#4-2、DAO模式封装JDBC再解耦" class="headerlink" title="4.2、DAO模式封装JDBC再解耦"></a>4.2、DAO模式封装JDBC再解耦</h2><p><img src="/2022/10/21/JavaWeb/WEBRESOURCEe2e6fa1394521576f61580ca14646764.png"></p><h2 id="4-3、单列模式"><a href="#4-3、单列模式" class="headerlink" title="4.3、单列模式"></a>4.3、单列模式</h2><p>单例模式（Singleton Pattern）是 Java 中最简单的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。</p><p>这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。</p><ul><li><p>1、单例类只能有一个实例。</p></li><li><p>2、单例类必须自己创建自己的唯一实例。</p></li><li><p>3、单例类必须给所有其他对象提供这一实例。</p></li></ul><h2 id="4-4、懒汉模式"><a href="#4-4、懒汉模式" class="headerlink" title="4.4、懒汉模式"></a>4.4、懒汉模式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.JDBC.Utils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:懒汉模式（多线程问题）</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/15 16:57</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigUtil_Lazy</span> &#123;<br><br>    <span class="hljs-keyword">private</span>  Properties properties;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigUtil_Lazy configUtilLazy;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> ConfigUtil_Lazy <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">if</span> (configUtilLazy ==<span class="hljs-literal">null</span>)&#123;<br>            configUtilLazy =<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConfigUtil_Lazy</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> configUtilLazy;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ConfigUtil_Lazy</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String filePath=<span class="hljs-string">&quot;database.properties&quot;</span>;<br>            inputStream = ConfigUtil_Lazy.class.getClassLoader().getResourceAsStream(filePath);<br>            properties = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (inputStream!=<span class="hljs-literal">null</span>)&#123;<br>                    inputStream.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getValueByKey</span><span class="hljs-params">(String key)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) properties.get(key);<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key+<span class="hljs-string">&quot;,value:&quot;</span>+value);<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="4-5、饿汉模式"><a href="#4-5、饿汉模式" class="headerlink" title="4.5、饿汉模式"></a>4.5、饿汉模式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.JDBC.Utils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:饿汉模式</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/15 18:59</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigUtil_Hunger</span> &#123;<br><br>    <span class="hljs-keyword">private</span> Properties properties;<br><br>    <span class="hljs-comment">//方式1:直接创建实体类对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">ConfigUtil_Hunger</span> <span class="hljs-variable">configUtil_hunger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConfigUtil_Hunger</span>();<br><br><span class="hljs-comment">//    //方式2：在静态代码块中创建实体类对象</span><br><span class="hljs-comment">//    public static ConfigUtil_Hunger configUtil_hunger;</span><br><span class="hljs-comment">//    static &#123;</span><br><span class="hljs-comment">//        configUtil_hunger = new ConfigUtil_Hunger();</span><br><span class="hljs-comment">//    &#125;</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigUtil_Hunger <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> configUtil_hunger;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ConfigUtil_Hunger</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String filePath=<span class="hljs-string">&quot;database.properties&quot;</span>;<br>            inputStream = ConfigUtil_Hunger.class.getClassLoader().getResourceAsStream(filePath);<br>            properties = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (inputStream!=<span class="hljs-literal">null</span>)&#123;<br>                    inputStream.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getValueByKey</span><span class="hljs-params">(String key)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) properties.get(key);<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key+<span class="hljs-string">&quot;,value:&quot;</span>+value);<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="4-6、枚举式"><a href="#4-6、枚举式" class="headerlink" title="4.6、枚举式"></a>4.6、枚举式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.JDBC.Utils;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:枚举单列模式</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/15 19:08</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ConfigUtil_Enum</span> &#123;<br><br>    INSTANCE;<br><br>    <span class="hljs-keyword">private</span> Properties properties;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ConfigUtil_Enum</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String filePath=<span class="hljs-string">&quot;database.properties&quot;</span>;<br>            inputStream = ConfigUtil_Hunger.class.getClassLoader().getResourceAsStream(filePath);<br>            properties = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            properties.load(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-keyword">if</span> (inputStream!=<span class="hljs-literal">null</span>)&#123;<br>                    inputStream.close();<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getValueByKey</span><span class="hljs-params">(String key)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) properties.get(key);<br>        System.out.println(<span class="hljs-string">&quot;getValueByKey key:&quot;</span>+key+<span class="hljs-string">&quot;,value:&quot;</span>+value);<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="5、数据源及分层开发"><a href="#5、数据源及分层开发" class="headerlink" title="5、数据源及分层开发"></a>5、数据源及分层开发</h1><h2 id="5-1、理解数据源、连接池的作用"><a href="#5-1、理解数据源、连接池的作用" class="headerlink" title="5.1、理解数据源、连接池的作用"></a>5.1、理解数据源、连接池的作用</h2><p>之前的方式访问数据库存在一些缺陷：</p><ul><li><p>访问前现需要先获取连接</p></li><li><p>每次操作结束后，需要释放资源</p></li><li><p>频繁的连接导致系统的安全性和稳定性差</p></li></ul><p>使用数据源、连接池可以解决这些问题。</p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCEe1a20d7470c4336cf0f7ebeb24e5a0aa.png"></p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE792286b57b3af693bd16a256c1b768f4.png"></p><h2 id="5-2、掌握JNDI连接数据库（JNDI会出现严重的漏洞）"><a href="#5-2、掌握JNDI连接数据库（JNDI会出现严重的漏洞）" class="headerlink" title="5.2、掌握JNDI连接数据库（JNDI会出现严重的漏洞）"></a>5.2、掌握JNDI连接数据库（JNDI会出现严重的漏洞）</h2><p>通过JNDI–获取–&gt;DataSource–创建好连接对象–&gt;Connection—-&gt;连接池（管理连接对象）</p><p>1、修改Tomcat中conf的context.xml配置文件内容</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;Resource <span class="hljs-attribute">auth</span>=<span class="hljs-string">&quot;Container&quot;</span> <span class="hljs-attribute">driverClassName</span>=<span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span><br>          <span class="hljs-attribute">maxActive</span>=<span class="hljs-string">&quot;100&quot;</span> <span class="hljs-attribute">maxIdle</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attribute">maxWait</span>=<span class="hljs-string">&quot;10000&quot;</span><br>          <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;jdbc/news&quot;</span> <span class="hljs-attribute">password</span>=<span class="hljs-string">&quot;123456&quot;</span> <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;javax.sql.DataSource&quot;</span><br>          <span class="hljs-attribute">url</span>=<span class="hljs-string">&quot;jdbc:mysql://127.0.0.1:3306/javaweb&quot;</span> <span class="hljs-attribute">username</span>=<span class="hljs-string">&quot;root&quot;</span>/&gt;<br></code></pre></td></tr></table></figure><p>2、使用JNDI获取数据源，使用数据源获取连接对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *<span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment">    通过数据源获取数据库连接对象</span><br><span class="hljs-comment">  * <span class="hljs-doctag">@return</span>:</span><br><span class="hljs-comment">  * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment">  * <span class="hljs-doctag">@time</span>: 2022/5/16 8:48</span><br><span class="hljs-comment">  */</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">getConnection2</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">//初始化上下文对象</span><br>        <span class="hljs-type">Context</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InitialContext</span>();<br>        <span class="hljs-comment">//获取与逻辑名称相关联的数据源对象</span><br>        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> (DataSource) context.lookup(<span class="hljs-string">&quot;java:comp/env/jdbc/news&quot;</span>);<br>        <span class="hljs-comment">//通过数据源获取数据库连接</span><br>        connection = dataSource.getConnection();<br>    &#125; <span class="hljs-keyword">catch</span> (NamingException e) &#123;<br>        e.printStackTrace();<br>    &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-3、使用JavaBean传递数据"><a href="#5-3、使用JavaBean传递数据" class="headerlink" title="5.3、使用JavaBean传递数据"></a>5.3、使用JavaBean传递数据</h2><p>JavaBean（pojo、entity、DTO、VO…）</p><ul><li><p>就是一个Java类</p></li><li><p>封装业务逻辑</p></li><li><p>封装数据</p></li></ul><p>列如：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs typescript">package com.<span class="hljs-property">company</span>.<span class="hljs-property">JavaBean</span>.<span class="hljs-property">pojo</span>;<br><br><span class="hljs-keyword">import</span> java.<span class="hljs-property">io</span>.<span class="hljs-property">Serializable</span>;<br><span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Date</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:新闻JavaBean：封装数据</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/16 10:52</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">News</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final long serialVersionUID = -2227279597126347529L;<br><br>    <span class="hljs-keyword">private</span> int id;<br>    <span class="hljs-keyword">private</span> int categoryId;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> title;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-title class_">String</span> summary;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-title class_">String</span> content;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-title class_">String</span> picPath;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-title class_">String</span> author;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Date</span> createDate;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Date</span> modifyDate;<br><br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getId</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setId</span>(<span class="hljs-params">int id</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;<br>    &#125;<br>    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">getCategoryId</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> categoryId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setCategoryId</span>(<span class="hljs-params">int categoryId</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">categoryId</span> = categoryId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getTitle</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> title;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setTitle</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> title</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = title;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getSummary</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> summary;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setSummary</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> summary</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">summary</span> = summary;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getContent</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> content;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setContent</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> content</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = content;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getPicPath</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> picPath;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setPicPath</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> picPath</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">picPath</span> = picPath;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getAuthor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> author;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAuthor</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> author</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">author</span> = author;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Date</span> <span class="hljs-title function_">getCreateDate</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> createDate;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setCreateDate</span>(<span class="hljs-params"><span class="hljs-built_in">Date</span> createDate</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">createDate</span> = createDate;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Date</span> <span class="hljs-title function_">getModifyDate</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> modifyDate;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setModifyDate</span>(<span class="hljs-params"><span class="hljs-built_in">Date</span> modifyDate</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">modifyDate</span> = modifyDate;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;News&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;id=&quot;</span> + id +<br>                <span class="hljs-string">&quot;, categoryId=&quot;</span> + categoryId +<br>                <span class="hljs-string">&quot;, title=&#x27;&quot;</span> + title + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, summary=&#x27;&quot;</span> + summary + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, content=&#x27;&quot;</span> + content + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, picPath=&#x27;&quot;</span> + picPath + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, author=&#x27;&quot;</span> + author + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, createDate=&quot;</span> + createDate +<br>                <span class="hljs-string">&quot;, modifyDate=&quot;</span> + modifyDate +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>idea如何设置实体类自动生成SerialVersionUID：</p><p>IDEA的File-&gt;Settings-&gt;Editor-&gt;Inspections,然后在搜索框输入serialV，出现对应的</p><p>选择：</p><ul><li><p>Serializable class without ‘serialVersionUID’</p></li><li><p>‘serialVersionUID’ field not declared ‘private static final long’</p></li></ul><p>然后点击需要添加serialVersionUID的实体类名，Alt+Enter，出现Add ‘serialVersionUID’ field，即可给类添加serialVersionUID标识。</p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCEb4ff26f268f66c89eada8da65f986f0e.png"></p><h2 id="5-4、对service层的剥离"><a href="#5-4、对service层的剥离" class="headerlink" title="5.4、对service层的剥离"></a>5.4、对service层的剥离</h2><p>Controller—-&gt;service接口—-&gt;serviceImpl—-&gt;dao接口—-&gt;daoImpl—-&gt;mapper—-&gt;database</p><p>注：现阶段使用JSP直接调用service接口、daoImpl直接调用database，但在实际应用中，这种方法并不适用。各层之间使用JavaBean传递数据，即封装好的实体类。</p><h2 id="5-5、对MVC（Model、View、Controller）三层模式的初步解析"><a href="#5-5、对MVC（Model、View、Controller）三层模式的初步解析" class="headerlink" title="5.5、对MVC（Model、View、Controller）三层模式的初步解析"></a>5.5、对MVC（Model、View、Controller）三层模式的初步解析</h2><p>Model：模型代表一个存取数据的对象或 JAVA POJO。它也可以带有逻辑，在数据变化时更新控制器。</p><p>View： 视图代表模型包含的数据的可视化。</p><p>Controller： 控制器作用于模型和视图上。它控制数据流向模型对象，并在数据变化时更新视图。它使视图与模型分离开。</p><p>例如：</p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE73ea99d61d1f3d1b66cee9aa720aec3f.png"></p><h2 id="5-6、JSTL（JavaServer-Pages-Standard-Tag-Library：JSP标准标签库）"><a href="#5-6、JSTL（JavaServer-Pages-Standard-Tag-Library：JSP标准标签库）" class="headerlink" title="5.6、JSTL（JavaServer Pages Standard Tag Library：JSP标准标签库）"></a>5.6、JSTL（JavaServer Pages Standard Tag Library：JSP标准标签库）</h2><p>暂时了解以下三个标签：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">jsp:forward</span> <span class="hljs-attr">page</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">jsp:forward</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">jsp:useBean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">jsp:useBean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">jsp:include</span> <span class="hljs-attr">page</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">jsp:include</span>&gt;</span><br></code></pre></td></tr></table></figure><h1 id="6、第三方控件"><a href="#6、第三方控件" class="headerlink" title="6、第三方控件"></a>6、第三方控件</h1><h2 id="6-1、CKeditor"><a href="#6-1、CKeditor" class="headerlink" title="6.1、CKeditor"></a>6.1、CKeditor</h2><p>略</p><h2 id="6-2、使用comons-fileupload-jar实现文件上传下载"><a href="#6-2、使用comons-fileupload-jar实现文件上传下载" class="headerlink" title="6.2、使用comons-fileupload.jar实现文件上传下载"></a>6.2、使用comons-fileupload.jar实现文件上传下载</h2><h3 id="6-2-1、上传"><a href="#6-2-1、上传" class="headerlink" title="6.2.1、上传"></a>6.2.1、上传</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">package com.company.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Javaweb</span>.</span></span>servlet;<br><br>import com.company.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Javaweb</span>.</span></span>pojo.News;<br>import com.company.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Javaweb</span>.</span></span>service.Impl.NewsServiceImpl;<br>import com.company.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Javaweb</span>.</span></span>service.NewsService;<br>import org.apache.commons.fileupload.FileItem;<br>import org.apache.commons.fileupload.FileItemFactory;<br>import org.apache.commons.fileupload.FileUploadException;<br>import org.apache.commons.fileupload.disk.DiskFileItemFactory;<br>import org.apache.commons.fileupload.servlet.ServletFileUpload;<br>import org.apache.commons.io.FilenameUtils;<br><br>import javax.servlet.ServletException;<br>import javax.servlet.http.HttpServlet;<br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;<br>import java.io.File;<br>import java.io.IOException;<br>import java.util.Date;<br>import java.util.List;<br>import java.util.UUID;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @description:用户增加新闻的处理Servlet，接收用户表单提交的新闻数据，调用Service的方法将新闻保存大哦数据库，跳转到新闻列表页面</span><br><span class="hljs-comment"> * @author: Kblayt</span><br><span class="hljs-comment"> * @time: 2022/5/23 18:49</span><br><span class="hljs-comment"> */</span><br>public <span class="hljs-keyword">class</span> AddServlet extends HttpServlet &#123;<br><br>    @Override<br>    protected void <span class="hljs-keyword">do</span><span class="hljs-constructor">Get(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>)</span> throws ServletException, IOException &#123;<br>        this.<span class="hljs-keyword">do</span><span class="hljs-constructor">Post(<span class="hljs-params">request</span>, <span class="hljs-params">response</span>)</span>;<br>    &#125;<br><br>    @Override<br>    protected void <span class="hljs-keyword">do</span><span class="hljs-constructor">Post(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>)</span> throws ServletException, IOException &#123;<br>        request.set<span class="hljs-constructor">CharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>;<br>        News news=<span class="hljs-keyword">new</span> <span class="hljs-constructor">News()</span>;<br>        news.set<span class="hljs-constructor">CreateDate(<span class="hljs-params">new</span> Date()</span>);<br>        NewsService newsService=<span class="hljs-keyword">new</span> <span class="hljs-constructor">NewsServiceImpl()</span>;<br>        <span class="hljs-comment">//判断类型</span><br>        boolean isM= <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ServletFileUpload</span>.</span></span>is<span class="hljs-constructor">MultipartContent(<span class="hljs-params">request</span>)</span>;<br>        <span class="hljs-keyword">if</span>(isM)&#123;<br>            <span class="hljs-comment">//from 表单提示正确</span><br>            FileItemFactory fi=<span class="hljs-keyword">new</span> <span class="hljs-constructor">DiskFileItemFactory()</span>;<br>            ServletFileUpload sfu=<span class="hljs-keyword">new</span> <span class="hljs-constructor">ServletFileUpload(<span class="hljs-params">fi</span>)</span>;<br>            List&lt;FileItem&gt; <span class="hljs-built_in">list</span>= null;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-built_in">list</span> = sfu.parse<span class="hljs-constructor">Request(<span class="hljs-params">request</span>)</span>;<br>            &#125; catch (FileUploadException e) &#123;<br>                e.print<span class="hljs-constructor">StackTrace()</span>;<br>            &#125;<br>            <span class="hljs-keyword">for</span>(FileItem item:<span class="hljs-built_in">list</span>)&#123;<br>                <span class="hljs-comment">//判断类型，选择存值</span><br>                <span class="hljs-keyword">if</span>(item.is<span class="hljs-constructor">FormField()</span>)&#123;<br>                    <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;title&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">Title(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;summary&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">Summary(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;newscontent&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">Content(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;picPath&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">PicPath(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;author&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        news.set<span class="hljs-constructor">Author(<span class="hljs-params">item</span>.<span class="hljs-params">getString</span>(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>);<br>                    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;categoryId&quot;</span>.equals(item.get<span class="hljs-constructor">FieldName()</span>))&#123;<br>                        String s=item.get<span class="hljs-constructor">String(<span class="hljs-string">&quot;utf-8&quot;</span>)</span>;<br>                        news.set<span class="hljs-constructor">CategoryId(Integer.<span class="hljs-params">parseInt</span>(<span class="hljs-params">s</span>)</span>);<br>                    &#125;<br>                &#125;<span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-comment">//文件的上传</span><br>                    String filename=item.get<span class="hljs-constructor">Name()</span>;<br>                    <span class="hljs-keyword">if</span>(filename!=null &amp;&amp;!<span class="hljs-string">&quot;&quot;</span>.equals(filename))&#123;<br>                        <span class="hljs-comment">//分割后缀名</span><br>                        String endName=<span class="hljs-string">&quot;.&quot;</span>+ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">FilenameUtils</span>.</span></span>get<span class="hljs-constructor">Extension(<span class="hljs-params">filename</span>)</span>;<br>                        <span class="hljs-comment">//拼接完整路径</span><br>                        String picPath=<span class="hljs-string">&quot;d:/&quot;</span>+ <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">UUID</span>.</span></span>random<span class="hljs-constructor">UUID()</span>.<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>+endName;<br>                        news.set<span class="hljs-constructor">PicPath(<span class="hljs-params">picPath</span>)</span>;<br>                        <span class="hljs-comment">//根据路径封装文件</span><br>                        File file=<span class="hljs-keyword">new</span> <span class="hljs-constructor">File(<span class="hljs-params">picPath</span>)</span>;<br>                        <span class="hljs-comment">//上传</span><br>                        <span class="hljs-keyword">try</span> &#123;<br>                            item.write(file);<br>                        &#125; catch (Exception e) &#123;<br>                            e.print<span class="hljs-constructor">StackTrace()</span>;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        boolean flag=newsService.add<span class="hljs-constructor">News(<span class="hljs-params">news</span>)</span>;<br>        <span class="hljs-keyword">if</span>(flag)&#123;<br>            response.send<span class="hljs-constructor">Redirect(<span class="hljs-string">&quot;/admin/newsDetailList.jsp&quot;</span>)</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="6-2-2、下载"><a href="#6-2-2、下载" class="headerlink" title="6.2.2、下载"></a>6.2.2、下载</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.company.Javaweb.servlet;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.ServletOutputStream;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/5/24 10:48</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-built_in">this</span>.doPost(request, response);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><span class="hljs-comment">//        JSP页面中实现需要关闭 out</span><br><span class="hljs-comment">//        out.clear();</span><br><span class="hljs-comment">//        out=pageContext.pushBody();</span><br><span class="hljs-comment">//        //根据路径 获取文件</span><br>        String picPath=request.getParameter(<span class="hljs-string">&quot;picPath&quot;</span>);<br>        File file=<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(picPath);<br>        <span class="hljs-keyword">if</span>(file.exists())&#123;<br>            <span class="hljs-comment">//设置相应类型</span><br>            response.setContentType(<span class="hljs-string">&quot;application/x-msdownload&quot;</span>);<br>            <span class="hljs-comment">//设置相应头</span><br>            response.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, <span class="hljs-string">&quot;attachment;filename=&quot;</span>+picPath);<br>            <span class="hljs-comment">//获取输入输出流</span><br>            InputStream is=<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(file);<br>            ServletOutputStream sos=response.getOutputStream();<br>            <span class="hljs-comment">//使用字节流输出</span><br>            <span class="hljs-type">byte</span> []b=<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-type">int</span> len=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span>((len=is.read(b))!=-<span class="hljs-number">1</span>)&#123;<br>                sos.write(b, <span class="hljs-number">0</span>, len);<br>            &#125;<br>            sos.close();<br>            is.close();<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="7、分页查询"><a href="#7、分页查询" class="headerlink" title="7、分页查询"></a>7、分页查询</h1><h1 id="8、EL-Expression-Language-与JSTL-JavaServerPages-Standard-Tag-Library"><a href="#8、EL-Expression-Language-与JSTL-JavaServerPages-Standard-Tag-Library" class="headerlink" title="8、EL(Expression Language)与JSTL(JavaServerPages Standard Tag Library)"></a>8、EL(Expression Language)与JSTL(JavaServerPages Standard Tag Library)</h1><h2 id="8-1、EL表达式"><a href="#8-1、EL表达式" class="headerlink" title="8.1、EL表达式"></a>8.1、EL表达式</h2><p>为什么要使用EL表达式</p><ul><li><p>JSP脚本有哪些不足</p></li><li><p>代码结构混乱</p></li><li><p>脚本与HTML混合，容易出错</p></li><li><p>代码不宜与维护</p></li><li><p>使用EL表达式来优化程序代码，增加程序可读性</p></li></ul><h2 id="8-2、EL语法"><a href="#8-2、EL语法" class="headerlink" title="8.2、EL语法"></a>8.2、EL语法</h2><p>EL表达式</p><ul><li>${EL 表达式}例如：${username}</li></ul><p>EL操作符</p><ul><li><p>操作符“.”</p></li><li><p>获取对象的属性，例如：${news.title}</p></li><li><p>操作符“[]”</p></li><li><p>获取对象的属性，例如：${news[“title”]}</p></li><li><p>获取集合中的对象，例如：newsList[0]</p></li></ul><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE49988252cc330d20f8b4642a6b94ec11.png"></p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE444b5dbab8a3186b87439ffb875e0bc6.png"></p><h2 id="8-3、JSTL介绍"><a href="#8-3、JSTL介绍" class="headerlink" title="8.3、JSTL介绍"></a>8.3、JSTL介绍</h2><ul><li><p>JSTL</p></li><li><p>JSP标准标签库</p></li><li><p>实现JSP页面中的逻辑控制</p></li><li><p>JSTL使用步骤</p></li><li><p>添加jstl.jar和standard.jar包</p></li><li><p>在JSP页面中添加如下指令</p></li></ul><p>&lt;%@ taglib uri&#x3D;”<a href="http://java.sun.com/jsp/jstl/core&quot;">http://java.sun.com/jsp/jstl/core&quot;</a> prefix&#x3D;”c”%&gt;</p><p>&lt;%@ taglib uri&#x3D;”<a href="http://java.sun.com/jsp/jstl/fmt&quot;">http://java.sun.com/jsp/jstl/fmt&quot;</a> prefix&#x3D;”fmt”%&gt;</p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE2489f52d280439c37df16ec02776723c.png"></p><h1 id="9、Servlet"><a href="#9、Servlet" class="headerlink" title="9、Servlet"></a>9、Servlet</h1><h2 id="9-1、Servlet生命周期"><a href="#9-1、Servlet生命周期" class="headerlink" title="9.1、Servlet生命周期"></a>9.1、Servlet生命周期</h2><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE7f1a9492e9fe6eab45a38d07e88d749b.png"></p><h2 id="9-2、ServletAPI"><a href="#9-2、ServletAPI" class="headerlink" title="9.2、ServletAPI"></a>9.2、ServletAPI</h2><ul><li><p>javax.servlet.Servlet接口</p></li><li><p>所有Java Servlet的基础接口类，规定了必须由Servlet具体类实现的方法集。</p></li><li><p>javax.setvlet.GenericServlet类</p></li><li><p>是Servlet的通用版本，是一种与协议无关的Servlet</p></li><li><p>javax.servlet.http.HttpServlet类</p></li><li><p>在GenericServlet基础上扩展的基于Http协议的Servlet</p></li></ul><h2 id="9-3、Servlet中主要方法"><a href="#9-3、Servlet中主要方法" class="headerlink" title="9.3、Servlet中主要方法"></a>9.3、Servlet中主要方法</h2><ul><li><p>init()：Servlet的初始化方法，仅仅会执行一次。</p></li><li><p>service()：处理请求和生成响应。（派发器，用户请求类型调用响应的doGet()、doPost()）</p></li><li><p>doGet()：</p></li><li><p>doPost()：</p></li><li><p>destroy：在服务器停止并且程序中的Servlet对象不再使用的时候调用，只执行一次。</p></li></ul><h2 id="9-4、Servlet中重定向和转发相对路径和绝对路径问题"><a href="#9-4、Servlet中重定向和转发相对路径和绝对路径问题" class="headerlink" title="9.4、Servlet中重定向和转发相对路径和绝对路径问题"></a>9.4、Servlet中重定向和转发相对路径和绝对路径问题</h2><p>HttpServletResponse 重定向response.sendRedirect()</p><p>若当前路径为：<a href="http://localhost:8080/Javaweb/servlet/AddServlet.class">http://localhost:8080/Javaweb/servlet/AddServlet.class</a></p><ul><li><p>相对路径</p></li><li><p>response.sendRedirect(“newsDetailList.jsp”);</p></li><li><p>实际访问路径为：<a href="http://localhost:8080/Javaweb/servlet/newsDetailList.jsp">http://localhost:8080/Javaweb/servlet/newsDetailList.jsp</a></p></li><li><p>绝对路径</p></li><li><p>response.sendRedirect(“&#x2F;Javaweb&#x2F;jsp&#x2F;admin&#x2F;newsDetailList.jsp”);</p></li><li><p>实际访问路径为：<a href="http://localhost:8080/Javaweb/jsp/admin/newsDetailList.jsp">http://localhost:8080/Javaweb/jsp/admin/newsDetailList.jsp</a></p></li></ul><p>HttpServletRequest转发request.getRequestDispatcher().forword()</p><p>若当前路径为：<a href="http://localhost:8080/Javaweb/servlet/AddServlet.class">http://localhost:8080/Javaweb/servlet/AddServlet.class</a></p><ul><li><p>相对路径</p></li><li><p>request.getRequestDispatcher(“newsDetailList.jsp”).forword(request,response)</p></li><li><p>实际访问路径为：<a href="http://localhost:8080/Javaweb/servlet/newsDetailList.jsp">http://localhost:8080/Javaweb/servlet/newsDetailList.jsp</a></p></li><li><p>绝对路径</p></li><li><p>request.getRequestDispatcher(“&#x2F;jsp&#x2F;admin&#x2F;newsDetailList.jsp”).forword(request,response)</p></li><li><p>实际访问路径为：<a href="http://localhost:8080/Javaweb/jsp/admin/newsDetailList.jsp">http://localhost:8080/Javaweb/jsp/admin/newsDetailList.jsp</a></p></li></ul><h1 id="10、Filter-过滤器-和Listener-监听器"><a href="#10、Filter-过滤器-和Listener-监听器" class="headerlink" title="10、Filter(过滤器)和Listener(监听器)"></a>10、Filter(过滤器)和Listener(监听器)</h1><h2 id="10-1、过滤器"><a href="#10-1、过滤器" class="headerlink" title="10.1、过滤器"></a>10.1、过滤器</h2><ul><li><p>是向Web应用程序的请求和响应添加功能的Web服务组件</p></li><li><p>过滤器可以统一的集中处理请求和响应</p></li><li><p>使用过滤器技术实现对请求数据的过滤</p></li></ul><p><img src="/2022/10/21/JavaWeb/WEBRESOURCE277454b3d7603570f51d24dcbf05ccbd.png"></p><p><img src="/2022/10/21/JavaWeb/WEBRESOURCEe7df8ee34688604773aef094dcd20911.png"></p><p>过滤器的生命周期</p><p>init()（初始化）</p><p>doFilter()（执行过滤器）</p><p>destroy()（销毁）</p><h2 id="10-2、监听器"><a href="#10-2、监听器" class="headerlink" title="10.2、监听器"></a>10.2、监听器</h2><ul><li><p>Listener是Servlet的监听器</p></li><li><p>监听客户端的请求和服务器端的操作、</p></li><li><p>通过实现Listener接口的类可以在特定事件(Event)发生时，自动激发一些操作</p></li></ul><h3 id="10-2-1、HttpSessionBindingListener"><a href="#10-2-1、HttpSessionBindingListener" class="headerlink" title="10.2.1、HttpSessionBindingListener"></a>10.2.1、HttpSessionBindingListener</h3><ul><li><p>HttpSessionBindingListener</p></li><li><p>当一个实现了该接口的对象被捆绑到session中或从session中被解放的时候启用此监听器()session的值发生改变的时候)</p></li><li><p>关键点</p></li><li><p>创建实现HttpSessionBindingListener接口</p></li><li><p>valueBound()</p></li><li><p>valueUnbound()</p></li><li><p>不需要再web.xml中配置监听器</p></li><li><p>监听范围：一对一</p></li></ul><h3 id="10-2-2、HttpSessionListener"><a href="#10-2-2、HttpSessionListener" class="headerlink" title="10.2.2、HttpSessionListener"></a>10.2.2、HttpSessionListener</h3><ul><li><p>HttpSessionListener</p></li><li><p>在Web应用中，当一个session被创建或者被销毁时启用这个监听器</p></li><li><p>关键点</p></li><li><p>sessionCreate(HttpSessionEvent event)</p></li><li><p>客户第一次和服务器交互时触发</p></li><li><p>sessionDestroyed(HttpSessionEvent event)</p></li><li><p>销毁会话的时候触发</p></li><li><p>必须在web.xml中配置监听器</p></li><li><p>监听范围：这只一次就可以监听所有session</p></li></ul><h2 id="10-2-2、HttpContextListener"><a href="#10-2-2、HttpContextListener" class="headerlink" title="10.2.2、HttpContextListener"></a>10.2.2、HttpContextListener</h2><ul><li><p>HttpContextListener</p></li><li><p>在web应用中，当一个容器产生或销毁时启用这个监听器</p></li></ul><h1 id="11、Ajax与Jquery的使用"><a href="#11、Ajax与Jquery的使用" class="headerlink" title="11、Ajax与Jquery的使用"></a>11、Ajax与Jquery的使用</h1><p>参考：<a href="https://note.youdao.com/s/48YEmaJu">https://note.youdao.com/s/48YEmaJu</a></p><h1 id="12、实现在Linux上的项目部署"><a href="#12、实现在Linux上的项目部署" class="headerlink" title="12、实现在Linux上的项目部署"></a>12、实现在Linux上的项目部署</h1><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>JavaWeb</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaWeb</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git</title>
    <link href="/2022/10/21/Git/"/>
    <url>/2022/10/21/Git/</url>
    
    <content type="html"><![CDATA[<h1 id="1、版本控制"><a href="#1、版本控制" class="headerlink" title="1、版本控制"></a>1、版本控制</h1><h2 id="1-1、什么是版本控制"><a href="#1-1、什么是版本控制" class="headerlink" title="1.1、什么是版本控制"></a>1.1、什么是版本控制</h2><p>版本控制（Revision control）是一种在开发的过程中用于管理我们对文件、目录或工程等内容的修改历史，方便查看更改历史记录，备份以便恢复以前的版本的软件工程技术。</p><ul><li><p>实现跨区域多人协同开发</p></li><li><p>追踪和记载一个或者多个文件的历史记录</p></li><li><p>组织和保护你的源代码和文档</p></li><li><p>统计工作量</p></li><li><p>并行开发、提高开发效率</p></li><li><p>跟踪记录整个软件的开发过程</p></li><li><p>减轻开发人员的负担，节省时间，同时降低人为错误</p></li></ul><p>简单说就是用于管理多人协同开发项目的技术。</p><p>没有进行版本控制或者版本控制本身缺乏正确的流程管理，在软件开发过程中将会引入很多问题，如软件代码的一致性、软件内容的冗余、软件过程的事物性、软件开发过程中的并发性、软件源代码的安全性，以及软件的整合等问题。</p><p>无论是工作还是学习，或者是自己做笔记，都经历过这样一个阶段！我们就迫切需要一个版本控制工具！</p><p><img src="/2022/10/21/Git/WEBRESOURCE5781b88d50a965f6baa98c08f3bdc81d.jpeg"></p><p>多人开发就必须要使用版本控制！</p><h2 id="1-2、常见的版本控制工具"><a href="#1-2、常见的版本控制工具" class="headerlink" title="1.2、常见的版本控制工具"></a>1.2、常见的版本控制工具</h2><p>我们学习的东西，一定是当下最流行的！</p><p>主流的版本控制器有如下这些：</p><ul><li><p>Git</p></li><li><p>SVN（Subversion）</p></li><li><p>CVS（Concurrent Versions System）</p></li><li><p>VSS（Micorosoft Visual SourceSafe）</p></li><li><p>TFS（Team Foundation Server）</p></li><li><p>Visual Studio Online</p></li></ul><p>版本控制产品非常的多（Perforce、Rational ClearCase、RCS（GNU Revision Control System）、Serena Dimention、SVK、BitKeeper、Monotone、Bazaar、Mercurial、SourceGear Vault），现在影响力最大且使用最广泛的是Git与SVN</p><h2 id="1-3版本控制分类"><a href="#1-3版本控制分类" class="headerlink" title="1.3版本控制分类"></a>1.3版本控制分类</h2><h3 id="1-3-1、本地版本控制"><a href="#1-3-1、本地版本控制" class="headerlink" title="1.3.1、本地版本控制"></a>1.3.1、本地版本控制</h3><p>记录文件每次的更新，可以对每个版本做一个快照，或是记录补丁文件，适合个人用，如RCS。</p><p><img src="/2022/10/21/Git/WEBRESOURCE34d172540721e9729fe384f7eed4653a.png"></p><h3 id="1-3-2、集中版本控制-SVN"><a href="#1-3-2、集中版本控制-SVN" class="headerlink" title="1.3.2、集中版本控制  SVN"></a>1.3.2、集中版本控制  SVN</h3><p>所有的版本数据都保存在服务器上，协同开发者从服务器上同步更新或上传自己的修改</p><p><img src="/2022/10/21/Git/WEBRESOURCE6a78ce9141d1732ca8bd879058b34116.png"></p><p>所有的版本数据都存在服务器上，用户的本地只有自己以前所同步的版本，如果不连网的话，用户就看不到历史版本，也无法切换版本验证问题，或在不同分支工作。而且，所有数据都保存在单一的服务器上，有很大的风险这个服务器会损坏，这样就会丢失所有的数据，当然可以定期备份。代表产品：SVN、CVS、VSS</p><h3 id="1-3-3、分布式版本控制-Git"><a href="#1-3-3、分布式版本控制-Git" class="headerlink" title="1.3.3、分布式版本控制 Git"></a>1.3.3、分布式版本控制 Git</h3><p>每个人都拥有全部的代码！安全隐患！</p><p>所有版本信息仓库全部同步到本地的每个用户，这样就可以在本地查看所有版本历史，可以离线在本地提交，只需在连网时push到相应的服务器或其他用户那里。由于每个用户那里保存的都是所有的版本数据，只要有一个用户的设备没有问题就可以恢复所有的数据，但这增加了本地存储空间的占用。</p><p>不会因为服务器损坏或者网络问题，造成不能工作的情况！</p><p><img src="/2022/10/21/Git/WEBRESOURCEacdf78d4e5d49ec15b4e1d76fb8cc1c3.jpeg"></p><h2 id="1-4、Git与SVN的主要区别"><a href="#1-4、Git与SVN的主要区别" class="headerlink" title="1.4、Git与SVN的主要区别"></a>1.4、Git与SVN的主要区别</h2><p>SVN是集中式版本控制系统，版本库是集中放在中央服务器的，而工作的时候，用的都是自己的电脑，所以首先要从中央服务器得到最新的版本，然后工作，完成工作后，需要把自己做完的活推送到中央服务器。集中式版本控制系统是必须联网才能工作，对网络带宽要求较高。</p><p><img src="/2022/10/21/Git/WEBRESOURCEd57ed7f0e43c5642ac5c107ea02ab7e4.jpeg"></p><p>Git是分布式版本控制系统，没有中央服务器，每个人的电脑就是一个完整的版本库，工作的时候不需要联网了，因为版本都在自己电脑上。协同的方法是这样的：比如说自己在电脑上改了文件A，其他人也在电脑上改了文件A，这时，你们两之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。Git可以直接看到更新了哪些代码和文件！</p><p>Git是目前世界上最先进的分布式版本控制系统。</p><h1 id="2、聊聊Git的历史"><a href="#2、聊聊Git的历史" class="headerlink" title="2、聊聊Git的历史"></a>2、聊聊Git的历史</h1><p>同生活中的许多伟大事物一样，Git 诞生于一个极富纷争大举创新的年代。</p><p>Linux 内核开源项目有着为数众广的参与者。绝大多数的 Linux 内核维护工作都花在了提交补丁和保存归档的繁琐事务上(1991－2002年间)。到 2002 年，整个项目组开始启用一个专有的分布式版本控制系统 BitKeeper 来管理和维护代码。</p><p>Linux社区中存在很多的大佬！破解研究 BitKeeper ！</p><p>到了 2005 年，开发 BitKeeper 的商业公司同 Linux 内核开源社区的合作关系结束，他们收回了 Linux 内核社区免费使用 BitKeeper 的权力。这就迫使 Linux 开源社区(特别是 Linux 的缔造者 Linus Torvalds)基于使用 BitKeeper 时的经验教训，开发出自己的版本系统。（2周左右！） 也就是后来的 Git！</p><p>Git是目前世界上最先进的分布式版本控制系统。</p><p>Git是免费、开源的，最初Git是为辅助 Linux 内核开发的，来替代 BitKeeper！</p><p><img src="/2022/10/21/Git/WEBRESOURCEe91ebf7ea6f112387a01257360b325ac.jpeg"></p><p>Linux和Git之父李纳斯·托沃兹（Linus Benedic Torvalds）1969、芬兰</p><h1 id="3、Git环境配置"><a href="#3、Git环境配置" class="headerlink" title="3、Git环境配置"></a>3、Git环境配置</h1><h2 id="3-1、软件下载"><a href="#3-1、软件下载" class="headerlink" title="3.1、软件下载"></a>3.1、软件下载</h2><p>打开 [git官网] <a href="https://git-scm.com/%EF%BC%8C%E4%B8%8B%E8%BD%BDgit%E5%AF%B9%E5%BA%94%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%88%E6%9C%AC%E3%80%82">https://git-scm.com/，下载git对应操作系统的版本。</a></p><p>所有东西下载慢的话就可以去找镜像！</p><p>官网下载太慢，我们可以使用淘宝镜像下载：<a href="http://npm.taobao.org/mirrors/git-for-windows/">http://npm.taobao.org/mirrors/git-for-windows/</a></p><p><img src="/2022/10/21/Git/WEBRESOURCE4e5f2652c7e918b34855c3feb6add319.jpeg"></p><p>下载对应的版本即可安装！</p><p>安装：无脑下一步即可！安装完毕就可以使用了！</p><h2 id="3-2、启动Git"><a href="#3-2、启动Git" class="headerlink" title="3.2、启动Git"></a>3.2、启动Git</h2><p>安装成功后在开始菜单中会有Git项，菜单下有3个程序：任意文件夹下右键也可以看到对应的程序！</p><p><img src="/2022/10/21/Git/WEBRESOURCEfee0d982805082ebdf7bc9e9af75f98e.png"></p><p>Git Bash：Unix与Linux风格的命令行，使用最多，推荐最多</p><p>Git CMD：Windows风格的命令行</p><p>Git GUI：图形界面的Git，不建议初学者使用，尽量先熟悉常用命令</p><h2 id="3-3、常用的Linux命令"><a href="#3-3、常用的Linux命令" class="headerlink" title="3.3、常用的Linux命令"></a>3.3、常用的Linux命令</h2><p>平时一定要多使用这些基础的命令！</p><p>1）、cd : 改变目录。</p><p>2）、cd . . 回退到上一个目录，直接cd进入默认目录</p><p>3）、pwd : 显示当前所在的目录路径。</p><p>4）、ls(ll):  都是列出当前目录中的所有文件，只不过ll(两个ll)列出的内容更为详细。</p><p>5）、touch : 新建一个文件 如 touch index.js 就会在当前目录下新建一个index.js文件。</p><p>6）、rm:  删除一个文件, rm index.js 就会把index.js文件删除。</p><p>7）、mkdir:  新建一个目录,就是新建一个文件夹。</p><p>8）、rm -r :  删除一个文件夹, rm -r src 删除src目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> -rf / 切勿在Linux中尝试！删除电脑中全部文件！<br></code></pre></td></tr></table></figure><p>9）、mv 移动文件, mv index.html src index.html 是我们要移动的文件, src 是目标文件夹,当然, 这样写,必须保证文件和目标文件夹在同一目录下。</p><p>10）、reset 重新初始化终端&#x2F;清屏。</p><p>11）、clear 清屏。</p><p>12）、history 查看命令历史。</p><p>13）、help 帮助。</p><p>14）、exit 退出。</p><p>15）、#表示注释</p><h2 id="3-4、Git配置"><a href="#3-4、Git配置" class="headerlink" title="3.4、Git配置"></a>3.4、Git配置</h2><p>所有的配置文件，其实都保存在本地！</p><p>查看配置 git config -l</p><p><img src="/2022/10/21/Git/WEBRESOURCE4374aa416f84a58c58615b990a71854d.jpeg"></p><p>查看不同级别的配置文件：</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">#查看系统configgit config</span> <span class="hljs-literal">--</span><span class="hljs-comment">system</span> <span class="hljs-literal">--</span><span class="hljs-comment">list　　#查看当前用户（global）配置git config</span> <span class="hljs-literal">--</span><span class="hljs-comment">global</span>  <span class="hljs-literal">--</span><span class="hljs-comment">list</span><br></code></pre></td></tr></table></figure><p>Git相关的配置文件：</p><p>1）、Git\etc\gitconfig  ：Git 安装目录下的 gitconfig     –system 系统级</p><p>2）、C:\Users\Administrator\ .gitconfig    只适用于当前登录用户的配置  –global 全局</p><p><img src="/2022/10/21/Git/WEBRESOURCEd020d58a5afd538f9c1cee8175e564e9.png"></p><p>这里可以直接编辑配置文件，通过命令设置后会响应到这里。</p><h2 id="设置用户名与邮箱（用户标识，必要）"><a href="#设置用户名与邮箱（用户标识，必要）" class="headerlink" title="设置用户名与邮箱（用户标识，必要）"></a>设置用户名与邮箱（用户标识，必要）</h2><p>当你安装Git后首先要做的事情是设置你的用户名称和e-mail地址。这是非常重要的，因为每次Git提交都会使用该信息。它被永远的嵌入到了你的提交中：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.name</span> <span class="hljs-string">&quot;kuangshen&quot;</span>  #名称git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.email</span> <span class="hljs-number">24736743</span>@qq<span class="hljs-selector-class">.com</span>   #邮箱<br></code></pre></td></tr></table></figure><p>只需要做一次这个设置，如果你传递了–global 选项，因为Git将总是会使用该信息来处理你在系统中所做的一切操作。如果你希望在一个特定的项目中使用不同的名称或e-mail地址，你可以在该项目中运行该命令而不要–global选项。总之–global为全局配置，不加为某个项目的特定配置。</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="></p><h1 id="4、Git基本理论（重要）"><a href="#4、Git基本理论（重要）" class="headerlink" title="4、Git基本理论（重要）"></a>4、Git基本理论（重要）</h1><h2 id="4-1、三个区域"><a href="#4-1、三个区域" class="headerlink" title="4.1、三个区域"></a>4.1、三个区域</h2><p>Git本地有三个工作区域：工作目录（Working Directory）、暂存区(Stage&#x2F;Index)、资源库(Repository或Git Directory)。如果在加上远程的git仓库(Remote Directory)就可以分为四个工作区域。文件在这四个区域之间的转换关系如下：</p><p><img src="/2022/10/21/Git/WEBRESOURCE0d40cd8de9988128d9d781f435577e6f.png"></p><ul><li><p>Workspace：工作区，就是你平时存放项目代码的地方</p></li><li><p>Index &#x2F; Stage：暂存区，用于临时存放你的改动，事实上它只是一个文件，保存即将提交到文件列表信息</p></li><li><p>Repository：仓库区（或本地仓库），就是安全存放数据的位置，这里面有你提交到所有版本的数据。其中HEAD指向最新放入仓库的版本</p></li><li><p>Remote：远程仓库，托管代码的服务器，可以简单的认为是你项目组中的一台电脑用于远程数据交换</p></li></ul><p>本地的三个区域确切的说应该是git仓库中HEAD指向的版本：</p><p><img src="/2022/10/21/Git/WEBRESOURCE02d33c7ff37bb246e0606c21dd83d0ce.png"></p><ul><li><p>Directory：使用Git管理的一个目录，也就是一个仓库，包含我们的工作空间和Git的管理空间。</p></li><li><p>WorkSpace：需要通过Git进行版本控制的目录和文件，这些目录和文件组成了工作空间。</p></li><li><p>.git：存放Git管理信息的目录，初始化仓库的时候自动创建。</p></li><li><p>Index&#x2F;Stage：暂存区，或者叫待提交更新区，在提交进入repo之前，我们可以把所有的更新放在暂存区。</p></li><li><p>Local Repo：本地仓库，一个存放在本地的版本库；HEAD会只是当前的开发分支（branch）。</p></li><li><p>Stash：隐藏，是一个工作状态保存栈，用于保存&#x2F;恢复WorkSpace中的临时状态。</p></li></ul><h2 id="4-2、工作流程"><a href="#4-2、工作流程" class="headerlink" title="4.2、工作流程"></a>4.2、工作流程</h2><p>git的工作流程一般是这样的：</p><p>１、在工作目录中添加、修改文件；</p><p>２、将需要进行版本管理的文件放入暂存区域；</p><p>３、将暂存区域的文件提交到git仓库。</p><p>因此，git管理的文件有三种状态：已修改（modified）,已暂存（staged）,已提交(committed)</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="></p><h1 id="5、Git项目搭建"><a href="#5、Git项目搭建" class="headerlink" title="5、Git项目搭建"></a>5、Git项目搭建</h1><h2 id="5-1、创建工作目录与常用指令"><a href="#5-1、创建工作目录与常用指令" class="headerlink" title="5.1、创建工作目录与常用指令"></a>5.1、创建工作目录与常用指令</h2><p>工作目录（WorkSpace)一般就是你希望Git帮助你管理的文件夹，可以是你项目的目录，也可以是一个空目录，建议不要有中文。</p><p>日常使用只要记住下图6个命令：</p><p><img src="/2022/10/21/Git/WEBRESOURCE2cab9f228518b50c6c129094774c1d19.png"></p><h2 id="5-2、本地仓库搭建"><a href="#5-2、本地仓库搭建" class="headerlink" title="5.2、本地仓库搭建"></a>5.2、本地仓库搭建</h2><p>创建本地仓库的方法有两种：一种是创建全新的仓库，另一种是克隆远程仓库。</p><p>1、创建全新的仓库，需要用GIT管理的项目的根目录执行：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-meta"># 在当前目录新建一个Git代码库$ git init</span><br></code></pre></td></tr></table></figure><p>2、执行后可以看到，仅仅在项目目录多出了一个.git目录，关于版本等的所有信息都在这个目录里面。</p><h2 id="5-3、克隆远程仓库"><a href="#5-3、克隆远程仓库" class="headerlink" title="5.3、克隆远程仓库"></a>5.3、克隆远程仓库</h2><p>1、另一种方式是克隆远程目录，由于是将远程服务器上的仓库完全镜像一份至本地！</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean"># 克隆一个项目和它的整个代码历史(版本信息)$ git clone [url]  # https:<span class="hljs-comment">//gitee.com/kuangstudy/openclass.git</span><br></code></pre></td></tr></table></figure><p>2、去 gitee 或者 github 上克隆一个测试！</p><h1 id="6、Git文件操作"><a href="#6、Git文件操作" class="headerlink" title="6、Git文件操作"></a>6、Git文件操作</h1><h2 id="6-1、文件的四种状态"><a href="#6-1、文件的四种状态" class="headerlink" title="6.1、文件的四种状态"></a>6.1、文件的四种状态</h2><p>版本控制就是对文件的版本控制，要对文件进行修改、提交等操作，首先要知道文件当前在什么状态，不然可能会提交了现在还不想提交的文件，或者要提交的文件没提交上。</p><ul><li><p>Untracked: 未跟踪, 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过git add 状态变为Staged.</p></li><li><p>Unmodify: 文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified. 如果使用git rm移出版本库, 则成为Untracked文件</p></li><li><p>Modified: 文件已修改, 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过git add可进入暂存staged状态, 使用git checkout 则丢弃修改过, 返回到unmodify状态, 这个git checkout即从库中取出文件, 覆盖当前修改 !</p></li><li><p>Staged: 暂存状态. 执行git commit则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为Unmodify状态. 执行git reset HEAD filename取消暂存, 文件状态为Modified</p></li></ul><h2 id="6-2、查看文件状态"><a href="#6-2、查看文件状态" class="headerlink" title="6.2、查看文件状态"></a>6.2、查看文件状态</h2><p>上面说文件有4种状态，通过如下命令可以查看到文件的状态：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean">#查看指定文件状态git status [filename]#查看所有文件状态git status# git add .                  添加所有文件到暂存区# git commit -m <span class="hljs-string">&quot;消息内容&quot;</span>    提交暂存区中的内容到本地仓库 -m 提交信息<br></code></pre></td></tr></table></figure><h2 id="6-3、忽略文件"><a href="#6-3、忽略文件" class="headerlink" title="6.3、忽略文件"></a>6.3、忽略文件</h2><p>有些时候我们不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等</p><p>在主目录下建立”.gitignore”文件，此文件有如下规则：</p><ol><li><p>忽略文件中的空行或以井号（#）开始的行将会被忽略。</p></li><li><p>可以使用Linux通配符。例如：星号（*）代表任意多个字符，问号（？）代表一个字符，方括号（[abc]）代表可选字符范围，大括号（{string1,string2,…}）代表可选的字符串等。</p></li><li><p>如果名称的最前面有一个感叹号（!），表示例外规则，将不被忽略。</p></li><li><p>如果名称的最前面是一个路径分隔符（&#x2F;），表示要忽略的文件在此目录下，而子目录中的文件不忽略。</p></li><li><p>如果名称的最后面是一个路径分隔符（&#x2F;），表示要忽略的是此目录下该名称的子目录，而非文件（默认文件或目录都忽略）。</p></li></ol><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">#为注释*.txt        #忽略所有 .txt结尾的文件,这样的话上传就不会被选中！!lib.txt     #但lib.txt除外<span class="hljs-regexp">/temp        #仅忽略项目根目录下的TODO文件,不包括其它目录tempbuild/</span>       #忽略build<span class="hljs-regexp">/目录下的所有文件doc/</span>*.txt    #会忽略 doc<span class="hljs-regexp">/notes.txt 但不包括 doc/</span>server/arch.txt<br></code></pre></td></tr></table></figure><h1 id="7、使用码云"><a href="#7、使用码云" class="headerlink" title="7、使用码云"></a>7、使用码云</h1><p>github 是有墙的，比较慢，在国内的话，我们一般使用 gitee ，公司中有时候会搭建自己的gitlab服务器</p><p>这个其实可以作为大家未来找工作的一个重要信息！</p><p>1、注册登录码云，完善个人信息</p><p>2、设置本机绑定SSH公钥，实现免密码登录！（免密码登录，这一步挺重要的，码云是远程仓库，我们是平时工作在本地仓库！)</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean"># 进入 C:\Users\Administrator\.ssh 目录# 生成公钥ssh-keygen<br></code></pre></td></tr></table></figure><p><img src="/2022/10/21/Git/WEBRESOURCE940564f6e1e011817aa5dbc800e7e8ac.jpeg"></p><p>3、将公钥信息public key 添加到码云账户中即可！</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="></p><p>4、使用码云创建一个自己的仓库！</p><p>许可证：开源是否可以随意转载，开源但是不能商业使用，不能转载，…  限制！</p><p>克隆到本地！</p><p><img src="/2022/10/21/Git/WEBRESOURCEfd19c479ccf30232601db572fb8f3c81.jpeg"></p><h1 id="8、IDEA中集成Git"><a href="#8、IDEA中集成Git" class="headerlink" title="8、IDEA中集成Git"></a>8、IDEA中集成Git</h1><h2 id="8-1、新建项目，绑定git。"><a href="#8-1、新建项目，绑定git。" class="headerlink" title="8.1、新建项目，绑定git。"></a>8.1、新建项目，绑定git。</h2><p><img src="/2022/10/21/Git/WEBRESOURCE04f24196c61b219edbb3e678cbac4781.jpeg"></p><p>注意观察idea中的变化</p><p><img src="/2022/10/21/Git/WEBRESOURCE87f45e62915ef55532164726f54fbbbb.png"></p><h2 id="8-2、修改文件，使用IDEA操作git。"><a href="#8-2、修改文件，使用IDEA操作git。" class="headerlink" title="8.2、修改文件，使用IDEA操作git。"></a>8.2、修改文件，使用IDEA操作git。</h2><ul><li><p>添加到暂存区</p></li><li><p>commit 提交</p></li><li><p>push到远程仓库</p></li></ul><h2 id="8-3、提交测试"><a href="#8-3、提交测试" class="headerlink" title="8.3、提交测试"></a>8.3、提交测试</h2><p>这些都是单个人的操作！</p><p>学习的方式最重要！学会学习！我上课的更多时候都是在教大家去学习一种理念和思想（学习方式）</p><p>有道无术、术尚可求。有术无道、止于术！</p><p>真正的教学，授人以渔！</p><h2 id="8-4、说明：GIT分支"><a href="#8-4、说明：GIT分支" class="headerlink" title="8.4、说明：GIT分支"></a>8.4、说明：GIT分支</h2><p>分支在GIT中相对较难，分支就是科幻电影里面的平行宇宙，如果两个平行宇宙互不干扰，那对现在的你也没啥影响。不过，在某个时间点，两个平行宇宙合并了，我们就需要处理一些问题了！</p><p><img src="/2022/10/21/Git/WEBRESOURCE938a99855af5fdf607f209749411aba8.png"></p><p><img src="/2022/10/21/Git/WEBRESOURCEe5506ec1efb324ac64ce8c7b74ec21e4.png"></p><p>git分支中常用指令：</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean"># 列出所有本地分支git branch# 列出所有远程分支git branch -r# 新建一个分支，但依然停留在当前分支git branch [branch-name]# 新建一个分支，并切换到该分支git checkout -b [branch]# 合并指定分支到当前分支$ git merge [branch]# 删除分支$ git branch -d [branch-name]# 删除远程分支$ git push origin --delete [branch-name]$ git branch -dr [remote/branch]<br></code></pre></td></tr></table></figure><h1 id="9、IDEA中操作"><a href="#9、IDEA中操作" class="headerlink" title="9、IDEA中操作"></a>9、IDEA中操作</h1><p><img src="/2022/10/21/Git/WEBRESOURCE24a92beaa781c9bef1cc5d9227a4adc1.png"></p><p>如果同一个文件在合并分支时都被修改了则会引起冲突：解决的办法是我们可以修改冲突文件后重新提交！选择要保留他的代码还是你的代码！</p><p>master主分支应该非常稳定，用来发布新版本，一般情况下不允许在上面工作，工作一般情况下在新建的dev分支上工作，工作完后，比如上要发布，或者说dev分支代码稳定后可以合并到主分支master上来。</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>项目管理工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>gitee</tag>
      
      <tag>github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>红黑树(RBT)</title>
    <link href="/2022/10/21/%E7%BA%A2%E9%BB%91%E6%A0%91-RBT/"/>
    <url>/2022/10/21/%E7%BA%A2%E9%BB%91%E6%A0%91-RBT/</url>
    
    <content type="html"><![CDATA[<script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java反射与XML&amp;JSON</title>
    <link href="/2022/10/21/Java%E5%8F%8D%E5%B0%84%E4%B8%8EXML-Json/"/>
    <url>/2022/10/21/Java%E5%8F%8D%E5%B0%84%E4%B8%8EXML-Json/</url>
    
    <content type="html"><![CDATA[<h1 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h1><h2 id="类的加载概述和分类"><a href="#类的加载概述和分类" class="headerlink" title="类的加载概述和分类"></a>类的加载概述和分类</h2><h4 id="1-类加载的概述"><a href="#1-类加载的概述" class="headerlink" title="1.类加载的概述"></a>1.类加载的概述</h4><p>当程序要使用某个类时，如果该类还未被加载到内存中，则系统会通过加载，链接，初始化三步来实现对这个类进行初始化。</p><p>加载</p><p>就是指class文件读入内存，并且为之创建一个Class对象。任何类被使用时系统都会建立一个class对象。</p><p>链接</p><p>验证 是否有正确的内部结构，并和其它类协调一致。</p><p>准备 负责为类的静态成员分配内村，并设置默认初始化值。</p><p>解析 酱类的二进制数据中的符号引用替换为直接引用</p><p>初始化</p><p>默认初始化、显式初始化、构造方法初始化等等。</p><h4 id="2-加载时机"><a href="#2-加载时机" class="headerlink" title="2.加载时机"></a>2.加载时机</h4><p>创建类的实例（Person p &#x3D; new Person()）</p><p>访问类的静态变量，或者为静态变量赋值（p.静态变量 或者 p.静态变量 &#x3D; 0；）</p><p>调用类的静态方法</p><p>使用反射方式来强制创建某个类或接口对应的java.long.Class对象</p><p>初始化某个类的子类</p><p>直接使用java.exe命令来运行某个主类</p><h4 id="3-类加载器的概述"><a href="#3-类加载器的概述" class="headerlink" title="3.类加载器的概述"></a>3.类加载器的概述</h4><p>负责将.class文件加载到内存中，并为之生成对应的Class对象，虽然我们不需要关心类加载机制，但是了解这个机制我们就能更好地理解程序的运行。</p><h4 id="4-类加载器的分类"><a href="#4-类加载器的分类" class="headerlink" title="4.类加载器的分类"></a>4.类加载器的分类</h4><p>Bootstrap ClassLoader 根类加载器</p><p>Extension ClassLoader 扩展类加载器</p><p>System ClassLoader 系统类加载器</p><h4 id="5-类加载器的作用"><a href="#5-类加载器的作用" class="headerlink" title="5.类加载器的作用"></a>5.类加载器的作用</h4><p>Bootstrap ClassLoader 根类加载器</p><p>也被称为引导类加载器，负责Java核心类的加载</p><p>比如System，String等。在JDK中JRE的lib目录下rt.jar文件中</p><p>Extension ClassLoader扩展类加载器</p><p>负责JRE的扩展目录中jar的加载</p><p>在JDK中JRE的lib目录下ext目录</p><p>System ClassLoader 系统类加载器</p><p>负责在JVM启动时加载来自java命令的class文件，以及classpath环境变量所指定的jar包和类路径</p><h2 id="反射概述"><a href="#反射概述" class="headerlink" title="反射概述"></a>反射概述</h2><p>Java反射机制是在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；</p><p>对于任意一个对象，都能够调用它的任意一个方法和属性；</p><p>这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制。</p><p>要想解剖一个类，就必须要获取到该类的字节码文件对象</p><p>而解剖使用的就是Class类中的方法，所以要先获取到每一个字节码文件对应的Class类型对象。</p><h4 id="三种方式"><a href="#三种方式" class="headerlink" title="三种方式"></a>三种方式</h4><p>1.Object类的getClass()方法，判断两个对象是否时同一个字节码文件</p><p>2.静态属性class，锁对象</p><p>3.Class类中静态方法forName(),读取配置文件</p><p><img src="/2022/10/21/Java%E5%8F%8D%E5%B0%84%E4%B8%8EXML-Json/WEBRESOURCE59d8c4c388d4fa76527dcf6a69038ba1.png"></p><p><img src="/2022/10/21/Java%E5%8F%8D%E5%B0%84%E4%B8%8EXML-Json/WEBRESOURCE7903b6f0673f48b511e7f09f5aa7aab0.png"></p><h4 id="通过反射获取带参构造方法并使用"><a href="#通过反射获取带参构造方法并使用" class="headerlink" title="通过反射获取带参构造方法并使用"></a>通过反射获取带参构造方法并使用</h4><p>Constructor</p><p>Class类的newInstance()方法是使用该无参的构造函数创建对象，如果一个类没有无参的构造函数，就不能这样创建了，可以调用Class类的getConstructor（String.class,int.class）方法获取一个指定的构造函数然后再调用Constructor类的newInstance(“张三”，20)方法创建对象</p><h4 id="通过反射获取成员变量并使用"><a href="#通过反射获取成员变量并使用" class="headerlink" title="通过反射获取成员变量并使用"></a>通过反射获取成员变量并使用</h4><p>Field</p><p>Class.getField(String)方法可以获取类中的指定字段(可见的)，如果时私有的可以用getDeclaedField(“name”)方法获取，通过set(obj，”李四”)方法可以设置指定对象上该字段的值，如果是私有的需要先调用setAccessible(true)设置访问权限，用获取的指定的字段调用get(obj)可以获取指定对象中该字段的值</p><h4 id="通过反射获取方法并使用"><a href="#通过反射获取方法并使用" class="headerlink" title="通过反射获取方法并使用"></a>通过反射获取方法并使用</h4><p>Method</p><p>Class.getMethod(String，Class…)和Class.getDeclareMethod(String,Class…)方法可以获取类中的指定方法，调用invoke(object，object…)可以调用该法ing发，Class.getMethod(”eat“)invoke(obj)Class.getMethod(“eat”，int.class)invoke(obj,10)</p><h1 id="XML-amp-JSON"><a href="#XML-amp-JSON" class="headerlink" title="XML&amp;JSON"></a>XML&amp;JSON</h1><h2 id="XML（EXtensible-Markup-Language）"><a href="#XML（EXtensible-Markup-Language）" class="headerlink" title="XML（EXtensible Markup Language）"></a>XML（EXtensible Markup Language）</h2><p>可扩展标记语言</p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><p>与操作系统、编程语言的开发平台无关</p><p>实现不同系统之间的数据交换</p><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>数据交互</p><p>配置应用程序和网站</p><p>Ajax基石</p><h4 id="XML文档内容由一系列标签元素组成"><a href="#XML文档内容由一系列标签元素组成" class="headerlink" title="XML文档内容由一系列标签元素组成"></a>XML文档内容由一系列标签元素组成</h4><p>&lt;元素名 属性名&#x3D;”属性值“&gt;元素内容&lt;&#x2F;元素名&gt;</p><p>xml命名空间的作用</p><h4 id="解析XML技术"><a href="#解析XML技术" class="headerlink" title="解析XML技术"></a>解析XML技术</h4><p>DOM</p><p>基于XML文档树结构的解析</p><p>适用于多次访问的XML文档</p><p>特点：速度快，比较消耗资源</p><p>SAX</p><p>基于事件的解析</p><p>适用于大数据量的XML文档</p><p>特点：占用资源少，内存消耗小</p><p>DOM4J（主流）</p><p>非常优秀的Java XML API</p><p>性能优异、功能强大</p><p>开放源代码</p><p>DOM解析XML文件步骤</p><h2 id="JSON-JavaScript-Object-Notation"><a href="#JSON-JavaScript-Object-Notation" class="headerlink" title="JSON(JavaScript Object Notation)"></a>JSON(JavaScript Object Notation)</h2><p>轻量级的文本数据交换格式</p><p>具有自我描述性</p><p>比XML传输速度快</p><p>阿里开源JSON解析框架</p><p>FastJSON</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>反射</tag>
      
      <tag>XML</tag>
      
      <tag>JSON</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>多线程和网络编程</title>
    <link href="/2022/10/21/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    <url>/2022/10/21/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="多线程（Thread）"><a href="#多线程（Thread）" class="headerlink" title="多线程（Thread）"></a>多线程（Thread）</h1><h2 id="1-什么是线程、主线程和其他子线程"><a href="#1-什么是线程、主线程和其他子线程" class="headerlink" title="1.什么是线程、主线程和其他子线程"></a>1.什么是线程、主线程和其他子线程</h2><p>线程是程序执行的一条路径，一个进程中可以包含多条线程</p><p>多线程并发执行可以提高程序的效率，可以同时完成多项工作</p><p>main()方法即为主线程入口</p><h2 id="2-多线程并行和并发的区别"><a href="#2-多线程并行和并发的区别" class="headerlink" title="2.多线程并行和并发的区别"></a>2.多线程并行和并发的区别</h2><p>并行是指两个任务同时进行，就是甲任务进行的同时，乙任务也在进行。（需多核CPU）</p><p>并发是指两个任务都请求运行，而处理器只能接受一个任务，就把这两个任务安排轮流进行，由于时间间隔较短，使人感觉两个任务都在运行。</p><h2 id="3-Java程序运行原理和JVM的启动是多线程的吗？"><a href="#3-Java程序运行原理和JVM的启动是多线程的吗？" class="headerlink" title="3.Java程序运行原理和JVM的启动是多线程的吗？"></a>3.Java程序运行原理和JVM的启动是多线程的吗？</h2><p>A：Jva程序运行原理</p><p>Java命令会启动java虚拟机，启动JVM，等于启动了一个应用程序，也就是启动了一个进程。该进程会自动启动一个”主线程“，然后主线程去调用某个类的main方法。</p><p>B：JVM的启动是多线程的吗</p><p>JVM启动至少启动了垃圾回收线程和主线程，所以是多线程的。</p><h2 id="4-多线程程序实现的方式"><a href="#4-多线程程序实现的方式" class="headerlink" title="4.多线程程序实现的方式"></a>4.多线程程序实现的方式</h2><p>①继承Thread(无返回值)</p><p>定义类继承Thread</p><p>重写run()方法</p><p>把新线程要做的事写在run()方法中</p><p>创建线程对象</p><p>开启新线程，内部会自动执行run()方法</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadTest</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>&#123;<br>        MyThread mt = <span class="hljs-keyword">new</span> <span class="hljs-built_in">MyThread</span>();                   <span class="hljs-comment">//4.创建Thread类的子类对象</span><br>        mt.<span class="hljs-built_in">start</span>();                                     <span class="hljs-comment">//5.开启线程</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span> ; i &lt; <span class="hljs-number">1000</span>; i++)&#123;<br>            System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;bbbbbbb&quot;</span>);<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Thread</span></span>&#123;               <span class="hljs-comment">//1.继承Thread</span><br>    public void run()&#123;                              <span class="hljs-comment">//2.重写run方法</span><br>        <span class="hljs-keyword">for</span> (int i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">1000</span>; i++)&#123;                 <span class="hljs-comment">//3.将要执行的代码写在run方法中</span><br>            <span class="hljs-type">System</span>.out.println(<span class="hljs-string">&quot;aaaaaaaa&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>②实现Runnable接口(无返回值)</p><p>定义实现Runnable接口</p><p>实现run()方法</p><p>把新线程要做的事写在run()方法中</p><p>创建自定义的Runnable的子类对象</p><p>创建Thread对象，传入Runnable</p><p>调用start()开启新线程，内部会自动调用Runnable的run()方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadTest</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">MyRunnable</span> <span class="hljs-variable">mr</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>();            <span class="hljs-comment">//4.创建Runnable的子类对象</span><br>        <span class="hljs-type">Thread</span> <span class="hljs-variable">t</span>  <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(mr);                  <span class="hljs-comment">//5.将子类对象当作参数传递给Thread的构造函数</span><br>        t.start();                                   <span class="hljs-comment">//6.开启线程</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; i &lt; <span class="hljs-number">1000</span>; i++)&#123;<br>            System.out.println(<span class="hljs-string">&quot;bbbbbbb&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-symbol">MyRunnable</span> <span class="hljs-symbol">implements</span> <span class="hljs-symbol">Runnable</span>&#123;        <span class="hljs-comment">//1.定义一个类实现Runnable</span><br>    @Override<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> run() &#123;                             <span class="hljs-comment">//2.重写run方法</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">1000</span>; i++)&#123;                 <span class="hljs-comment">//3.将要执行的代码写在run方法中</span><br>            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;aaaaaaaa&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>③Callable方式(有返回值)</p><h2 id="5-两种方式的区别"><a href="#5-两种方式的区别" class="headerlink" title="5.两种方式的区别"></a>5.两种方式的区别</h2><p>查看源码的区别：</p><p>①继承Thread：由于子类重写了Thread类的run()，当调用start()时，直接找子类的run()方法</p><p>②实现Runnable：构造函数中传入了Runnable的引用，成员变量记住了它，start()调用run()方法时内部判断成员变量Runnable的引用是否为空，不为空编译时看的时Runnable的run()，运行时执行的是子类的run()方法。</p><p>继承Thread</p><p>好处是：可以直接使用Thread类中的方法，代码简单</p><p>弊端是：如果已经有了父类，就不能用这种方法</p><p>实现Runnable接口</p><p>好处是：即使自己定义的线程类有了父类也没关系，因为有了父类也可以实现接口，而且接口是可以多实现的</p><p>弊端是：不能直接使用Thread中的方法需要先获取到线程对象后，才能得到Thread的方法，代码复杂</p><h2 id="6-匿名内部类实现线程的两种方式"><a href="#6-匿名内部类实现线程的两种方式" class="headerlink" title="6.匿名内部类实现线程的两种方式"></a>6.匿名内部类实现线程的两种方式</h2><p>①继承(extends)Thread类</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo4</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        <span class="hljs-keyword">new</span> Thread()&#123;                                       <span class="hljs-comment">//1.继承Thread类</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span> &#123;                             <span class="hljs-comment">//2.重写run方法</span><br>                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) &#123;            <span class="hljs-comment">//3.将执行的代码写入run方法中</span><br>                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;aaaaaaaaaaaaa&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;.start();                                          <span class="hljs-comment">//4.开启线程</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>②实现(implement)Runnable接口（可实现数据共享）</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Demo4</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> &#123;<br>        <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> Runnable()&#123;                          <span class="hljs-comment">//1.将Runnable的子类对象传递给Thread的构造方法</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span>()</span>&#123;                              <span class="hljs-comment">//2.重写run方法</span><br>                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) &#123;            <span class="hljs-comment">//3.将执行的代码写入run方法中</span><br>                    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;bbbbbbbbbb&quot;</span>);       <br>                &#125;<br>            &#125;<br>        &#125;).start();                                         <span class="hljs-comment">//4.开启线程</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>③(有返回值)</p><h2 id="7-线程的getName-、setName-、currentThread-方法"><a href="#7-线程的getName-、setName-、currentThread-方法" class="headerlink" title="7.线程的getName()、setName()、currentThread()方法"></a>7.线程的getName()、setName()、currentThread()方法</h2><p>currentThread()方法用于Runnable中，使之可以顺利的执行getName()、setName()方法。</p><h2 id="8-休眠线程"><a href="#8-休眠线程" class="headerlink" title="8.休眠线程"></a>8.休眠线程</h2><p>Thread.sleep(毫秒,纳秒)，控制当前线程休眠若干毫秒1s&#x3D;1000毫秒&#x3D;1000<em>1000</em>1000纳秒</p><h2 id="9-守护线程"><a href="#9-守护线程" class="headerlink" title="9.守护线程"></a>9.守护线程</h2><h2 id="10-线程的状态转换-五个状态"><a href="#10-线程的状态转换-五个状态" class="headerlink" title="10.线程的状态转换(五个状态)"></a>10.线程的状态转换(五个状态)</h2><h2 id="11-线程调度"><a href="#11-线程调度" class="headerlink" title="11.线程调度"></a>11.线程调度</h2><p>void setPriority(int newPriority)</p><p>static void sleep(long millis)</p><p>void join()强制</p><p>static void yield()”礼让“</p><p>void interrupt()</p><h2 id="12-锁synchronized"><a href="#12-锁synchronized" class="headerlink" title="12.锁synchronized"></a>12.锁synchronized</h2><p>①public synchronized void 方法名(){</p><p>}</p><p>②同步代码块</p><p>synchronized（this）{</p><p>&#x2F;&#x2F;所控制的变量或代码块</p><p>}</p><h1 id="网络编程（socket）-传输层）（TCP-x2F-IP）"><a href="#网络编程（socket）-传输层）（TCP-x2F-IP）" class="headerlink" title="网络编程（socket）(传输层）（TCP&#x2F;IP）"></a>网络编程（socket）(传输层）（TCP&#x2F;IP）</h1><h2 id="1-基础原理（7层模型）"><a href="#1-基础原理（7层模型）" class="headerlink" title="1.基础原理（7层模型）"></a>1.基础原理（7层模型）</h2><h2 id="2-什么是Socket"><a href="#2-什么是Socket" class="headerlink" title="2.什么是Socket"></a>2.什么是Socket</h2><p>流式套接字（SOCK_STREAM）</p><p>面向链接、可靠的数据传输服务，基于TCP协议</p><p>数据报式套接字（SOCK_DGRAM）</p><p>无连接服务(UDP)</p><p>原始套接字（SOCK_RAW）</p><p>操作下层</p><p>传输层的API</p><h2 id="3-java-net包"><a href="#3-java-net包" class="headerlink" title="3.java.net包"></a>3.java.net包</h2><p>Socket</p><p>ServerSocket</p><p>DatagramPacket</p><p>DatagramSocket</p><p>InetAddress</p><p>…</p><h2 id="4-基于TCP协议的socket网络编程一般可以分为以下几个步骤"><a href="#4-基于TCP协议的socket网络编程一般可以分为以下几个步骤" class="headerlink" title="4.基于TCP协议的socket网络编程一般可以分为以下几个步骤"></a>4.基于TCP协议的socket网络编程一般可以分为以下几个步骤</h2><p>&lt;C&#x2F;S&gt;模式</p><p>①创建Client端和Server端两个Socket对象，对于Client端时Socket对象、对于Server端是ServerSocket对象</p><p>②在Client端和Server端之间建立连接</p><p>③在输入和输出之间借助数据流来传递信息</p><p>④关闭所有数据流和Socket</p><h2 id="5-socket中实现对象的传输"><a href="#5-socket中实现对象的传输" class="headerlink" title="5.socket中实现对象的传输"></a>5.socket中实现对象的传输</h2><p>借助于序列化和反序列化就能实现</p><p><img src="/2022/10/21/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/WEBRESOURCE97f71c4a1f3001729950f4a437554737.png"></p><h2 id="6-多线程处理多请求"><a href="#6-多线程处理多请求" class="headerlink" title="6.多线程处理多请求"></a>6.多线程处理多请求</h2><p>借助多线程，实现多客户端与服务器网络通信</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>多线程</tag>
      
      <tag>网络编程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java实现10种排序</title>
    <link href="/2022/10/21/Java%E6%8E%92%E5%BA%8F/"/>
    <url>/2022/10/21/Java%E6%8E%92%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<p>#Java实现10种排序算法<br>参考：<a href="https://blog.csdn.net/weixin_44531966/article/details/116464294">https://blog.csdn.net/weixin_44531966/article/details/116464294</a></p><p>#Java排序实现<br>参考：<a href="https://blog.csdn.net/whp1473/article/details/79678974">https://blog.csdn.net/whp1473/article/details/79678974</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>排序算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java重写(Override)与重载(Overload)</title>
    <link href="/2022/10/21/Java%E9%87%8D%E5%86%99-Override-%E4%B8%8E%E9%87%8D%E8%BD%BD-Overload/"/>
    <url>/2022/10/21/Java%E9%87%8D%E5%86%99-Override-%E4%B8%8E%E9%87%8D%E8%BD%BD-Overload/</url>
    
    <content type="html"><![CDATA[<h1 id="重写-Override"><a href="#重写-Override" class="headerlink" title="重写(Override)"></a>重写(Override)</h1><p>重写是子类对父类的允许访问的方法的实现过程进行重新编写, 返回值和形参都不能改变。即外壳不变，核心重写！</p><p>重写的好处在于子类可以根据需要，定义特定于自己的行为。 也就是说子类能够根据需要实现父类的方法。</p><p>重写方法不能抛出新的检查异常或者比被重写方法申明更加宽泛的异常。例如： 父类的一个方法申明了一个检查异常 IOException，但是在重写这个方法的时候不能抛出 Exception 异常，因为 Exception 是 IOException 的父类，抛出 IOException 异常或者 IOException 的子类异常。</p><p>在面向对象原则里，重写意味着可以重写任何现有方法。实例如下：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;动物可以移动&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-title">extends</span> <span class="hljs-title">Animal</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;狗可以跑和走&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestDog</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String args[]</span>)</span>&#123;<br>      Animal a = <span class="hljs-keyword">new</span> Animal(); <span class="hljs-comment">// Animal 对象</span><br>      Animal b = <span class="hljs-keyword">new</span> Dog(); <span class="hljs-comment">// Dog 对象</span><br> <br>      a.move();<span class="hljs-comment">// 执行 Animal 类的方法</span><br> <br>      b.move();<span class="hljs-comment">//执行 Dog 类的方法</span><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上实例编译运行结果如下：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">动物可以移动<br>狗可以跑和走<br></code></pre></td></tr></table></figure><p>在上面的例子中可以看到，尽管 b 属于 Animal 类型，但是它运行的是 Dog 类的 move方法。</p><p>这是由于在编译阶段，只是检查参数的引用类型。</p><p>然而在运行时，Java 虚拟机(JVM)指定对象的类型并且运行该对象的方法。</p><p>因此在上面的例子中，之所以能编译成功，是因为 Animal 类中存在 move 方法，然而运行时，运行的是特定对象的方法。</p><p>思考以下例子：</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;动物可以移动&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-title">extends</span> <span class="hljs-title">Animal</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">move</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;狗可以跑和走&quot;</span>);<br>   &#125;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">bark</span>()</span>&#123;<br>      System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;狗可以吠叫&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestDog</span>&#123;<br>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String args[]</span>)</span>&#123;<br>      Animal a = <span class="hljs-keyword">new</span> Animal(); <span class="hljs-comment">// Animal 对象</span><br>      Animal b = <span class="hljs-keyword">new</span> Dog(); <span class="hljs-comment">// Dog 对象</span><br> <br>      a.move();<span class="hljs-comment">// 执行 Animal 类的方法</span><br>      b.move();<span class="hljs-comment">//执行 Dog 类的方法</span><br>      b.bark();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上实例编译运行结果如下：</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">TestDog.java:<span class="hljs-number">30</span>: cannot find symbol<br>symbol  : <span class="hljs-keyword">method</span> <span class="hljs-title function_">bark</span><span class="hljs-params">()</span><br><span class="hljs-title function_">location</span>: <span class="hljs-keyword">class</span> Animal<br>                b.bark()<span class="hljs-punctuation">;</span><br>                 ^<br></code></pre></td></tr></table></figure><p>该程序将抛出一个编译错误，因为b的引用类型Animal没有bark方法。</p><hr><h2 id="方法的重写规则"><a href="#方法的重写规则" class="headerlink" title="方法的重写规则"></a>方法的重写规则</h2><ul><li><p>参数列表与被重写方法的参数列表必须完全相同。</p></li><li><p>返回类型与被重写方法的返回类型可以不相同，但是必须是父类返回值的派生类（java5 及更早版本返回类型要一样，java7 及更高版本可以不同）。</p></li><li><p>访问权限不能比父类中被重写的方法的访问权限更低。例如：如果父类的一个方法被声明为 public，那么在子类中重写该方法就不能声明为 protected。</p></li><li><p>父类的成员方法只能被它的子类重写。</p></li><li><p>声明为 final 的方法不能被重写。</p></li><li><p>声明为 static 的方法不能被重写，但是能够被再次声明。</p></li><li><p>子类和父类在同一个包中，那么子类可以重写父类所有方法，除了声明为 private 和 final 的方法。</p></li><li><p>子类和父类不在同一个包中，那么子类只能够重写父类的声明为 public 和 protected 的非 final 方法。</p></li><li><p>重写的方法能够抛出任何非强制异常，无论被重写的方法是否抛出异常。但是，重写的方法不能抛出新的强制性异常，或者比被重写方法声明的更广泛的强制性异常，反之则可以。</p></li><li><p>构造方法不能被重写。</p></li><li><p>如果不能继承一个类，则不能重写该类的方法。</p></li></ul><hr><h2 id="Super-关键字的使用"><a href="#Super-关键字的使用" class="headerlink" title="Super 关键字的使用"></a>Super 关键字的使用</h2><p>当需要在子类中调用父类的被重写方法时，要使用 super 关键字。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">move</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;动物可以移动&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">move</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">move</span>(); <span class="hljs-comment">// 应用super类的方法</span><br>      <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;狗可以跑和走&quot;</span>);<br>   &#125;<br>&#125;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDog</span>&#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> args[]</span>)&#123;<br> <br>      <span class="hljs-title class_">Animal</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(); <span class="hljs-comment">// Dog 对象</span><br>      b.<span class="hljs-title function_">move</span>(); <span class="hljs-comment">//执行 Dog类的方法</span><br> <br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>以上实例编译运行结果如下：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">动物可以移动<br>狗可以跑和走<br></code></pre></td></tr></table></figure><h2 id="重载-Overload"><a href="#重载-Overload" class="headerlink" title="重载(Overload)"></a>重载(Overload)</h2><p>重载(overloading) 是在一个类里面，方法名字相同，而参数不同。返回类型可以相同也可以不同。</p><p>每个重载的方法（或者构造函数）都必须有一个独一无二的参数类型列表。</p><p>最常用的地方就是构造器的重载。</p><p>重载规则:</p><ul><li><p>被重载的方法必须改变参数列表(参数个数或类型不一样)；</p></li><li><p>被重载的方法可以改变返回类型；</p></li><li><p>被重载的方法可以改变访问修饰符；</p></li><li><p>被重载的方法可以声明新的或更广的检查异常；</p></li><li><p>方法能够在同一个类中或者在一个子类中被重载。</p></li><li><p>无法以返回值类型作为重载函数的区分标准。</p></li></ul><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Overloading</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">test</span>()</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;test1&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> a</span>)</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;test2&quot;</span>);<br>    &#125;   <br> <br>    <span class="hljs-comment">//以下两个参数类型顺序不同</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> a,String s</span>)</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;test3&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;returntest3&quot;</span>;<br>    &#125;   <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test</span>(<span class="hljs-params">String s,<span class="hljs-built_in">int</span> a</span>)</span>&#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;test4&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;returntest4&quot;</span>;<br>    &#125;   <br> <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span>&#123;<br>        Overloading o = <span class="hljs-keyword">new</span> Overloading();<br>        System.<span class="hljs-keyword">out</span>.println(o.test());<br>        o.test(<span class="hljs-number">1</span>);<br>        System.<span class="hljs-keyword">out</span>.println(o.test(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;test3&quot;</span>));<br>        System.<span class="hljs-keyword">out</span>.println(o.test(<span class="hljs-string">&quot;test4&quot;</span>,<span class="hljs-number">1</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="重写与重载之间的区别"><a href="#重写与重载之间的区别" class="headerlink" title="重写与重载之间的区别"></a>重写与重载之间的区别</h2><table><thead><tr><th>区别点</th><th>重载方法</th><th>重写方法</th></tr></thead><tbody><tr><td>参数列表</td><td>必须修改</td><td>一定不能修改</td></tr><tr><td>返回类型</td><td>可以修改</td><td>一定不能修改</td></tr><tr><td>异常</td><td>可以修改</td><td>可以减少或删除，一定不能抛出新的或者更广的异常</td></tr><tr><td>访问</td><td>可以修改</td><td>一定不能做更严格的限制（可以降低限制）</td></tr></tbody></table><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>方法的重写(Overriding)和重载(Overloading)是java多态性的不同表现，重写是父类与子类之间多态性的一种表现，重载可以理解成多态的具体表现形式。</p><ul><li><p>(1)方法重载是一个类中定义了多个方法名相同,而他们的参数的数量不同或数量相同而类型和次序不同,则称为方法的重载(Overloading)。</p></li><li><p>(2)方法重写是在子类存在方法与父类的方法的名字相同,而且参数的个数与类型一样,返回值也一样的方法,就称为重写(Overriding)。</p></li><li><p>(3)方法重载是一个类的多态性表现,而方法重写是子类与父类的一种多态性表现。</p></li></ul><p><img src="/2022/10/21/Java%E9%87%8D%E5%86%99-Override-%E4%B8%8E%E9%87%8D%E8%BD%BD-Overload/WEBRESOURCE45b7836d5382c120eea20fcb0db55d5b.png"></p><p><img src="/2022/10/21/Java%E9%87%8D%E5%86%99-Override-%E4%B8%8E%E9%87%8D%E8%BD%BD-Overload/WEBRESOURCE9f2ee55d8ea4cd593246c0c4fa8be779.png"></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Java重写(Override)与重载(Overload)</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java高级</title>
    <link href="/2022/10/21/Java%E9%AB%98%E7%BA%A7/"/>
    <url>/2022/10/21/Java%E9%AB%98%E7%BA%A7/</url>
    
    <content type="html"><![CDATA[<p>#接口</p><p>##接口的描述：</p><p>接口就是一种公共的规范标准，只要符合规范标准，大家都可以通用，Java中的接口更多的体现在对行为的抽象</p><p>##接口的特点：</p><p>接口用关键字interface修饰</p><p>public interface 接口名{}</p><p>类实现接口用implements表示</p><p>public class 类名 implement 接口名{}</p><p>接口不能实例化</p><p>接口如何实例化呢？参照多态的方式，通过实现类对象实例化，这叫接口多态。</p><p>多态的形式：具体类多态，抽象类多态，接口多态。</p><p>多态的前提：有继承或者实现关系；有方法重写；有父（类&#x2F;接口）英勇只想（子&#x2F;实现）类对象</p><p>接口的实现类</p><p>要么重写接口中的所有抽象方法</p><p>要么是抽象类</p><p>##接口的成员特点：</p><p>###成员变量</p><p>###只能是常量</p><p>默认修饰符：public static final</p><p>###构造方法</p><p>接口没有构造方法，应为接口主要是对行为进行抽象的，是没有具体存在</p><p>一个类如果没有父类，默认继承自Object类</p><p>###成员方法</p><p>只能是抽象方法</p><p>默认修饰符：public abstract</p><p>#类和接口的关系：</p><p>类和类的关系</p><p>继承关系，只能单继承，但是可以多层继承</p><p>类和接口的关系</p><p>实现关系，可以单实线，也可以多实现，还可以在继承一个类的同时实现多个接口</p><p>接口和接口的关系</p><p>继承关系，可以单继承，也可以多继承</p><p>    </p><p>#抽象类和接口的区别</p><p>成员区别</p><p>|抽象类|变量，常量；有构造方法；有抽象方法，也有非抽象方法。|</p><p>|接口|常量；抽象方法。|</p><blockquote></blockquote><p>关系区别</p><p>|类与类|继承，单继承，多层继承|</p><p>|类与接口|实现，可以单实现，也可以多实现|</p><p>|接口与接口|继承，单继承，多继承|</p><blockquote></blockquote><p>设计理念区别</p><p>|抽象类|对类抽象，包括属性、行为|</p><p>|接口|对行为抽象，主要是行为|</p><blockquote></blockquote><p>形参和返回值</p><p>抽象类名作为形参和返回值</p><p>方法的形参是抽象类名，其实需要的时该抽象类的子类对象</p><p>方法的返回值是抽象类名，其实返回的是该抽象类的子类对象</p><p>接口名作为形参和和返回值</p><p>方法的形参是接口名，其实需要的是该接口的实现类对象</p><p>方法的返回值是接口名，其实返回的是该接口的实现类对象</p><p>内部类</p><p>内部类：就是在一个类中定义一个类。举例：在一个类A的内部定义一个类B，类B就被称为内部类</p><p>pblic class A{</p><p>public class B{</p><p>}</p><p>}</p><p>内部类的访问特点：</p><p>内部类可以直接访问外部类的成员，包括私有。</p><p>外部类要访问内部类的成员，必须创建对象。</p><p>成员内部类</p><p>按照内部类在类中定义的位置不同，可以分为如下两种形式</p><p>在类的成员位置：成员内部类</p><p>在类的局部位置：局部内部类</p><p>成员内部类，外界如何创建对象使用呢？</p><p>格式：外部类名.内部类名 对象名 &#x3D; 外部类对象.内部类对象；</p><p>范例：Outer.Inner oi &#x3D; new Outer().new Inner();</p><p>当成员内部类为私有时，在外部类中创建方法间接调用内部类：</p><p><img src="/2022/10/21/Java%E9%AB%98%E7%BA%A7/A671AF24A1314FA4B56D98FB43007486.png"></p><p>局部内部类</p><p>是在方法中定义的类，所以外界是无法直接使用的，需要在方法内部创建对象并使用</p><p>该类可以直接访问外部类的成员，也可以访问方法内的局部变量。</p><p>匿名内部类</p><p>格式：</p><p>new 类名或接口名（）{</p><p>重写方法；</p><p>}；</p><p>范例：</p><p>new Inter（）{</p><p>public void show（）{</p><p>}</p><p>}；</p><p>本质：是一个继承了该类或者实现了该接口的子类匿名对象</p><p><img src="/2022/10/21/Java%E9%AB%98%E7%BA%A7/32E1A5D1032C411B98EC1B46B2BBAE38.png"></p><p>调用：</p><p><img src="/2022/10/21/Java%E9%AB%98%E7%BA%A7/AB98A7AD90824370990DD54D9EE8E7D1.png"></p><p>Math,System,Object类的toString(),Object类的equals()</p><p>intellIj如何看方法的源码：选中方法，按下Ctrl+B</p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Java高级</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java8新特性之Stream流的集合操作</title>
    <link href="/2022/10/21/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B9%8BStream%E6%B5%81%E7%9A%84%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C/"/>
    <url>/2022/10/21/Java8%E6%96%B0%E7%89%B9%E6%80%A7%E4%B9%8BStream%E6%B5%81%E7%9A%84%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="概JDK8-Stream详解"><a href="#概JDK8-Stream详解" class="headerlink" title="概JDK8 Stream详解"></a>概JDK8 Stream详解</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><blockquote></blockquote><p>Stream是Java8 API的新成员，它允许以声明性方式处理数据集合 。</p><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><blockquote></blockquote><p>（1）代码简洁：函数式编程写出的代码简洁且意图明确，使用stream接口让你从此告别for循环。<br>（2）多核友好：Java函数式编程使得编写并行程序从未如此简单，你需要的全部就是调用一下方法。</p><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs glsl"><span class="hljs-number">1</span>）第一步：把集合转换为流<span class="hljs-keyword">stream</span><br><span class="hljs-number">2</span>）第二步：操作<span class="hljs-keyword">stream</span>流<br><span class="hljs-keyword">stream</span>流在管道中经过中间操作（intermediate operation）的处理，最后由最终操作(terminal operation)得到前面处理的结果<br><br></code></pre></td></tr></table></figure><h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2><blockquote></blockquote><p>两种：中间操作符、终止操作符</p><h3 id="中间操作符"><a href="#中间操作符" class="headerlink" title="中间操作符"></a>中间操作符</h3><table><thead><tr><th>流方法</th><th>含义</th><th>示例</th></tr></thead><tbody><tr><td>filter</td><td>用于通过设置的条件过滤出元素</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “”, “bc”, “efg”, “abcd”,””, “jkl”);List&lt;String&gt; filtered &#x3D; strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.toList());</td></tr><tr><td>distinct</td><td>返回一个元素各异（根据流所生成元素的hashCode和equals方法实现）的流。</td><td>List&lt;Integer&gt; numbers &#x3D; Arrays.asList(1, 2, 1, 3, 3, 2, 4);numbers.stream().filter(i -&gt; i % 2 &#x3D;&#x3D; 0).distinct().forEach(System.out::println);</td></tr><tr><td>limit</td><td>会返回一个不超过给定长度的流。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abc”, “bc”, “efg”, “abcd”,”jkl”, “jkl”);List&lt;String&gt; limited &#x3D; strings.stream().limit(3).collect(Collectors.toList());</td></tr><tr><td>skip</td><td>返回一个扔掉了前n个元素的流。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abc”, “bc”, “efg”, “abcd”,”jkl”, “jkl”);List&lt;String&gt; skiped &#x3D; strings.stream().skip(3).collect(Collectors.toList());</td></tr><tr><td>map</td><td>接受一个函数作为参数。这个函数会被应用到每个元素上，并将其映射成一个新的元素（使用映射一词，是因为它和转换类似，但其中的细微差别在于它是&quot;创建一个新版本”而不是去&quot;修改”）。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abc”, “bc”, “efg”, “abcd”,”jkl”, “jkl”);List&lt;String&gt; mapped &#x3D; strings.stream().map(str-&gt;str+”-itcast”).collect(Collectors.toList());</td></tr><tr><td>flatMap</td><td>使用flatMap方法的效果是，各个数组并不是分别映射成一个流，而是映射成流的内容。所有使用map(Arrays::stream)时生成的单个流都被合并起来，即扁平化为一个流。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abc”, “bc”, “efg”, “abcd”,”jkl”, “jkl”);Stream&lt;Character&gt; flatMap &#x3D; strings.stream().flatMap(Java8StreamTest::getCharacterByString);</td></tr><tr><td>sorted</td><td>返回排序后的流</td><td>List&lt;String&gt; strings1 &#x3D; Arrays.asList(“abc”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);List&lt;String&gt; sorted1 &#x3D; strings1.stream().sorted().collect(Collectors.toList());</td></tr></tbody></table><blockquote></blockquote><p>示例代码：<br>1）filter</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:根据条件过滤集合数据<br>* @return : void<br>*/<br>  @Test<br>  public void filter()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; filtered = strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.toList());<br>  out.println(filtered);<br>  &#125;<br></code></pre></td></tr></table></figure><p>2）distinct</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:去除集合中重复数据<br>* @return : void<br>*/<br>  @Test<br>  public void distinct()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; distincted = strings.stream().distinct().collect(Collectors.toList());<br>  out.println(distincted);<br>  &#125;<br></code></pre></td></tr></table></figure><p>3）limit</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:指定获取集合前x条数据，重新构造一个新的集合<br>* @return : void<br>*/<br>  @Test<br>  public void limit()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; limited = strings.stream().limit(3).collect(Collectors.toList());<br>  out.println(limited);<br>  &#125;<br></code></pre></td></tr></table></figure><p>4）skip</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:排除集合前x条数据，把后面的数据重新构造一个新的集合<br>* @return : void<br>*/<br>  @Test<br>  public void skip()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; skiped = strings.stream().skip(3).collect(Collectors.toList());<br>  out.println(skiped);<br>  &#125;<br></code></pre></td></tr></table></figure><p>5）map</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">    /**<br>    * 功能描述:对集合中所有元素统一处理<br>* @return : void<br>  */<br>  @Test<br>  public void map()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; mapped = strings.stream().map(str-&gt;str+&quot;-itcast&quot;).collect(Collectors.toList());<br>  out.println(mapped);<br>  &#125;<br></code></pre></td></tr></table></figure><p>6）flatMap</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述:对集合中所有元素统一处理<br>* @return : void<br>*/<br>  @Test<br>  public void flatMap()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abc&quot;, &quot;bc&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  Stream&lt;String&gt; stringStream = strings.stream().map(x -&gt; x);<br>  Stream&lt;String&gt; stringStream1 = strings.stream().flatMap(x -&gt; Arrays.asList(x.split(&quot; &quot;)).stream());<br>  &#125;<br></code></pre></td></tr></table></figure><p>7）sorted</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 对集合进行排序<br>* @return : void<br>*/<br>  @Test<br>  public void sorted()&#123;<br>  List&lt;String&gt; strings1 = Arrays.asList(&quot;abc&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  List&lt;String&gt; strings2 = Arrays.asList(&quot;张三&quot;, &quot;李四&quot;, &quot;王五&quot;, &quot;赵柳&quot;, &quot;张哥&quot;,&quot;李哥&quot;, &quot;王哥&quot;);<br>  List&lt;Integer&gt; strings3 = Arrays.asList(10, 2, 30, 22, 1,0, -9);<br>  List&lt;String&gt; sorted1 = strings1.stream().sorted().collect(Collectors.toList());<br>  List&lt;String&gt; sorted2 = strings2.stream().sorted(Collections.reverseOrder(Collator.getInstance(Locale.CHINA))).collect(Collectors.toList());<br>  List&lt;Integer&gt; sorted3 = strings3.stream().sorted().collect(Collectors.toList());<br>  out.println(sorted1);<br>  out.println(sorted2);<br>  out.println(sorted3);<br>  &#125;<br></code></pre></td></tr></table></figure><p>Map、flatMap区别</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-built_in">map</span>：对流中每一个元素进行处理<br>flatMap：流扁平化，让你把一个流中的“每个值”都换成另一个流，然后把所有的流连接起来成为一个流 <br>总结：<span class="hljs-built_in">map</span>是对一级元素进行操作，flatmap是对二级元素操作。<br><br></code></pre></td></tr></table></figure><p>本质区别：map返回一个值；flatmap返回一个流，多个值。</p><p>应用场景：map对集合中每个元素加工,返回加工后结果；flatmap对集合中每个元素加工后，做扁平化处理后（拆分层级，放到同一层）然后返回</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 方法一</span><br><span class="hljs-comment"> * 功能描述:  通过使用map、flatMap把字符串转换为字符输出对比区别</span><br><span class="hljs-comment"> * @return : void</span><br><span class="hljs-comment"> */</span><br>@Test<br>public void flat<span class="hljs-constructor">Map2Map()</span>&#123;<br>    List&lt;String&gt; strings = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span><span class="hljs-keyword">as</span><span class="hljs-constructor">List(<span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-string">&quot;abc&quot;</span>, <span class="hljs-string">&quot;bc&quot;</span>, <span class="hljs-string">&quot;efg&quot;</span>, <span class="hljs-string">&quot;abcd&quot;</span>,<span class="hljs-string">&quot;jkl&quot;</span>, <span class="hljs-string">&quot;jkl&quot;</span>)</span>;<br>    final Stream&lt;Character&gt; flatMap = strings.stream<span class="hljs-literal">()</span>.flat<span class="hljs-constructor">Map(Java8StreamTest::<span class="hljs-params">getCharacterByString</span>)</span>;<br>    flatMap.<span class="hljs-keyword">for</span><span class="hljs-constructor">Each(System.<span class="hljs-params">out</span>::<span class="hljs-params">println</span>)</span>;<br>    <span class="hljs-comment">//----------------------------------------------</span><br>    final Stream&lt;Stream&lt;Character&gt;&gt; mapStream = strings.stream<span class="hljs-literal">()</span>.map(Java8StreamTest::getCharacterByString);<br>    <span class="hljs-comment">//mapStream.forEach(System.out::println);</span><br>    out.println(<span class="hljs-string">&quot;------------------------------------------------&quot;</span>);<br>    mapStream.<span class="hljs-keyword">for</span><span class="hljs-constructor">Each(<span class="hljs-params">stream</span>-&gt; &#123;<span class="hljs-params">stream</span>.<span class="hljs-params">forEach</span>(<span class="hljs-params">character</span>-&gt;&#123;System.<span class="hljs-params">out</span>.<span class="hljs-params">println</span>(<span class="hljs-params">character</span>)</span>;&#125;);&#125;);<br><br>&#125;<br><br></code></pre></td></tr></table></figure><blockquote></blockquote><p>公共方法（字符串转换为字符流）</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 功能描述:字符串转换为字符流</span><br><span class="hljs-comment">* @param str</span><br><span class="hljs-comment">* @return : java.util.stream.Stream&lt;java.lang.Character&gt;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-built_in">public</span> static Stream&lt;<span class="hljs-type">Character</span>&gt; getCharacterByString(String str) &#123;<br>    List&lt;<span class="hljs-type">Character</span>&gt; characterList = <span class="hljs-built_in">new</span> ArrayList&lt;&gt;();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">Character</span> <span class="hljs-type">character</span> : str.toCharArray()) &#123;<br>    characterList.<span class="hljs-keyword">add</span>(<span class="hljs-type">character</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> characterList.stream();<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="终止操作符"><a href="#终止操作符" class="headerlink" title="终止操作符"></a>终止操作符</h3><table><thead><tr><th>流方法</th><th>含义</th><th>示例</th></tr></thead><tbody><tr><td>anyMatch</td><td>检查是否至少匹配一个元素，返回boolean。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);boolean b &#x3D; strings.stream().anyMatch(s -&gt; s &#x3D;&#x3D; “abc”);</td></tr><tr><td>allMatch</td><td>检查是否匹配所有元素，返回boolean。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);boolean b &#x3D; strings.stream().allMatch(s -&gt; s &#x3D;&#x3D; “abc”);</td></tr><tr><td>noneMatch</td><td>检查是否没有匹配所有元素，返回boolean。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“abc”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);boolean b &#x3D; strings.stream().noneMatch(s -&gt; s &#x3D;&#x3D; “abc”);</td></tr><tr><td>findAny</td><td>将返回当前流中的任意元素。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);Optional&lt;String&gt; any &#x3D; strings.stream().findAny();</td></tr><tr><td>findFirst</td><td>返回第一个元素</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);Optional&lt;String&gt; first &#x3D; strings.stream().findFirst();</td></tr><tr><td>forEach</td><td>遍历流</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);strings.stream().forEach(s -&gt; out.println(s));</td></tr><tr><td>collect</td><td>收集器，将流转换为其他形式。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);Set&lt;String&gt; set &#x3D; strings.stream().collect(Collectors.toSet());List&lt;String&gt; list &#x3D; strings.stream().collect(Collectors.toList());Map&lt;String, String&gt; map &#x3D; strings.stream().collect(Collectors.toMap(v -&gt;v.concat(“_name”), v1 -&gt; v1, (v1, v2) -&gt; v1));</td></tr><tr><td>reduce</td><td>可以将流中元素反复结合起来，得到一个值。使用 reduce((T, T) -&gt; T) 和 reduce(T, (T, T) -&gt; T) 用于组合流中的元素，如求和，求积，求最大值等。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);Optional&lt;String&gt; reduce &#x3D; strings.stream().reduce((acc,item) -&gt; {return acc+item;});if(reduce.isPresent())out.println(reduce.get());</td></tr><tr><td>count</td><td>返回流中元素总数。</td><td>List&lt;String&gt; strings &#x3D; Arrays.asList(“cv”, “abd”, “aba”, “efg”, “abcd”,”jkl”, “jkl”);long count &#x3D; strings.stream().count();</td></tr></tbody></table><blockquote></blockquote><p>示例代码<br>1）anyMatch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 判断集合中是否至少存在一个元素满足条件<br>* @return : void<br>*/<br>  @Test<br>  public void anyMatch()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  boolean b = strings.stream().anyMatch(s -&gt; s == &quot;abc&quot;);<br>  out.println(b);<br>  &#125;<br></code></pre></td></tr></table></figure><p>2）allMatch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 判断集合中是否所有元素都满足条件<br>* @return : void<br>*/<br>  @Test<br>  public void allMatch()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  boolean b = strings.stream().allMatch(s -&gt; s == &quot;abc&quot;);<br>  out.println(b);<br>  &#125;<br></code></pre></td></tr></table></figure><p>3）noneMatch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 判断集合中是否所有元素都不满足条件<br>* @return : void<br>*/<br>  @Test<br>  public void noneMatch()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;abc&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  boolean b = strings.stream().noneMatch(s -&gt; s == &quot;abc&quot;);<br>  out.println(b);<br>  &#125;<br></code></pre></td></tr></table></figure><p>4）findAny</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 返回当前流中任意元素<br>* @return : void<br>*/<br>  @Test<br>  public void findAny()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  Optional&lt;String&gt; any = strings.stream().findAny();<br>  if(any.isPresent()) out.println(any.get());<br>  &#125;<br></code></pre></td></tr></table></figure><p>5）findFirst</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 返回当前流中第一个元素<br>* @return : void<br>*/<br>  @Test<br>  public void findFirst()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  Optional&lt;String&gt; first = strings.stream().findFirst();<br>  if(first.isPresent()) out.println(first.get());<br>  &#125;<br></code></pre></td></tr></table></figure><p>6）forEach java</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 遍历流<br>* @return : void<br>*/<br>  @Test<br>  public void foreach()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  strings.stream().forEach(s -&gt; out.println(s));<br>  &#125;<br></code></pre></td></tr></table></figure><p>7）collect</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 流转换为其他形式<br>* @return : void<br>*/<br>  @Test<br>  public void collect()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  Set&lt;String&gt; set = strings.stream().collect(Collectors.toSet());<br>  List&lt;String&gt; list = strings.stream().collect(Collectors.toList());<br>  Map&lt;String, String&gt; map = strings.stream().collect(Collectors.toMap(v -&gt;v.concat(&quot;_name&quot;), v1 -&gt; v1, (v1, v2) -&gt; v1));<br>  out.println(set);<br>  out.println(list);<br>  out.println(map);<br>  &#125;<br></code></pre></td></tr></table></figure><p>8）reduce</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs angular2html">/**<br>* 功能描述 : 将流中元素反复结合起来，得到一个值<br>* @return : void<br>*/<br>  @Test<br>  public void reduce()&#123;<br>  List&lt;String&gt; strings = Arrays.asList(&quot;cv&quot;, &quot;abd&quot;, &quot;aba&quot;, &quot;efg&quot;, &quot;abcd&quot;,&quot;jkl&quot;, &quot;jkl&quot;);<br>  //reduce方法一<br>  Optional&lt;String&gt; reduce1 = strings.stream().reduce((acc,item) -&gt; &#123;return acc+item;&#125;);<br>  //reduce方法二<br>  String reduce2 = strings.stream().reduce(&quot;itcast&quot;, (acc, item) -&gt; &#123;<br>  return acc + item;<br>  &#125;);<br>  //reduce方法三<br>  ArrayList&lt;String&gt; reduce3 = strings.stream().reduce(<br>  new ArrayList&lt;String&gt;(),<br>  new BiFunction&lt;ArrayList&lt;String&gt;, String, ArrayList&lt;String&gt;&gt;() &#123;<br>  @Override<br>  public ArrayList&lt;String&gt; apply(ArrayList&lt;String&gt; acc, String item) &#123;<br>  acc.add(item);<br>  return acc;<br>  &#125;<br>  &#125;,<br>  new BinaryOperator&lt;ArrayList&lt;String&gt;&gt;() &#123;<br>  @Override<br>  public ArrayList&lt;String&gt; apply(ArrayList&lt;String&gt; acc, ArrayList&lt;String&gt; item) &#123;<br>  return acc;<br>  &#125;<br>  &#125;<br>  );<br>  if(reduce1.isPresent())out.println(reduce1.get());<br>  out.println(reduce2);<br>  out.println(reduce3);<br>  &#125;<br></code></pre></td></tr></table></figure><p>9）count</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 功能描述 : 返回流中元素总数</span><br><span class="hljs-comment">* @return : void</span><br><span class="hljs-comment">*/</span><br>  @Test<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-keyword">count</span>()&#123;<br>  List&lt;String&gt; strings = Arrays.<span class="hljs-keyword">asList</span>(<span class="hljs-string">&quot;cv&quot;</span>, <span class="hljs-string">&quot;abd&quot;</span>, <span class="hljs-string">&quot;aba&quot;</span>, <span class="hljs-string">&quot;efg&quot;</span>, <span class="hljs-string">&quot;abcd&quot;</span>,<span class="hljs-string">&quot;jkl&quot;</span>, <span class="hljs-string">&quot;jkl&quot;</span>);<br>  <span class="hljs-keyword">long</span> <span class="hljs-keyword">count</span> = strings.stream().<span class="hljs-keyword">count</span>();<br>  out.<span class="hljs-keyword">println</span>(<span class="hljs-keyword">count</span>);<br>  &#125;<br></code></pre></td></tr></table></figure><p>注意：文章中因排序部分用到外部比较器，需要导入外部jar包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--apache集合操作工具包--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.commons<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-collections4<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h1 id="https-www-cnblogs-com-shoshana-kong-p-14406683-html"><a href="#https-www-cnblogs-com-shoshana-kong-p-14406683-html" class="headerlink" title="https://www.cnblogs.com/shoshana-kong/p/14406683.html"></a><a href="https://www.cnblogs.com/shoshana-kong/p/14406683.html">https://www.cnblogs.com/shoshana-kong/p/14406683.html</a></h1><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java8新特性</tag>
      
      <tag>Stream流代替for循环</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IO流、序列化、反序列化</title>
    <link href="/2022/10/21/IO%E6%B5%81%E3%80%81%E5%BA%8F%E5%88%97%E5%8C%96%E3%80%81%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    <url>/2022/10/21/IO%E6%B5%81%E3%80%81%E5%BA%8F%E5%88%97%E5%8C%96%E3%80%81%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="IOStream"><a href="#IOStream" class="headerlink" title="IOStream"></a>IOStream</h1><p>1.字节流（操作字节）</p><p>字节流的抽象父类</p><p>InputStream</p><p>OutputStream</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">ByteCopy<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;jietu.png&quot;</span>);<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;copy.png&quot;</span>);<br><br>        <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<span class="hljs-comment">//“容器”</span><br>        <span class="hljs-type">int</span> len;<br>        <span class="hljs-keyword">while</span> ((len=fis.read(bytes))!=-<span class="hljs-number">1</span>)&#123;<br>            fos.write(bytes,<span class="hljs-number">0</span>,len);<br>        &#125;<br>        fos.close();<br>        fis.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>BufferedInputStream类</p><p>BufferedOutputStream类</p><p>BufferedInputStream内置了一个缓冲区（数组）</p><p>从BufferedInputStream中读取一个字节时BufferedInputStream会一次性从文件中读取8192个，存在缓冲区中，每次返回给程序一个</p><p>程序再次读取时，就不用找文件了，直接从缓冲区中获取，知道缓冲区中所有的都被使用过，才重新从文件中读取8192个。</p><p>BufferedOutputStream也内置了一个缓冲区（数组）</p><p>程序向流中写出字节时，不会直接写到文件，先写到缓冲区中，知道缓冲区写满，BufferedOutputStream才会吧缓冲区中的数据一次</p><p>性写到文件里。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">BufferCopy<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test5</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>    <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;jietu.png&quot;</span>);<br>    <span class="hljs-type">BufferedInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedInputStream</span>(fis);<br>    <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;copy.png&quot;</span>);<br>    <span class="hljs-type">BufferedOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedOutputStream</span>(fos);<br>    <br>    <span class="hljs-type">int</span> b;<br>    <span class="hljs-keyword">while</span> ((b = bis.read()) != -<span class="hljs-number">1</span>) &#123;<br>        bos.write(b);<br>    &#125;<br><br>    bis.close();<span class="hljs-comment">//close方法具备刷新的功能，在关闭之前们就会先刷新一次缓冲区，将缓冲区的字节全部都刷新到文件上，再关闭</span><br>    bos.close();<br>&#125;<br></code></pre></td></tr></table></figure><p>字节流读取中文时是可能有问题的，因为有时可能会读到半个中文造成乱码。</p><p>输入输出的标准代码</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test4</span>()</span>&#123;<br>    FileInputStream fis;<br>    FileOutputStream fos;<br>    <span class="hljs-keyword">try</span> &#123;<br>        fis = <span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">&quot;jietu.png&quot;</span>);<br>        fos = <span class="hljs-keyword">new</span> FileOutputStream(<span class="hljs-string">&quot;copy.png&quot;</span>);<br>        <span class="hljs-built_in">int</span> b;<br>        <span class="hljs-keyword">while</span> ((b = fis.read()) != <span class="hljs-number">-1</span>) &#123;<br>            fos.write(b);<br>        &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>        e.printStackTrace();<br>    &#125;<span class="hljs-keyword">finally</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span>(bis != <span class="hljs-literal">null</span>)<br>            fis.close();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                fos.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>2.字符流（操作字符）</p><p>字符流的抽象父类</p><p>Reader类</p><p>Writer类</p><p>DateInputStream类</p><p>DateOutputStream类</p><p>4.IO程序书写</p><p>使用前，导入IO包中的类</p><p>使用时，进行IO异常处理</p><p>使用后，释放资源</p><h1 id="Serializable（json、ProtoBuf）"><a href="#Serializable（json、ProtoBuf）" class="headerlink" title="Serializable（json、ProtoBuf）"></a>Serializable（json、ProtoBuf）</h1><p>(Java序列化就是指把Java对象转换为字节序列的过程</p><p>Java反序列化就是指把字节序列恢复为Java对象的过程。</p><p>序列化最重要的作用：在传递和保存对象时.保证对象的完整性和可传递性。对象转换为有序字节流,以便在网络上传输或者保存在本地文件中。</p><p>反序列化的最重要的作用：根据字节流中保存的对象状态及描述信息，通过反序列化重建对象。</p><p>总结：核心作用就是对象状态的保存和重建。（整个过程核心点就是字节流中所保存的对象状态及描述信息）</p><p>实体类序列化</p><p>对象序列化：ObjectOutputStream类</p><p>对象反序列化：ObjectInputStream类</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/2/28 11:29</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final long serialVersionUID = -<span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title class_">Name</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title class_">Age</span>;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Name</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-title class_">Name</span> = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getAge</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Age</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setAge</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> age</span>) &#123;<br>        <span class="hljs-title class_">Age</span> = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Student</span>(<span class="hljs-title class_">String</span> name, <span class="hljs-title class_">String</span> age) &#123;<br>        <span class="hljs-title class_">Name</span> = name;<br>        <span class="hljs-title class_">Age</span> = age;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@description</span>:序列化和反序列化</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>: Kblayt</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@time</span>: 2022/2/28 11:32</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SerializableTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        <span class="hljs-comment">//序列化</span><br>        FileOutputStream fos;<br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;object.out&quot;</span>);<br>            oos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(fos);<br>            s1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;lhg&quot;</span>,<span class="hljs-string">&quot;18&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                oos.writeObject(s1);<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">try</span> &#123;<br>                oos.flush();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>            <span class="hljs-keyword">try</span> &#123;<br>                oos.close();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">//反序列化</span><br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;object.out&quot;</span>);<br>            ois = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(fis);<br>            <span class="hljs-type">Student</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> (Student) ois.readObject();<br>            System.out.println(s2.getName()+<span class="hljs-string">&quot;&quot;</span>+s2.getAge());<br>        &#125; <span class="hljs-keyword">catch</span> (IOException | ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            ois.close();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Java基础</category>
      
    </categories>
    
    
    <tags>
      
      <tag>IO流</tag>
      
      <tag>序列化</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/10/18/hello-world/"/>
    <url>/2022/10/18/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p><script type="text&#x2F;javascript" src="https://unpkg.com/kity@2.0.4/dist/kity.min.js"></script><script type="text&#x2F;javascript" src="https://unpkg.com/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text&#x2F;javascript" src="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text&#x2F;css" href="https://unpkg.com/hexo-simple-mindmap@0.8.0/dist/mindmap.min.css">]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
